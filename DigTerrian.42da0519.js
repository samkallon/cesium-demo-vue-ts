import{D as Ul}from"./draw.a0edba2a.js";import{k as Xl,m as Aa,d as Yl,u as Hl,l as Wl,_ as $l,r as Qo,o as Zl,c as Jl,a as Sr,w as Lr,n as Kl,q as jl,v as Ql,e as Fa,b as ta}from"./index.78dd451b.js";var cn={exports:{}},rt={};function zn(o,l){return{type:"Feature",properties:l||{},geometry:o}}rt.feature=zn;rt.point=function(o,l){if(!Array.isArray(o))throw new Error("Coordinates must be an array");if(o.length<2)throw new Error("Coordinates must be at least 2 numbers long");return zn({type:"Point",coordinates:o.slice()},l)};rt.polygon=function(o,l){if(!o)throw new Error("No coordinates passed");for(var h=0;h<o.length;h++){var u=o[h];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var g=0;g<u[u.length-1].length;g++)if(u[u.length-1][g]!==u[0][g])throw new Error("First and last Position are not equivalent.")}return zn({type:"Polygon",coordinates:o},l)};rt.lineString=function(o,l){if(!o)throw new Error("No coordinates passed");return zn({type:"LineString",coordinates:o},l)};rt.featureCollection=function(o){return{type:"FeatureCollection",features:o}};rt.multiLineString=function(o,l){if(!o)throw new Error("No coordinates passed");return zn({type:"MultiLineString",coordinates:o},l)};rt.multiPoint=function(o,l){if(!o)throw new Error("No coordinates passed");return zn({type:"MultiPoint",coordinates:o},l)};rt.multiPolygon=function(o,l){if(!o)throw new Error("No coordinates passed");return zn({type:"MultiPolygon",coordinates:o},l)};rt.geometryCollection=function(o,l){return zn({type:"GeometryCollection",geometries:o},l)};var ma={miles:3960,nauticalmiles:3441.145,degrees:57.2957795,radians:1,inches:250905600,yards:6969600,meters:6373e3,metres:6373e3,kilometers:6373,kilometres:6373};rt.radiansToDistance=function(o,l){var h=ma[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return o*h};rt.distanceToRadians=function(o,l){var h=ma[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return o/h};rt.distanceToDegrees=function(o,l){var h=ma[l||"kilometers"];if(h===void 0)throw new Error("Invalid unit");return o/h*57.2958};var th=rt.polygon,eh=rt.featureCollection,va=function(o,l){return eh(rh(o.features.map(function(h){var u={x:h.geometry.coordinates[0],y:h.geometry.coordinates[1]};return l&&(u.z=h.properties[l]),u})).map(function(h){return th([[[h.a.x,h.a.y],[h.b.x,h.b.y],[h.c.x,h.c.y],[h.a.x,h.a.y]]],{a:h.a.z,b:h.b.z,c:h.c.z})}))};function Ga(o,l,h){this.a=o,this.b=l,this.c=h;var u=l.x-o.x,g=l.y-o.y,d=h.x-o.x,p=h.y-o.y,m=u*(o.x+l.x)+g*(o.y+l.y),E=d*(o.x+h.x)+p*(o.y+h.y),x=2*(u*(h.y-l.y)-g*(h.x-l.x)),N,C,S,b;Math.abs(x)<1e-6?(N=Math.min(o.x,l.x,h.x),C=Math.min(o.y,l.y,h.y),S=(Math.max(o.x,l.x,h.x)-N)*.5,b=(Math.max(o.y,l.y,h.y)-C)*.5,this.x=N+S,this.y=C+b,this.r=S*S+b*b):(this.x=(p*m-g*E)/x,this.y=(u*E-d*m)/x,S=this.x-o.x,b=this.y-o.y,this.r=S*S+b*b)}function nh(o,l){return l.x-o.x}function ih(o){var l=o.length,h,u,g,d,p;t:for(;l;)for(u=o[--l],h=o[--l],g=l;g;)if(p=o[--g],d=o[--g],h===d&&u===p||h===p&&u===d){o.splice(l,2),o.splice(g,2),l-=2;continue t}}function rh(o){if(o.length<3)return[];o.sort(nh);for(var l=o.length-1,h=o[l].x,u=o[0].x,g=o[l].y,d=g;l--;)o[l].y<g&&(g=o[l].y),o[l].y>d&&(d=o[l].y);var p=u-h,m=d-g,E=p>m?p:m,x=(u+h)*.5,N=(d+g)*.5,C=[new Ga({x:x-20*E,y:N-E,__sentinel:!0},{x,y:N+20*E,__sentinel:!0},{x:x+20*E,y:N-E,__sentinel:!0})],S=[],b=[],T,I,Y;for(l=o.length;l--;){for(b.length=0,T=C.length;T--;){if(p=o[l].x-C[T].x,p>0&&p*p>C[T].r){S.push(C[T]),C.splice(T,1);continue}m=o[l].y-C[T].y,!(p*p+m*m>C[T].r)&&(b.push(C[T].a,C[T].b,C[T].b,C[T].c,C[T].c,C[T].a),C.splice(T,1))}for(ih(b),T=b.length;T;)Y=b[--T],I=b[--T],C.push(new Ga(I,Y,o[l]))}for(Array.prototype.push.apply(S,C),l=S.length;l--;)(S[l].a.__sentinel||S[l].b.__sentinel||S[l].c.__sentinel)&&S.splice(l,1);return S}var Vn={};function sh(o){if(Array.isArray(o)&&typeof o[0]=="number"&&typeof o[1]=="number")return o;if(o){if(o.type==="Feature"&&o.geometry&&o.geometry.type==="Point"&&Array.isArray(o.geometry.coordinates))return o.geometry.coordinates;if(o.type==="Point"&&Array.isArray(o.coordinates))return o.coordinates}throw new Error("A coordinate, feature, or point geometry is required")}function oh(o,l,h){if(!l||!h)throw new Error("type and name required");if(!o||o.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+o.type)}function ah(o,l,h){if(!h)throw new Error(".featureOf() requires a name");if(!o||o.type!=="Feature"||!o.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!o.geometry||o.geometry.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+o.geometry.type)}function uh(o,l,h){if(!h)throw new Error(".collectionOf() requires a name");if(!o||o.type!=="FeatureCollection")throw new Error("Invalid input to "+h+", FeatureCollection required");for(var u=0;u<o.features.length;u++){var g=o.features[u];if(!g||g.type!=="Feature"||!g.geometry)throw new Error("Invalid input to "+h+", Feature with geometry required");if(!g.geometry||g.geometry.type!==l)throw new Error("Invalid input to "+h+": must be a "+l+", given "+g.geometry.type)}}Vn.geojsonType=oh;Vn.collectionOf=uh;Vn.featureOf=ah;Vn.getCoord=sh;var lh=Vn,bi=function(l,h){var u=lh.getCoord(l),g=h.geometry.coordinates;h.geometry.type==="Polygon"&&(g=[g]);for(var d=0,p=!1;d<g.length&&!p;d++)if(qa(u,g[d][0])){for(var m=!1,E=1;E<g[d].length&&!m;)qa(u,g[d][E])&&(m=!0),E++;m||(p=!0)}return p};function qa(o,l){for(var h=!1,u=0,g=l.length-1;u<l.length;g=u++){var d=l[u][0],p=l[u][1],m=l[g][0],E=l[g][1],x=p>o[1]!=E>o[1]&&o[0]<(m-d)*(o[1]-p)/(E-p)+d;x&&(h=!h)}return h}var hh=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"},ch=function(o,l){if(!hh(o))throw new Error("Coordinates must be an array");if(o.length<2)throw new Error("Coordinates must be at least 2 numbers long");return{type:"Feature",geometry:{type:"Point",coordinates:o},properties:l||{}}},gh=ch,fh=function(o,l){var h=o[0],u=o[1],g=o[2];o[3];for(var d=(g-h)/l,p={type:"FeatureCollection",features:[]},m=0;m<=l;m++)for(var E=0;E<=l;E++)p.features.push(gh([m*d+h,E*d+u]));return p},Ge={};function ya(o,l,h){var u,g,d,p,m,E,x,N,C,S=0,b,T=o.type==="FeatureCollection",I=o.type==="Feature",Y=T?o.features.length:1;for(u=0;u<Y;u++)for(C=T?o.features[u].geometry:I?o.geometry:o,b=C.type==="GeometryCollection",x=b?C.geometries.length:1,p=0;p<x;p++)if(E=b?C.geometries[p]:C,N=E.coordinates,S=h&&(E.type==="Polygon"||E.type==="MultiPolygon")?1:0,E.type==="Point")l(N);else if(E.type==="LineString"||E.type==="MultiPoint")for(g=0;g<N.length;g++)l(N[g]);else if(E.type==="Polygon"||E.type==="MultiLineString")for(g=0;g<N.length;g++)for(d=0;d<N[g].length-S;d++)l(N[g][d]);else if(E.type==="MultiPolygon")for(g=0;g<N.length;g++)for(d=0;d<N[g].length;d++)for(m=0;m<N[g][d].length-S;m++)l(N[g][d][m]);else throw new Error("Unknown Geometry Type")}Ge.coordEach=ya;function dh(o,l,h,u){return ya(o,function(g){h=l(h,g)},u),h}Ge.coordReduce=dh;function xu(o,l){var h;switch(o.type){case"FeatureCollection":for(h=0;h<o.features.length;h++)l(o.features[h].properties);break;case"Feature":l(o.properties);break}}Ge.propEach=xu;function ph(o,l,h){return xu(o,function(u){h=l(h,u)}),h}Ge.propReduce=ph;function mh(o,l){if(o.type==="Feature")l(o);else if(o.type==="FeatureCollection")for(var h=0;h<o.features.length;h++)l(o.features[h])}Ge.featureEach=mh;function vh(o){var l=[];return ya(o,function(h){l.push(h)}),l}Ge.coordAll=vh;var yh=Ge.coordEach,to=function(o){var l=[1/0,1/0,-1/0,-1/0];return yh(o,function(h){l[0]>h[0]&&(l[0]=h[0]),l[1]>h[1]&&(l[1]=h[1]),l[2]<h[0]&&(l[2]=h[0]),l[3]<h[1]&&(l[3]=h[1])}),l},Eu=function(o,l){var h=o.geometry.coordinates[0],u=o.geometry.coordinates[1],g=l.geometry.coordinates[0][0][0],d=l.geometry.coordinates[0][0][1],p=l.properties.a,m=l.geometry.coordinates[0][1][0],E=l.geometry.coordinates[0][1][1],x=l.properties.b,N=l.geometry.coordinates[0][2][0],C=l.geometry.coordinates[0][2][1],S=l.properties.c,b=(S*(h-g)*(u-E)+p*(h-m)*(u-C)+x*(h-N)*(u-d)-x*(h-g)*(u-C)-S*(h-m)*(u-d)-p*(h-N)*(u-E))/((h-g)*(u-E)+(h-m)*(u-C)+(h-N)*(u-d)-(h-g)*(u-C)-(h-m)*(u-d)-(h-N)*(u-E));return b},Ba=Vn.getCoord,xh=rt.radiansToDistance,Te=function(o,l,h){var u=Math.PI/180,g=Ba(o),d=Ba(l),p=u*(d[1]-g[1]),m=u*(d[0]-g[0]),E=u*g[1],x=u*d[1],N=Math.pow(Math.sin(p/2),2)+Math.pow(Math.sin(m/2),2)*Math.cos(E)*Math.cos(x);return xh(2*Math.atan2(Math.sqrt(N),Math.sqrt(1-N)),h)},za=Te,Iu=function(o){var l=za(o.slice(0,2),[o[2],o[1]],"miles"),h=za(o.slice(0,2),[o[0],o[3]],"miles");if(l>=h){var u=(o[1]+o[3])/2;return[o[0],u-(o[2]-o[0])/2,o[2],u+(o[2]-o[0])/2]}else{var g=(o[0]+o[2])/2;return[g-(o[3]-o[1])/2,o[1],g+(o[3]-o[1])/2,o[3]]}},Eh=Nu,la=1e-10;function Xs(o,l){var h=o.x-l.x,u=o.y-l.y;return h*h+u*u<la}function Va(o){for(var l=o.head;l;){var h=l.next;l.next=l.prev,l.prev=h,l=h}var h=o.head;o.head=o.tail,o.tail=h}function xa(o){this.level=o,this.s=null,this.count=0}xa.prototype.remove_seq=function(o){o.prev?o.prev.next=o.next:this.s=o.next,o.next&&(o.next.prev=o.prev),--this.count};xa.prototype.addSegment=function(o,l){for(var h=this.s,u=null,g=null,d=!1,p=!1;h&&(u==null&&(Xs(o,h.head.p)?(u=h,d=!0):Xs(o,h.tail.p)&&(u=h)),g==null&&(Xs(l,h.head.p)?(g=h,p=!0):Xs(l,h.tail.p)&&(g=h)),!(g!=null&&u!=null));)h=h.next;var m=(u!=null?1:0)|(g!=null?2:0);switch(m){case 0:var E={p:o,prev:null},x={p:l,next:null};E.next=x,x.prev=E,u={head:E,tail:x,next:this.s,prev:null,closed:!1},this.s&&(this.s.prev=u),this.s=u,++this.count;break;case 1:var N={p:l};d?(N.next=u.head,N.prev=null,u.head.prev=N,u.head=N):(N.next=null,N.prev=u.tail,u.tail.next=N,u.tail=N);break;case 2:var N={p:o};p?(N.next=g.head,N.prev=null,g.head.prev=N,g.head=N):(N.next=null,N.prev=g.tail,g.tail.next=N,g.tail=N);break;case 3:if(u===g){var N={p:u.tail.p,next:u.head,prev:null};u.head.prev=N,u.head=N,u.closed=!0;break}switch((d?1:0)|(p?2:0)){case 0:Va(u);case 1:g.tail.next=u.head,u.head.prev=g.tail,g.tail=u.tail,this.remove_seq(u);break;case 3:Va(u);case 2:u.tail.next=g.head,g.head.prev=u.tail,u.tail=g.tail,this.remove_seq(g);break}}};function Nu(o){if(o)this.drawContour=o;else{var l=this;l.contours={},this.drawContour=function(h,u,g,d,p,m){var E=l.contours[m];E||(E=l.contours[m]=new xa(p)),E.addSegment({x:h,y:u},{x:g,y:d})},this.contourList=function(){var h=[],u=l.contours;for(var g in u)for(var d=u[g].s,p=u[g].level;d;){var m=d.head,E=[];for(E.level=p,E.k=g;m&&m.p;)E.push(m.p),m=m.next;h.push(E),d=d.next}return h.sort(function(x,N){return x.k-N.k}),h}}this.h=new Array(5),this.sh=new Array(5),this.xh=new Array(5),this.yh=new Array(5)}Nu.prototype.contour=function(o,l,h,u,g,d,p,m,E){var x=this.h,N=this.sh,C=this.xh,S=this.yh,b=this.drawContour;this.contours={};for(var T=function(Lt,at){return(x[at]*C[Lt]-x[Lt]*C[at])/(x[at]-x[Lt])},I=function(Lt,at){return(x[at]*S[Lt]-x[Lt]*S[at])/(x[at]-x[Lt])},Y,W,X,R,w,F,Z=0,P=0,A=0,O=0,z=[0,1,1,0],G=[0,0,1,1],v=[[[0,0,8],[0,2,5],[7,6,9]],[[0,3,4],[1,3,1],[4,3,0]],[[9,6,7],[5,2,0],[8,0,0]]],U=g-1;U>=u;U--)for(var st=l;st<=h-1;st++){var Ct,Tt;if(Ct=Math.min(o[st][U],o[st][U+1]),Tt=Math.min(o[st+1][U],o[st+1][U+1]),w=Math.min(Ct,Tt),Ct=Math.max(o[st][U],o[st][U+1]),Tt=Math.max(o[st+1][U],o[st+1][U+1]),F=Math.max(Ct,Tt),F>=E[0]&&w<=E[m-1]){for(var qt=0;qt<m;qt++)if(E[qt]>=w&&E[qt]<=F){for(var _=4;_>=0;_--)_>0?(x[_]=o[st+z[_-1]][U+G[_-1]]-E[qt],C[_]=d[st+z[_-1]],S[_]=p[U+G[_-1]]):(x[0]=.25*(x[1]+x[2]+x[3]+x[4]),C[0]=.5*(d[st]+d[st+1]),S[0]=.5*(p[U]+p[U+1])),x[_]>la?N[_]=1:x[_]<-la?N[_]=-1:N[_]=0;for(_=1;_<=4;_++)if(Y=_,W=0,_!=4?X=_+1:X=1,R=v[N[Y]+1][N[W]+1][N[X]+1],R!=0){switch(R){case 1:Z=C[Y],A=S[Y],P=C[W],O=S[W];break;case 2:Z=C[W],A=S[W],P=C[X],O=S[X];break;case 3:Z=C[X],A=S[X],P=C[Y],O=S[Y];break;case 4:Z=C[Y],A=S[Y],P=T(W,X),O=I(W,X);break;case 5:Z=C[W],A=S[W],P=T(X,Y),O=I(X,Y);break;case 6:Z=C[X],A=S[X],P=T(Y,W),O=I(Y,W);break;case 7:Z=T(Y,W),A=I(Y,W),P=T(W,X),O=I(W,X);break;case 8:Z=T(W,X),A=I(W,X),P=T(X,Y),O=I(X,Y);break;case 9:Z=T(X,Y),A=I(X,Y),P=T(Y,W),O=I(Y,W);break}b(Z,A,P,O,E[qt],qt)}}}}};var Ih=va,Nh=bi,Ch=fh,wh=to,Sh=Eu,Lh=rt.featureCollection,Rh=rt.lineString,Th=Iu,Ph=Eh,Oh=function(o,l,h,u){for(var g=Ih(o,l),d=wh(o),p=Th(d),m=Ch(p,h),E=[],x=0;x<m.features.length;x++)for(var N=m.features[x],C=0;C<g.features.length;C++){var S=g.features[C];Nh(N,S)&&(N.properties={},N.properties[l]=Sh(N,S))}for(var b=Math.sqrt(m.features.length),T=0;T<b;T++){for(var I=m.features.slice(T*b,(T+1)*b),Y=[],W=0;W<I.length;W++)I[W].properties?Y.push(I[W].properties[l]):Y.push(0);E.push(Y)}for(var X=(p[2]-p[0])/b,R=[],w=[],F=0;F<b;F++)R.push(F*X+p[0]),w.push(F*X+p[1]);var Z=new Ph;Z.contour(E,0,h,0,h,R,w,u.length,u);var P=Z.contourList(),A=Lh([]);return P.forEach(function(O){if(O.length>2){var z=[];O.forEach(function(v){z.push([v.x,v.y])});var G=Rh(z);G.properties={},G.properties[l]=O.level,A.features.push(G)}}),A},Mh=_h;function _h(o){for(var l=0,h=0,u=1;u<o.length;++u)o[u][0]<o[l][0]&&(l=u),o[u][0]>o[h][0]&&(h=u);return l<h?[[l],[h]]:l>h?[[h],[l]]:[[l]]}var eo={exports:{}},Cu=bh,ka=+(Math.pow(2,27)+1);function bh(o,l,h){var u=o*l,g=ka*o,d=g-o,p=g-d,m=o-p,E=ka*l,x=E-l,N=E-x,C=l-N,S=u-p*N,b=S-m*N,T=b-p*C,I=m*C-T;return h?(h[0]=I,h[1]=u,h):[I,u]}var Dh=Fh;function Ah(o,l){var h=o+l,u=h-o,g=h-u,d=l-u,p=o-g,m=p+d;return m?[m,h]:[h]}function Fh(o,l){var h=o.length|0,u=l.length|0;if(h===1&&u===1)return Ah(o[0],l[0]);var g=h+u,d=new Array(g),p=0,m=0,E=0,x=Math.abs,N=o[m],C=x(N),S=l[E],b=x(S),T,I;C<b?(I=N,m+=1,m<h&&(N=o[m],C=x(N))):(I=S,E+=1,E<u&&(S=l[E],b=x(S))),m<h&&C<b||E>=u?(T=N,m+=1,m<h&&(N=o[m],C=x(N))):(T=S,E+=1,E<u&&(S=l[E],b=x(S)));for(var Y=T+I,W=Y-T,X=I-W,R=X,w=Y,F,Z,P,A,O;m<h&&E<u;)C<b?(T=N,m+=1,m<h&&(N=o[m],C=x(N))):(T=S,E+=1,E<u&&(S=l[E],b=x(S))),I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F;for(;m<h;)T=N,I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F,m+=1,m<h&&(N=o[m]);for(;E<u;)T=S,I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F,E+=1,E<u&&(S=l[E]);return R&&(d[p++]=R),w&&(d[p++]=w),p||(d[p++]=0),d.length=p,d}var Gh=qh;function qh(o,l,h){var u=o+l,g=u-o,d=u-g,p=l-g,m=o-d;return h?(h[0]=m+p,h[1]=u,h):[m+p,u]}var ea=Cu,Bh=Gh,zh=Vh;function Vh(o,l){var h=o.length;if(h===1){var u=ea(o[0],l);return u[0]?u:[u[1]]}var g=new Array(2*h),d=[.1,.1],p=[.1,.1],m=0;ea(o[0],l,d),d[0]&&(g[m++]=d[0]);for(var E=1;E<h;++E){ea(o[E],l,p);var x=d[1];Bh(x,p[0],d),d[0]&&(g[m++]=d[0]);var N=p[1],C=d[1],S=N+C,b=S-N,T=C-b;d[1]=S,T&&(g[m++]=T)}return d[1]&&(g[m++]=d[1]),m===0&&(g[m++]=0),g.length=m,g}var kh=Xh;function Uh(o,l){var h=o+l,u=h-o,g=h-u,d=l-u,p=o-g,m=p+d;return m?[m,h]:[h]}function Xh(o,l){var h=o.length|0,u=l.length|0;if(h===1&&u===1)return Uh(o[0],-l[0]);var g=h+u,d=new Array(g),p=0,m=0,E=0,x=Math.abs,N=o[m],C=x(N),S=-l[E],b=x(S),T,I;C<b?(I=N,m+=1,m<h&&(N=o[m],C=x(N))):(I=S,E+=1,E<u&&(S=-l[E],b=x(S))),m<h&&C<b||E>=u?(T=N,m+=1,m<h&&(N=o[m],C=x(N))):(T=S,E+=1,E<u&&(S=-l[E],b=x(S)));for(var Y=T+I,W=Y-T,X=I-W,R=X,w=Y,F,Z,P,A,O;m<h&&E<u;)C<b?(T=N,m+=1,m<h&&(N=o[m],C=x(N))):(T=S,E+=1,E<u&&(S=-l[E],b=x(S))),I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F;for(;m<h;)T=N,I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F,m+=1,m<h&&(N=o[m]);for(;E<u;)T=S,I=R,Y=T+I,W=Y-T,X=I-W,X&&(d[p++]=X),F=w+Y,Z=F-w,P=F-Z,A=Y-Z,O=w-P,R=O+A,w=F,E+=1,E<u&&(S=-l[E]);return R&&(d[p++]=R),w&&(d[p++]=w),p||(d[p++]=0),d.length=p,d}(function(o){var l=Cu,h=Dh,u=zh,g=kh,d=5,p=11102230246251565e-32,m=(3+16*p)*p,E=(7+56*p)*p;function x(R,w,F,Z){return function(A,O,z){var G=R(R(w(O[1],z[0]),w(-z[1],O[0])),R(w(A[1],O[0]),w(-O[1],A[0]))),v=R(w(A[1],z[0]),w(-z[1],A[0])),U=Z(G,v);return U[U.length-1]}}function N(R,w,F,Z){return function(A,O,z,G){var v=R(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),O[2]),R(F(R(w(O[1],G[0]),w(-G[1],O[0])),-z[2]),F(R(w(O[1],z[0]),w(-z[1],O[0])),G[2]))),R(F(R(w(O[1],G[0]),w(-G[1],O[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),G[2])))),U=R(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-z[2]),F(R(w(A[1],z[0]),w(-z[1],A[0])),G[2]))),R(F(R(w(O[1],z[0]),w(-z[1],O[0])),A[2]),R(F(R(w(A[1],z[0]),w(-z[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),z[2])))),st=Z(v,U);return st[st.length-1]}}function C(R,w,F,Z){return function(A,O,z,G,v){var U=R(R(R(F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),z[2]),R(F(R(w(z[1],v[0]),w(-v[1],z[0])),-G[2]),F(R(w(z[1],G[0]),w(-G[1],z[0])),v[2]))),O[3]),R(F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),O[2]),R(F(R(w(O[1],v[0]),w(-v[1],O[0])),-G[2]),F(R(w(O[1],G[0]),w(-G[1],O[0])),v[2]))),-z[3]),F(R(F(R(w(z[1],v[0]),w(-v[1],z[0])),O[2]),R(F(R(w(O[1],v[0]),w(-v[1],O[0])),-z[2]),F(R(w(O[1],z[0]),w(-z[1],O[0])),v[2]))),G[3]))),R(F(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),O[2]),R(F(R(w(O[1],G[0]),w(-G[1],O[0])),-z[2]),F(R(w(O[1],z[0]),w(-z[1],O[0])),G[2]))),-v[3]),R(F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),O[2]),R(F(R(w(O[1],v[0]),w(-v[1],O[0])),-G[2]),F(R(w(O[1],G[0]),w(-G[1],O[0])),v[2]))),A[3]),F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-G[2]),F(R(w(A[1],G[0]),w(-G[1],A[0])),v[2]))),-O[3])))),R(R(F(R(F(R(w(O[1],v[0]),w(-v[1],O[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),v[2]))),G[3]),R(F(R(F(R(w(O[1],G[0]),w(-G[1],O[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),G[2]))),-v[3]),F(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),O[2]),R(F(R(w(O[1],G[0]),w(-G[1],O[0])),-z[2]),F(R(w(O[1],z[0]),w(-z[1],O[0])),G[2]))),A[3]))),R(F(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-z[2]),F(R(w(A[1],z[0]),w(-z[1],A[0])),G[2]))),-O[3]),R(F(R(F(R(w(O[1],G[0]),w(-G[1],O[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),G[2]))),z[3]),F(R(F(R(w(O[1],z[0]),w(-z[1],O[0])),A[2]),R(F(R(w(A[1],z[0]),w(-z[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),z[2]))),-G[3]))))),st=R(R(R(F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),z[2]),R(F(R(w(z[1],v[0]),w(-v[1],z[0])),-G[2]),F(R(w(z[1],G[0]),w(-G[1],z[0])),v[2]))),A[3]),F(R(F(R(w(G[1],v[0]),w(-v[1],G[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-G[2]),F(R(w(A[1],G[0]),w(-G[1],A[0])),v[2]))),-z[3])),R(F(R(F(R(w(z[1],v[0]),w(-v[1],z[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-z[2]),F(R(w(A[1],z[0]),w(-z[1],A[0])),v[2]))),G[3]),F(R(F(R(w(z[1],G[0]),w(-G[1],z[0])),A[2]),R(F(R(w(A[1],G[0]),w(-G[1],A[0])),-z[2]),F(R(w(A[1],z[0]),w(-z[1],A[0])),G[2]))),-v[3]))),R(R(F(R(F(R(w(z[1],v[0]),w(-v[1],z[0])),O[2]),R(F(R(w(O[1],v[0]),w(-v[1],O[0])),-z[2]),F(R(w(O[1],z[0]),w(-z[1],O[0])),v[2]))),A[3]),F(R(F(R(w(z[1],v[0]),w(-v[1],z[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-z[2]),F(R(w(A[1],z[0]),w(-z[1],A[0])),v[2]))),-O[3])),R(F(R(F(R(w(O[1],v[0]),w(-v[1],O[0])),A[2]),R(F(R(w(A[1],v[0]),w(-v[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),v[2]))),z[3]),F(R(F(R(w(O[1],z[0]),w(-z[1],O[0])),A[2]),R(F(R(w(A[1],z[0]),w(-z[1],A[0])),-O[2]),F(R(w(A[1],O[0]),w(-O[1],A[0])),z[2]))),-v[3])))),Ct=Z(U,st);return Ct[Ct.length-1]}}function S(R){var w=R===3?x:R===4?N:C;return w(h,l,u,g)}var b=S(3),T=S(4),I=[function(){return 0},function(){return 0},function(w,F){return F[0]-w[0]},function(w,F,Z){var P=(w[1]-Z[1])*(F[0]-Z[0]),A=(w[0]-Z[0])*(F[1]-Z[1]),O=P-A,z;if(P>0){if(A<=0)return O;z=P+A}else if(P<0){if(A>=0)return O;z=-(P+A)}else return O;var G=m*z;return O>=G||O<=-G?O:b(w,F,Z)},function(w,F,Z,P){var A=w[0]-P[0],O=F[0]-P[0],z=Z[0]-P[0],G=w[1]-P[1],v=F[1]-P[1],U=Z[1]-P[1],st=w[2]-P[2],Ct=F[2]-P[2],Tt=Z[2]-P[2],qt=O*U,_=z*v,Lt=z*G,at=A*U,mt=A*v,Ht=O*G,En=st*(qt-_)+Ct*(Lt-at)+Tt*(mt-Ht),ge=(Math.abs(qt)+Math.abs(_))*Math.abs(st)+(Math.abs(Lt)+Math.abs(at))*Math.abs(Ct)+(Math.abs(mt)+Math.abs(Ht))*Math.abs(Tt),H=E*ge;return En>H||-En>H?En:T(w,F,Z,P)}];function Y(R){var w=I[R.length];return w||(w=I[R.length]=S(R.length)),w.apply(void 0,R)}function W(R,w,F,Z,P,A,O){return function(G,v,U,st,Ct){switch(arguments.length){case 0:case 1:return 0;case 2:return Z(G,v);case 3:return P(G,v,U);case 4:return A(G,v,U,st);case 5:return O(G,v,U,st,Ct)}for(var Tt=new Array(arguments.length),qt=0;qt<arguments.length;++qt)Tt[qt]=arguments[qt];return R(Tt)}}function X(){for(;I.length<=d;)I.push(S(I.length));o.exports=W.apply(void 0,[Y].concat(I));for(var R=0;R<=d;++R)o.exports[R]=I[R]}X()})(eo);var Yh=Hh,Ua=eo.exports[3];function Hh(o){var l=o.length;if(l<3){for(var x=new Array(l),h=0;h<l;++h)x[h]=h;return l===2&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:x}for(var u=new Array(l),h=0;h<l;++h)u[h]=h;u.sort(function(b,T){var I=o[b][0]-o[T][0];return I||o[b][1]-o[T][1]});for(var g=[u[0],u[1]],d=[u[0],u[1]],h=2;h<l;++h){for(var p=u[h],m=o[p],E=g.length;E>1&&Ua(o[g[E-2]],o[g[E-1]],m)<=0;)E-=1,g.pop();for(g.push(p),E=d.length;E>1&&Ua(o[d[E-2]],o[d[E-1]],m)>=0;)E-=1,d.pop();d.push(p)}for(var x=new Array(d.length+g.length-2),N=0,h=0,C=g.length;h<C;++h)x[N++]=g[h];for(var S=d.length-2;S>0;--S)x[N++]=d[S];return x}var Wh=Zh,$h=Yh;function Zh(o){var l=$h(o),h=l.length;if(h<=2)return[];for(var u=new Array(h),g=l[h-1],d=0;d<h;++d){var p=l[d];u[d]=[g,p],g=p}return u}var Ie={},Gt={},Ea=32;Gt.INT_BITS=Ea;Gt.INT_MAX=2147483647;Gt.INT_MIN=-1<<Ea-1;Gt.sign=function(o){return(o>0)-(o<0)};Gt.abs=function(o){var l=o>>Ea-1;return(o^l)-l};Gt.min=function(o,l){return l^(o^l)&-(o<l)};Gt.max=function(o,l){return o^(o^l)&-(o<l)};Gt.isPow2=function(o){return!(o&o-1)&&!!o};Gt.log2=function(o){var l,h;return l=(o>65535)<<4,o>>>=l,h=(o>255)<<3,o>>>=h,l|=h,h=(o>15)<<2,o>>>=h,l|=h,h=(o>3)<<1,o>>>=h,l|=h,l|o>>1};Gt.log10=function(o){return o>=1e9?9:o>=1e8?8:o>=1e7?7:o>=1e6?6:o>=1e5?5:o>=1e4?4:o>=1e3?3:o>=100?2:o>=10?1:0};Gt.popCount=function(o){return o=o-(o>>>1&1431655765),o=(o&858993459)+(o>>>2&858993459),(o+(o>>>4)&252645135)*16843009>>>24};function wu(o){var l=32;return o&=-o,o&&l--,o&65535&&(l-=16),o&16711935&&(l-=8),o&252645135&&(l-=4),o&858993459&&(l-=2),o&1431655765&&(l-=1),l}Gt.countTrailingZeros=wu;Gt.nextPow2=function(o){return o+=o===0,--o,o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o+1};Gt.prevPow2=function(o){return o|=o>>>1,o|=o>>>2,o|=o>>>4,o|=o>>>8,o|=o>>>16,o-(o>>>1)};Gt.parity=function(o){return o^=o>>>16,o^=o>>>8,o^=o>>>4,o&=15,27030>>>o&1};var Tr=new Array(256);(function(o){for(var l=0;l<256;++l){var h=l,u=l,g=7;for(h>>>=1;h;h>>>=1)u<<=1,u|=h&1,--g;o[l]=u<<g&255}})(Tr);Gt.reverse=function(o){return Tr[o&255]<<24|Tr[o>>>8&255]<<16|Tr[o>>>16&255]<<8|Tr[o>>>24&255]};Gt.interleave2=function(o,l){return o&=65535,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,l&=65535,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,o|l<<1};Gt.deinterleave2=function(o,l){return o=o>>>l&1431655765,o=(o|o>>>1)&858993459,o=(o|o>>>2)&252645135,o=(o|o>>>4)&16711935,o=(o|o>>>16)&65535,o<<16>>16};Gt.interleave3=function(o,l,h){return o&=1023,o=(o|o<<16)&4278190335,o=(o|o<<8)&251719695,o=(o|o<<4)&3272356035,o=(o|o<<2)&1227133513,l&=1023,l=(l|l<<16)&4278190335,l=(l|l<<8)&251719695,l=(l|l<<4)&3272356035,l=(l|l<<2)&1227133513,o|=l<<1,h&=1023,h=(h|h<<16)&4278190335,h=(h|h<<8)&251719695,h=(h|h<<4)&3272356035,h=(h|h<<2)&1227133513,o|h<<2};Gt.deinterleave3=function(o,l){return o=o>>>l&1227133513,o=(o|o>>>2)&3272356035,o=(o|o>>>4)&251719695,o=(o|o>>>8)&4278190335,o=(o|o>>>16)&1023,o<<22>>22};Gt.nextCombination=function(o){var l=o|o-1;return l+1|(~l&-~l)-1>>>wu(o)+1};var Jh=Su;function Su(o){this.roots=new Array(o),this.ranks=new Array(o);for(var l=0;l<o;++l)this.roots[l]=l,this.ranks[l]=0}var no=Su.prototype;Object.defineProperty(no,"length",{get:function(){return this.roots.length}});no.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o};no.find=function(o){for(var l=o,h=this.roots;h[o]!==o;)o=h[o];for(;h[l]!==o;){var u=h[l];h[l]=o,l=u}return o};no.link=function(o,l){var h=this.find(o),u=this.find(l);if(h!==u){var g=this.ranks,d=this.roots,p=g[h],m=g[u];p<m?d[h]=u:m<p?d[u]=h:(d[u]=h,++g[h])}};var Lu=Gt,Ru=Jh;function Kh(o){for(var l=0,h=Math.max,u=0,g=o.length;u<g;++u)l=h(l,o[u].length);return l-1}Ie.dimension=Kh;function jh(o){for(var l=-1,h=Math.max,u=0,g=o.length;u<g;++u)for(var d=o[u],p=0,m=d.length;p<m;++p)l=h(l,d[p]);return l+1}Ie.countVertices=jh;function Qh(o){for(var l=new Array(o.length),h=0,u=o.length;h<u;++h)l[h]=o[h].slice(0);return l}Ie.cloneCells=Qh;function Di(o,l){var h=o.length,u=o.length-l.length,g=Math.min;if(u)return u;switch(h){case 0:return 0;case 1:return o[0]-l[0];case 2:var x=o[0]+o[1]-l[0]-l[1];return x||g(o[0],o[1])-g(l[0],l[1]);case 3:var d=o[0]+o[1],p=l[0]+l[1];if(x=d+o[2]-(p+l[2]),x)return x;var m=g(o[0],o[1]),E=g(l[0],l[1]),x=g(m,o[2])-g(E,l[2]);return x||g(m+o[2],d)-g(E+l[2],p);default:var N=o.slice(0);N.sort();var C=l.slice(0);C.sort();for(var S=0;S<h;++S)if(u=N[S]-C[S],u)return u;return 0}}Ie.compareCells=Di;function tc(o,l){return Di(o[0],l[0])}function br(o,l){if(l){for(var h=o.length,u=new Array(h),g=0;g<h;++g)u[g]=[o[g],l[g]];u.sort(tc);for(var g=0;g<h;++g)o[g]=u[g][0],l[g]=u[g][1];return o}else return o.sort(Di),o}Ie.normalize=br;function Ia(o){if(o.length===0)return[];for(var l=1,h=o.length,u=1;u<h;++u){var g=o[u];if(Di(g,o[u-1])){if(u===l){l++;continue}o[l++]=g}}return o.length=l,o}Ie.unique=Ia;function Pr(o,l){for(var h=0,u=o.length-1,g=-1;h<=u;){var d=h+u>>1,p=Di(o[d],l);p<=0?(p===0&&(g=d),h=d+1):p>0&&(u=d-1)}return g}Ie.findCell=Pr;function Tu(o,l){for(var h=new Array(o.length),u=0,g=h.length;u<g;++u)h[u]=[];for(var d=[],u=0,p=l.length;u<p;++u)for(var m=l[u],E=m.length,x=1,N=1<<E;x<N;++x){d.length=Lu.popCount(x);for(var C=0,S=0;S<E;++S)x&1<<S&&(d[C++]=m[S]);var b=Pr(o,d);if(!(b<0))for(;h[b++].push(u),!(b>=o.length||Di(o[b],d)!==0););}return h}Ie.incidence=Tu;function ec(o,l){if(!l)return Tu(Ia(Na(o,0)),o);for(var h=new Array(l),u=0;u<l;++u)h[u]=[];for(var u=0,g=o.length;u<g;++u)for(var d=o[u],p=0,m=d.length;p<m;++p)h[d[p]].push(u);return h}Ie.dual=ec;function nc(o){for(var l=[],h=0,u=o.length;h<u;++h)for(var g=o[h],d=g.length|0,p=1,m=1<<d;p<m;++p){for(var E=[],x=0;x<d;++x)p>>>x&1&&E.push(g[x]);l.push(E)}return br(l)}Ie.explode=nc;function Na(o,l){if(l<0)return[];for(var h=[],u=(1<<l+1)-1,g=0;g<o.length;++g)for(var d=o[g],p=u;p<1<<d.length;p=Lu.nextCombination(p)){for(var m=new Array(l+1),E=0,x=0;x<d.length;++x)p&1<<x&&(m[E++]=d[x]);h.push(m)}return br(h)}Ie.skeleton=Na;function ic(o){for(var l=[],h=0,u=o.length;h<u;++h)for(var g=o[h],d=0,p=g.length;d<p;++d){for(var m=new Array(g.length-1),E=0,x=0;E<p;++E)E!==d&&(m[x++]=g[E]);l.push(m)}return br(l)}Ie.boundary=ic;function rc(o,l){for(var h=new Ru(l),u=0;u<o.length;++u)for(var g=o[u],d=0;d<g.length;++d)for(var p=d+1;p<g.length;++p)h.link(g[d],g[p]);for(var m=[],E=h.ranks,u=0;u<E.length;++u)E[u]=-1;for(var u=0;u<o.length;++u){var x=h.find(o[u][0]);E[x]<0?(E[x]=m.length,m.push([o[u].slice(0)])):m[E[x]].push(o[u].slice(0))}return m}function sc(o){for(var l=Ia(br(Na(o,0))),h=new Ru(l.length),u=0;u<o.length;++u)for(var g=o[u],d=0;d<g.length;++d)for(var p=Pr(l,[g[d]]),m=d+1;m<g.length;++m)h.link(p,Pr(l,[g[m]]));for(var E=[],x=h.ranks,u=0;u<x.length;++u)x[u]=-1;for(var u=0;u<o.length;++u){var N=h.find(Pr(l,[o[u][0]]));x[N]<0?(x[N]=E.length,E.push([o[u].slice(0)])):E[x[N]].push(o[u].slice(0))}return E}function oc(o,l){return l?rc(o,l):sc(o)}Ie.connectedComponents=oc;var ac=gc,ha=eo.exports,uc=Ie.compareCells;function Ks(o,l,h){this.vertices=o,this.adjacent=l,this.boundary=h,this.lastVisited=-1}Ks.prototype.flip=function(){var o=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=o;var l=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=l};function lc(o,l,h){this.vertices=o,this.cell=l,this.index=h}function hc(o,l){return uc(o.vertices,l.vertices)}function cc(o){for(var l=["function orient(){var tuple=this.tuple;return test("],h=0;h<=o;++h)h>0&&l.push(","),l.push("tuple[",h,"]");l.push(")}return orient");var u=new Function("test",l.join("")),g=ha[o+1];return g||(g=ha),u(g)}var Xa=[];function Pu(o,l,h){this.dimension=o,this.vertices=l,this.simplices=h,this.interior=h.filter(function(d){return!d.boundary}),this.tuple=new Array(o+1);for(var u=0;u<=o;++u)this.tuple[u]=this.vertices[u];var g=Xa[o];g||(g=Xa[o]=cc(o)),this.orient=g}var Dr=Pu.prototype;Dr.handleBoundaryDegeneracy=function(o,l){var h=this.dimension,u=this.vertices.length-1,g=this.tuple,d=this.vertices,p=[o];for(o.lastVisited=-u;p.length>0;){o=p.pop(),o.vertices;for(var m=o.adjacent,E=0;E<=h;++E){var x=m[E];if(!(!x.boundary||x.lastVisited<=-u)){for(var N=x.vertices,C=0;C<=h;++C){var S=N[C];S<0?g[C]=l:g[C]=d[S]}var b=this.orient();if(b>0)return x;x.lastVisited=-u,b===0&&p.push(x)}}}return null};Dr.walk=function(o,l){var h=this.vertices.length-1,u=this.dimension,g=this.vertices,d=this.tuple,p=l?this.interior.length*Math.random()|0:this.interior.length-1,m=this.interior[p];t:for(;!m.boundary;){for(var E=m.vertices,x=m.adjacent,N=0;N<=u;++N)d[N]=g[E[N]];m.lastVisited=h;for(var N=0;N<=u;++N){var C=x[N];if(!(C.lastVisited>=h)){var S=d[N];d[N]=o;var b=this.orient();if(d[N]=S,b<0){m=C;continue t}else C.boundary?C.lastVisited=-h:C.lastVisited=h}}return}return m};Dr.addPeaks=function(o,l){var h=this.vertices.length-1,u=this.dimension,g=this.vertices,d=this.tuple,p=this.interior,m=this.simplices,E=[l];l.lastVisited=h,l.vertices[l.vertices.indexOf(-1)]=h,l.boundary=!1,p.push(l);for(var x=[];E.length>0;){var l=E.pop(),N=l.vertices,C=l.adjacent,S=N.indexOf(h);if(!(S<0)){for(var b=0;b<=u;++b)if(b!==S){var T=C[b];if(!(!T.boundary||T.lastVisited>=h)){var I=T.vertices;if(T.lastVisited!==-h){for(var Y=0,W=0;W<=u;++W)I[W]<0?(Y=W,d[W]=o):d[W]=g[I[W]];var X=this.orient();if(X>0){I[Y]=h,T.boundary=!1,p.push(T),E.push(T),T.lastVisited=h;continue}else T.lastVisited=-h}var R=T.adjacent,w=N.slice(),F=C.slice(),Z=new Ks(w,F,!0);m.push(Z);var P=R.indexOf(l);if(!(P<0)){R[P]=Z,F[S]=T,w[b]=-1,F[b]=l,C[b]=Z,Z.flip();for(var W=0;W<=u;++W){var A=w[W];if(!(A<0||A===h)){for(var O=new Array(u-1),z=0,G=0;G<=u;++G){var v=w[G];v<0||G===W||(O[z++]=v)}x.push(new lc(O,Z,W))}}}}}}}x.sort(hc);for(var b=0;b+1<x.length;b+=2){var U=x[b],st=x[b+1],Ct=U.index,Tt=st.index;Ct<0||Tt<0||(U.cell.adjacent[U.index]=st.cell,st.cell.adjacent[st.index]=U.cell)}};Dr.insert=function(o,l){var h=this.vertices;h.push(o);var u=this.walk(o,l);if(!!u){for(var g=this.dimension,d=this.tuple,p=0;p<=g;++p){var m=u.vertices[p];m<0?d[p]=o:d[p]=h[m]}var E=this.orient(d);E<0||E===0&&(u=this.handleBoundaryDegeneracy(u,o),!u)||this.addPeaks(o,u)}};Dr.boundary=function(){for(var o=this.dimension,l=[],h=this.simplices,u=h.length,g=0;g<u;++g){var d=h[g];if(d.boundary){for(var p=new Array(o),m=d.vertices,E=0,x=0,N=0;N<=o;++N)m[N]>=0?p[E++]=m[N]:x=N&1;if(x===(o&1)){var C=p[0];p[0]=p[1],p[1]=C}l.push(p)}}return l};function gc(o,l){var h=o.length;if(h===0)throw new Error("Must have at least d+1 points");var u=o[0].length;if(h<=u)throw new Error("Must input at least d+1 points");var g=o.slice(0,u+1),d=ha.apply(void 0,g);if(d===0)throw new Error("Input not in general position");for(var p=new Array(u+1),m=0;m<=u;++m)p[m]=m;d<0&&(p[0]=1,p[1]=0);for(var E=new Ks(p,new Array(u+1),!1),x=E.adjacent,N=new Array(u+2),m=0;m<=u;++m){for(var C=p.slice(),S=0;S<=u;++S)S===m&&(C[S]=-1);var b=C[0];C[0]=C[1],C[1]=b;var T=new Ks(C,new Array(u+1),!0);x[m]=T,N[m]=T}N[u+1]=E;for(var m=0;m<=u;++m)for(var C=x[m].vertices,I=x[m].adjacent,S=0;S<=u;++S){var Y=C[S];if(Y<0){I[S]=E;continue}for(var W=0;W<=u;++W)x[W].vertices.indexOf(Y)<0&&(I[S]=x[W])}for(var X=new Pu(u,g,N),R=!!l,m=u+1;m<h;++m)X.insert(o[m],R);return X.boundary()}var fc=mc,dc=eo.exports;function pc(o,l){for(var h=new Array(l+1),u=0;u<o.length;++u)h[u]=o[u];for(var u=0;u<=o.length;++u){for(var g=o.length;g<=l;++g){for(var d=new Array(l),p=0;p<l;++p)d[p]=Math.pow(g+1-u,p);h[g]=d}var m=dc.apply(void 0,h);if(m)return!0}return!1}function mc(o){var l=o.length;if(l===0)return[];if(l===1)return[0];for(var h=o[0].length,u=[o[0]],g=[0],d=1;d<l;++d){if(u.push(o[d]),!pc(u,h)){u.pop();continue}if(g.push(d),g.length===h+1)return g}return g}var vc=Ic,Ya=ac,yc=fc;function xc(o,l){for(var h=o.length,u=new Array(h),g=0;g<l.length;++g)u[g]=o[l[g]];for(var d=l.length,g=0;g<h;++g)l.indexOf(g)<0&&(u[d++]=o[g]);return u}function Ec(o,l){for(var h=o.length,u=l.length,g=0;g<h;++g)for(var d=o[g],p=0;p<d.length;++p){var m=d[p];if(m<u)d[p]=l[m];else{m=m-u;for(var E=0;E<u;++E)m>=l[E]&&(m+=1);d[p]=m}}return o}function Ic(o,l){try{return Ya(o,!0)}catch{var h=yc(o);if(h.length<=l)return[];var u=xc(o,h),g=Ya(u,!0);return Ec(g,h)}}var Nc=Mh,Cc=Wh,wc=vc,Sc=Lc;function Lc(o){var l=o.length;if(l===0)return[];if(l===1)return[[0]];var h=o[0].length;return h===0?[]:h===1?Nc(o):h===2?Cc(o):wc(o,h)}var Rc=Ge.coordEach,Tc=Sc,Pc=rt.polygon,Oc=function(o){var l=[];Rc(o,function(d){l.push(d)});var h=Tc(l);if(h.length>0){for(var u=[],g=0;g<h.length;g++)u.push(l[h[g][0]]);return u.push(l[h[h.length-1][1]]),Pc([u])}},Mc=bi,_c=rt.featureCollection,bc=function(o,l){for(var h=_c([]),u=0;u<l.features.length;u++)for(var g=0;g<o.features.length;g++){var d=Mc(o.features[g],l.features[u]);d&&h.features.push(o.features[g])}return h},_i={exports:{}};(function(o,l){(function(h,u){u(l)})(Xl,function(h){function u(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}function g(){}function d(){}function p(){}function m(){}function E(){}function x(){}function N(){}function C(t){this.message=t}function S(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function b(){if(arguments.length===0)C.call(this);else if(arguments.length===1){var t=arguments[0];C.call(this,t)}}function T(){}function I(){if(this.x=null,this.y=null,this.z=null,arguments.length===0)I.call(this,0,0);else if(arguments.length===1){var t=arguments[0];I.call(this,t.x,t.y,t.z)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];I.call(this,e,n,I.NULL_ORDINATE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.x=r,this.y=s,this.z=a}}function Y(){if(this.dimensionsToTest=2,arguments.length===0)Y.call(this,2);else if(arguments.length===1){var t=arguments[0];if(t!==2&&t!==3)throw new d;this.dimensionsToTest=t}}function W(){}function X(){}function R(t){this.message=t||""}function w(){}function F(t){this.message=t||""}function Z(t){this.message=t||""}function P(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function A(){if(P.apply(this),arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.ensureCapacity(t.length),this.add(t,!0)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.ensureCapacity(e.length),this.add(e,n)}}}function O(){if(this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,arguments.length===0)this.init();else if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];this.init(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3];this.init(s,a,c,f)}}function z(){}function G(){z.call(this,"Projective point not representable on the Cartesian plane.")}function v(){}function U(t,e){return t.interfaces_&&t.interfaces_().indexOf(e)>-1}function st(){}function Ct(t){this.str=t}function Tt(t){this.value=t}function qt(){}function _(){if(this.hi=0,this.lo=0,arguments.length===0)this.init(0);else if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.init(t)}else if(arguments[0]instanceof _){var e=arguments[0];this.init(e)}else if(typeof arguments[0]=="string"){var n=arguments[0];_.call(this,_.parse(n))}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.init(r,s)}}function Lt(){}function at(){}function mt(){}function Ht(){if(this.x=null,this.y=null,this.w=null,arguments.length===0)this.x=0,this.y=0,this.w=1;else if(arguments.length===1){var t=arguments[0];this.x=t.x,this.y=t.y,this.w=1}else if(arguments.length===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var e=arguments[0],n=arguments[1];this.x=e,this.y=n,this.w=1}else if(arguments[0]instanceof Ht&&arguments[1]instanceof Ht){var r=arguments[0],s=arguments[1];this.x=r.y*s.w-s.y*r.w,this.y=s.x*r.w-r.x*s.w,this.w=r.x*s.y-s.x*r.y}else if(arguments[0]instanceof I&&arguments[1]instanceof I){var a=arguments[0],c=arguments[1];this.x=a.y-c.y,this.y=c.x-a.x,this.w=a.x*c.y-c.x*a.y}}else if(arguments.length===3){var f=arguments[0],y=arguments[1],L=arguments[2];this.x=f,this.y=y,this.w=L}else if(arguments.length===4){var M=arguments[0],D=arguments[1],q=arguments[2],$=arguments[3],j=M.y-D.y,tt=D.x-M.x,It=M.x*D.y-D.x*M.y,bt=q.y-$.y,Fe=$.x-q.x,ai=q.x*$.y-$.x*q.y;this.x=tt*ai-Fe*It,this.y=bt*It-j*ai,this.w=j*Fe-bt*tt}}function En(){}function ge(){}function H(){this.envelope=null,this.factory=null,this.SRID=null,this.userData=null;var t=arguments[0];this.factory=t,this.SRID=t.getSRID()}function In(){}function Bt(){}function Fr(){}function Gr(){}function qr(){}function Br(){}function Q(){}function lo(){}function ho(){}function kn(){}function La(){}function zr(){}function kt(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function Ra(t){return t==null?un:t.color}function xt(t){return t==null?null:t.parent}function $e(t,e){t!==null&&(t.color=e)}function co(t){return t==null?null:t.left}function Ta(t){return t==null?null:t.right}function At(){this.root_=null,this.size_=0}function Vr(){}function Pa(){}function Kt(){this.array_=[],arguments[0]instanceof X&&this.addAll(arguments[0])}function Ze(){}function B(){}function Je(){}function Un(){}function ut(){this.geometries=null;var t=arguments[0],e=arguments[1];if(H.call(this,e),t===null&&(t=[]),H.hasNullElements(t))throw new d;this.geometries=t}function re(){var t=arguments[0],e=arguments[1];ut.call(this,t,e)}function gn(){if(this.geom=null,this.geomFact=null,this.bnRule=null,this.endpointMap=null,arguments.length===1){var t=arguments[0];gn.call(this,t,Bt.MOD2_BOUNDARY_RULE)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.geom=e,this.geomFact=e.getFactory(),this.bnRule=n}}function go(){this.count=null}function $u(){}function Zu(){}function Ju(){}function Ku(){}function ju(){}function Qu(){}function fe(){}function _t(){}function it(){this.points=null;var t=arguments[0],e=arguments[1];H.call(this,e),this.init(t)}function kr(){}function wt(){this.coordinates=null;var t=arguments[0],e=arguments[1];H.call(this,e),this.init(t)}function Ke(){}function vt(){this.shell=null,this.holes=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(H.call(this,n),t===null&&(t=this.getFactory().createLinearRing()),e===null&&(e=[]),H.hasNullElements(e))throw new d;if(t.isEmpty()&&H.hasNonEmptyElements(e))throw new d;this.shell=t,this.holes=e}function se(){var t=arguments[0],e=arguments[1];ut.call(this,t,e)}function Pt(){if(arguments[0]instanceof I&&arguments[1]instanceof ot){var t=arguments[0],e=arguments[1];Pt.call(this,e.getCoordinateSequenceFactory().create(t),e)}else if(U(arguments[0],at)&&arguments[1]instanceof ot){var n=arguments[0],r=arguments[1];it.call(this,n,r),this.validateConstruction()}}function Ut(){var t=arguments[0],e=arguments[1];ut.call(this,t,e)}function de(){if(this.factory=null,this.isUserDataCopied=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.factory=t}}}function Ur(){}function fo(){}function po(){}function mo(){}function pe(){if(this.dimension=3,this.coordinates=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];pe.call(this,t,3)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.coordinates=new Array(e).fill(null);for(var n=0;e>n;n++)this.coordinates[n]=new I}else if(U(arguments[0],at)){var r=arguments[0];if(r===null)return this.coordinates=new Array(0).fill(null),null;this.dimension=r.getDimension(),this.coordinates=new Array(r.size()).fill(null);for(var n=0;n<this.coordinates.length;n++)this.coordinates[n]=r.getCoordinateCopy(n)}}else if(arguments.length===2){if(arguments[0]instanceof Array&&Number.isInteger(arguments[1])){var s=arguments[0],a=arguments[1];this.coordinates=s,this.dimension=a,s===null&&(this.coordinates=new Array(0).fill(null))}else if(Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var c=arguments[0],f=arguments[1];this.coordinates=new Array(c).fill(null),this.dimension=f;for(var n=0;c>n;n++)this.coordinates[n]=new I}}}function fn(){}function tl(t,e){return t===e||t!==t&&e!==e}function el(t,e){function n(r){return this&&this.constructor===n?(this._keys=[],this._values=[],this._itp=[],this.objectOnly=e,void(r&&nl.call(this,r))):new n(r)}return e||vl(t,"size",{get:fl}),t.constructor=n,n.prototype=t,n}function nl(t){this.add?t.forEach(this.add,this):t.forEach(function(e){this.set(e[0],e[1])},this)}function il(t){return this.has(t)&&(this._keys.splice(He,1),this._values.splice(He,1),this._itp.forEach(function(e){He<e[0]&&e[0]--})),He>-1}function rl(t){return this.has(t)?this._values[He]:void 0}function sl(t,e){if(this.objectOnly&&e!==Object(e))throw new TypeError("Invalid value used as weak collection key");if(e!==e||e===0)for(He=t.length;He--&&!tl(t[He],e););else He=t.indexOf(e);return He>-1}function al(t){return sl.call(this,this._keys,t)}function ul(t,e){return this.has(t)?this._values[He]=e:this._values[this._keys.push(t)-1]=e,this}function ll(){(this._keys||0).length=this._values.length=0}function hl(){return vo(this._itp,this._keys)}function cl(){return vo(this._itp,this._values)}function gl(){return vo(this._itp,this._keys,this._values)}function vo(t,e,n){var r=[0],s=!1;return t.push(r),{next:function(){var a,c=r[0];return!s&&c<e.length?(a=n?[e[c],n[c]]:e[c],r[0]++):(s=!0,t.splice(t.indexOf(r),1)),{done:s,value:a}}}}function fl(){return this._values.length}function dl(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}}function je(){this.map_=new xl}function ft(){if(this.modelType=null,this.scale=null,arguments.length===0)this.modelType=ft.FLOATING;else if(arguments.length===1){if(arguments[0]instanceof qe){var t=arguments[0];this.modelType=t,t===ft.FIXED&&this.setScale(1)}else if(typeof arguments[0]=="number"){var e=arguments[0];this.modelType=ft.FIXED,this.setScale(e)}else if(arguments[0]instanceof ft){var n=arguments[0];this.modelType=n.modelType,this.scale=n.scale}}}function qe(){this.name=null;var t=arguments[0];this.name=t,qe.nameToTypeMap.put(t,this)}function ot(){if(this.precisionModel=null,this.coordinateSequenceFactory=null,this.SRID=null,arguments.length===0)ot.call(this,new ft,0);else if(arguments.length===1){if(U(arguments[0],En)){var t=arguments[0];ot.call(this,new ft,0,t)}else if(arguments[0]instanceof ft){var e=arguments[0];ot.call(this,e,0,ot.getDefaultCoordinateSequenceFactory())}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];ot.call(this,n,r,ot.getDefaultCoordinateSequenceFactory())}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];this.precisionModel=s,this.coordinateSequenceFactory=c,this.SRID=a}}function yo(t){this.geometryFactory=t||new ot}function Wt(t){this.parser=new yo(t)}function yt(){this.result=null,this.inputLines=Array(2).fill().map(function(){return Array(2)}),this.intPt=new Array(2).fill(null),this.intLineIndex=null,this._isProper=null,this.pa=null,this.pb=null,this.precisionModel=null,this.intPt[0]=new I,this.intPt[1]=new I,this.pa=this.intPt[0],this.pb=this.intPt[1],this.result=0}function zt(){yt.apply(this)}function Xn(){}function Yn(){this.p=null,this.crossingCount=0,this.isPointOnSegment=!1;var t=arguments[0];this.p=t}function k(){}function et(){if(this.p0=null,this.p1=null,arguments.length===0)et.call(this,new I,new I);else if(arguments.length===1){var t=arguments[0];et.call(this,t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0=e,this.p1=n}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3];et.call(this,new I(r,s),new I(a,c))}}function dt(){if(this.matrix=null,arguments.length===0)this.matrix=Array(3).fill().map(function(){return Array(3)}),this.setAll(B.FALSE);else if(arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];dt.call(this),this.set(t)}else if(arguments[0]instanceof dt){var e=arguments[0];dt.call(this),this.matrix[v.INTERIOR][v.INTERIOR]=e.matrix[v.INTERIOR][v.INTERIOR],this.matrix[v.INTERIOR][v.BOUNDARY]=e.matrix[v.INTERIOR][v.BOUNDARY],this.matrix[v.INTERIOR][v.EXTERIOR]=e.matrix[v.INTERIOR][v.EXTERIOR],this.matrix[v.BOUNDARY][v.INTERIOR]=e.matrix[v.BOUNDARY][v.INTERIOR],this.matrix[v.BOUNDARY][v.BOUNDARY]=e.matrix[v.BOUNDARY][v.BOUNDARY],this.matrix[v.BOUNDARY][v.EXTERIOR]=e.matrix[v.BOUNDARY][v.EXTERIOR],this.matrix[v.EXTERIOR][v.INTERIOR]=e.matrix[v.EXTERIOR][v.INTERIOR],this.matrix[v.EXTERIOR][v.BOUNDARY]=e.matrix[v.EXTERIOR][v.BOUNDARY],this.matrix[v.EXTERIOR][v.EXTERIOR]=e.matrix[v.EXTERIOR][v.EXTERIOR]}}}function Qe(){this.areaBasePt=null,this.triangleCent3=new I,this.areasum2=0,this.cg3=new I,this.lineCentSum=new I,this.totalLength=0,this.ptCount=0,this.ptCentSum=new I;var t=arguments[0];this.areaBasePt=null,this.add(t)}function Xr(t){this.message=t||""}function jt(){this.array_=[]}function li(){this.treeSet=new Kt,this.list=new P}function tn(){if(this.geomFactory=null,this.inputPts=null,arguments.length===1){var t=arguments[0];tn.call(this,tn.extractCoordinates(t),t.getFactory())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputPts=li.filterCoordinates(e),this.geomFactory=n}}function hi(){this.origin=null;var t=arguments[0];this.origin=t}function ee(){this.inputGeom=null,this.factory=null,this.pruneEmptyGeometry=!0,this.preserveGeometryCollectionType=!0,this.preserveCollections=!1,this.preserveType=!1}function ci(){if(this.snapTolerance=0,this.srcPts=null,this.seg=new et,this.allowSnappingToSourceVertices=!1,this._isClosed=!1,arguments[0]instanceof it&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];ci.call(this,t.getCoordinates(),e)}else if(arguments[0]instanceof Array&&typeof arguments[1]=="number"){var n=arguments[0],r=arguments[1];this.srcPts=n,this._isClosed=ci.isClosed(n),this.snapTolerance=r}}function Qt(){this.srcGeom=null;var t=arguments[0];this.srcGeom=t}function Ai(){if(ee.apply(this),this.snapTolerance=null,this.snapPts=null,this.isSelfSnap=!1,arguments.length===2){var t=arguments[0],e=arguments[1];this.snapTolerance=t,this.snapPts=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.snapTolerance=n,this.snapPts=r,this.isSelfSnap=s}}function me(){this.isFirst=!0,this.commonMantissaBitsCount=53,this.commonBits=0,this.commonSignExp=null}function Fi(){this.commonCoord=null,this.ccFilter=new Yr}function Yr(){this.commonBitsX=new me,this.commonBitsY=new me}function Gi(){this.trans=null;var t=arguments[0];this.trans=t}function Hn(){this.parent=null,this.atStart=null,this.max=null,this.index=null,this.subcollectionIterator=null;var t=arguments[0];this.parent=t,this.atStart=!0,this.index=0,this.max=t.getNumGeometries()}function Wn(){if(this.boundaryRule=Bt.OGC_SFS_BOUNDARY_RULE,this.isIn=null,this.numBoundaries=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];if(t===null)throw new d;this.boundaryRule=t}}}function gi(){}function qi(){}function xo(){this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function Hr(){}function en(){this.bounds=null,this.item=null;var t=arguments[0],e=arguments[1];this.bounds=t,this.item=e}function Eo(){this._size=null,this.items=null,this._size=0,this.items=new P,this.items.add(null)}function Nn(){}function Wr(){}function te(){if(this.childBoundables=new P,this.bounds=null,this.level=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.level=t}}}function ne(){this.boundable1=null,this.boundable2=null,this._distance=null,this.itemDistance=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.boundable1=t,this.boundable2=e,this.itemDistance=n,this._distance=this.distance()}function Ot(){if(this.root=null,this.built=!1,this.itemBoundables=new P,this.nodeCapacity=null,arguments.length===0)Ot.call(this,Ot.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];T.isTrue(t>1,"Node capacity must be greater than 1"),this.nodeCapacity=t}}function pl(){}function $r(){}function St(){if(arguments.length===0)St.call(this,St.DEFAULT_NODE_CAPACITY);else if(arguments.length===1){var t=arguments[0];Ot.call(this,t)}}function Bi(){var t=arguments[0];te.call(this,t)}function ie(){}function Io(){this.segString=null,this.coord=null,this.segmentIndex=null,this.segmentOctant=null,this._isInterior=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.segString=t,this.coord=new I(e),this.segmentIndex=n,this.segmentOctant=r,this._isInterior=!e.equals2D(t.getCoordinate(n))}function No(){this.nodeMap=new At,this.edge=null;var t=arguments[0];this.edge=t}function Oa(){this.nodeList=null,this.edge=null,this.nodeIt=null,this.currNode=null,this.nextNode=null,this.currSegIndex=0;var t=arguments[0];this.nodeList=t,this.edge=t.getEdge(),this.nodeIt=t.iterator(),this.readNextNode()}function Co(){}function Be(){this.nodeList=new No(this),this.pts=null,this.data=null;var t=arguments[0],e=arguments[1];this.pts=t,this.data=e}function zi(){this.tempEnv1=new O,this.tempEnv2=new O,this.overlapSeg1=new et,this.overlapSeg2=new et}function wo(){this.pts=null,this.start=null,this.end=null,this.env=null,this.context=null,this.id=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.pts=t,this.start=e,this.end=n,this.context=r}function ht(){}function Pe(){}function Vi(){}function Zr(){if(this.segInt=null,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setSegmentIntersector(t)}}}function Cn(){if(this.monoChains=new P,this.index=new St,this.idCounter=0,this.nodedSegStrings=null,this.nOverlaps=0,arguments.length!==0){if(arguments.length===1){var t=arguments[0];Zr.call(this,t)}}}function ki(){zi.apply(this),this.si=null;var t=arguments[0];this.si=t}function oe(){if(this.pt=null,arguments.length===1){var t=arguments[0];C.call(this,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];C.call(this,oe.msgWithCoord(e,n)),this.pt=new I(n)}}function Ui(){}function dn(){this.findAllIntersections=!1,this.isCheckEndSegmentsOnly=!1,this.li=null,this.interiorIntersection=null,this.intSegments=null,this.intersections=new P,this.intersectionCount=0,this.keepIntersections=!0;var t=arguments[0];this.li=t,this.interiorIntersection=null}function Xi(){this.li=new zt,this.segStrings=null,this.findAllIntersections=!1,this.segInt=null,this._isValid=!0;var t=arguments[0];this.segStrings=t}function $n(){this.nv=null;var t=arguments[0];this.nv=new Xi($n.toSegmentStrings(t))}function fi(){this.mapOp=null;var t=arguments[0];this.mapOp=t}function V(){}function ae(){if(this.location=null,arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];this.init(t.length)}else if(Number.isInteger(arguments[0])){var e=arguments[0];this.init(1),this.location[V.ON]=e}else if(arguments[0]instanceof ae){var n=arguments[0];if(this.init(n.location.length),n!==null)for(var r=0;r<this.location.length;r++)this.location[r]=n.location[r]}}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];this.init(3),this.location[V.ON]=s,this.location[V.LEFT]=a,this.location[V.RIGHT]=c}}function Mt(){if(this.elt=new Array(2).fill(null),arguments.length===1){if(Number.isInteger(arguments[0])){var t=arguments[0];this.elt[0]=new ae(t),this.elt[1]=new ae(t)}else if(arguments[0]instanceof Mt){var e=arguments[0];this.elt[0]=new ae(e.elt[0]),this.elt[1]=new ae(e.elt[1])}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.elt[0]=new ae(v.NONE),this.elt[1]=new ae(v.NONE),this.elt[n].setLocation(r)}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];this.elt[0]=new ae(s,a,c),this.elt[1]=new ae(s,a,c)}else if(arguments.length===4){var f=arguments[0],y=arguments[1],L=arguments[2],M=arguments[3];this.elt[0]=new ae(v.NONE,v.NONE,v.NONE),this.elt[1]=new ae(v.NONE,v.NONE,v.NONE),this.elt[f].setLocations(y,L,M)}}function di(){this.startDe=null,this.maxNodeDegree=-1,this.edges=new P,this.pts=new P,this.label=new Mt(v.NONE),this.ring=null,this._isHole=null,this.shell=null,this.holes=new P,this.geometryFactory=null;var t=arguments[0],e=arguments[1];this.geometryFactory=e,this.computePoints(t),this.computeRing()}function Jr(){var t=arguments[0],e=arguments[1];di.call(this,t,e)}function Yi(){var t=arguments[0],e=arguments[1];di.call(this,t,e)}function wn(){if(this.label=null,this._isInResult=!1,this._isCovered=!1,this._isCoveredSet=!1,this._isVisited=!1,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.label=t}}}function nn(){wn.apply(this),this.coord=null,this.edges=null;var t=arguments[0],e=arguments[1];this.coord=t,this.edges=e,this.label=new Mt(0,v.NONE)}function pi(){this.nodeMap=new At,this.nodeFact=null;var t=arguments[0];this.nodeFact=t}function ze(){if(this.edge=null,this.label=null,this.node=null,this.p0=null,this.p1=null,this.dx=null,this.dy=null,this.quadrant=null,arguments.length===1){var t=arguments[0];this.edge=t}else if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];ze.call(this,e,n,r,null)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3];ze.call(this,s),this.init(a,c),this.label=f}}function Zn(){this._isForward=null,this._isInResult=!1,this._isVisited=!1,this.sym=null,this.next=null,this.nextMin=null,this.edgeRing=null,this.minEdgeRing=null,this.depth=[0,-999,-999];var t=arguments[0],e=arguments[1];if(ze.call(this,t),this._isForward=e,e)this.init(t.getCoordinate(0),t.getCoordinate(1));else{var n=t.getNumPoints()-1;this.init(t.getCoordinate(n),t.getCoordinate(n-1))}this.computeDirectedLabel()}function Jn(){}function Ve(){if(this.edges=new P,this.nodes=null,this.edgeEndList=new P,arguments.length===0)this.nodes=new pi(new Jn);else if(arguments.length===1){var t=arguments[0];this.nodes=new pi(t)}}function Kr(){this.geometryFactory=null,this.shellList=new P;var t=arguments[0];this.geometryFactory=t}function So(){this.op=null,this.geometryFactory=null,this.ptLocator=null,this.lineEdgesList=new P,this.resultLineList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this.op=t,this.geometryFactory=e,this.ptLocator=n}function Lo(){this.op=null,this.geometryFactory=null,this.resultPointList=new P;var t=arguments[0],e=arguments[1];this.op=t,this.geometryFactory=e}function jr(){}function ve(){this.geom=null;var t=arguments[0];this.geom=t}function Kn(){this.edgeMap=new At,this.edgeList=null,this.ptInAreaLocation=[v.NONE,v.NONE]}function Qr(){Kn.apply(this),this.resultAreaEdgeList=null,this.label=null,this.SCANNING_FOR_INCOMING=1,this.LINKING_TO_OUTGOING=2}function mi(){Jn.apply(this)}function Ro(){this.mce=null,this.chainIndex=null;var t=arguments[0],e=arguments[1];this.mce=t,this.chainIndex=e}function rn(){if(this.label=null,this.xValue=null,this.eventType=null,this.insertEvent=null,this.deleteEventIndex=null,this.obj=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.eventType=rn.DELETE,this.xValue=t,this.insertEvent=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.eventType=rn.INSERT,this.label=n,this.xValue=r,this.obj=s}}function ts(){}function Sn(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.properIntersectionPoint=null,this.li=null,this.includeProper=null,this.recordIsolated=null,this.isSelfIntersection=null,this.numIntersections=0,this.numTests=0,this.bdyNodes=null,this._isDone=!1,this.isDoneWhenProperInt=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.li=t,this.includeProper=e,this.recordIsolated=n}function es(){ts.apply(this),this.events=new P,this.nOverlaps=null}function jn(){this.min=p.POSITIVE_INFINITY,this.max=p.NEGATIVE_INFINITY}function To(){}function ns(){jn.apply(this),this.item=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.min=t,this.max=e,this.item=n}function is(){jn.apply(this),this.node1=null,this.node2=null;var t=arguments[0],e=arguments[1];this.node1=t,this.node2=e,this.buildExtent(this.node1,this.node2)}function Po(){this.leaves=new P,this.root=null,this.level=0}function $t(){if(this.lines=null,this.isForcedToLineString=!1,arguments.length===1){var t=arguments[0];this.lines=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.lines=e,this.isForcedToLineString=n}}function rs(){this.items=new P}function Hi(){this.index=null;var t=arguments[0];if(!U(t,Ke))throw new d;this.index=new os(t)}function ss(){this.counter=null;var t=arguments[0];this.counter=t}function os(){this.index=new Po;var t=arguments[0];this.init(t)}function Oo(){this.coord=null,this.segmentIndex=null,this.dist=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.coord=new I(t),this.segmentIndex=e,this.dist=n}function Mo(){this.nodeMap=new At,this.edge=null;var t=arguments[0];this.edge=t}function Wi(){}function _o(){this.e=null,this.pts=null,this.startIndex=null,this.env1=new O,this.env2=new O;var t=arguments[0];this.e=t,this.pts=t.getCoordinates();var e=new Wi;this.startIndex=e.getChainStartIndices(this.pts)}function Oe(){this.depth=Array(2).fill().map(function(){return Array(3)});for(var t=0;2>t;t++)for(var e=0;3>e;e++)this.depth[t][e]=Oe.NULL_VALUE}function Ce(){if(wn.apply(this),this.pts=null,this.env=null,this.eiList=new Mo(this),this.name=null,this.mce=null,this._isIsolated=!0,this.depth=new Oe,this.depthDelta=0,arguments.length===1){var t=arguments[0];Ce.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pts=e,this.label=n}}function ue(){if(Ve.apply(this),this.parentGeom=null,this.lineEdgeMap=new je,this.boundaryNodeRule=null,this.useBoundaryDeterminationRule=!0,this.argIndex=null,this.boundaryNodes=null,this._hasTooFewPoints=!1,this.invalidPoint=null,this.areaPtLocator=null,this.ptLocator=new Wn,arguments.length===2){var t=arguments[0],e=arguments[1];ue.call(this,t,e,Bt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.argIndex=n,this.parentGeom=r,this.boundaryNodeRule=s,r!==null&&this.add(r)}}function Ln(){if(this.li=new zt,this.resultPrecisionModel=null,this.arg=null,arguments.length===1){var t=arguments[0];this.setComputationPrecision(t.getPrecisionModel()),this.arg=new Array(1).fill(null),this.arg[0]=new ue(0,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ln.call(this,e,n,Bt.OGC_SFS_BOUNDARY_RULE)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];r.getPrecisionModel().compareTo(s.getPrecisionModel())>=0?this.setComputationPrecision(r.getPrecisionModel()):this.setComputationPrecision(s.getPrecisionModel()),this.arg=new Array(2).fill(null),this.arg[0]=new ue(0,r,a),this.arg[1]=new ue(1,s,a)}}function Rn(){this.pts=null,this._orientation=null;var t=arguments[0];this.pts=t,this._orientation=Rn.orientation(t)}function as(){this.edges=new P,this.ocaMap=new At}function J(){this.ptLocator=new Wn,this.geomFact=null,this.resultGeom=null,this.graph=null,this.edgeList=new as,this.resultPolyList=new P,this.resultLineList=new P,this.resultPointList=new P;var t=arguments[0],e=arguments[1];Ln.call(this,t,e),this.graph=new Ve(new mi),this.geomFact=t.getFactory()}function we(){this.geom=new Array(2).fill(null),this.snapTolerance=null,this.cbr=null;var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e,this.computeSnapTolerance()}function Vt(){this.geom=new Array(2).fill(null);var t=arguments[0],e=arguments[1];this.geom[0]=t,this.geom[1]=e}function Me(){this.factory=null,this.interiorPoint=null,this.maxWidth=0;var t=arguments[0];this.factory=t.getFactory(),this.add(t)}function vi(){this.poly=null,this.centreY=null,this.hiY=p.MAX_VALUE,this.loY=-p.MAX_VALUE;var t=arguments[0];this.poly=t,this.hiY=t.getEnvelopeInternal().getMaxY(),this.loY=t.getEnvelopeInternal().getMinY(),this.centreY=Me.avg(this.loY,this.hiY)}function us(){this.centroid=null,this.minDistance=p.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.addInterior(t),this.interiorPoint===null&&this.addEndpoints(t)}function ls(){this.centroid=null,this.minDistance=p.MAX_VALUE,this.interiorPoint=null;var t=arguments[0];this.centroid=t.getCentroid().getCoordinate(),this.add(t)}function nt(){}function Et(){this.p0=null,this.p1=null,this.p2=null;var t=arguments[0],e=arguments[1],n=arguments[2];this.p0=t,this.p1=e,this.p2=n}function pn(){this.input=null,this.extremalPts=null,this.centre=null,this.radius=0;var t=arguments[0];this.input=t}function Zt(){if(this.inputGeom=null,this.isConvex=null,this.convexHullPts=null,this.minBaseSeg=new et,this.minWidthPt=null,this.minPtIndex=null,this.minWidth=0,arguments.length===1){var t=arguments[0];Zt.call(this,t,!1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isConvex=n}}function Tn(){this.inputGeom=null,this.distanceTolerance=null;var t=arguments[0];this.inputGeom=t}function $i(){ee.apply(this),this.distanceTolerance=null;var t=arguments[0];this.distanceTolerance=t}function sn(){this._orig=null,this._sym=null,this._next=null;var t=arguments[0];this._orig=t}function le(){this._isMarked=!1;var t=arguments[0];sn.call(this,t)}function yi(){this.vertexMap=new je}function hs(){this._isStart=!1;var t=arguments[0];le.call(this,t)}function cs(){yi.apply(this)}function Zi(){this.result=null,this.factory=null,this.graph=null,this.lines=new P,this.nodeEdgeStack=new jt,this.ringStartEdge=null,this.graph=new cs}function ke(){this.items=new P,this.subnode=new Array(4).fill(null)}function Qn(){}function ml(t,e){var n,r,s,a,c={32:{d:127,c:128,b:0,a:0},64:{d:32752,c:0,b:0,a:0}},f={32:8,64:11}[t];if(a||(n=0>e||0>1/e,isFinite(e)||(a=c[t],n&&(a.d+=1<<t/4-1),r=Math.pow(2,f)-1,s=0)),!a){for(r={32:127,64:1023}[t],s=Math.abs(e);s>=2;)r++,s/=2;for(;1>s&&r>0;)r--,s*=2;0>=r&&(s/=2),t===32&&r>254&&(a={d:n?255:127,c:128,b:0,a:0},r=Math.pow(2,f)-1,s=0)}return r}function Ji(){this.pt=new I,this.level=0,this.env=null;var t=arguments[0];this.computeKey(t)}function mn(){ke.apply(this),this.env=null,this.centrex=null,this.centrey=null,this.level=null;var t=arguments[0],e=arguments[1];this.env=t,this.level=e,this.centrex=(t.getMinX()+t.getMaxX())/2,this.centrey=(t.getMinY()+t.getMaxY())/2}function Pn(){}function ti(){ke.apply(this)}function On(){this.root=null,this.minExtent=1,this.root=new ti}function bo(t){this.geometryFactory=t||new ot}function Ma(t){this.geometryFactory=t||new ot,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new bo(this.geometryFactory)}function _a(){this.parser=new bo(this.geometryFactory)}function ba(t){this.geometryFactory=t||new ot,this.precisionModel=this.geometryFactory.getPrecisionModel(),this.parser=new yo(this.geometryFactory)}function Ki(t){return[t.x,t.y]}function Da(t){this.geometryFactory=t||new ot}function ji(){if(this.noder=null,this.scaleFactor=null,this.offsetX=null,this.offsetY=null,this.isScaled=!1,arguments.length===2){var t=arguments[0],e=arguments[1];ji.call(this,t,e,0,0)}else if(arguments.length===4){var n=arguments[0],r=arguments[1];this.noder=n,this.scaleFactor=r,this.isScaled=!this.isIntegerPrecision()}}function Qi(){if(this.inputGeom=null,this.isClosedEndpointsInInterior=!0,this.nonSimpleLocation=null,arguments.length===1){var t=arguments[0];this.inputGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.inputGeom=e,this.isClosedEndpointsInInterior=!n.isInBoundary(2)}}function gs(){this.pt=null,this.isClosed=null,this.degree=null;var t=arguments[0];this.pt=t,this.isClosed=!1,this.degree=0}function ct(){if(this.quadrantSegments=ct.DEFAULT_QUADRANT_SEGMENTS,this.endCapStyle=ct.CAP_ROUND,this.joinStyle=ct.JOIN_ROUND,this.mitreLimit=ct.DEFAULT_MITRE_LIMIT,this._isSingleSided=!1,this.simplifyFactor=ct.DEFAULT_SIMPLIFY_FACTOR,arguments.length!==0){if(arguments.length===1){var t=arguments[0];this.setQuadrantSegments(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.setQuadrantSegments(e),this.setEndCapStyle(n)}else if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3];this.setQuadrantSegments(r),this.setEndCapStyle(s),this.setJoinStyle(a),this.setMitreLimit(c)}}}function Do(){this.minIndex=-1,this.minCoord=null,this.minDe=null,this.orientedDe=null}function fs(){this.array_=[]}function Ao(){this.finder=null,this.dirEdgeList=new P,this.nodes=new P,this.rightMostCoord=null,this.env=null,this.finder=new Do}function Xt(){this.inputLine=null,this.distanceTol=null,this.isDeleted=null,this.angleOrientation=k.COUNTERCLOCKWISE;var t=arguments[0];this.inputLine=t}function tr(){this.ptList=null,this.precisionModel=null,this.minimimVertexDistance=0,this.ptList=new P}function Ue(){this.maxCurveSegmentError=0,this.filletAngleQuantum=null,this.closingSegLengthFactor=1,this.segList=null,this.distance=0,this.precisionModel=null,this.bufParams=null,this.li=null,this.s0=null,this.s1=null,this.s2=null,this.seg0=new et,this.seg1=new et,this.offset0=new et,this.offset1=new et,this.side=0,this._hasNarrowConcaveAngle=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.precisionModel=t,this.bufParams=e,this.li=new zt,this.filletAngleQuantum=Math.PI/2/e.getQuadrantSegments(),e.getQuadrantSegments()>=8&&e.getJoinStyle()===ct.JOIN_ROUND&&(this.closingSegLengthFactor=Ue.MAX_CLOSING_SEG_LEN_FACTOR),this.init(n)}function er(){this.distance=0,this.precisionModel=null,this.bufParams=null;var t=arguments[0],e=arguments[1];this.precisionModel=t,this.bufParams=e}function ds(){this.subgraphs=null,this.seg=new et,this.cga=new k;var t=arguments[0];this.subgraphs=t}function ps(){this.upwardSeg=null,this.leftDepth=null;var t=arguments[0],e=arguments[1];this.upwardSeg=new et(t),this.leftDepth=e}function Fo(){this.inputGeom=null,this.distance=null,this.curveBuilder=null,this.curveList=new P;var t=arguments[0],e=arguments[1],n=arguments[2];this.inputGeom=t,this.distance=e,this.curveBuilder=n}function nr(){this._hasIntersection=!1,this.hasProper=!1,this.hasProperInterior=!1,this.hasInterior=!1,this.properIntersectionPoint=null,this.li=null,this.isSelfIntersection=null,this.numIntersections=0,this.numInteriorIntersections=0,this.numProperIntersections=0,this.numTests=0;var t=arguments[0];this.li=t}function Mn(){this.bufParams=null,this.workingPrecisionModel=null,this.workingNoder=null,this.geomFact=null,this.graph=null,this.edgeList=new as;var t=arguments[0];this.bufParams=t}function ir(){this.li=new zt,this.segStrings=null;var t=arguments[0];this.segStrings=t}function xi(){this.li=null,this.pt=null,this.originalPt=null,this.ptScaled=null,this.p0Scaled=null,this.p1Scaled=null,this.scaleFactor=null,this.minx=null,this.maxx=null,this.miny=null,this.maxy=null,this.corner=new Array(4).fill(null),this.safeEnv=null;var t=arguments[0],e=arguments[1],n=arguments[2];if(this.originalPt=t,this.pt=t,this.scaleFactor=e,this.li=n,0>=e)throw new d;e!==1&&(this.pt=new I(this.scale(t.x),this.scale(t.y)),this.p0Scaled=new I,this.p1Scaled=new I),this.initCorners(this.pt)}function _n(){this.tempEnv1=new O,this.selectedSegment=new et}function ms(){this.index=null;var t=arguments[0];this.index=t}function rr(){_n.apply(this),this.hotPixel=null,this.parentEdge=null,this.hotPixelVertexIndex=null,this._isNodeAdded=!1;var t=arguments[0],e=arguments[1],n=arguments[2];this.hotPixel=t,this.parentEdge=e,this.hotPixelVertexIndex=n}function Go(){this.li=null,this.interiorIntersections=null;var t=arguments[0];this.li=t,this.interiorIntersections=new P}function qo(){this.pm=null,this.li=null,this.scaleFactor=null,this.noder=null,this.pointSnapper=null,this.nodedSegStrings=null;var t=arguments[0];this.pm=t,this.li=new zt,this.li.setPrecisionModel(t),this.scaleFactor=t.getScale()}function Yt(){if(this.argGeom=null,this.distance=null,this.bufParams=new ct,this.resultGeometry=null,this.saveException=null,arguments.length===1){var t=arguments[0];this.argGeom=t}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.argGeom=e,this.bufParams=n}}function ei(){this.comps=null;var t=arguments[0];this.comps=t}function he(){if(this.component=null,this.segIndex=null,this.pt=null,arguments.length===2){var t=arguments[0],e=arguments[1];he.call(this,t,he.INSIDE_AREA,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.component=n,this.segIndex=r,this.pt=s}}function ni(){this.pts=null;var t=arguments[0];this.pts=t}function sr(){this.locations=null;var t=arguments[0];this.locations=t}function _e(){if(this.geom=null,this.terminateDistance=0,this.ptLocator=new Wn,this.minDistanceLocation=null,this.minDistance=p.MAX_VALUE,arguments.length===2){var t=arguments[0],e=arguments[1];_e.call(this,t,e,0)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.geom=new Array(2).fill(null),this.geom[0]=n,this.geom[1]=r,this.terminateDistance=s}}function Bo(){this.factory=null,this.directedEdges=new P,this.coordinates=null;var t=arguments[0];this.factory=t}function Se(){this._isMarked=!1,this._isVisited=!1,this.data=null}function ye(){Se.apply(this),this.parentEdge=null,this.from=null,this.to=null,this.p0=null,this.p1=null,this.sym=null,this.edgeDirection=null,this.quadrant=null,this.angle=null;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.from=t,this.to=e,this.edgeDirection=r,this.p0=t.getCoordinate(),this.p1=n;var s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y;this.quadrant=ht.quadrant(s,a),this.angle=Math.atan2(a,s)}function or(){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];ye.call(this,t,e,n,r)}function Xe(){if(Se.apply(this),this.dirEdge=null,arguments.length!==0){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.setDirectedEdges(t,e)}}}function zo(){this.outEdges=new P,this.sorted=!1}function on(){if(Se.apply(this),this.pt=null,this.deStar=null,arguments.length===1){var t=arguments[0];on.call(this,t,new zo)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.pt=e,this.deStar=n}}function vs(){Xe.apply(this),this.line=null;var t=arguments[0];this.line=t}function Vo(){this.nodeMap=new At}function Ei(){this.edges=new kt,this.dirEdges=new kt,this.nodeMap=new Vo}function ys(){Ei.apply(this)}function ko(){this.graph=new ys,this.mergedLineStrings=null,this.factory=null,this.edgeStrings=null}function ar(){this.edgeRing=null,this.next=null,this.label=-1;var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];ye.call(this,t,e,n,r)}function xs(){Xe.apply(this),this.line=null;var t=arguments[0];this.line=t}function be(){this.factory=null,this.deList=new P,this.lowestEdge=null,this.ring=null,this.ringPts=null,this.holes=null,this.shell=null,this._isHole=null,this._isProcessed=!1,this._isIncludedSet=!1,this._isIncluded=!1;var t=arguments[0];this.factory=t}function Uo(){}function Ft(){Ei.apply(this),this.factory=null;var t=arguments[0];this.factory=t}function ce(){if(this.lineStringAdder=new Es(this),this.graph=null,this.dangles=new P,this.cutEdges=new P,this.invalidRingLines=new P,this.holeList=null,this.shellList=null,this.polyList=null,this.isCheckingRingsValid=!0,this.extractOnlyPolygonal=null,this.geomFactory=null,arguments.length===0)ce.call(this,!1);else if(arguments.length===1){var t=arguments[0];this.extractOnlyPolygonal=t}}function Es(){this.p=null;var t=arguments[0];this.p=t}function Is(){}function ur(){if(this.edgeEnds=new P,arguments.length===1){var t=arguments[0];ur.call(this,null,t)}else if(arguments.length===2){var e=arguments[1];ze.call(this,e.getEdge(),e.getCoordinate(),e.getDirectedCoordinate(),new Mt(e.getLabel())),this.insert(e)}}function Ns(){Kn.apply(this)}function Cs(){var t=arguments[0],e=arguments[1];nn.call(this,t,e)}function lr(){Jn.apply(this)}function ws(){this.li=new zt,this.ptLocator=new Wn,this.arg=null,this.nodes=new pi(new lr),this.im=null,this.isolatedEdges=new P,this.invalidPoint=null;var t=arguments[0];this.arg=t}function hr(){this.rectEnv=null;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal()}function Xo(){this.li=new zt,this.rectEnv=null,this.diagUp0=null,this.diagUp1=null,this.diagDown0=null,this.diagDown1=null;var t=arguments[0];this.rectEnv=t,this.diagUp0=new I(t.getMinX(),t.getMinY()),this.diagUp1=new I(t.getMaxX(),t.getMaxY()),this.diagDown0=new I(t.getMinX(),t.getMaxY()),this.diagDown1=new I(t.getMaxX(),t.getMinY())}function bn(){this._isDone=!1}function Ii(){this.rectangle=null,this.rectEnv=null;var t=arguments[0];this.rectangle=t,this.rectEnv=t.getEnvelopeInternal()}function Ss(){bn.apply(this),this.rectEnv=null,this._intersects=!1;var t=arguments[0];this.rectEnv=t}function Ls(){bn.apply(this),this.rectSeq=null,this.rectEnv=null,this._containsPoint=!1;var t=arguments[0];this.rectSeq=t.getExteriorRing().getCoordinateSequence(),this.rectEnv=t.getEnvelopeInternal()}function Rs(){bn.apply(this),this.rectEnv=null,this.rectIntersector=null,this.hasIntersection=!1,this.p0=new I,this.p1=new I;var t=arguments[0];this.rectEnv=t.getEnvelopeInternal(),this.rectIntersector=new Xo(this.rectEnv)}function gt(){if(this._relate=null,arguments.length===2){var t=arguments[0],e=arguments[1];Ln.call(this,t,e),this._relate=new ws(this.arg)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];Ln.call(this,n,r,s),this._relate=new ws(this.arg)}}function xe(){this.geomFactory=null,this.skipEmpty=!1,this.inputGeoms=null;var t=arguments[0];this.geomFactory=xe.extractFactory(t),this.inputGeoms=t}function cr(){this.pointGeom=null,this.otherGeom=null,this.geomFact=null;var t=arguments[0],e=arguments[1];this.pointGeom=t,this.otherGeom=e,this.geomFact=e.getFactory()}function Dn(){this.sortIndex=-1,this.comps=null;var t=arguments[0],e=arguments[1];this.sortIndex=t,this.comps=e}function Le(){this.inputPolys=null,this.geomFactory=null;var t=arguments[0];this.inputPolys=t,this.inputPolys===null&&(this.inputPolys=new P)}function An(){if(this.polygons=new P,this.lines=new P,this.points=new P,this.geomFact=null,arguments.length===1){if(U(arguments[0],X)){var t=arguments[0];this.extract(t)}else if(arguments[0]instanceof H){var e=arguments[0];this.extract(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.geomFact=r,this.extract(n)}}function gr(){this.geometryFactory=new ot,this.geomGraph=null,this.disconnectedRingcoord=null;var t=arguments[0];this.geomGraph=t}function Ye(){this.items=new P,this.subnode=[null,null]}function an(){if(this.min=null,this.max=null,arguments.length===0)this.min=0,this.max=0;else if(arguments.length===1){var t=arguments[0];this.init(t.min,t.max)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.init(e,n)}}function fr(){this.pt=0,this.level=0,this.interval=null;var t=arguments[0];this.computeKey(t)}function vn(){Ye.apply(this),this.interval=null,this.centre=null,this.level=null;var t=arguments[0],e=arguments[1];this.interval=t,this.level=e,this.centre=(t.getMin()+t.getMax())/2}function Ni(){Ye.apply(this)}function Ci(){this.root=null,this.minExtent=1,this.root=new Ni}function Yo(){}function Ts(){this.ring=null,this.tree=null,this.crossings=0,this.interval=new an;var t=arguments[0];this.ring=t,this.buildIndex()}function dr(){_n.apply(this),this.mcp=null,this.p=null;var t=arguments[0],e=arguments[1];this.mcp=t,this.p=e}function Ho(){this.nodes=new pi(new lr)}function Wo(){this.li=new zt,this.geomGraph=null,this.nodeGraph=new Ho,this.invalidPoint=null;var t=arguments[0];this.geomGraph=t}function $o(){this.graph=null,this.rings=new P,this.totalEnv=new O,this.index=null,this.nestedPt=null;var t=arguments[0];this.graph=t}function lt(){if(this.errorType=null,this.pt=null,arguments.length===1){var t=arguments[0];lt.call(this,t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.errorType=e,n!==null&&(this.pt=n.copy())}}function Re(){this.parentGeometry=null,this.isSelfTouchingRingFormingHoleValid=!1,this.validErr=null;var t=arguments[0];this.parentGeometry=t}function Ps(){de.CoordinateOperation.apply(this),this.targetPM=null,this.removeCollapsed=!0;var t=arguments[0],e=arguments[1];this.targetPM=t,this.removeCollapsed=e}function ii(){this.targetPM=null,this.removeCollapsed=!0,this.changePrecisionModel=!1,this.isPointwise=!1;var t=arguments[0];this.targetPM=t}function pr(){this.pts=null,this.usePt=null,this.distanceTolerance=null,this.seg=new et;var t=arguments[0];this.pts=t}function wi(){this.inputGeom=null,this.distanceTolerance=null,this.isEnsureValidTopology=!0;var t=arguments[0];this.inputGeom=t}function mr(){ee.apply(this),this.isEnsureValidTopology=!0,this.distanceTolerance=null;var t=arguments[0],e=arguments[1];this.isEnsureValidTopology=t,this.distanceTolerance=e}function vr(){if(this.parent=null,this.index=null,arguments.length===2){var t=arguments[0],e=arguments[1];vr.call(this,t,e,null,-1)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[2],a=arguments[3];et.call(this,n,r),this.parent=s,this.index=a}}function yn(){if(this.parentLine=null,this.segs=null,this.resultSegs=new P,this.minimumSize=null,arguments.length===1){var t=arguments[0];yn.call(this,t,2)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.parentLine=e,this.minimumSize=n,this.init()}}function Si(){this.index=new On}function Zo(){this.querySeg=null,this.items=new P;var t=arguments[0];this.querySeg=t}function yr(){this.li=new zt,this.inputIndex=new Si,this.outputIndex=new Si,this.line=null,this.linePts=null,this.distanceTolerance=0;var t=arguments[0],e=arguments[1];this.inputIndex=t,this.outputIndex=e}function Jo(){this.inputIndex=new Si,this.outputIndex=new Si,this.distanceTolerance=0}function ri(){this.inputGeom=null,this.lineSimplifier=new Jo,this.linestringMap=null;var t=arguments[0];this.inputGeom=t}function xr(){ee.apply(this),this.linestringMap=null;var t=arguments[0];this.linestringMap=t}function Os(){this.tps=null;var t=arguments[0];this.tps=t}function Li(){this.seg=null,this.segLen=null,this.splitPt=null,this.minimumLen=0;var t=arguments[0];this.seg=t,this.segLen=t.getLength()}function Ko(){}function Er(){}function Nt(){}function pt(){if(this.p=null,arguments.length===1){var t=arguments[0];this.p=new I(t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p=new I(e,n)}else if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.p=new I(r,s,a)}}function Fn(){this._isOnConstraint=null,this.constraint=null;var t=arguments[0];pt.call(this,t)}function Rt(){this._rot=null,this.vertex=null,this.next=null,this.data=null}function Ir(){this.subdiv=null,this.isUsingTolerance=!1;var t=arguments[0];this.subdiv=t,this.isUsingTolerance=t.getTolerance()>0}function jo(){}function Ms(){this.subdiv=null,this.lastEdge=null;var t=arguments[0];this.subdiv=t,this.init()}function Ri(){if(this.seg=null,arguments.length===1){if(typeof arguments[0]=="string"){var t=arguments[0];C.call(this,t)}else if(arguments[0]instanceof et){var e=arguments[0];C.call(this,"Locate failed to converge (at edge: "+e+").  Possible causes include invalid Subdivision topology or very close sites"),this.seg=new et(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];C.call(this,Ri.msgWithSpatial(n,r)),this.seg=new et(r)}}function Ti(){}function Ee(){this.visitedKey=0,this.quadEdges=new P,this.startingEdge=null,this.tolerance=null,this.edgeCoincidenceTolerance=null,this.frameVertex=new Array(3).fill(null),this.frameEnv=null,this.locator=null,this.seg=new et,this.triEdges=new Array(3).fill(null);var t=arguments[0],e=arguments[1];this.tolerance=e,this.edgeCoincidenceTolerance=e/Ee.EDGE_COINCIDENCE_TOL_FACTOR,this.createFrame(t),this.startingEdge=this.initSubdiv(),this.locator=new Ms(this)}function _s(){}function bs(){this.triList=new P}function Ds(){this.triList=new P}function As(){this.coordList=new A,this.triCoords=new P}function si(){if(this.ls=null,this.data=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.ls=new et(t,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.ls=new et(n,r),this.data=s}else if(arguments.length===6){var a=arguments[0],c=arguments[1],f=arguments[2],y=arguments[3],L=arguments[4],M=arguments[5];si.call(this,new I(a,c,f),new I(y,L,M))}else if(arguments.length===7){var D=arguments[0],q=arguments[1],$=arguments[2],j=arguments[3],tt=arguments[4],It=arguments[5],bt=arguments[6];si.call(this,new I(D,q,$),new I(j,tt,It),bt)}}function Nr(){}function Fs(){if(this.p=null,this.data=null,this.left=null,this.right=null,this.count=null,arguments.length===2){var t=arguments[0],e=arguments[1];this.p=new I(t),this.left=null,this.right=null,this.count=1,this.data=e}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.p=new I(n,r),this.left=null,this.right=null,this.count=1,this.data=s}}function oi(){if(this.root=null,this.numberOfNodes=null,this.tolerance=null,arguments.length===0)oi.call(this,0);else if(arguments.length===1){var t=arguments[0];this.tolerance=t}}function Gs(){this.tolerance=null,this.matchNode=null,this.matchDist=0,this.p=null;var t=arguments[0],e=arguments[1];this.p=t,this.tolerance=e}function Gn(){this.initialVertices=null,this.segVertices=null,this.segments=new P,this.subdiv=null,this.incDel=null,this.convexHull=null,this.splitFinder=new Er,this.kdt=null,this.vertexFactory=null,this.computeAreaEnv=null,this.splitPt=null,this.tolerance=null;var t=arguments[0],e=arguments[1];this.initialVertices=new P(t),this.tolerance=e,this.kdt=new oi(e)}function Jt(){this.siteCoords=null,this.tolerance=0,this.subdiv=null}function Pi(){this.siteCoords=null,this.constraintLines=null,this.tolerance=0,this.subdiv=null,this.constraintVertexMap=new At}function Cr(){this.siteCoords=null,this.tolerance=0,this.subdiv=null,this.clipEnv=null,this.diagramEnv=null}function qs(){}Array.prototype.fill||(Array.prototype.fill=function(t){for(var e=Object(this),n=parseInt(e.length,10),r=arguments[1],s=parseInt(r,10)||0,a=0>s?Math.max(n+s,0):Math.min(s,n),c=arguments[2],f=c===void 0?n:parseInt(c,10)||0,y=0>f?Math.max(n+f,0):Math.min(f,n);y>a;a++)e[a]=t;return e}),Number.isFinite=Number.isFinite||function(t){return typeof t=="number"&&isFinite(t)},Number.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t},Number.parseFloat=Number.parseFloat||parseFloat,Number.isNaN=Number.isNaN||function(t){return t!==t},Math.trunc=Math.trunc||function(t){return 0>t?Math.ceil(t):Math.floor(t)},u(g.prototype,{interfaces_:function(){return[]},getClass:function(){return g}}),g.equalsWithTolerance=function(t,e,n){return Math.abs(t-e)<=n},p.isNaN=function(t){return Number.isNaN(t)},p.doubleToLongBits=function(t){return t},p.longBitsToDouble=function(t){return t},p.isInfinite=function(t){return!Number.isFinite(t)},p.MAX_VALUE=Number.MAX_VALUE,S(b,C),u(b.prototype,{interfaces_:function(){return[]},getClass:function(){return b}}),u(T.prototype,{interfaces_:function(){return[]},getClass:function(){return T}}),T.shouldNeverReachHere=function(){if(arguments.length===0)T.shouldNeverReachHere(null);else if(arguments.length===1){var t=arguments[0];throw new b("Should never reach here"+(t!==null?": "+t:""))}},T.isTrue=function(){if(arguments.length===1){var t=arguments[0];T.isTrue(t,null)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(!e)throw n===null?new b:new b(n)}},T.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];T.equals(t,e,null)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(!r.equals(n))throw new b("Expected "+n+" but encountered "+r+(s!==null?": "+s:""))}},u(I.prototype,{setOrdinate:function(t,e){switch(t){case I.X:this.x=e;break;case I.Y:this.y=e;break;case I.Z:this.z=e;break;default:throw new d}},equals2D:function(){if(arguments.length===1){var t=arguments[0];return this.x!==t.x?!1:this.y===t.y}if(arguments.length===2){var e=arguments[0],n=arguments[1];return g.equalsWithTolerance(this.x,e.x,n)?!!g.equalsWithTolerance(this.y,e.y,n):!1}},getOrdinate:function(t){switch(t){case I.X:return this.x;case I.Y:return this.y;case I.Z:return this.z}throw new d},equals3D:function(t){return this.x===t.x&&this.y===t.y&&(this.z===t.z||p.isNaN(this.z)&&p.isNaN(t.z))},equals:function(t){return t instanceof I?this.equals2D(t):!1},equalInZ:function(t,e){return g.equalsWithTolerance(this.z,t.z,e)},compareTo:function(t){var e=t;return this.x<e.x?-1:this.x>e.x?1:this.y<e.y?-1:this.y>e.y?1:0},clone:function(){try{var t=null;return t}catch(e){if(e instanceof CloneNotSupportedException)return T.shouldNeverReachHere("this shouldn't happen because this class is Cloneable"),null;throw e}finally{}},copy:function(){return new I(this)},toString:function(){return"("+this.x+", "+this.y+", "+this.z+")"},distance3D:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return Math.sqrt(e*e+n*n+r*r)},distance:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+I.hashCode(this.x),t=37*t+I.hashCode(this.y)},setCoordinate:function(t){this.x=t.x,this.y=t.y,this.z=t.z},interfaces_:function(){return[m,E,N]},getClass:function(){return I}}),I.hashCode=function(){if(arguments.length===1){var t=arguments[0],e=p.doubleToLongBits(t);return Math.trunc(e^e>>>32)}},u(Y.prototype,{compare:function(t,e){var n=t,r=e,s=Y.compare(n.x,r.x);if(s!==0)return s;var a=Y.compare(n.y,r.y);if(a!==0)return a;if(this.dimensionsToTest<=2)return 0;var c=Y.compare(n.z,r.z);return c},interfaces_:function(){return[x]},getClass:function(){return Y}}),Y.compare=function(t,e){return e>t?-1:t>e?1:p.isNaN(t)?p.isNaN(e)?0:-1:p.isNaN(e)?1:0},I.DimensionalComparator=Y,I.serialVersionUID=6683108902428367e3,I.NULL_ORDINATE=p.NaN,I.X=0,I.Y=1,I.Z=2,W.prototype.hasNext=function(){},W.prototype.next=function(){},W.prototype.remove=function(){},X.prototype.add=function(){},X.prototype.addAll=function(){},X.prototype.isEmpty=function(){},X.prototype.iterator=function(){},X.prototype.size=function(){},X.prototype.toArray=function(){},X.prototype.remove=function(){},R.prototype=new Error,R.prototype.name="IndexOutOfBoundsException",w.prototype=Object.create(X.prototype),w.prototype.constructor=w,w.prototype.get=function(){},w.prototype.set=function(){},w.prototype.isEmpty=function(){},F.prototype=new Error,F.prototype.name="NoSuchElementException",Z.prototype=new Error,Z.prototype.name="OperationNotSupported",P.prototype=Object.create(w.prototype),P.prototype.constructor=P,P.prototype.ensureCapacity=function(){},P.prototype.interfaces_=function(){return[w,X]},P.prototype.add=function(t){return this.array_.push(t),!0},P.prototype.clear=function(){this.array_=[]},P.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},P.prototype.set=function(t,e){var n=this.array_[t];return this.array_[t]=e,n},P.prototype.iterator=function(){return new wr(this)},P.prototype.get=function(t){if(0>t||t>=this.size())throw new R;return this.array_[t]},P.prototype.isEmpty=function(){return this.array_.length===0},P.prototype.size=function(){return this.array_.length},P.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},P.prototype.remove=function(t){for(var e=!1,n=0,r=this.array_.length;r>n;n++)if(this.array_[n]===t){this.array_.splice(n,1),e=!0;break}return e};var wr=function(t){this.arrayList_=t,this.position_=0};wr.prototype.next=function(){if(this.position_===this.arrayList_.size())throw new F;return this.arrayList_.get(this.position_++)},wr.prototype.hasNext=function(){return this.position_<this.arrayList_.size()},wr.prototype.set=function(t){return this.arrayList_.set(this.position_-1,t)},wr.prototype.remove=function(){throw new Z},S(A,P),u(A.prototype,{getCoordinate:function(t){return this.get(t)},addAll:function(){if(arguments.length===2){for(var t=arguments[0],e=arguments[1],n=!1,r=t.iterator();r.hasNext();)this.add(r.next(),e),n=!0;return n}return P.prototype.addAll.apply(this,arguments)},clone:function(){for(var e=P.prototype.clone.call(this),n=0;n<this.size();n++)e.add(n,this.get(n).copy());return e},toCoordinateArray:function(){return this.toArray(A.coordArrayType)},add:function(){if(arguments.length===1){var t=arguments[0];P.prototype.add.call(this,t)}else if(arguments.length===2){if(arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var e=arguments[0],n=arguments[1];return this.add(e,n,!0),!0}if(arguments[0]instanceof I&&typeof arguments[1]=="boolean"){var r=arguments[0],s=arguments[1];if(!s&&this.size()>=1){var a=this.get(this.size()-1);if(a.equals2D(r))return null}P.prototype.add.call(this,r)}else if(arguments[0]instanceof Object&&typeof arguments[1]=="boolean"){var c=arguments[0],f=arguments[1];return this.add(c,f),!0}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&arguments[0]instanceof Array&&typeof arguments[1]=="boolean"){var y=arguments[0],L=arguments[1],M=arguments[2];if(M)for(var D=0;D<y.length;D++)this.add(y[D],L);else for(var D=y.length-1;D>=0;D--)this.add(y[D],L);return!0}if(typeof arguments[2]=="boolean"&&Number.isInteger(arguments[0])&&arguments[1]instanceof I){var q=arguments[0],$=arguments[1],j=arguments[2];if(!j){var tt=this.size();if(tt>0){if(q>0){var It=this.get(q-1);if(It.equals2D($))return null}if(tt>q){var bt=this.get(q);if(bt.equals2D($))return null}}}P.prototype.add.call(this,q,$)}}else if(arguments.length===4){var Fe=arguments[0],ai=arguments[1],Vs=arguments[2],ks=arguments[3],Us=1;Vs>ks&&(Us=-1);for(var D=Vs;D!==ks;D+=Us)this.add(Fe[D],ai);return!0}},closeRing:function(){this.size()>0&&this.add(new I(this.get(0)),!1)},interfaces_:function(){return[]},getClass:function(){return A}}),A.coordArrayType=new Array(0).fill(null),u(O.prototype,{getArea:function(){return this.getWidth()*this.getHeight()},equals:function(t){if(!(t instanceof O))return!1;var e=t;return this.isNull()?e.isNull():this.maxx===e.getMaxX()&&this.maxy===e.getMaxY()&&this.minx===e.getMinX()&&this.miny===e.getMinY()},intersection:function(t){if(this.isNull()||t.isNull()||!this.intersects(t))return new O;var e=this.minx>t.minx?this.minx:t.minx,n=this.miny>t.miny?this.miny:t.miny,r=this.maxx<t.maxx?this.maxx:t.maxx,s=this.maxy<t.maxy?this.maxy:t.maxy;return new O(e,r,n,s)},isNull:function(){return this.maxx<this.minx},getMaxX:function(){return this.maxx},covers:function(){if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];return this.covers(t.x,t.y)}if(arguments[0]instanceof O){var e=arguments[0];return this.isNull()||e.isNull()?!1:e.getMinX()>=this.minx&&e.getMaxX()<=this.maxx&&e.getMinY()>=this.miny&&e.getMaxY()<=this.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:n>=this.minx&&n<=this.maxx&&r>=this.miny&&r<=this.maxy}},intersects:function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.isNull()||t.isNull()?!1:!(t.minx>this.maxx||t.maxx<this.minx||t.miny>this.maxy||t.maxy<this.miny)}if(arguments[0]instanceof I){var e=arguments[0];return this.intersects(e.x,e.y)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.isNull()?!1:!(n>this.maxx||n<this.minx||r>this.maxy||r<this.miny)}},getMinY:function(){return this.miny},getMinX:function(){return this.minx},expandToInclude:function(){if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];this.expandToInclude(t.x,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];if(e.isNull())return null;this.isNull()?(this.minx=e.getMinX(),this.maxx=e.getMaxX(),this.miny=e.getMinY(),this.maxy=e.getMaxY()):(e.minx<this.minx&&(this.minx=e.minx),e.maxx>this.maxx&&(this.maxx=e.maxx),e.miny<this.miny&&(this.miny=e.miny),e.maxy>this.maxy&&(this.maxy=e.maxy))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.isNull()?(this.minx=n,this.maxx=n,this.miny=r,this.maxy=r):(n<this.minx&&(this.minx=n),n>this.maxx&&(this.maxx=n),r<this.miny&&(this.miny=r),r>this.maxy&&(this.maxy=r))}},minExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return e>t?t:e},getWidth:function(){return this.isNull()?0:this.maxx-this.minx},compareTo:function(t){var e=t;return this.isNull()?e.isNull()?0:-1:e.isNull()?1:this.minx<e.minx?-1:this.minx>e.minx?1:this.miny<e.miny?-1:this.miny>e.miny?1:this.maxx<e.maxx?-1:this.maxx>e.maxx?1:this.maxy<e.maxy?-1:this.maxy>e.maxy?1:0},translate:function(t,e){return this.isNull()?null:void this.init(this.getMinX()+t,this.getMaxX()+t,this.getMinY()+e,this.getMaxY()+e)},toString:function(){return"Env["+this.minx+" : "+this.maxx+", "+this.miny+" : "+this.maxy+"]"},setToNull:function(){this.minx=0,this.maxx=-1,this.miny=0,this.maxy=-1},getHeight:function(){return this.isNull()?0:this.maxy-this.miny},maxExtent:function(){if(this.isNull())return 0;var t=this.getWidth(),e=this.getHeight();return t>e?t:e},expandBy:function(){if(arguments.length===1){var t=arguments[0];this.expandBy(t,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.isNull())return null;this.minx-=e,this.maxx+=e,this.miny-=n,this.maxy+=n,(this.minx>this.maxx||this.miny>this.maxy)&&this.setToNull()}},contains:function(){if(arguments.length===1){if(arguments[0]instanceof O){var t=arguments[0];return this.covers(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.covers(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return this.covers(n,r)}},centre:function(){return this.isNull()?null:new I((this.getMinX()+this.getMaxX())/2,(this.getMinY()+this.getMaxY())/2)},init:function(){if(arguments.length===0)this.setToNull();else if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];this.init(t.x,t.x,t.y,t.y)}else if(arguments[0]instanceof O){var e=arguments[0];this.minx=e.minx,this.maxx=e.maxx,this.miny=e.miny,this.maxy=e.maxy}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.init(n.x,r.x,n.y,r.y)}else if(arguments.length===4){var s=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3];a>s?(this.minx=s,this.maxx=a):(this.minx=a,this.maxx=s),f>c?(this.miny=c,this.maxy=f):(this.miny=f,this.maxy=c)}},getMaxY:function(){return this.maxy},distance:function(t){if(this.intersects(t))return 0;var e=0;this.maxx<t.minx?e=t.minx-this.maxx:this.minx>t.maxx&&(e=this.minx-t.maxx);var n=0;return this.maxy<t.miny?n=t.miny-this.maxy:this.miny>t.maxy&&(n=this.miny-t.maxy),e===0?n:n===0?e:Math.sqrt(e*e+n*n)},hashCode:function(){var t=17;return t=37*t+I.hashCode(this.minx),t=37*t+I.hashCode(this.maxx),t=37*t+I.hashCode(this.miny),t=37*t+I.hashCode(this.maxy)},interfaces_:function(){return[m,N]},getClass:function(){return O}}),O.intersects=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2];return n.x>=(t.x<e.x?t.x:e.x)&&n.x<=(t.x>e.x?t.x:e.x)&&n.y>=(t.y<e.y?t.y:e.y)&&n.y<=(t.y>e.y?t.y:e.y)}if(arguments.length===4){var r=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3],f=Math.min(a.x,c.x),y=Math.max(a.x,c.x),L=Math.min(r.x,s.x),M=Math.max(r.x,s.x);return L>y||f>M?!1:(f=Math.min(a.y,c.y),y=Math.max(a.y,c.y),L=Math.min(r.y,s.y),M=Math.max(r.y,s.y),L>y?!1:!(f>M))}},O.serialVersionUID=5873921885273102e3,S(G,z),u(G.prototype,{interfaces_:function(){return[]},getClass:function(){return G}}),u(v.prototype,{interfaces_:function(){return[]},getClass:function(){return v}}),v.toLocationSymbol=function(t){switch(t){case v.EXTERIOR:return"e";case v.BOUNDARY:return"b";case v.INTERIOR:return"i";case v.NONE:return"-"}throw new d},v.INTERIOR=0,v.BOUNDARY=1,v.EXTERIOR=2,v.NONE=-1,u(st.prototype,{interfaces_:function(){return[]},getClass:function(){return st}}),st.log10=function(t){var e=Math.log(t);return p.isInfinite(e)||p.isNaN(e)?e:e/st.LOG_10},st.min=function(t,e,n,r){var s=t;return s>e&&(s=e),s>n&&(s=n),s>r&&(s=r),s},st.clamp=function(){if(typeof arguments[2]=="number"&&typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1],n=arguments[2];return e>t?e:t>n?n:t}if(Number.isInteger(arguments[2])&&Number.isInteger(arguments[0])&&Number.isInteger(arguments[1])){var r=arguments[0],s=arguments[1],a=arguments[2];return s>r?s:r>a?a:r}},st.wrap=function(t,e){return 0>t?e- -t%e:t%e},st.max=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=t;return e>r&&(r=e),n>r&&(r=n),r}if(arguments.length===4){var s=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3],r=s;return a>r&&(r=a),c>r&&(r=c),f>r&&(r=f),r}},st.average=function(t,e){return(t+e)/2},st.LOG_10=Math.log(10),Ct.prototype.append=function(t){this.str+=t},Ct.prototype.setCharAt=function(t,e){return this.str.substr(0,t)+e+this.str.substr(t+1)},Ct.prototype.toString=function(t){return this.str},Tt.prototype.intValue=function(){return this.value},Tt.prototype.compareTo=function(t){return this.value<t?-1:this.value>t?1:0},Tt.isNaN=function(t){return Number.isNaN(t)},qt.isWhitespace=function(t){return 32>=t&&t>=0||t==127},qt.toUpperCase=function(t){return t.toUpperCase()},u(_.prototype,{le:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<=t.lo},extractSignificantDigits:function(t,e){var n=this.abs(),r=_.magnitude(n.hi),s=_.TEN.pow(r);n=n.divide(s),n.gt(_.TEN)?(n=n.divide(_.TEN),r+=1):n.lt(_.ONE)&&(n=n.multiply(_.TEN),r-=1);for(var a=r+1,c=new Ct,f=_.MAX_PRINT_DIGITS-1,y=0;f>=y;y++){t&&y===a&&c.append(".");var L=Math.trunc(n.hi);if(0>L)break;var M=!1,D=0;L>9?(M=!0,D="9"):D="0"+L,c.append(D),n=n.subtract(_.valueOf(L)).multiply(_.TEN),M&&n.selfAdd(_.TEN);var q=!0,$=_.magnitude(n.hi);if(0>$&&Math.abs($)>=f-y&&(q=!1),!q)break}return e[0]=r,c.toString()},sqr:function(){return this.multiply(this)},doubleValue:function(){return this.hi+this.lo},subtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.add(t.negate())}if(typeof arguments[0]=="number"){var e=arguments[0];return this.add(-e)}},equals:function(){if(arguments.length===1){var t=arguments[0];return this.hi===t.hi&&this.lo===t.lo}},isZero:function(){return this.hi===0&&this.lo===0},selfSubtract:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.isNaN()?this:this.selfAdd(-t.hi,-t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.isNaN()?this:this.selfAdd(-e,0)}},getSpecialNumberString:function(){return this.isZero()?"0.0":this.isNaN()?"NaN ":null},min:function(t){return this.le(t)?this:t},selfDivide:function(){if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];return this.selfDivide(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfDivide(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,a=null,c=null,f=null,y=null,L=null,M=null,D=null;return y=this.hi/n,L=_.SPLIT*y,s=L-y,D=_.SPLIT*n,s=L-s,a=y-s,c=D-n,M=y*n,c=D-c,f=n-c,D=s*c-M+s*f+a*c+a*f,L=(this.hi-M-D+this.lo-y*r)/n,D=y+L,this.hi=D,this.lo=y-D+L,this}},dump:function(){return"DD<"+this.hi+", "+this.lo+">"},divide:function(){if(arguments[0]instanceof _){var t=arguments[0],e=null,n=null,r=null,s=null,a=null,c=null,f=null,y=null;a=this.hi/t.hi,c=_.SPLIT*a,e=c-a,y=_.SPLIT*t.hi,e=c-e,n=a-e,r=y-t.hi,f=a*t.hi,r=y-r,s=t.hi-r,y=e*r-f+e*s+n*r+n*s,c=(this.hi-f-y+this.lo-a*t.lo)/t.hi,y=a+c;var L=y,M=a-y+c;return new _(L,M)}if(typeof arguments[0]=="number"){var D=arguments[0];return p.isNaN(D)?_.createNaN():_.copy(this).selfDivide(D,0)}},ge:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>=t.lo},pow:function(t){if(t===0)return _.valueOf(1);var e=new _(this),n=_.valueOf(1),r=Math.abs(t);if(r>1)for(;r>0;)r%2===1&&n.selfMultiply(e),r/=2,r>0&&(e=e.sqr());else n=e;return 0>t?n.reciprocal():n},ceil:function(){if(this.isNaN())return _.NaN;var t=Math.ceil(this.hi),e=0;return t===this.hi&&(e=Math.ceil(this.lo)),new _(t,e)},compareTo:function(t){var e=t;return this.hi<e.hi?-1:this.hi>e.hi?1:this.lo<e.lo?-1:this.lo>e.lo?1:0},rint:function(){if(this.isNaN())return this;var t=this.add(.5);return t.floor()},setValue:function(){if(arguments[0]instanceof _){var t=arguments[0];return this.init(t),this}if(typeof arguments[0]=="number"){var e=arguments[0];return this.init(e),this}},max:function(t){return this.ge(t)?this:t},sqrt:function(){if(this.isZero())return _.valueOf(0);if(this.isNegative())return _.NaN;var t=1/Math.sqrt(this.hi),e=this.hi*t,n=_.valueOf(e),r=this.subtract(n.sqr()),s=r.hi*(.5*t);return n.add(s)},selfAdd:function(){if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];return this.selfAdd(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0],n=null,r=null,s=null,a=null,c=null,f=null;return s=this.hi+e,c=s-this.hi,a=s-c,a=e-c+(this.hi-a),f=a+this.lo,n=s+f,r=f+(s-n),this.hi=n+r,this.lo=r+(n-this.hi),this}}else if(arguments.length===2){var y=arguments[0],L=arguments[1],n=null,r=null,M=null,D=null,s=null,a=null,c=null,f=null;s=this.hi+y,M=this.lo+L,c=s-this.hi,f=M-this.lo,a=s-c,D=M-f,a=y-c+(this.hi-a),D=L-f+(this.lo-D),c=a+M,n=s+c,r=c+(s-n),c=D+r;var q=n+c,$=c+(n-q);return this.hi=q,this.lo=$,this}},selfMultiply:function(){if(arguments.length===1){if(arguments[0]instanceof _){var t=arguments[0];return this.selfMultiply(t.hi,t.lo)}if(typeof arguments[0]=="number"){var e=arguments[0];return this.selfMultiply(e,0)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=null,a=null,c=null,f=null,y=null,L=null;y=_.SPLIT*this.hi,s=y-this.hi,L=_.SPLIT*n,s=y-s,a=this.hi-s,c=L-n,y=this.hi*n,c=L-c,f=n-c,L=s*c-y+s*f+a*c+a*f+(this.hi*r+this.lo*n);var M=y+L;s=y-M;var D=L+s;return this.hi=M,this.lo=D,this}},selfSqr:function(){return this.selfMultiply(this)},floor:function(){if(this.isNaN())return _.NaN;var t=Math.floor(this.hi),e=0;return t===this.hi&&(e=Math.floor(this.lo)),new _(t,e)},negate:function(){return this.isNaN()?this:new _(-this.hi,-this.lo)},clone:function(){try{return null}catch(t){if(t instanceof CloneNotSupportedException)return null;throw t}finally{}},multiply:function(){if(arguments[0]instanceof _){var t=arguments[0];return t.isNaN()?_.createNaN():_.copy(this).selfMultiply(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return p.isNaN(e)?_.createNaN():_.copy(this).selfMultiply(e,0)}},isNaN:function(){return p.isNaN(this.hi)},intValue:function(){return Math.trunc(this.hi)},toString:function(){var t=_.magnitude(this.hi);return t>=-3&&20>=t?this.toStandardNotation():this.toSciNotation()},toStandardNotation:function(){var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!0,e),r=e[0]+1,s=n;if(n.charAt(0)===".")s="0"+n;else if(0>r)s="0."+_.stringOfChar("0",-r)+n;else if(n.indexOf(".")===-1){var a=r-n.length,c=_.stringOfChar("0",a);s=n+c+".0"}return this.isNegative()?"-"+s:s},reciprocal:function(){var t=null,e=null,n=null,r=null,s=null,a=null,c=null,f=null;s=1/this.hi,a=_.SPLIT*s,t=a-s,f=_.SPLIT*this.hi,t=a-t,e=s-t,n=f-this.hi,c=s*this.hi,n=f-n,r=this.hi-n,f=t*n-c+t*r+e*n+e*r,a=(1-c-f-s*this.lo)/this.hi;var y=s+a,L=s-y+a;return new _(y,L)},toSciNotation:function(){if(this.isZero())return _.SCI_NOT_ZERO;var t=this.getSpecialNumberString();if(t!==null)return t;var e=new Array(1).fill(null),n=this.extractSignificantDigits(!1,e),r=_.SCI_NOT_EXPONENT_CHAR+e[0];if(n.charAt(0)==="0")throw new IllegalStateException("Found leading zero: "+n);var s="";n.length>1&&(s=n.substring(1));var a=n.charAt(0)+"."+s;return this.isNegative()?"-"+a+r:a+r},abs:function(){return this.isNaN()?_.NaN:this.isNegative()?this.negate():new _(this)},isPositive:function(){return this.hi>0||this.hi===0&&this.lo>0},lt:function(t){return this.hi<t.hi||this.hi===t.hi&&this.lo<t.lo},add:function(){if(arguments[0]instanceof _){var t=arguments[0];return _.copy(this).selfAdd(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return _.copy(this).selfAdd(e)}},init:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];this.hi=t,this.lo=0}else if(arguments[0]instanceof _){var e=arguments[0];this.hi=e.hi,this.lo=e.lo}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];this.hi=n,this.lo=r}},gt:function(t){return this.hi>t.hi||this.hi===t.hi&&this.lo>t.lo},isNegative:function(){return this.hi<0||this.hi===0&&this.lo<0},trunc:function(){return this.isNaN()?_.NaN:this.isPositive()?this.floor():this.ceil()},signum:function(){return this.hi>0?1:this.hi<0?-1:this.lo>0?1:this.lo<0?-1:0},interfaces_:function(){return[N,m,E]},getClass:function(){return _}}),_.sqr=function(t){return _.valueOf(t).selfMultiply(t)},_.valueOf=function(){if(typeof arguments[0]=="string"){var t=arguments[0];return _.parse(t)}if(typeof arguments[0]=="number"){var e=arguments[0];return new _(e)}},_.sqrt=function(t){return _.valueOf(t).sqrt()},_.parse=function(t){for(var e=0,n=t.length;qt.isWhitespace(t.charAt(e));)e++;var r=!1;if(n>e){var s=t.charAt(e);s!=="-"&&s!=="+"||(e++,s==="-"&&(r=!0))}for(var a=new _,c=0,f=0,y=0;!(e>=n);){var L=t.charAt(e);if(e++,qt.isDigit(L)){var M=L-"0";a.selfMultiply(_.TEN),a.selfAdd(M),c++}else{if(L!=="."){if(L==="e"||L==="E"){var D=t.substring(e);try{y=Tt.parseInt(D)}catch(tt){throw tt instanceof NumberFormatException?new NumberFormatException("Invalid exponent "+D+" in string "+t):tt}finally{}break}throw new NumberFormatException("Unexpected character '"+L+"' at position "+e+" in string "+t)}f=c}}var q=a,$=c-f-y;if($===0)q=a;else if($>0){var j=_.TEN.pow($);q=a.divide(j)}else if(0>$){var j=_.TEN.pow(-$);q=a.multiply(j)}return r?q.negate():q},_.createNaN=function(){return new _(p.NaN,p.NaN)},_.copy=function(t){return new _(t)},_.magnitude=function(t){var e=Math.abs(t),n=Math.log(e)/Math.log(10),r=Math.trunc(Math.floor(n)),s=Math.pow(10,r);return e>=10*s&&(r+=1),r},_.stringOfChar=function(t,e){for(var n=new Ct,r=0;e>r;r++)n.append(t);return n.toString()},_.PI=new _(3.141592653589793,12246467991473532e-32),_.TWO_PI=new _(6.283185307179586,24492935982947064e-32),_.PI_2=new _(1.5707963267948966,6123233995736766e-32),_.E=new _(2.718281828459045,14456468917292502e-32),_.NaN=new _(p.NaN,p.NaN),_.EPS=123259516440783e-46,_.SPLIT=134217729,_.MAX_PRINT_DIGITS=32,_.TEN=_.valueOf(10),_.ONE=_.valueOf(1),_.SCI_NOT_EXPONENT_CHAR="E",_.SCI_NOT_ZERO="0.0E0",u(Lt.prototype,{interfaces_:function(){return[]},getClass:function(){return Lt}}),Lt.orientationIndex=function(t,e,n){var r=Lt.orientationIndexFilter(t,e,n);if(1>=r)return r;var s=_.valueOf(e.x).selfAdd(-t.x),a=_.valueOf(e.y).selfAdd(-t.y),c=_.valueOf(n.x).selfAdd(-e.x),f=_.valueOf(n.y).selfAdd(-e.y);return s.selfMultiply(f).selfSubtract(a.selfMultiply(c)).signum()},Lt.signOfDet2x2=function(t,e,n,r){var s=t.multiply(r).selfSubtract(e.multiply(n));return s.signum()},Lt.intersection=function(t,e,n,r){var s=_.valueOf(r.y).selfSubtract(n.y).selfMultiply(_.valueOf(e.x).selfSubtract(t.x)),a=_.valueOf(r.x).selfSubtract(n.x).selfMultiply(_.valueOf(e.y).selfSubtract(t.y)),c=s.subtract(a),f=_.valueOf(r.x).selfSubtract(n.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),y=_.valueOf(r.y).selfSubtract(n.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),L=f.subtract(y),M=L.selfDivide(c).doubleValue(),D=_.valueOf(t.x).selfAdd(_.valueOf(e.x).selfSubtract(t.x).selfMultiply(M)).doubleValue(),q=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(t.y).selfSubtract(n.y)),$=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(t.x).selfSubtract(n.x)),j=q.subtract($),tt=j.selfDivide(c).doubleValue(),It=_.valueOf(n.y).selfAdd(_.valueOf(r.y).selfSubtract(n.y).selfMultiply(tt)).doubleValue();return new I(D,It)},Lt.orientationIndexFilter=function(t,e,n){var r=null,s=(t.x-n.x)*(e.y-n.y),a=(t.y-n.y)*(e.x-n.x),c=s-a;if(s>0){if(0>=a)return Lt.signum(c);r=s+a}else{if(!(0>s)||a>=0)return Lt.signum(c);r=-s-a}var f=Lt.DP_SAFE_EPSILON*r;return c>=f||-c>=f?Lt.signum(c):2},Lt.signum=function(t){return t>0?1:0>t?-1:0},Lt.DP_SAFE_EPSILON=1e-15,u(at.prototype,{setOrdinate:function(t,e,n){},size:function(){},getOrdinate:function(t,e){},getCoordinate:function(){},getCoordinateCopy:function(t){},getDimension:function(){},getX:function(t){},clone:function(){},expandEnvelope:function(t){},copy:function(){},getY:function(t){},toCoordinateArray:function(){},interfaces_:function(){return[E]},getClass:function(){return at}}),at.X=0,at.Y=1,at.Z=2,at.M=3,mt.arraycopy=function(t,e,n,r,s){for(var a=0,c=e;e+s>c;c++)n[r+a]=t[c],a++},mt.getProperty=function(t){return{"line.separator":`
`}[t]},u(Ht.prototype,{getY:function(){var t=this.y/this.w;if(p.isNaN(t)||p.isInfinite(t))throw new G;return t},getX:function(){var t=this.x/this.w;if(p.isNaN(t)||p.isInfinite(t))throw new G;return t},getCoordinate:function(){var t=new I;return t.x=this.getX(),t.y=this.getY(),t},interfaces_:function(){return[]},getClass:function(){return Ht}}),Ht.intersection=function(t,e,n,r){var s=t.y-e.y,a=e.x-t.x,c=t.x*e.y-e.x*t.y,f=n.y-r.y,y=r.x-n.x,L=n.x*r.y-r.x*n.y,M=a*L-y*c,D=f*c-s*L,q=s*y-f*a,$=M/q,j=D/q;if(p.isNaN($)||p.isInfinite($)||p.isNaN(j)||p.isInfinite(j))throw new G;return new I($,j)},u(En.prototype,{create:function(){arguments.length===1&&(arguments[0]instanceof Array||U(arguments[0],at))},interfaces_:function(){return[]},getClass:function(){return En}}),u(ge.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return ge}}),u(H.prototype,{isGeometryCollection:function(){return this.getSortIndex()===H.SORTINDEX_GEOMETRYCOLLECTION},getFactory:function(){return this.factory},getGeometryN:function(t){return this},getArea:function(){return 0},isRectangle:function(){return!1},equals:function(){if(arguments.length===1){if(arguments[0]instanceof H){var t=arguments[0];return t===null?!1:this.equalsTopo(t)}if(arguments[0]instanceof Object){var e=arguments[0];if(!(e instanceof H))return!1;var n=e;return this.equalsExact(n)}}},equalsExact:function(t){return this===t||this.equalsExact(t,0)},geometryChanged:function(){this.apply(H.geometryChangedFilter)},geometryChangedAction:function(){this.envelope=null},equalsNorm:function(t){return t===null?!1:this.norm().equalsExact(t.norm())},getLength:function(){return 0},getNumGeometries:function(){return 1},compareTo:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return this.getSortIndex()!==e.getSortIndex()?this.getSortIndex()-e.getSortIndex():this.isEmpty()&&e.isEmpty()?0:this.isEmpty()?-1:e.isEmpty()?1:this.compareToSameClass(n,r)}},getUserData:function(){return this.userData},getSRID:function(){return this.SRID},getEnvelope:function(){return this.getFactory().toGeometry(this.getEnvelopeInternal())},checkNotGeometryCollection:function(t){if(t.getSortIndex()===H.SORTINDEX_GEOMETRYCOLLECTION)throw new d},equal:function(t,e,n){return n===0?t.equals(e):t.distance(e)<=n},norm:function(){var t=this.copy();return t.normalize(),t},getPrecisionModel:function(){return this.factory.getPrecisionModel()},getEnvelopeInternal:function(){return this.envelope===null&&(this.envelope=this.computeEnvelopeInternal()),new O(this.envelope)},setSRID:function(t){this.SRID=t},setUserData:function(t){this.userData=t},compare:function(t,e){for(var n=t.iterator(),r=e.iterator();n.hasNext()&&r.hasNext();){var s=n.next(),a=r.next(),c=s.compareTo(a);if(c!==0)return c}return n.hasNext()?1:r.hasNext()?-1:0},hashCode:function(){return this.getEnvelopeInternal().hashCode()},isGeometryCollectionOrDerived:function(){return this.getSortIndex()===H.SORTINDEX_GEOMETRYCOLLECTION||this.getSortIndex()===H.SORTINDEX_MULTIPOINT||this.getSortIndex()===H.SORTINDEX_MULTILINESTRING||this.getSortIndex()===H.SORTINDEX_MULTIPOLYGON},interfaces_:function(){return[E,m,N]},getClass:function(){return H}}),H.hasNonEmptyElements=function(t){for(var e=0;e<t.length;e++)if(!t[e].isEmpty())return!0;return!1},H.hasNullElements=function(t){for(var e=0;e<t.length;e++)if(t[e]===null)return!0;return!1},H.serialVersionUID=8763622679187377e3,H.SORTINDEX_POINT=0,H.SORTINDEX_MULTIPOINT=1,H.SORTINDEX_LINESTRING=2,H.SORTINDEX_LINEARRING=3,H.SORTINDEX_MULTILINESTRING=4,H.SORTINDEX_POLYGON=5,H.SORTINDEX_MULTIPOLYGON=6,H.SORTINDEX_GEOMETRYCOLLECTION=7,H.geometryChangedFilter={interfaces_:function(){return[ge]},filter:function(t){t.geometryChangedAction()}},u(In.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return In}}),u(Bt.prototype,{isInBoundary:function(t){},interfaces_:function(){return[]},getClass:function(){return Bt}}),u(Fr.prototype,{isInBoundary:function(t){return t%2===1},interfaces_:function(){return[Bt]},getClass:function(){return Fr}}),u(Gr.prototype,{isInBoundary:function(t){return t>0},interfaces_:function(){return[Bt]},getClass:function(){return Gr}}),u(qr.prototype,{isInBoundary:function(t){return t>1},interfaces_:function(){return[Bt]},getClass:function(){return qr}}),u(Br.prototype,{isInBoundary:function(t){return t===1},interfaces_:function(){return[Bt]},getClass:function(){return Br}}),Bt.Mod2BoundaryNodeRule=Fr,Bt.EndPointBoundaryNodeRule=Gr,Bt.MultiValentEndPointBoundaryNodeRule=qr,Bt.MonoValentEndPointBoundaryNodeRule=Br,Bt.MOD2_BOUNDARY_RULE=new Fr,Bt.ENDPOINT_BOUNDARY_RULE=new Gr,Bt.MULTIVALENT_ENDPOINT_BOUNDARY_RULE=new qr,Bt.MONOVALENT_ENDPOINT_BOUNDARY_RULE=new Br,Bt.OGC_SFS_BOUNDARY_RULE=Bt.MOD2_BOUNDARY_RULE,u(Q.prototype,{interfaces_:function(){return[]},getClass:function(){return Q}}),Q.isRing=function(t){return t.length<4?!1:!!t[0].equals2D(t[t.length-1])},Q.ptNotInList=function(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(Q.indexOf(r,e)<0)return r}return null},Q.scroll=function(t,e){var n=Q.indexOf(e,t);if(0>n)return null;var r=new Array(t.length).fill(null);mt.arraycopy(t,n,r,0,t.length-n),mt.arraycopy(t,0,r,t.length-n,n),mt.arraycopy(r,0,t,0,t.length)},Q.equals=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(t===e)return!0;if(t===null||e===null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].equals(e[n]))return!1;return!0}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];if(r===s)return!0;if(r===null||s===null||r.length!==s.length)return!1;for(var n=0;n<r.length;n++)if(a.compare(r[n],s[n])!==0)return!1;return!0}},Q.intersection=function(t,e){for(var n=new A,r=0;r<t.length;r++)e.intersects(t[r])&&n.add(t[r],!0);return n.toCoordinateArray()},Q.hasRepeatedPoints=function(t){for(var e=1;e<t.length;e++)if(t[e-1].equals(t[e]))return!0;return!1},Q.removeRepeatedPoints=function(t){if(!Q.hasRepeatedPoints(t))return t;var e=new A(t,!1);return e.toCoordinateArray()},Q.reverse=function(t){for(var e=t.length-1,n=Math.trunc(e/2),r=0;n>=r;r++){var s=t[r];t[r]=t[e-r],t[e-r]=s}},Q.removeNull=function(t){for(var e=0,n=0;n<t.length;n++)t[n]!==null&&e++;var r=new Array(e).fill(null);if(e===0)return r;for(var s=0,n=0;n<t.length;n++)t[n]!==null&&(r[s++]=t[n]);return r},Q.copyDeep=function(){if(arguments.length===1){for(var t=arguments[0],e=new Array(t.length).fill(null),n=0;n<t.length;n++)e[n]=new I(t[n]);return e}if(arguments.length===5)for(var r=arguments[0],s=arguments[1],a=arguments[2],c=arguments[3],f=arguments[4],n=0;f>n;n++)a[c+n]=new I(r[s+n])},Q.isEqualReversed=function(t,e){for(var n=0;n<t.length;n++){var r=t[n],s=e[t.length-n-1];if(r.compareTo(s)!==0)return!1}return!0},Q.envelope=function(t){for(var e=new O,n=0;n<t.length;n++)e.expandToInclude(t[n]);return e},Q.toCoordinateArray=function(t){return t.toArray(Q.coordArrayType)},Q.atLeastNCoordinatesOrNothing=function(t,e){return e.length>=t?e:[]},Q.indexOf=function(t,e){for(var n=0;n<e.length;n++)if(t.equals(e[n]))return n;return-1},Q.increasingDirection=function(t){for(var e=0;e<Math.trunc(t.length/2);e++){var n=t.length-1-e,r=t[e].compareTo(t[n]);if(r!==0)return r}return 1},Q.compare=function(t,e){for(var n=0;n<t.length&&n<e.length;){var r=t[n].compareTo(e[n]);if(r!==0)return r;n++}return n<e.length?-1:n<t.length?1:0},Q.minCoordinate=function(t){for(var e=null,n=0;n<t.length;n++)(e===null||e.compareTo(t[n])>0)&&(e=t[n]);return e},Q.extract=function(t,e,n){e=st.clamp(e,0,t.length),n=st.clamp(n,-1,t.length);var r=n-e+1;0>n&&(r=0),e>=t.length&&(r=0),e>n&&(r=0);var s=new Array(r).fill(null);if(r===0)return s;for(var a=0,c=e;n>=c;c++)s[a++]=t[c];return s},u(lo.prototype,{compare:function(t,e){var n=t,r=e;return Q.compare(n,r)},interfaces_:function(){return[x]},getClass:function(){return lo}}),u(ho.prototype,{compare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;var s=Q.compare(n,r),a=Q.isEqualReversed(n,r);return a?0:s},OLDcompare:function(t,e){var n=t,r=e;if(n.length<r.length)return-1;if(n.length>r.length)return 1;if(n.length===0)return 0;for(var s=Q.increasingDirection(n),a=Q.increasingDirection(r),c=s>0?0:n.length-1,f=a>0?0:n.length-1,y=0;y<n.length;y++){var L=n[c].compareTo(r[f]);if(L!==0)return L;c+=s,f+=a}return 0},interfaces_:function(){return[x]},getClass:function(){return ho}}),Q.ForwardComparator=lo,Q.BidirectionalComparator=ho,Q.coordArrayType=new Array(0).fill(null),kn.prototype.get=function(){},kn.prototype.put=function(){},kn.prototype.size=function(){},kn.prototype.values=function(){},kn.prototype.entrySet=function(){},La.prototype=new kn,zr.prototype=new X,zr.prototype.contains=function(){},kt.prototype=new zr,kt.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r===t)return!0}return!1},kt.prototype.add=function(t){return this.contains(t)?!1:(this.array_.push(t),!0)},kt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},kt.prototype.remove=function(t){throw new javascript.util.OperationNotSupported},kt.prototype.size=function(){return this.array_.length},kt.prototype.isEmpty=function(){return this.array_.length===0},kt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},kt.prototype.iterator=function(){return new Bs(this)};var Bs=function(t){this.hashSet_=t,this.position_=0};Bs.prototype.next=function(){if(this.position_===this.hashSet_.size())throw new F;return this.hashSet_.array_[this.position_++]},Bs.prototype.hasNext=function(){return this.position_<this.hashSet_.size()},Bs.prototype.remove=function(){throw new Z};var un=0,qn=1;At.prototype=new La,At.prototype.get=function(t){for(var e=this.root_;e!==null;){var n=t.compareTo(e.key);if(0>n)e=e.left;else{if(!(n>0))return e.value;e=e.right}}return null},At.prototype.put=function(t,e){if(this.root_===null)return this.root_={key:t,value:e,left:null,right:null,parent:null,color:un,getValue:function(){return this.value},getKey:function(){return this.key}},this.size_=1,null;var n,r,s=this.root_;do if(n=s,r=t.compareTo(s.key),0>r)s=s.left;else{if(!(r>0)){var a=s.value;return s.value=e,a}s=s.right}while(s!==null);var c={key:t,left:null,right:null,value:e,parent:n,color:un,getValue:function(){return this.value},getKey:function(){return this.key}};return 0>r?n.left=c:n.right=c,this.fixAfterInsertion(c),this.size_++,null},At.prototype.fixAfterInsertion=function(t){for(t.color=qn;t!=null&&t!=this.root_&&t.parent.color==qn;)if(xt(t)==co(xt(xt(t)))){var e=Ta(xt(xt(t)));Ra(e)==qn?($e(xt(t),un),$e(e,un),$e(xt(xt(t)),qn),t=xt(xt(t))):(t==Ta(xt(t))&&(t=xt(t),this.rotateLeft(t)),$e(xt(t),un),$e(xt(xt(t)),qn),this.rotateRight(xt(xt(t))))}else{var e=co(xt(xt(t)));Ra(e)==qn?($e(xt(t),un),$e(e,un),$e(xt(xt(t)),qn),t=xt(xt(t))):(t==co(xt(t))&&(t=xt(t),this.rotateRight(t)),$e(xt(t),un),$e(xt(xt(t)),qn),this.rotateLeft(xt(xt(t))))}this.root_.color=un},At.prototype.values=function(){var t=new P,e=this.getFirstEntry();if(e!==null)for(t.add(e.value);(e=At.successor(e))!==null;)t.add(e.value);return t},At.prototype.entrySet=function(){var t=new kt,e=this.getFirstEntry();if(e!==null)for(t.add(e);(e=At.successor(e))!==null;)t.add(e);return t},At.prototype.rotateLeft=function(t){if(t!=null){var e=t.right;t.right=e.left,e.left!=null&&(e.left.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.left==t?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e}},At.prototype.rotateRight=function(t){if(t!=null){var e=t.left;t.left=e.right,e.right!=null&&(e.right.parent=t),e.parent=t.parent,t.parent==null?this.root_=e:t.parent.right==t?t.parent.right=e:t.parent.left=e,e.right=t,t.parent=e}},At.prototype.getFirstEntry=function(){var t=this.root_;if(t!=null)for(;t.left!=null;)t=t.left;return t},At.successor=function(t){if(t===null)return null;if(t.right!==null){for(var e=t.right;e.left!==null;)e=e.left;return e}for(var e=t.parent,n=t;e!==null&&n===e.right;)n=e,e=e.parent;return e},At.prototype.size=function(){return this.size_},u(Vr.prototype,{interfaces_:function(){return[]},getClass:function(){return Vr}}),Pa.prototype=new zr,Kt.prototype=new Pa,Kt.prototype.contains=function(t){for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===0)return!0}return!1},Kt.prototype.add=function(t){if(this.contains(t))return!1;for(var e=0,n=this.array_.length;n>e;e++){var r=this.array_[e];if(r.compareTo(t)===1)return this.array_.splice(e,0,t),!0}return this.array_.push(t),!0},Kt.prototype.addAll=function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next());return!0},Kt.prototype.remove=function(t){throw new Z},Kt.prototype.size=function(){return this.array_.length},Kt.prototype.isEmpty=function(){return this.array_.length===0},Kt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},Kt.prototype.iterator=function(){return new zs(this)};var zs=function(t){this.treeSet_=t,this.position_=0};zs.prototype.next=function(){if(this.position_===this.treeSet_.size())throw new F;return this.treeSet_.array_[this.position_++]},zs.prototype.hasNext=function(){return this.position_<this.treeSet_.size()},zs.prototype.remove=function(){throw new Z},Ze.sort=function(){var t,e,n,r,s=arguments[0];if(arguments.length===1)return r=function(c,f){return c.compareTo(f)},void s.sort(r);if(arguments.length===2)n=arguments[1],r=function(c,f){return n.compare(c,f)},s.sort(r);else{if(arguments.length===3){e=s.slice(arguments[1],arguments[2]),e.sort();var a=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length));for(s.splice(0,s.length),t=0;t<a.length;t++)s.push(a[t]);return}if(arguments.length===4){for(e=s.slice(arguments[1],arguments[2]),n=arguments[3],r=function(c,f){return n.compare(c,f)},e.sort(r),a=s.slice(0,arguments[1]).concat(e,s.slice(arguments[2],s.length)),s.splice(0,s.length),t=0;t<a.length;t++)s.push(a[t]);return}}},Ze.asList=function(t){for(var e=new P,n=0,r=t.length;r>n;n++)e.add(t[n]);return e},u(B.prototype,{interfaces_:function(){return[]},getClass:function(){return B}}),B.toDimensionSymbol=function(t){switch(t){case B.FALSE:return B.SYM_FALSE;case B.TRUE:return B.SYM_TRUE;case B.DONTCARE:return B.SYM_DONTCARE;case B.P:return B.SYM_P;case B.L:return B.SYM_L;case B.A:return B.SYM_A}throw new d},B.toDimensionValue=function(t){switch(qt.toUpperCase(t)){case B.SYM_FALSE:return B.FALSE;case B.SYM_TRUE:return B.TRUE;case B.SYM_DONTCARE:return B.DONTCARE;case B.SYM_P:return B.P;case B.SYM_L:return B.L;case B.SYM_A:return B.A}throw new d},B.P=0,B.L=1,B.A=2,B.FALSE=-1,B.TRUE=-2,B.DONTCARE=-3,B.SYM_FALSE="F",B.SYM_TRUE="T",B.SYM_DONTCARE="*",B.SYM_P="0",B.SYM_L="1",B.SYM_A="2",u(Je.prototype,{filter:function(t){},interfaces_:function(){return[]},getClass:function(){return Je}}),u(Un.prototype,{filter:function(t,e){},isDone:function(){},isGeometryChanged:function(){},interfaces_:function(){return[]},getClass:function(){return Un}}),S(ut,H),u(ut.prototype,{computeEnvelopeInternal:function(){for(var t=new O,e=0;e<this.geometries.length;e++)t.expandToInclude(this.geometries[e].getEnvelopeInternal());return t},getGeometryN:function(t){return this.geometries[t]},getSortIndex:function(){return H.SORTINDEX_GEOMETRYCOLLECTION},getCoordinates:function(){for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=0;n<this.geometries.length;n++)for(var r=this.geometries[n].getCoordinates(),s=0;s<r.length;s++)e++,t[e]=r[s];return t},getArea:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getArea();return t},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.geometries.length!==n.geometries.length)return!1;for(var r=0;r<this.geometries.length;r++)if(!this.geometries[r].equalsExact(n.geometries[r],e))return!1;return!0}return H.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<this.geometries.length;t++)this.geometries[t].normalize();Ze.sort(this.geometries)},getCoordinate:function(){return this.isEmpty()?null:this.geometries[0].getCoordinate()},getBoundaryDimension:function(){for(var t=B.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getBoundaryDimension());return t},getDimension:function(){for(var t=B.FALSE,e=0;e<this.geometries.length;e++)t=Math.max(t,this.geometries[e].getDimension());return t},getLength:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getLength();return t},getNumPoints:function(){for(var t=0,e=0;e<this.geometries.length;e++)t+=this.geometries[e].getNumPoints();return t},getNumGeometries:function(){return this.geometries.length},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createGeometryCollection(e)},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=new Kt(Ze.asList(this.geometries)),n=new Kt(Ze.asList(t.geometries));return this.compare(e,n)}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],a=r,c=this.getNumGeometries(),f=a.getNumGeometries(),y=0;c>y&&f>y;){var L=this.getGeometryN(y),M=a.getGeometryN(y),D=L.compareToSameClass(M,s);if(D!==0)return D;y++}return c>y?1:f>y?-1:0}},apply:function(){if(U(arguments[0],In))for(var t=arguments[0],e=0;e<this.geometries.length;e++)this.geometries[e].apply(t);else if(U(arguments[0],Un)){var n=arguments[0];if(this.geometries.length===0)return null;for(var e=0;e<this.geometries.length&&(this.geometries[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(U(arguments[0],Je)){var r=arguments[0];r.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(r)}else if(U(arguments[0],ge)){var s=arguments[0];s.filter(this);for(var e=0;e<this.geometries.length;e++)this.geometries[e].apply(s)}},getBoundary:function(){return this.checkNotGeometryCollection(this),T.shouldNeverReachHere(),null},clone:function(){var t=H.prototype.clone.call(this);t.geometries=new Array(this.geometries.length).fill(null);for(var e=0;e<this.geometries.length;e++)t.geometries[e]=this.geometries[e].clone();return t},getGeometryType:function(){return"GeometryCollection"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new ut(t,this.factory)},isEmpty:function(){for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isEmpty())return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ut}}),ut.serialVersionUID=-5694727726395021e3,S(re,ut),u(re.prototype,{getSortIndex:function(){return H.SORTINDEX_MULTILINESTRING},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ut.prototype.equalsExact.call(this,t,e):!1}return ut.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return this.isClosed()?B.FALSE:0},isClosed:function(){if(this.isEmpty())return!1;for(var t=0;t<this.geometries.length;t++)if(!this.geometries[t].isClosed())return!1;return!0},getDimension:function(){return 1},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[t-1-n]=this.geometries[n].reverse();return this.getFactory().createMultiLineString(e)},getBoundary:function(){return new gn(this).getBoundary()},getGeometryType:function(){return"MultiLineString"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new re(t,this.factory)},interfaces_:function(){return[Vr]},getClass:function(){return re}}),re.serialVersionUID=8166665132445434e3,u(gn.prototype,{boundaryMultiLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();var e=this.computeBoundaryCoordinates(t);return e.length===1?this.geomFact.createPoint(e[0]):this.geomFact.createMultiPointFromCoords(e)},getBoundary:function(){return this.geom instanceof it?this.boundaryLineString(this.geom):this.geom instanceof re?this.boundaryMultiLineString(this.geom):this.geom.getBoundary()},boundaryLineString:function(t){if(this.geom.isEmpty())return this.getEmptyMultiPoint();if(t.isClosed()){var e=this.bnRule.isInBoundary(2);return e?t.getStartPoint():this.geomFact.createMultiPoint()}return this.geomFact.createMultiPoint([t.getStartPoint(),t.getEndPoint()])},getEmptyMultiPoint:function(){return this.geomFact.createMultiPoint()},computeBoundaryCoordinates:function(t){var e=new P;this.endpointMap=new At;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);r.getNumPoints()!==0&&(this.addEndpoint(r.getCoordinateN(0)),this.addEndpoint(r.getCoordinateN(r.getNumPoints()-1)))}for(var s=this.endpointMap.entrySet().iterator();s.hasNext();){var a=s.next(),c=a.getValue(),f=c.count;this.bnRule.isInBoundary(f)&&e.add(a.getKey())}return Q.toCoordinateArray(e)},addEndpoint:function(t){var e=this.endpointMap.get(t);e===null&&(e=new go,this.endpointMap.put(t,e)),e.count++},interfaces_:function(){return[]},getClass:function(){return gn}}),gn.getBoundary=function(){if(arguments.length===1){var t=arguments[0],e=new gn(t);return e.getBoundary()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new gn(n,r);return e.getBoundary()}},u(go.prototype,{interfaces_:function(){return[]},getClass:function(){return go}}),u(fe.prototype,{interfaces_:function(){return[]},getClass:function(){return fe}}),fe.chars=function(t,e){for(var n=new Array(e).fill(null),r=0;e>r;r++)n[r]=t;return new String(n)},fe.getStackTrace=function(){if(arguments.length===1){var t=arguments[0],e=new Ku,n=new $u;return t.printStackTrace(n),e.toString()}if(arguments.length===2){for(var r=arguments[0],s=arguments[1],a="",c=new Zu(fe.getStackTrace(r)),f=new Qu,y=0;s>y;y++)try{a+=f.readLine()+fe.NEWLINE}catch(L){if(!(L instanceof ju))throw L;T.shouldNeverReachHere()}finally{}return a}},fe.split=function(t,e){for(var n=e.length,r=new P,s=""+t,a=s.indexOf(e);a>=0;){var c=s.substring(0,a);r.add(c),s=s.substring(a+n),a=s.indexOf(e)}s.length>0&&r.add(s);for(var f=new Array(r.size()).fill(null),y=0;y<f.length;y++)f[y]=r.get(y);return f},fe.toString=function(){if(arguments.length===1){var t=arguments[0];return fe.SIMPLE_ORDINATE_FORMAT.format(t)}},fe.spaces=function(t){return fe.chars(" ",t)},fe.NEWLINE=mt.getProperty("line.separator"),fe.SIMPLE_ORDINATE_FORMAT=new Ju,u(_t.prototype,{interfaces_:function(){return[]},getClass:function(){return _t}}),_t.copyCoord=function(t,e,n,r){for(var s=Math.min(t.getDimension(),n.getDimension()),a=0;s>a;a++)n.setOrdinate(r,a,t.getOrdinate(e,a))},_t.isRing=function(t){var e=t.size();return e===0?!0:3>=e?!1:t.getOrdinate(0,at.X)===t.getOrdinate(e-1,at.X)&&t.getOrdinate(0,at.Y)===t.getOrdinate(e-1,at.Y)},_t.isEqual=function(t,e){var n=t.size(),r=e.size();if(n!==r)return!1;for(var s=Math.min(t.getDimension(),e.getDimension()),a=0;n>a;a++)for(var c=0;s>c;c++){var f=t.getOrdinate(a,c),y=e.getOrdinate(a,c);if(!(t.getOrdinate(a,c)===e.getOrdinate(a,c)||p.isNaN(f)&&p.isNaN(y)))return!1}return!0},_t.extend=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();if(_t.copy(e,0,r,0,s),s>0)for(var a=s;n>a;a++)_t.copy(e,s-1,r,a,1);return r},_t.reverse=function(t){for(var e=t.size()-1,n=Math.trunc(e/2),r=0;n>=r;r++)_t.swap(t,r,e-r)},_t.swap=function(t,e,n){if(e===n)return null;for(var r=0;r<t.getDimension();r++){var s=t.getOrdinate(e,r);t.setOrdinate(e,r,t.getOrdinate(n,r)),t.setOrdinate(n,r,s)}},_t.copy=function(t,e,n,r,s){for(var a=0;s>a;a++)_t.copyCoord(t,e+a,n,r+a)},_t.toString=function(){if(arguments.length===1){var t=arguments[0],e=t.size();if(e===0)return"()";var n=t.getDimension(),r=new Ct;r.append("(");for(var s=0;e>s;s++){s>0&&r.append(" ");for(var a=0;n>a;a++)a>0&&r.append(","),r.append(fe.toString(t.getOrdinate(s,a)))}return r.append(")"),r.toString()}},_t.ensureValidRing=function(t,e){var n=e.size();if(n===0)return e;if(3>=n)return _t.createClosedRing(t,e,4);var r=e.getOrdinate(0,at.X)===e.getOrdinate(n-1,at.X)&&e.getOrdinate(0,at.Y)===e.getOrdinate(n-1,at.Y);return r?e:_t.createClosedRing(t,e,n+1)},_t.createClosedRing=function(t,e,n){var r=t.create(n,e.getDimension()),s=e.size();_t.copy(e,0,r,0,s);for(var a=s;n>a;a++)_t.copy(e,0,r,a,1);return r},S(it,H),u(it.prototype,{computeEnvelopeInternal:function(){return this.isEmpty()?new O:this.points.expandEnvelope(new O)},isRing:function(){return this.isClosed()&&this.isSimple()},getSortIndex:function(){return H.SORTINDEX_LINESTRING},getCoordinates:function(){return this.points.toCoordinateArray()},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t;if(this.points.size()!==n.points.size())return!1;for(var r=0;r<this.points.size();r++)if(!this.equal(this.points.getCoordinate(r),n.points.getCoordinate(r),e))return!1;return!0}return H.prototype.equalsExact.apply(this,arguments)},normalize:function(){for(var t=0;t<Math.trunc(this.points.size()/2);t++){var e=this.points.size()-1-t;if(!this.points.getCoordinate(t).equals(this.points.getCoordinate(e)))return this.points.getCoordinate(t).compareTo(this.points.getCoordinate(e))>0&&_t.reverse(this.points),null}},getCoordinate:function(){return this.isEmpty()?null:this.points.getCoordinate(0)},getBoundaryDimension:function(){return this.isClosed()?B.FALSE:0},isClosed:function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1))},getEndPoint:function(){return this.isEmpty()?null:this.getPointN(this.getNumPoints()-1)},getDimension:function(){return 1},getLength:function(){return k.computeLength(this.points)},getNumPoints:function(){return this.points.size()},reverse:function(){var t=this.points.copy();_t.reverse(t);var e=this.getFactory().createLineString(t);return e},compareToSameClass:function(){if(arguments.length===1){for(var t=arguments[0],e=t,n=0,r=0;n<this.points.size()&&r<e.points.size();){var s=this.points.getCoordinate(n).compareTo(e.points.getCoordinate(r));if(s!==0)return s;n++,r++}return n<this.points.size()?1:r<e.points.size()?-1:0}if(arguments.length===2){var a=arguments[0],c=arguments[1],e=a;return c.compare(this.points,e.points)}},apply:function(){if(U(arguments[0],In))for(var t=arguments[0],e=0;e<this.points.size();e++)t.filter(this.points.getCoordinate(e));else if(U(arguments[0],Un)){var n=arguments[0];if(this.points.size()===0)return null;for(var e=0;e<this.points.size()&&(n.filter(this.points,e),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(U(arguments[0],Je)){var r=arguments[0];r.filter(this)}else if(U(arguments[0],ge)){var s=arguments[0];s.filter(this)}},getBoundary:function(){return new gn(this).getBoundary()},isEquivalentClass:function(t){return t instanceof it},clone:function(){var t=H.prototype.clone.call(this);return t.points=this.points.clone(),t},getCoordinateN:function(t){return this.points.getCoordinate(t)},getGeometryType:function(){return"LineString"},copy:function(){return new it(this.points.copy(),this.factory)},getCoordinateSequence:function(){return this.points},isEmpty:function(){return this.points.size()===0},init:function(t){if(t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),t.size()===1)throw new d("Invalid number of points in LineString (found "+t.size()+" - must be 0 or >= 2)");this.points=t},isCoordinate:function(t){for(var e=0;e<this.points.size();e++)if(this.points.getCoordinate(e).equals(t))return!0;return!1},getStartPoint:function(){return this.isEmpty()?null:this.getPointN(0)},getPointN:function(t){return this.getFactory().createPoint(this.points.getCoordinate(t))},interfaces_:function(){return[Vr]},getClass:function(){return it}}),it.serialVersionUID=0x2b2b51ba435c8e00,u(kr.prototype,{interfaces_:function(){return[]},getClass:function(){return kr}}),S(wt,H),u(wt.prototype,{computeEnvelopeInternal:function(){if(this.isEmpty())return new O;var t=new O;return t.expandToInclude(this.coordinates.getX(0),this.coordinates.getY(0)),t},getSortIndex:function(){return H.SORTINDEX_POINT},getCoordinates:function(){return this.isEmpty()?[]:[this.getCoordinate()]},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?this.isEmpty()&&t.isEmpty()?!0:this.isEmpty()!==t.isEmpty()?!1:this.equal(t.getCoordinate(),this.getCoordinate(),e):!1}return H.prototype.equalsExact.apply(this,arguments)},normalize:function(){},getCoordinate:function(){return this.coordinates.size()!==0?this.coordinates.getCoordinate(0):null},getBoundaryDimension:function(){return B.FALSE},getDimension:function(){return 0},getNumPoints:function(){return this.isEmpty()?0:1},reverse:function(){return this.copy()},getX:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getX called on empty Point");return this.getCoordinate().x},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=t;return this.getCoordinate().compareTo(e.getCoordinate())}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=n;return r.compare(this.coordinates,e.coordinates)}},apply:function(){if(U(arguments[0],In)){var t=arguments[0];if(this.isEmpty())return null;t.filter(this.getCoordinate())}else if(U(arguments[0],Un)){var e=arguments[0];if(this.isEmpty())return null;e.filter(this.coordinates,0),e.isGeometryChanged()&&this.geometryChanged()}else if(U(arguments[0],Je)){var n=arguments[0];n.filter(this)}else if(U(arguments[0],ge)){var r=arguments[0];r.filter(this)}},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},clone:function(){var t=H.prototype.clone.call(this);return t.coordinates=this.coordinates.clone(),t},getGeometryType:function(){return"Point"},copy:function(){return new wt(this.coordinates.copy(),this.factory)},getCoordinateSequence:function(){return this.coordinates},getY:function(){if(this.getCoordinate()===null)throw new IllegalStateException("getY called on empty Point");return this.getCoordinate().y},isEmpty:function(){return this.coordinates.size()===0},init:function(t){t===null&&(t=this.getFactory().getCoordinateSequenceFactory().create([])),T.isTrue(t.size()<=1),this.coordinates=t},isSimple:function(){return!0},interfaces_:function(){return[kr]},getClass:function(){return wt}}),wt.serialVersionUID=4902022702746615e3,u(Ke.prototype,{interfaces_:function(){return[]},getClass:function(){return Ke}}),S(vt,H),u(vt.prototype,{computeEnvelopeInternal:function(){return this.shell.getEnvelopeInternal()},getSortIndex:function(){return H.SORTINDEX_POLYGON},getCoordinates:function(){if(this.isEmpty())return[];for(var t=new Array(this.getNumPoints()).fill(null),e=-1,n=this.shell.getCoordinates(),r=0;r<n.length;r++)e++,t[e]=n[r];for(var s=0;s<this.holes.length;s++)for(var a=this.holes[s].getCoordinates(),c=0;c<a.length;c++)e++,t[e]=a[c];return t},getArea:function(){var t=0;t+=Math.abs(k.signedArea(this.shell.getCoordinateSequence()));for(var e=0;e<this.holes.length;e++)t-=Math.abs(k.signedArea(this.holes[e].getCoordinateSequence()));return t},isRectangle:function(){if(this.getNumInteriorRing()!==0||this.shell===null||this.shell.getNumPoints()!==5)return!1;for(var t=this.shell.getCoordinateSequence(),e=this.getEnvelopeInternal(),n=0;5>n;n++){var r=t.getX(n);if(r!==e.getMinX()&&r!==e.getMaxX())return!1;var s=t.getY(n);if(s!==e.getMinY()&&s!==e.getMaxY())return!1}for(var a=t.getX(0),c=t.getY(0),n=1;4>=n;n++){var r=t.getX(n),s=t.getY(n),f=r!==a,y=s!==c;if(f===y)return!1;a=r,c=s}return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(!this.isEquivalentClass(t))return!1;var n=t,r=this.shell,s=n.shell;if(!r.equalsExact(s,e)||this.holes.length!==n.holes.length)return!1;for(var a=0;a<this.holes.length;a++)if(!this.holes[a].equalsExact(n.holes[a],e))return!1;return!0}return H.prototype.equalsExact.apply(this,arguments)},normalize:function(){if(arguments.length===0){this.normalize(this.shell,!0);for(var t=0;t<this.holes.length;t++)this.normalize(this.holes[t],!1);Ze.sort(this.holes)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];if(e.isEmpty())return null;var r=new Array(e.getCoordinates().length-1).fill(null);mt.arraycopy(e.getCoordinates(),0,r,0,r.length);var s=Q.minCoordinate(e.getCoordinates());Q.scroll(r,s),mt.arraycopy(r,0,e.getCoordinates(),0,r.length),e.getCoordinates()[r.length]=r[0],k.isCCW(e.getCoordinates())===n&&Q.reverse(e.getCoordinates())}},getCoordinate:function(){return this.shell.getCoordinate()},getNumInteriorRing:function(){return this.holes.length},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},getLength:function(){var t=0;t+=this.shell.getLength();for(var e=0;e<this.holes.length;e++)t+=this.holes[e].getLength();return t},getNumPoints:function(){for(var t=this.shell.getNumPoints(),e=0;e<this.holes.length;e++)t+=this.holes[e].getNumPoints();return t},reverse:function(){var t=this.copy();t.shell=this.shell.copy().reverse(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].copy().reverse();return t},convexHull:function(){return this.getExteriorRing().convexHull()},compareToSameClass:function(){if(arguments.length===1){var t=arguments[0],e=this.shell,n=t.shell;return e.compareToSameClass(n)}if(arguments.length===2){var r=arguments[0],s=arguments[1],a=r,e=this.shell,n=a.shell,c=e.compareToSameClass(n,s);if(c!==0)return c;for(var f=this.getNumInteriorRing(),y=a.getNumInteriorRing(),L=0;f>L&&y>L;){var M=this.getInteriorRingN(L),D=a.getInteriorRingN(L),q=M.compareToSameClass(D,s);if(q!==0)return q;L++}return f>L?1:y>L?-1:0}},apply:function(){if(U(arguments[0],In)){var t=arguments[0];this.shell.apply(t);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(t)}else if(U(arguments[0],Un)){var n=arguments[0];if(this.shell.apply(n),!n.isDone())for(var e=0;e<this.holes.length&&(this.holes[e].apply(n),!n.isDone());e++);n.isGeometryChanged()&&this.geometryChanged()}else if(U(arguments[0],Je)){var r=arguments[0];r.filter(this)}else if(U(arguments[0],ge)){var s=arguments[0];s.filter(this),this.shell.apply(s);for(var e=0;e<this.holes.length;e++)this.holes[e].apply(s)}},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();var t=new Array(this.holes.length+1).fill(null);t[0]=this.shell;for(var e=0;e<this.holes.length;e++)t[e+1]=this.holes[e];return t.length<=1?this.getFactory().createLinearRing(t[0].getCoordinateSequence()):this.getFactory().createMultiLineString(t)},clone:function(){var t=H.prototype.clone.call(this);t.shell=this.shell.clone(),t.holes=new Array(this.holes.length).fill(null);for(var e=0;e<this.holes.length;e++)t.holes[e]=this.holes[e].clone();return t},getGeometryType:function(){return"Polygon"},copy:function(){for(var t=this.shell.copy(),e=new Array(this.holes.length).fill(null),n=0;n<e.length;n++)e[n]=this.holes[n].copy();return new vt(t,e,this.factory)},getExteriorRing:function(){return this.shell},isEmpty:function(){return this.shell.isEmpty()},getInteriorRingN:function(t){return this.holes[t]},interfaces_:function(){return[Ke]},getClass:function(){return vt}}),vt.serialVersionUID=-0x307ffefd8dc97200,S(se,ut),u(se.prototype,{getSortIndex:function(){return H.SORTINDEX_MULTIPOINT},isValid:function(){return!0},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ut.prototype.equalsExact.call(this,t,e):!1}return ut.prototype.equalsExact.apply(this,arguments)},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.geometries[t].getCoordinate()}return ut.prototype.getCoordinate.apply(this,arguments)},getBoundaryDimension:function(){return B.FALSE},getDimension:function(){return 0},getBoundary:function(){return this.getFactory().createGeometryCollection(null)},getGeometryType:function(){return"MultiPoint"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new se(t,this.factory)},interfaces_:function(){return[kr]},getClass:function(){return se}}),se.serialVersionUID=-8048474874175356e3,S(Pt,it),u(Pt.prototype,{getSortIndex:function(){return H.SORTINDEX_LINEARRING},getBoundaryDimension:function(){return B.FALSE},isClosed:function(){return this.isEmpty()?!0:it.prototype.isClosed.call(this)},reverse:function(){var t=this.points.copy();_t.reverse(t);var e=this.getFactory().createLinearRing(t);return e},validateConstruction:function(){if(!this.isEmpty()&&!it.prototype.isClosed.call(this))throw new d;if(this.getCoordinateSequence().size()>=1&&this.getCoordinateSequence().size()<Pt.MINIMUM_VALID_SIZE)throw new d("Invalid number of points in LinearRing (found "+this.getCoordinateSequence().size()+" - must be 0 or >= 4)")},getGeometryType:function(){return"LinearRing"},copy:function(){return new Pt(this.points.copy(),this.factory)},interfaces_:function(){return[]},getClass:function(){return Pt}}),Pt.MINIMUM_VALID_SIZE=4,Pt.serialVersionUID=-0x3b229e262367a600,S(Ut,ut),u(Ut.prototype,{getSortIndex:function(){return H.SORTINDEX_MULTIPOLYGON},equalsExact:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.isEquivalentClass(t)?ut.prototype.equalsExact.call(this,t,e):!1}return ut.prototype.equalsExact.apply(this,arguments)},getBoundaryDimension:function(){return 1},getDimension:function(){return 2},reverse:function(){for(var t=this.geometries.length,e=new Array(t).fill(null),n=0;n<this.geometries.length;n++)e[n]=this.geometries[n].reverse();return this.getFactory().createMultiPolygon(e)},getBoundary:function(){if(this.isEmpty())return this.getFactory().createMultiLineString();for(var t=new P,e=0;e<this.geometries.length;e++)for(var n=this.geometries[e],r=n.getBoundary(),s=0;s<r.getNumGeometries();s++)t.add(r.getGeometryN(s));var a=new Array(t.size()).fill(null);return this.getFactory().createMultiLineString(t.toArray(a))},getGeometryType:function(){return"MultiPolygon"},copy:function(){for(var t=new Array(this.geometries.length).fill(null),e=0;e<t.length;e++)t[e]=this.geometries[e].copy();return new Ut(t,this.factory)},interfaces_:function(){return[Ke]},getClass:function(){return Ut}}),Ut.serialVersionUID=-0x7a5aa1369171980,u(de.prototype,{setCopyUserData:function(t){this.isUserDataCopied=t},edit:function(t,e){if(t===null)return null;var n=this.editInternal(t,e);return this.isUserDataCopied&&n.setUserData(t.getUserData()),n},editInternal:function(t,e){return this.factory===null&&(this.factory=t.getFactory()),t instanceof ut?this.editGeometryCollection(t,e):t instanceof vt?this.editPolygon(t,e):t instanceof wt?e.edit(t,this.factory):t instanceof it?e.edit(t,this.factory):(T.shouldNeverReachHere("Unsupported Geometry class: "+t.getClass().getName()),null)},editGeometryCollection:function(t,e){for(var n=e.edit(t,this.factory),r=new P,s=0;s<n.getNumGeometries();s++){var a=this.edit(n.getGeometryN(s),e);a===null||a.isEmpty()||r.add(a)}return n.getClass()===se?this.factory.createMultiPoint(r.toArray([])):n.getClass()===re?this.factory.createMultiLineString(r.toArray([])):n.getClass()===Ut?this.factory.createMultiPolygon(r.toArray([])):this.factory.createGeometryCollection(r.toArray([]))},editPolygon:function(t,e){var n=e.edit(t,this.factory);if(n===null&&(n=this.factory.createPolygon(null)),n.isEmpty())return n;var r=this.edit(n.getExteriorRing(),e);if(r===null||r.isEmpty())return this.factory.createPolygon();for(var s=new P,a=0;a<n.getNumInteriorRing();a++){var c=this.edit(n.getInteriorRingN(a),e);c===null||c.isEmpty()||s.add(c)}return this.factory.createPolygon(r,s.toArray([]))},interfaces_:function(){return[]},getClass:function(){return de}}),de.GeometryEditorOperation=Ur,u(fo.prototype,{edit:function(t,e){return t},interfaces_:function(){return[Ur]},getClass:function(){return fo}}),u(po.prototype,{edit:function(t,e){if(t instanceof Pt)return e.createLinearRing(this.editCoordinates(t.getCoordinates(),t));if(t instanceof it)return e.createLineString(this.editCoordinates(t.getCoordinates(),t));if(t instanceof wt){var n=this.editCoordinates(t.getCoordinates(),t);return n.length>0?e.createPoint(n[0]):e.createPoint()}return t},interfaces_:function(){return[Ur]},getClass:function(){return po}}),u(mo.prototype,{edit:function(t,e){return t instanceof Pt?e.createLinearRing(this.edit(t.getCoordinateSequence(),t)):t instanceof it?e.createLineString(this.edit(t.getCoordinateSequence(),t)):t instanceof wt?e.createPoint(this.edit(t.getCoordinateSequence(),t)):t},interfaces_:function(){return[Ur]},getClass:function(){return mo}}),de.NoOpGeometryOperation=fo,de.CoordinateOperation=po,de.CoordinateSequenceOperation=mo,u(pe.prototype,{setOrdinate:function(t,e,n){switch(e){case at.X:this.coordinates[t].x=n;break;case at.Y:this.coordinates[t].y=n;break;case at.Z:this.coordinates[t].z=n;break;default:throw new d}},size:function(){return this.coordinates.length},getOrdinate:function(t,e){switch(e){case at.X:return this.coordinates[t].x;case at.Y:return this.coordinates[t].y;case at.Z:return this.coordinates[t].z}return p.NaN},getCoordinate:function(){if(arguments.length===1){var t=arguments[0];return this.coordinates[t]}if(arguments.length===2){var e=arguments[0],n=arguments[1];n.x=this.coordinates[e].x,n.y=this.coordinates[e].y,n.z=this.coordinates[e].z}},getCoordinateCopy:function(t){return new I(this.coordinates[t])},getDimension:function(){return this.dimension},getX:function(t){return this.coordinates[t].x},clone:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].clone();return new pe(t,this.dimension)},expandEnvelope:function(t){for(var e=0;e<this.coordinates.length;e++)t.expandToInclude(this.coordinates[e]);return t},copy:function(){for(var t=new Array(this.size()).fill(null),e=0;e<this.coordinates.length;e++)t[e]=this.coordinates[e].copy();return new pe(t,this.dimension)},toString:function(){if(this.coordinates.length>0){var t=new Ct(17*this.coordinates.length);t.append("("),t.append(this.coordinates[0]);for(var e=1;e<this.coordinates.length;e++)t.append(", "),t.append(this.coordinates[e]);return t.append(")"),t.toString()}return"()"},getY:function(t){return this.coordinates[t].y},toCoordinateArray:function(){return this.coordinates},interfaces_:function(){return[at,N]},getClass:function(){return pe}}),pe.serialVersionUID=-0xcb44a778db18e00,u(fn.prototype,{readResolve:function(){return fn.instance()},create:function(){if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new pe(t)}if(U(arguments[0],at)){var e=arguments[0];return new pe(e)}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return r>3&&(r=3),2>r?new pe(n):new pe(n,r)}},interfaces_:function(){return[En,N]},getClass:function(){return fn}}),fn.instance=function(){return fn.instanceObject},fn.serialVersionUID=-0x38e49fa6cf6f2e00,fn.instanceObject=new fn;var He,vl=Object.defineProperty,yl=el({delete:il,has:al,get:rl,set:ul,keys:hl,values:cl,entries:gl,forEach:dl,clear:ll}),xl=typeof Map<"u"&&Map.prototype.values?Map:yl;je.prototype=new kn,je.prototype.get=function(t){return this.map_.get(t)||null},je.prototype.put=function(t,e){return this.map_.set(t,e),e},je.prototype.values=function(){for(var t=new P,e=this.map_.values(),n=e.next();!n.done;)t.add(n.value),n=e.next();return t},je.prototype.entrySet=function(){var t=new kt;return this.map_.entries().forEach(function(e){return t.add(e)}),t},je.prototype.size=function(){return this.map_.size()},u(ft.prototype,{equals:function(t){if(!(t instanceof ft))return!1;var e=t;return this.modelType===e.modelType&&this.scale===e.scale},compareTo:function(t){var e=t,n=this.getMaximumSignificantDigits(),r=e.getMaximumSignificantDigits();return new Tt(n).compareTo(new Tt(r))},getScale:function(){return this.scale},isFloating:function(){return this.modelType===ft.FLOATING||this.modelType===ft.FLOATING_SINGLE},getType:function(){return this.modelType},toString:function(){var t="UNKNOWN";return this.modelType===ft.FLOATING?t="Floating":this.modelType===ft.FLOATING_SINGLE?t="Floating-Single":this.modelType===ft.FIXED&&(t="Fixed (Scale="+this.getScale()+")"),t},makePrecise:function(){if(typeof arguments[0]=="number"){var t=arguments[0];if(p.isNaN(t))return t;if(this.modelType===ft.FLOATING_SINGLE){var e=t;return e}return this.modelType===ft.FIXED?Math.round(t*this.scale)/this.scale:t}if(arguments[0]instanceof I){var n=arguments[0];if(this.modelType===ft.FLOATING)return null;n.x=this.makePrecise(n.x),n.y=this.makePrecise(n.y)}},getMaximumSignificantDigits:function(){var t=16;return this.modelType===ft.FLOATING?t=16:this.modelType===ft.FLOATING_SINGLE?t=6:this.modelType===ft.FIXED&&(t=1+Math.trunc(Math.ceil(Math.log(this.getScale())/Math.log(10)))),t},setScale:function(t){this.scale=Math.abs(t)},interfaces_:function(){return[N,m]},getClass:function(){return ft}}),ft.mostPrecise=function(t,e){return t.compareTo(e)>=0?t:e},u(qe.prototype,{readResolve:function(){return qe.nameToTypeMap.get(this.name)},toString:function(){return this.name},interfaces_:function(){return[N]},getClass:function(){return qe}}),qe.serialVersionUID=-552860263173159e4,qe.nameToTypeMap=new je,ft.Type=qe,ft.serialVersionUID=7777263578777804e3,ft.FIXED=new qe("FIXED"),ft.FLOATING=new qe("FLOATING"),ft.FLOATING_SINGLE=new qe("FLOATING SINGLE"),ft.maximumPreciseValue=9007199254740992,u(ot.prototype,{toGeometry:function(t){return t.isNull()?this.createPoint(null):t.getMinX()===t.getMaxX()&&t.getMinY()===t.getMaxY()?this.createPoint(new I(t.getMinX(),t.getMinY())):t.getMinX()===t.getMaxX()||t.getMinY()===t.getMaxY()?this.createLineString([new I(t.getMinX(),t.getMinY()),new I(t.getMaxX(),t.getMaxY())]):this.createPolygon(this.createLinearRing([new I(t.getMinX(),t.getMinY()),new I(t.getMinX(),t.getMaxY()),new I(t.getMaxX(),t.getMaxY()),new I(t.getMaxX(),t.getMinY()),new I(t.getMinX(),t.getMinY())]),null)},createLineString:function(){if(arguments.length===0)return this.createLineString(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLineString(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(U(arguments[0],at)){var e=arguments[0];return new it(e,this)}}},createMultiLineString:function(){if(arguments.length===0)return new re(null,this);if(arguments.length===1){var t=arguments[0];return new re(t,this)}},buildGeometry:function(t){for(var e=null,n=!1,r=!1,s=t.iterator();s.hasNext();){var a=s.next(),c=a.getClass();e===null&&(e=c),c!==e&&(n=!0),a.isGeometryCollectionOrDerived()&&(r=!0)}if(e===null)return this.createGeometryCollection();if(n||r)return this.createGeometryCollection(ot.toGeometryArray(t));var f=t.iterator().next(),y=t.size()>1;if(y){if(f instanceof vt)return this.createMultiPolygon(ot.toPolygonArray(t));if(f instanceof it)return this.createMultiLineString(ot.toLineStringArray(t));if(f instanceof wt)return this.createMultiPoint(ot.toPointArray(t));T.shouldNeverReachHere("Unhandled class: "+f.getClass().getName())}return f},createMultiPointFromCoords:function(t){return this.createMultiPoint(t!==null?this.getCoordinateSequenceFactory().create(t):null)},createPoint:function(){if(arguments.length===0)return this.createPoint(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof I){var t=arguments[0];return this.createPoint(t!==null?this.getCoordinateSequenceFactory().create([t]):null)}if(U(arguments[0],at)){var e=arguments[0];return new wt(e,this)}}},getCoordinateSequenceFactory:function(){return this.coordinateSequenceFactory},createPolygon:function(){if(arguments.length===0)return new vt(null,null,this);if(arguments.length===1){if(U(arguments[0],at)){var t=arguments[0];return this.createPolygon(this.createLinearRing(t))}if(arguments[0]instanceof Array){var e=arguments[0];return this.createPolygon(this.createLinearRing(e))}if(arguments[0]instanceof Pt){var n=arguments[0];return this.createPolygon(n,null)}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];return new vt(r,s,this)}},getSRID:function(){return this.SRID},createGeometryCollection:function(){if(arguments.length===0)return new ut(null,this);if(arguments.length===1){var t=arguments[0];return new ut(t,this)}},createGeometry:function(t){var e=new de(this);return e.edit(t,{edit:function(){if(arguments.length===2){var n=arguments[0];return this.coordinateSequenceFactory.create(n)}}})},getPrecisionModel:function(){return this.precisionModel},createLinearRing:function(){if(arguments.length===0)return this.createLinearRing(this.getCoordinateSequenceFactory().create([]));if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return this.createLinearRing(t!==null?this.getCoordinateSequenceFactory().create(t):null)}if(U(arguments[0],at)){var e=arguments[0];return new Pt(e,this)}}},createMultiPolygon:function(){if(arguments.length===0)return new Ut(null,this);if(arguments.length===1){var t=arguments[0];return new Ut(t,this)}},createMultiPoint:function(){if(arguments.length===0)return new se(null,this);if(arguments.length===1){if(arguments[0]instanceof Array){var t=arguments[0];return new se(t,this)}if(arguments[0]instanceof Array){var e=arguments[0];return this.createMultiPoint(e!==null?this.getCoordinateSequenceFactory().create(e):null)}if(U(arguments[0],at)){var n=arguments[0];if(n===null)return this.createMultiPoint(new Array(0).fill(null));for(var r=new Array(n.size()).fill(null),s=0;s<n.size();s++){var a=this.getCoordinateSequenceFactory().create(1,n.getDimension());_t.copy(n,s,a,0,1),r[s]=this.createPoint(a)}return this.createMultiPoint(r)}}},interfaces_:function(){return[N]},getClass:function(){return ot}}),ot.toMultiPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toGeometryArray=function(t){if(t===null)return null;var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.getDefaultCoordinateSequenceFactory=function(){return fn.instance()},ot.toMultiLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toLineStringArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toMultiPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toLinearRingArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toPointArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.toPolygonArray=function(t){var e=new Array(t.size()).fill(null);return t.toArray(e)},ot.createPointFromInternalCoord=function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},ot.serialVersionUID=-6820524753094096e3;var De={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,emptyTypeStr:/^\s*(\w+)\s*EMPTY\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/};u(yo.prototype,{read:function(t){var e,n,r;t=t.replace(/[\n\r]/g," ");var s=De.typeStr.exec(t);if(t.search("EMPTY")!==-1&&(s=De.emptyTypeStr.exec(t),s[2]=void 0),s&&(n=s[1].toLowerCase(),r=s[2],Oi[n]&&(e=Oi[n].apply(this,[r]))),e===void 0)throw new Error("Could not parse WKT "+t);return e},write:function(t){return this.extractGeometry(t)},extractGeometry:function(t){var e=t.getGeometryType().toLowerCase();if(!ln[e])return null;var n=e.toUpperCase();return t.isEmpty()?n+" EMPTY":n+"("+ln[e].apply(this,[t])+")"}});var ln={coordinate:function(t){return t.x+" "+t.y},point:function(t){return ln.coordinate.call(this,t.coordinates.coordinates[0])},multipoint:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+ln.point.apply(this,[t.geometries[n]])+")");return e.join(",")},linestring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(ln.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},linearring:function(t){for(var e=[],n=0,r=t.points.coordinates.length;r>n;++n)e.push(ln.coordinate.apply(this,[t.points.coordinates[n]]));return e.join(",")},multilinestring:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+ln.linestring.apply(this,[t.geometries[n]])+")");return e.join(",")},polygon:function(t){var e=[];e.push("("+ln.linestring.apply(this,[t.shell])+")");for(var n=0,r=t.holes.length;r>n;++n)e.push("("+ln.linestring.apply(this,[t.holes[n]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push("("+ln.polygon.apply(this,[t.geometries[n]])+")");return e.join(",")},geometrycollection:function(t){for(var e=[],n=0,r=t.geometries.length;r>n;++n)e.push(this.extractGeometry(t.geometries[n]));return e.join(",")}},Oi={point:function(t){if(t===void 0)return this.geometryFactory.createPoint();var e=t.trim().split(De.spaces);return this.geometryFactory.createPoint(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])))},multipoint:function(t){if(t===void 0)return this.geometryFactory.createMultiPoint();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;a>s;++s)e=n[s].replace(De.trimParens,"$1"),r.push(Oi.point.apply(this,[e]));return this.geometryFactory.createMultiPoint(r)},linestring:function(t){if(t===void 0)return this.geometryFactory.createLineString();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;a>s;++s)e=n[s].trim().split(De.spaces),r.push(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLineString(r)},linearring:function(t){if(t===void 0)return this.geometryFactory.createLinearRing();for(var e,n=t.trim().split(","),r=[],s=0,a=n.length;a>s;++s)e=n[s].trim().split(De.spaces),r.push(new I(Number.parseFloat(e[0]),Number.parseFloat(e[1])));return this.geometryFactory.createLinearRing(r)},multilinestring:function(t){if(t===void 0)return this.geometryFactory.createMultiLineString();for(var e,n=t.trim().split(De.parenComma),r=[],s=0,a=n.length;a>s;++s)e=n[s].replace(De.trimParens,"$1"),r.push(Oi.linestring.apply(this,[e]));return this.geometryFactory.createMultiLineString(r)},polygon:function(t){if(t===void 0)return this.geometryFactory.createPolygon();for(var e,n,r,s,a=t.trim().split(De.parenComma),c=[],f=0,y=a.length;y>f;++f)e=a[f].replace(De.trimParens,"$1"),n=Oi.linestring.apply(this,[e]),r=this.geometryFactory.createLinearRing(n.points),f===0?s=r:c.push(r);return this.geometryFactory.createPolygon(s,c)},multipolygon:function(t){if(t===void 0)return this.geometryFactory.createMultiPolygon();for(var e,n=t.trim().split(De.doubleParenComma),r=[],s=0,a=n.length;a>s;++s)e=n[s].replace(De.trimParens,"$1"),r.push(Oi.polygon.apply(this,[e]));return this.geometryFactory.createMultiPolygon(r)},geometrycollection:function(t){if(t===void 0)return this.geometryFactory.createGeometryCollection();t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=t.trim().split("|"),n=[],r=0,s=e.length;s>r;++r)n.push(this.read(e[r]));return this.geometryFactory.createGeometryCollection(n)}};u(Wt.prototype,{write:function(t){return this.parser.write(t)}}),u(Wt,{toLineString:function(t,e){if(arguments.length!==2)throw new Error("Not implemented");return"LINESTRING ( "+t.x+" "+t.y+", "+e.x+" "+e.y+" )"}}),u(yt.prototype,{getIndexAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intLineIndex[t][e]},getTopologySummary:function(){var t=new Ct;return this.isEndPoint()&&t.append(" endpoint"),this._isProper&&t.append(" proper"),this.isCollinear()&&t.append(" collinear"),t.toString()},computeIntersection:function(t,e,n,r){this.inputLines[0][0]=t,this.inputLines[0][1]=e,this.inputLines[1][0]=n,this.inputLines[1][1]=r,this.result=this.computeIntersect(t,e,n,r)},getIntersectionNum:function(){return this.result},computeIntLineIndex:function(){if(arguments.length===0)this.intLineIndex===null&&(this.intLineIndex=Array(2).fill().map(function(){return Array(2)}),this.computeIntLineIndex(0),this.computeIntLineIndex(1));else if(arguments.length===1){var t=arguments[0],e=this.getEdgeDistance(t,0),n=this.getEdgeDistance(t,1);e>n?(this.intLineIndex[t][0]=0,this.intLineIndex[t][1]=1):(this.intLineIndex[t][0]=1,this.intLineIndex[t][1]=0)}},isProper:function(){return this.hasIntersection()&&this._isProper},setPrecisionModel:function(t){this.precisionModel=t},isInteriorIntersection:function(){if(arguments.length===0)return this.isInteriorIntersection(0)?!0:!!this.isInteriorIntersection(1);if(arguments.length===1){for(var t=arguments[0],e=0;e<this.result;e++)if(!this.intPt[e].equals2D(this.inputLines[t][0])&&!this.intPt[e].equals2D(this.inputLines[t][1]))return!0;return!1}},getIntersection:function(t){return this.intPt[t]},isEndPoint:function(){return this.hasIntersection()&&!this._isProper},hasIntersection:function(){return this.result!==yt.NO_INTERSECTION},getEdgeDistance:function(t,e){var n=yt.computeEdgeDistance(this.intPt[e],this.inputLines[t][0],this.inputLines[t][1]);return n},isCollinear:function(){return this.result===yt.COLLINEAR_INTERSECTION},toString:function(){return Wt.toLineString(this.inputLines[0][0],this.inputLines[0][1])+" - "+Wt.toLineString(this.inputLines[1][0],this.inputLines[1][1])+this.getTopologySummary()},getEndpoint:function(t,e){return this.inputLines[t][e]},isIntersection:function(t){for(var e=0;e<this.result;e++)if(this.intPt[e].equals2D(t))return!0;return!1},getIntersectionAlongSegment:function(t,e){return this.computeIntLineIndex(),this.intPt[this.intLineIndex[t][e]]},interfaces_:function(){return[]},getClass:function(){return yt}}),yt.computeEdgeDistance=function(t,e,n){var r=Math.abs(n.x-e.x),s=Math.abs(n.y-e.y),a=-1;if(t.equals(e))a=0;else if(t.equals(n))a=r>s?r:s;else{var c=Math.abs(t.x-e.x),f=Math.abs(t.y-e.y);a=r>s?c:f,a!==0||t.equals(e)||(a=Math.max(c,f))}return T.isTrue(!(a===0&&!t.equals(e)),"Bad distance calculation"),a},yt.nonRobustComputeEdgeDistance=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=Math.sqrt(r*r+s*s);return T.isTrue(!(a===0&&!t.equals(e)),"Invalid distance calculation"),a},yt.DONT_INTERSECT=0,yt.DO_INTERSECT=1,yt.COLLINEAR=2,yt.NO_INTERSECTION=0,yt.POINT_INTERSECTION=1,yt.COLLINEAR_INTERSECTION=2,S(zt,yt),u(zt.prototype,{isInSegmentEnvelopes:function(t){var e=new O(this.inputLines[0][0],this.inputLines[0][1]),n=new O(this.inputLines[1][0],this.inputLines[1][1]);return e.contains(t)&&n.contains(t)},computeIntersection:function(){if(arguments.length!==3)return yt.prototype.computeIntersection.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2];return this._isProper=!1,O.intersects(e,n,t)&&k.orientationIndex(e,n,t)===0&&k.orientationIndex(n,e,t)===0?(this._isProper=!0,(t.equals(e)||t.equals(n))&&(this._isProper=!1),this.result=yt.POINT_INTERSECTION,null):void(this.result=yt.NO_INTERSECTION)},normalizeToMinimum:function(t,e,n,r,s){s.x=this.smallestInAbsValue(t.x,e.x,n.x,r.x),s.y=this.smallestInAbsValue(t.y,e.y,n.y,r.y),t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},safeHCoordinateIntersection:function(t,e,n,r){var s=null;try{s=Ht.intersection(t,e,n,r)}catch(a){if(!(a instanceof G))throw a;s=zt.nearestEndpoint(t,e,n,r)}finally{}return s},intersection:function(t,e,n,r){var s=this.intersectionWithNormalization(t,e,n,r);return this.isInSegmentEnvelopes(s)||(s=new I(zt.nearestEndpoint(t,e,n,r))),this.precisionModel!==null&&this.precisionModel.makePrecise(s),s},smallestInAbsValue:function(t,e,n,r){var s=t,a=Math.abs(s);return Math.abs(e)<a&&(s=e,a=Math.abs(e)),Math.abs(n)<a&&(s=n,a=Math.abs(n)),Math.abs(r)<a&&(s=r),s},checkDD:function(t,e,n,r,s){var a=Lt.intersection(t,e,n,r),c=this.isInSegmentEnvelopes(a);mt.out.println("DD in env = "+c+"  --------------------- "+a),s.distance(a)>1e-4&&mt.out.println("Distance = "+s.distance(a))},intersectionWithNormalization:function(t,e,n,r){var s=new I(t),a=new I(e),c=new I(n),f=new I(r),y=new I;this.normalizeToEnvCentre(s,a,c,f,y);var L=this.safeHCoordinateIntersection(s,a,c,f);return L.x+=y.x,L.y+=y.y,L},computeCollinearIntersection:function(t,e,n,r){var s=O.intersects(t,e,n),a=O.intersects(t,e,r),c=O.intersects(n,r,t),f=O.intersects(n,r,e);return s&&a?(this.intPt[0]=n,this.intPt[1]=r,yt.COLLINEAR_INTERSECTION):c&&f?(this.intPt[0]=t,this.intPt[1]=e,yt.COLLINEAR_INTERSECTION):s&&c?(this.intPt[0]=n,this.intPt[1]=t,!n.equals(t)||a||f?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):s&&f?(this.intPt[0]=n,this.intPt[1]=e,!n.equals(e)||a||c?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):a&&c?(this.intPt[0]=r,this.intPt[1]=t,!r.equals(t)||s||f?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):a&&f?(this.intPt[0]=r,this.intPt[1]=e,!r.equals(e)||s||c?yt.COLLINEAR_INTERSECTION:yt.POINT_INTERSECTION):yt.NO_INTERSECTION},normalizeToEnvCentre:function(t,e,n,r,s){var a=t.x<e.x?t.x:e.x,c=t.y<e.y?t.y:e.y,f=t.x>e.x?t.x:e.x,y=t.y>e.y?t.y:e.y,L=n.x<r.x?n.x:r.x,M=n.y<r.y?n.y:r.y,D=n.x>r.x?n.x:r.x,q=n.y>r.y?n.y:r.y,$=a>L?a:L,j=D>f?f:D,tt=c>M?c:M,It=q>y?y:q,bt=($+j)/2,Fe=(tt+It)/2;s.x=bt,s.y=Fe,t.x-=s.x,t.y-=s.y,e.x-=s.x,e.y-=s.y,n.x-=s.x,n.y-=s.y,r.x-=s.x,r.y-=s.y},computeIntersect:function(t,e,n,r){if(this._isProper=!1,!O.intersects(t,e,n,r))return yt.NO_INTERSECTION;var s=k.orientationIndex(t,e,n),a=k.orientationIndex(t,e,r);if(s>0&&a>0||0>s&&0>a)return yt.NO_INTERSECTION;var c=k.orientationIndex(n,r,t),f=k.orientationIndex(n,r,e);if(c>0&&f>0||0>c&&0>f)return yt.NO_INTERSECTION;var y=s===0&&a===0&&c===0&&f===0;return y?this.computeCollinearIntersection(t,e,n,r):(s===0||a===0||c===0||f===0?(this._isProper=!1,t.equals2D(n)||t.equals2D(r)?this.intPt[0]=t:e.equals2D(n)||e.equals2D(r)?this.intPt[0]=e:s===0?this.intPt[0]=new I(n):a===0?this.intPt[0]=new I(r):c===0?this.intPt[0]=new I(t):f===0&&(this.intPt[0]=new I(e))):(this._isProper=!0,this.intPt[0]=this.intersection(t,e,n,r)),yt.POINT_INTERSECTION)},interfaces_:function(){return[]},getClass:function(){return zt}}),zt.nearestEndpoint=function(t,e,n,r){var s=t,a=k.distancePointLine(t,n,r),c=k.distancePointLine(e,n,r);return a>c&&(a=c,s=e),c=k.distancePointLine(n,t,e),a>c&&(a=c,s=n),c=k.distancePointLine(r,t,e),a>c&&(a=c,s=r),s},u(Xn.prototype,{interfaces_:function(){return[]},getClass:function(){return Xn}}),Xn.orientationIndex=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=n.x-e.x,c=n.y-e.y;return Xn.signOfDet2x2(r,s,a,c)},Xn.signOfDet2x2=function(t,e,n,r){var s=null,a=null,c=null;if(s=1,t===0||r===0)return e===0||n===0?0:e>0?n>0?-s:s:n>0?s:-s;if(e===0||n===0)return r>0?t>0?s:-s:t>0?-s:s;if(e>0?r>0?r>=e||(s=-s,a=t,t=n,n=a,a=e,e=r,r=a):-r>=e?(s=-s,n=-n,r=-r):(a=t,t=-n,n=a,a=e,e=-r,r=a):r>0?r>=-e?(s=-s,t=-t,e=-e):(a=-t,t=n,n=a,a=-e,e=r,r=a):e>=r?(t=-t,e=-e,n=-n,r=-r):(s=-s,a=-t,t=-n,n=a,a=-e,e=-r,r=a),t>0){if(!(n>0)||!(n>=t))return s}else{if(n>0||!(t>=n))return-s;s=-s,t=-t,n=-n}for(;;){if(c=Math.floor(n/t),n-=c*t,r-=c*e,0>r)return-s;if(r>e)return s;if(t>n+n){if(r+r>e)return s}else{if(e>r+r)return-s;n=t-n,r=e-r,s=-s}if(r===0)return n===0?0:-s;if(n===0||(c=Math.floor(t/n),t-=c*n,e-=c*r,0>e))return s;if(e>r)return-s;if(n>t+t){if(e+e>r)return-s}else{if(r>e+e)return s;t=n-t,e=r-e,s=-s}if(e===0)return t===0?0:s;if(t===0)return-s}},u(Yn.prototype,{countSegment:function(t,e){if(t.x<this.p.x&&e.x<this.p.x)return null;if(this.p.x===e.x&&this.p.y===e.y)return this.isPointOnSegment=!0,null;if(t.y===this.p.y&&e.y===this.p.y){var n=t.x,r=e.x;return n>r&&(n=e.x,r=t.x),this.p.x>=n&&this.p.x<=r&&(this.isPointOnSegment=!0),null}if(t.y>this.p.y&&e.y<=this.p.y||e.y>this.p.y&&t.y<=this.p.y){var s=t.x-this.p.x,a=t.y-this.p.y,c=e.x-this.p.x,f=e.y-this.p.y,y=Xn.signOfDet2x2(s,a,c,f);if(y===0)return this.isPointOnSegment=!0,null;a>f&&(y=-y),y>0&&this.crossingCount++}},isPointInPolygon:function(){return this.getLocation()!==v.EXTERIOR},getLocation:function(){return this.isPointOnSegment?v.BOUNDARY:this.crossingCount%2===1?v.INTERIOR:v.EXTERIOR},isOnSegment:function(){return this.isPointOnSegment},interfaces_:function(){return[]},getClass:function(){return Yn}}),Yn.locatePointInRing=function(){if(arguments[0]instanceof I&&U(arguments[1],at)){for(var t=arguments[0],e=arguments[1],n=new Yn(t),r=new I,s=new I,a=1;a<e.size();a++)if(e.getCoordinate(a,r),e.getCoordinate(a-1,s),n.countSegment(r,s),n.isOnSegment())return n.getLocation();return n.getLocation()}if(arguments[0]instanceof I&&arguments[1]instanceof Array){for(var c=arguments[0],f=arguments[1],n=new Yn(c),a=1;a<f.length;a++){var r=f[a],s=f[a-1];if(n.countSegment(r,s),n.isOnSegment())return n.getLocation()}return n.getLocation()}},u(k.prototype,{interfaces_:function(){return[]},getClass:function(){return k}}),k.orientationIndex=function(t,e,n){return Lt.orientationIndex(t,e,n)},k.signedArea=function(){if(arguments[0]instanceof Array){var t=arguments[0];if(t.length<3)return 0;for(var e=0,n=t[0].x,r=1;r<t.length-1;r++){var s=t[r].x-n,a=t[r+1].y,c=t[r-1].y;e+=s*(c-a)}return e/2}if(U(arguments[0],at)){var f=arguments[0],y=f.size();if(3>y)return 0;var L=new I,M=new I,D=new I;f.getCoordinate(0,M),f.getCoordinate(1,D);var n=M.x;D.x-=n;for(var e=0,r=1;y-1>r;r++)L.y=M.y,M.x=D.x,M.y=D.y,f.getCoordinate(r+1,D),D.x-=n,e+=M.x*(L.y-D.y);return e/2}},k.distanceLineLine=function(t,e,n,r){if(t.equals(e))return k.distancePointLine(t,n,r);if(n.equals(r))return k.distancePointLine(r,t,e);var s=!1;if(O.intersects(t,e,n,r)){var a=(e.x-t.x)*(r.y-n.y)-(e.y-t.y)*(r.x-n.x);if(a===0)s=!0;else{var c=(t.y-n.y)*(r.x-n.x)-(t.x-n.x)*(r.y-n.y),f=(t.y-n.y)*(e.x-t.x)-(t.x-n.x)*(e.y-t.y),y=f/a,L=c/a;(0>L||L>1||0>y||y>1)&&(s=!0)}}else s=!0;return s?st.min(k.distancePointLine(t,n,r),k.distancePointLine(e,n,r),k.distancePointLine(n,t,e),k.distancePointLine(r,t,e)):0},k.isPointInRing=function(t,e){return k.locatePointInRing(t,e)!==v.EXTERIOR},k.computeLength=function(t){var e=t.size();if(1>=e)return 0;var n=0,r=new I;t.getCoordinate(0,r);for(var s=r.x,a=r.y,c=1;e>c;c++){t.getCoordinate(c,r);var f=r.x,y=r.y,L=f-s,M=y-a;n+=Math.sqrt(L*L+M*M),s=f,a=y}return n},k.isCCW=function(t){var e=t.length-1;if(3>e)throw new d;for(var n=t[0],r=0,s=1;e>=s;s++){var a=t[s];a.y>n.y&&(n=a,r=s)}var c=r;do c-=1,0>c&&(c=e);while(t[c].equals2D(n)&&c!==r);var f=r;do f=(f+1)%e;while(t[f].equals2D(n)&&f!==r);var y=t[c],L=t[f];if(y.equals2D(n)||L.equals2D(n)||y.equals2D(L))return!1;var M=k.computeOrientation(y,n,L);return M===0?y.x>L.x:M>0},k.locatePointInRing=function(t,e){return Yn.locatePointInRing(t,e)},k.distancePointLinePerpendicular=function(t,e,n){var r=(n.x-e.x)*(n.x-e.x)+(n.y-e.y)*(n.y-e.y),s=((e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y))/r;return Math.abs(s)*Math.sqrt(r)},k.computeOrientation=function(t,e,n){return k.orientationIndex(t,e,n)},k.distancePointLine=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];if(e.length===0)throw new d;for(var n=t.distance(e[0]),r=0;r<e.length-1;r++){var s=k.distancePointLine(t,e[r],e[r+1]);n>s&&(n=s)}return n}if(arguments.length===3){var a=arguments[0],c=arguments[1],f=arguments[2];if(c.x===f.x&&c.y===f.y)return a.distance(c);var y=(f.x-c.x)*(f.x-c.x)+(f.y-c.y)*(f.y-c.y),L=((a.x-c.x)*(f.x-c.x)+(a.y-c.y)*(f.y-c.y))/y;if(0>=L)return a.distance(c);if(L>=1)return a.distance(f);var M=((c.y-a.y)*(f.x-c.x)-(c.x-a.x)*(f.y-c.y))/y;return Math.abs(M)*Math.sqrt(y)}},k.isOnLine=function(t,e){for(var n=new zt,r=1;r<e.length;r++){var s=e[r-1],a=e[r];if(n.computeIntersection(t,s,a),n.hasIntersection())return!0}return!1},k.CLOCKWISE=-1,k.RIGHT=k.CLOCKWISE,k.COUNTERCLOCKWISE=1,k.LEFT=k.COUNTERCLOCKWISE,k.COLLINEAR=0,k.STRAIGHT=k.COLLINEAR,u(et.prototype,{minX:function(){return Math.min(this.p0.x,this.p1.x)},orientationIndex:function(){if(arguments[0]instanceof et){var t=arguments[0],e=k.orientationIndex(this.p0,this.p1,t.p0),n=k.orientationIndex(this.p0,this.p1,t.p1);return e>=0&&n>=0||0>=e&&0>=n?Math.max(e,n):0}if(arguments[0]instanceof I){var r=arguments[0];return k.orientationIndex(this.p0,this.p1,r)}},toGeometry:function(t){return t.createLineString([this.p0,this.p1])},isVertical:function(){return this.p0.x===this.p1.x},equals:function(t){if(!(t instanceof et))return!1;var e=t;return this.p0.equals(e.p0)&&this.p1.equals(e.p1)},intersection:function(t){var e=new zt;return e.computeIntersection(this.p0,this.p1,t.p0,t.p1),e.hasIntersection()?e.getIntersection(0):null},project:function(){if(arguments[0]instanceof I){var t=arguments[0];if(t.equals(this.p0)||t.equals(this.p1))return new I(t);var e=this.projectionFactor(t),n=new I;return n.x=this.p0.x+e*(this.p1.x-this.p0.x),n.y=this.p0.y+e*(this.p1.y-this.p0.y),n}if(arguments[0]instanceof et){var r=arguments[0],s=this.projectionFactor(r.p0),a=this.projectionFactor(r.p1);if(s>=1&&a>=1||0>=s&&0>=a)return null;var c=this.project(r.p0);0>s&&(c=this.p0),s>1&&(c=this.p1);var f=this.project(r.p1);return 0>a&&(f=this.p0),a>1&&(f=this.p1),new et(c,f)}},normalize:function(){this.p1.compareTo(this.p0)<0&&this.reverse()},angle:function(){return Math.atan2(this.p1.y-this.p0.y,this.p1.x-this.p0.x)},getCoordinate:function(t){return t===0?this.p0:this.p1},distancePerpendicular:function(t){return k.distancePointLinePerpendicular(t,this.p0,this.p1)},minY:function(){return Math.min(this.p0.y,this.p1.y)},midPoint:function(){return et.midPoint(this.p0,this.p1)},projectionFactor:function(t){if(t.equals(this.p0))return 0;if(t.equals(this.p1))return 1;var e=this.p1.x-this.p0.x,n=this.p1.y-this.p0.y,r=e*e+n*n;if(0>=r)return p.NaN;var s=((t.x-this.p0.x)*e+(t.y-this.p0.y)*n)/r;return s},closestPoints:function(t){var e=this.intersection(t);if(e!==null)return[e,e];var n=new Array(2).fill(null),r=p.MAX_VALUE,s=null,a=this.closestPoint(t.p0);r=a.distance(t.p0),n[0]=a,n[1]=t.p0;var c=this.closestPoint(t.p1);s=c.distance(t.p1),r>s&&(r=s,n[0]=c,n[1]=t.p1);var f=t.closestPoint(this.p0);s=f.distance(this.p0),r>s&&(r=s,n[0]=this.p0,n[1]=f);var y=t.closestPoint(this.p1);return s=y.distance(this.p1),r>s&&(r=s,n[0]=this.p1,n[1]=y),n},closestPoint:function(t){var e=this.projectionFactor(t);if(e>0&&1>e)return this.project(t);var n=this.p0.distance(t),r=this.p1.distance(t);return r>n?this.p0:this.p1},maxX:function(){return Math.max(this.p0.x,this.p1.x)},getLength:function(){return this.p0.distance(this.p1)},compareTo:function(t){var e=t,n=this.p0.compareTo(e.p0);return n!==0?n:this.p1.compareTo(e.p1)},reverse:function(){var t=this.p0;this.p0=this.p1,this.p1=t},equalsTopo:function(t){return this.p0.equals(t.p0)&&this.p1.equals(t.p1)||this.p0.equals(t.p1)&&this.p1.equals(t.p0)},lineIntersection:function(t){try{var e=Ht.intersection(this.p0,this.p1,t.p0,t.p1);return e}catch(n){if(!(n instanceof G))throw n}finally{}return null},maxY:function(){return Math.max(this.p0.y,this.p1.y)},pointAlongOffset:function(t,e){var n=this.p0.x+t*(this.p1.x-this.p0.x),r=this.p0.y+t*(this.p1.y-this.p0.y),s=this.p1.x-this.p0.x,a=this.p1.y-this.p0.y,c=Math.sqrt(s*s+a*a),f=0,y=0;if(e!==0){if(0>=c)throw new IllegalStateException("Cannot compute offset from zero-length line segment");f=e*s/c,y=e*a/c}var L=n-y,M=r+f,D=new I(L,M);return D},setCoordinates:function(){if(arguments.length===1){var t=arguments[0];this.setCoordinates(t.p0,t.p1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.p0.x=e.x,this.p0.y=e.y,this.p1.x=n.x,this.p1.y=n.y}},segmentFraction:function(t){var e=this.projectionFactor(t);return 0>e?e=0:(e>1||p.isNaN(e))&&(e=1),e},toString:function(){return"LINESTRING( "+this.p0.x+" "+this.p0.y+", "+this.p1.x+" "+this.p1.y+")"},isHorizontal:function(){return this.p0.y===this.p1.y},distance:function(){if(arguments[0]instanceof et){var t=arguments[0];return k.distanceLineLine(this.p0,this.p1,t.p0,t.p1)}if(arguments[0]instanceof I){var e=arguments[0];return k.distancePointLine(e,this.p0,this.p1)}},pointAlong:function(t){var e=new I;return e.x=this.p0.x+t*(this.p1.x-this.p0.x),e.y=this.p0.y+t*(this.p1.y-this.p0.y),e},hashCode:function(){var t=java.lang.Double.doubleToLongBits(this.p0.x);t^=31*java.lang.Double.doubleToLongBits(this.p0.y);var e=Math.trunc(t)^Math.trunc(t>>32),n=java.lang.Double.doubleToLongBits(this.p1.x);n^=31*java.lang.Double.doubleToLongBits(this.p1.y);var r=Math.trunc(n)^Math.trunc(n>>32);return e^r},interfaces_:function(){return[m,N]},getClass:function(){return et}}),et.midPoint=function(t,e){return new I((t.x+e.x)/2,(t.y+e.y)/2)},et.serialVersionUID=0x2d2172135f411c00,u(dt.prototype,{isIntersects:function(){return!this.isDisjoint()},isCovers:function(){var t=dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])||dt.isTrue(this.matrix[v.INTERIOR][v.BOUNDARY])||dt.isTrue(this.matrix[v.BOUNDARY][v.INTERIOR])||dt.isTrue(this.matrix[v.BOUNDARY][v.BOUNDARY]);return t&&this.matrix[v.EXTERIOR][v.INTERIOR]===B.FALSE&&this.matrix[v.EXTERIOR][v.BOUNDARY]===B.FALSE},isCoveredBy:function(){var t=dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])||dt.isTrue(this.matrix[v.INTERIOR][v.BOUNDARY])||dt.isTrue(this.matrix[v.BOUNDARY][v.INTERIOR])||dt.isTrue(this.matrix[v.BOUNDARY][v.BOUNDARY]);return t&&this.matrix[v.INTERIOR][v.EXTERIOR]===B.FALSE&&this.matrix[v.BOUNDARY][v.EXTERIOR]===B.FALSE},set:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.matrix[n][r]=B.toDimensionValue(t.charAt(e))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];this.matrix[s][a]=c}},isContains:function(){return dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&this.matrix[v.EXTERIOR][v.INTERIOR]===B.FALSE&&this.matrix[v.EXTERIOR][v.BOUNDARY]===B.FALSE},setAtLeast:function(){if(arguments.length===1)for(var t=arguments[0],e=0;e<t.length;e++){var n=Math.trunc(e/3),r=e%3;this.setAtLeast(n,r,B.toDimensionValue(t.charAt(e)))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];this.matrix[s][a]<c&&(this.matrix[s][a]=c)}},setAtLeastIfValid:function(t,e,n){t>=0&&e>=0&&this.setAtLeast(t,e,n)},isWithin:function(){return dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&this.matrix[v.INTERIOR][v.EXTERIOR]===B.FALSE&&this.matrix[v.BOUNDARY][v.EXTERIOR]===B.FALSE},isTouches:function(t,e){return t>e?this.isTouches(e,t):t===B.A&&e===B.A||t===B.L&&e===B.L||t===B.L&&e===B.A||t===B.P&&e===B.A||t===B.P&&e===B.L?this.matrix[v.INTERIOR][v.INTERIOR]===B.FALSE&&(dt.isTrue(this.matrix[v.INTERIOR][v.BOUNDARY])||dt.isTrue(this.matrix[v.BOUNDARY][v.INTERIOR])||dt.isTrue(this.matrix[v.BOUNDARY][v.BOUNDARY])):!1},isOverlaps:function(t,e){return t===B.P&&e===B.P||t===B.A&&e===B.A?dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&dt.isTrue(this.matrix[v.INTERIOR][v.EXTERIOR])&&dt.isTrue(this.matrix[v.EXTERIOR][v.INTERIOR]):t===B.L&&e===B.L?this.matrix[v.INTERIOR][v.INTERIOR]===1&&dt.isTrue(this.matrix[v.INTERIOR][v.EXTERIOR])&&dt.isTrue(this.matrix[v.EXTERIOR][v.INTERIOR]):!1},isEquals:function(t,e){return t!==e?!1:dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&this.matrix[v.INTERIOR][v.EXTERIOR]===B.FALSE&&this.matrix[v.BOUNDARY][v.EXTERIOR]===B.FALSE&&this.matrix[v.EXTERIOR][v.INTERIOR]===B.FALSE&&this.matrix[v.EXTERIOR][v.BOUNDARY]===B.FALSE},toString:function(){for(var t=new Ct("123456789"),e=0;3>e;e++)for(var n=0;3>n;n++)t.setCharAt(3*e+n,B.toDimensionSymbol(this.matrix[e][n]));return t.toString()},setAll:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.matrix[e][n]=t},get:function(t,e){return this.matrix[t][e]},transpose:function(){var t=this.matrix[1][0];return this.matrix[1][0]=this.matrix[0][1],this.matrix[0][1]=t,t=this.matrix[2][0],this.matrix[2][0]=this.matrix[0][2],this.matrix[0][2]=t,t=this.matrix[2][1],this.matrix[2][1]=this.matrix[1][2],this.matrix[1][2]=t,this},matches:function(t){if(t.length!==9)throw new d;for(var e=0;3>e;e++)for(var n=0;3>n;n++)if(!dt.matches(this.matrix[e][n],t.charAt(3*e+n)))return!1;return!0},add:function(t){for(var e=0;3>e;e++)for(var n=0;3>n;n++)this.setAtLeast(e,n,t.get(e,n))},isDisjoint:function(){return this.matrix[v.INTERIOR][v.INTERIOR]===B.FALSE&&this.matrix[v.INTERIOR][v.BOUNDARY]===B.FALSE&&this.matrix[v.BOUNDARY][v.INTERIOR]===B.FALSE&&this.matrix[v.BOUNDARY][v.BOUNDARY]===B.FALSE},isCrosses:function(t,e){return t===B.P&&e===B.L||t===B.P&&e===B.A||t===B.L&&e===B.A?dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&dt.isTrue(this.matrix[v.INTERIOR][v.EXTERIOR]):t===B.L&&e===B.P||t===B.A&&e===B.P||t===B.A&&e===B.L?dt.isTrue(this.matrix[v.INTERIOR][v.INTERIOR])&&dt.isTrue(this.matrix[v.EXTERIOR][v.INTERIOR]):t===B.L&&e===B.L?this.matrix[v.INTERIOR][v.INTERIOR]===0:!1},interfaces_:function(){return[E]},getClass:function(){return dt}}),dt.matches=function(){if(Number.isInteger(arguments[0])&&typeof arguments[1]=="string"){var t=arguments[0],e=arguments[1];return e===B.SYM_DONTCARE||e===B.SYM_TRUE&&(t>=0||t===B.TRUE)||e===B.SYM_FALSE&&t===B.FALSE||e===B.SYM_P&&t===B.P||e===B.SYM_L&&t===B.L?!0:e===B.SYM_A&&t===B.A}if(typeof arguments[0]=="string"&&typeof arguments[1]=="string"){var n=arguments[0],r=arguments[1],s=new dt(n);return s.matches(r)}},dt.isTrue=function(t){return t>=0||t===B.TRUE};var El=Object.freeze({Coordinate:I,CoordinateList:A,Envelope:O,LineSegment:et,GeometryFactory:ot,Geometry:H,Point:wt,LineString:it,LinearRing:Pt,Polygon:vt,GeometryCollection:ut,MultiPoint:se,MultiLineString:re,MultiPolygon:Ut,Dimension:B,IntersectionMatrix:dt});u(Qe.prototype,{addPoint:function(t){this.ptCount+=1,this.ptCentSum.x+=t.x,this.ptCentSum.y+=t.y},setBasePoint:function(t){this.areaBasePt===null&&(this.areaBasePt=t)},addLineSegments:function(t){for(var e=0,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);if(r!==0){e+=r;var s=(t[n].x+t[n+1].x)/2;this.lineCentSum.x+=r*s;var a=(t[n].y+t[n+1].y)/2;this.lineCentSum.y+=r*a}}this.totalLength+=e,e===0&&t.length>0&&this.addPoint(t[0])},addHole:function(t){for(var e=k.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},getCentroid:function(){var t=new I;if(Math.abs(this.areasum2)>0)t.x=this.cg3.x/3/this.areasum2,t.y=this.cg3.y/3/this.areasum2;else if(this.totalLength>0)t.x=this.lineCentSum.x/this.totalLength,t.y=this.lineCentSum.y/this.totalLength;else{if(!(this.ptCount>0))return null;t.x=this.ptCentSum.x/this.ptCount,t.y=this.ptCentSum.y/this.ptCount}return t},addShell:function(t){t.length>0&&this.setBasePoint(t[0]);for(var e=!k.isCCW(t),n=0;n<t.length-1;n++)this.addTriangle(this.areaBasePt,t[n],t[n+1],e);this.addLineSegments(t)},addTriangle:function(t,e,n,r){var s=r?1:-1;Qe.centroid3(t,e,n,this.triangleCent3);var a=Qe.area2(t,e,n);this.cg3.x+=s*a*this.triangleCent3.x,this.cg3.y+=s*a*this.triangleCent3.y,this.areasum2+=s*a},add:function(){if(arguments[0]instanceof vt){var t=arguments[0];this.addShell(t.getExteriorRing().getCoordinates());for(var e=0;e<t.getNumInteriorRing();e++)this.addHole(t.getInteriorRingN(e).getCoordinates())}else if(arguments[0]instanceof H){var n=arguments[0];if(n.isEmpty())return null;if(n instanceof wt)this.addPoint(n.getCoordinate());else if(n instanceof it)this.addLineSegments(n.getCoordinates());else if(n instanceof vt){var r=n;this.add(r)}else if(n instanceof ut)for(var s=n,e=0;e<s.getNumGeometries();e++)this.add(s.getGeometryN(e))}},interfaces_:function(){return[]},getClass:function(){return Qe}}),Qe.area2=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)},Qe.centroid3=function(t,e,n,r){return r.x=t.x+e.x+n.x,r.y=t.y+e.y+n.y,null},Qe.getCentroid=function(t){var e=new Qe(t);return e.getCentroid()},Xr.prototype=new Error,Xr.prototype.name="EmptyStackException",jt.prototype=new w,jt.prototype.add=function(t){return this.array_.push(t),!0},jt.prototype.get=function(t){if(0>t||t>=this.size())throw new IndexOutOfBoundsException;return this.array_[t]},jt.prototype.push=function(t){return this.array_.push(t),t},jt.prototype.pop=function(t){if(this.array_.length===0)throw new Xr;return this.array_.pop()},jt.prototype.peek=function(){if(this.array_.length===0)throw new Xr;return this.array_[this.array_.length-1]},jt.prototype.empty=function(){return this.array_.length===0},jt.prototype.isEmpty=function(){return this.empty()},jt.prototype.search=function(t){return this.array_.indexOf(t)},jt.prototype.size=function(){return this.array_.length},jt.prototype.toArray=function(){for(var t=[],e=0,n=this.array_.length;n>e;e++)t.push(this.array_[e]);return t},u(li.prototype,{filter:function(t){this.treeSet.contains(t)||(this.list.add(t),this.treeSet.add(t))},getCoordinates:function(){var t=new Array(this.list.size()).fill(null);return this.list.toArray(t)},interfaces_:function(){return[In]},getClass:function(){return li}}),li.filterCoordinates=function(t){for(var e=new li,n=0;n<t.length;n++)e.filter(t[n]);return e.getCoordinates()},u(tn.prototype,{preSort:function(t){for(var e=null,n=1;n<t.length;n++)(t[n].y<t[0].y||t[n].y===t[0].y&&t[n].x<t[0].x)&&(e=t[0],t[0]=t[n],t[n]=e);return Ze.sort(t,1,t.length,new hi(t[0])),t},computeOctRing:function(t){var e=this.computeOctPts(t),n=new A;return n.add(e,!1),n.size()<3?null:(n.closeRing(),n.toCoordinateArray())},lineOrPolygon:function(t){if(t=this.cleanRing(t),t.length===3)return this.geomFactory.createLineString([t[0],t[1]]);var e=this.geomFactory.createLinearRing(t);return this.geomFactory.createPolygon(e,null)},cleanRing:function(t){T.equals(t[0],t[t.length-1]);for(var e=new P,n=null,r=0;r<=t.length-2;r++){var s=t[r],a=t[r+1];s.equals(a)||n!==null&&this.isBetween(n,s,a)||(e.add(s),n=s)}e.add(t[t.length-1]);var c=new Array(e.size()).fill(null);return e.toArray(c)},isBetween:function(t,e,n){return k.computeOrientation(t,e,n)!==0?!1:t.x!==n.x&&(t.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=t.x)||t.y!==n.y&&(t.y<=e.y&&e.y<=n.y||n.y<=e.y&&e.y<=t.y)},reduce:function(t){var e=this.computeOctRing(t);if(e===null)return t;for(var n=new Kt,r=0;r<e.length;r++)n.add(e[r]);for(var r=0;r<t.length;r++)k.isPointInRing(t[r],e)||n.add(t[r]);var s=Q.toCoordinateArray(n);return s.length<3?this.padArray3(s):s},getConvexHull:function(){if(this.inputPts.length===0)return this.geomFactory.createGeometryCollection(null);if(this.inputPts.length===1)return this.geomFactory.createPoint(this.inputPts[0]);if(this.inputPts.length===2)return this.geomFactory.createLineString(this.inputPts);var t=this.inputPts;this.inputPts.length>50&&(t=this.reduce(this.inputPts));var e=this.preSort(t),n=this.grahamScan(e),r=this.toCoordinateArray(n);return this.lineOrPolygon(r)},padArray3:function(t){for(var e=new Array(3).fill(null),n=0;n<e.length;n++)n<t.length?e[n]=t[n]:e[n]=t[0];return e},computeOctPts:function(t){for(var e=new Array(8).fill(null),n=0;n<e.length;n++)e[n]=t[0];for(var r=1;r<t.length;r++)t[r].x<e[0].x&&(e[0]=t[r]),t[r].x-t[r].y<e[1].x-e[1].y&&(e[1]=t[r]),t[r].y>e[2].y&&(e[2]=t[r]),t[r].x+t[r].y>e[3].x+e[3].y&&(e[3]=t[r]),t[r].x>e[4].x&&(e[4]=t[r]),t[r].x-t[r].y>e[5].x-e[5].y&&(e[5]=t[r]),t[r].y<e[6].y&&(e[6]=t[r]),t[r].x+t[r].y<e[7].x+e[7].y&&(e[7]=t[r]);return e},toCoordinateArray:function(t){for(var e=new Array(t.size()).fill(null),n=0;n<t.size();n++){var r=t.get(n);e[n]=r}return e},grahamScan:function(t){var e=null,n=new jt;e=n.push(t[0]),e=n.push(t[1]),e=n.push(t[2]);for(var r=3;r<t.length;r++){for(e=n.pop();!n.empty()&&k.computeOrientation(n.peek(),e,t[r])>0;)e=n.pop();e=n.push(e),e=n.push(t[r])}return e=n.push(t[0]),n},interfaces_:function(){return[]},getClass:function(){return tn}}),tn.extractCoordinates=function(t){var e=new li;return t.apply(e),e.getCoordinates()},u(hi.prototype,{compare:function(t,e){var n=t,r=e;return hi.polarCompare(this.origin,n,r)},interfaces_:function(){return[x]},getClass:function(){return hi}}),hi.polarCompare=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=n.x-t.x,c=n.y-t.y,f=k.computeOrientation(t,e,n);if(f===k.COUNTERCLOCKWISE)return 1;if(f===k.CLOCKWISE)return-1;var y=r*r+s*s,L=a*a+c*c;return L>y?-1:y>L?1:0},tn.RadialComparator=hi,u(ee.prototype,{transformPoint:function(t,e){return this.factory.createPoint(this.transformCoordinates(t.getCoordinateSequence(),t))},transformPolygon:function(t,e){var n=!0,r=this.transformLinearRing(t.getExteriorRing(),t);r!==null&&r instanceof Pt&&!r.isEmpty()||(n=!1);for(var s=new P,a=0;a<t.getNumInteriorRing();a++){var c=this.transformLinearRing(t.getInteriorRingN(a),t);c===null||c.isEmpty()||(c instanceof Pt||(n=!1),s.add(c))}if(n)return this.factory.createPolygon(r,s.toArray([]));var f=new P;return r!==null&&f.add(r),f.addAll(s),this.factory.buildGeometry(f)},createCoordinateSequence:function(t){return this.factory.getCoordinateSequenceFactory().create(t)},getInputGeometry:function(){return this.inputGeom},transformMultiLineString:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformLineString(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformCoordinates:function(t,e){return this.copy(t)},transformLineString:function(t,e){return this.factory.createLineString(this.transformCoordinates(t.getCoordinateSequence(),t))},transformMultiPoint:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformPoint(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},transformMultiPolygon:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transformPolygon(t.getGeometryN(r),t);s!==null&&(s.isEmpty()||n.add(s))}return this.factory.buildGeometry(n)},copy:function(t){return t.copy()},transformGeometryCollection:function(t,e){for(var n=new P,r=0;r<t.getNumGeometries();r++){var s=this.transform(t.getGeometryN(r));s!==null&&(this.pruneEmptyGeometry&&s.isEmpty()||n.add(s))}return this.preserveGeometryCollectionType?this.factory.createGeometryCollection(ot.toGeometryArray(n)):this.factory.buildGeometry(n)},transform:function(t){if(this.inputGeom=t,this.factory=t.getFactory(),t instanceof wt)return this.transformPoint(t,null);if(t instanceof se)return this.transformMultiPoint(t,null);if(t instanceof Pt)return this.transformLinearRing(t,null);if(t instanceof it)return this.transformLineString(t,null);if(t instanceof re)return this.transformMultiLineString(t,null);if(t instanceof vt)return this.transformPolygon(t,null);if(t instanceof Ut)return this.transformMultiPolygon(t,null);if(t instanceof ut)return this.transformGeometryCollection(t,null);throw new d("Unknown Geometry subtype: "+t.getClass().getName())},transformLinearRing:function(t,e){var n=this.transformCoordinates(t.getCoordinateSequence(),t);if(n===null)return this.factory.createLinearRing(null);var r=n.size();return r>0&&4>r&&!this.preserveType?this.factory.createLineString(n):this.factory.createLinearRing(n)},interfaces_:function(){return[]},getClass:function(){return ee}}),u(ci.prototype,{snapVertices:function(t,e){for(var n=this._isClosed?t.size()-1:t.size(),r=0;n>r;r++){var s=t.get(r),a=this.findSnapForVertex(s,e);a!==null&&(t.set(r,new I(a)),r===0&&this._isClosed&&t.set(t.size()-1,new I(a)))}},findSnapForVertex:function(t,e){for(var n=0;n<e.length;n++){if(t.equals2D(e[n]))return null;if(t.distance(e[n])<this.snapTolerance)return e[n]}return null},snapTo:function(t){var e=new A(this.srcPts);this.snapVertices(e,t),this.snapSegments(e,t);var n=e.toCoordinateArray();return n},snapSegments:function(t,e){if(e.length===0)return null;var n=e.length;e[0].equals2D(e[e.length-1])&&(n=e.length-1);for(var r=0;n>r;r++){var s=e[r],a=this.findSegmentIndexToSnap(s,t);a>=0&&t.add(a+1,new I(s),!1)}},findSegmentIndexToSnap:function(t,e){for(var n=p.MAX_VALUE,r=-1,s=0;s<e.size()-1;s++){if(this.seg.p0=e.get(s),this.seg.p1=e.get(s+1),this.seg.p0.equals2D(t)||this.seg.p1.equals2D(t)){if(this.allowSnappingToSourceVertices)continue;return-1}var a=this.seg.distance(t);a<this.snapTolerance&&n>a&&(n=a,r=s)}return r},setAllowSnappingToSourceVertices:function(t){this.allowSnappingToSourceVertices=t},interfaces_:function(){return[]},getClass:function(){return ci}}),ci.isClosed=function(t){return t.length<=1?!1:t[0].equals2D(t[t.length-1])},u(Qt.prototype,{snapTo:function(t,e){var n=this.extractTargetCoordinates(t),r=new Ai(e,n);return r.transform(this.srcGeom)},snapToSelf:function(t,e){var n=this.extractTargetCoordinates(this.srcGeom),r=new Ai(t,n,!0),s=r.transform(this.srcGeom),a=s;return e&&U(a,Ke)&&(a=s.buffer(0)),a},computeSnapTolerance:function(t){var e=this.computeMinimumSegmentLength(t),n=e/10;return n},extractTargetCoordinates:function(t){for(var e=new Kt,n=t.getCoordinates(),r=0;r<n.length;r++)e.add(n[r]);return e.toArray(new Array(0).fill(null))},computeMinimumSegmentLength:function(t){for(var e=p.MAX_VALUE,n=0;n<t.length-1;n++){var r=t[n].distance(t[n+1]);e>r&&(e=r)}return e},interfaces_:function(){return[]},getClass:function(){return Qt}}),Qt.snap=function(t,e,n){var r=new Array(2).fill(null),s=new Qt(t);r[0]=s.snapTo(e,n);var a=new Qt(e);return r[1]=a.snapTo(r[0],n),r},Qt.computeOverlaySnapTolerance=function(){if(arguments.length===1){var t=arguments[0],e=Qt.computeSizeBasedSnapTolerance(t),n=t.getPrecisionModel();if(n.getType()===ft.FIXED){var r=1/n.getScale()*2/1.415;r>e&&(e=r)}return e}if(arguments.length===2){var s=arguments[0],a=arguments[1];return Math.min(Qt.computeOverlaySnapTolerance(s),Qt.computeOverlaySnapTolerance(a))}},Qt.computeSizeBasedSnapTolerance=function(t){var e=t.getEnvelopeInternal(),n=Math.min(e.getHeight(),e.getWidth()),r=n*Qt.SNAP_PRECISION_FACTOR;return r},Qt.snapToSelf=function(t,e,n){var r=new Qt(t);return r.snapToSelf(e,n)},Qt.SNAP_PRECISION_FACTOR=1e-9,S(Ai,ee),u(Ai.prototype,{snapLine:function(t,e){var n=new ci(t,this.snapTolerance);return n.setAllowSnappingToSourceVertices(this.isSelfSnap),n.snapTo(e)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=this.snapLine(n,this.snapPts);return this.factory.getCoordinateSequenceFactory().create(r)},interfaces_:function(){return[]},getClass:function(){return Ai}}),u(me.prototype,{getCommon:function(){return p.longBitsToDouble(this.commonBits)},add:function(t){var e=p.doubleToLongBits(t);if(this.isFirst)return this.commonBits=e,this.commonSignExp=me.signExpBits(this.commonBits),this.isFirst=!1,null;var n=me.signExpBits(e);return n!==this.commonSignExp?(this.commonBits=0,null):(this.commonMantissaBitsCount=me.numCommonMostSigMantissaBits(this.commonBits,e),void(this.commonBits=me.zeroLowerBits(this.commonBits,64-(12+this.commonMantissaBitsCount))))},toString:function(){if(arguments.length===1){var t=arguments[0],e=p.longBitsToDouble(t),n=Long.toBinaryString(t),r="0000000000000000000000000000000000000000000000000000000000000000"+n,s=r.substring(r.length-64),a=s.substring(0,1)+"  "+s.substring(1,12)+"(exp) "+s.substring(12)+" [ "+e+" ]";return a}},interfaces_:function(){return[]},getClass:function(){return me}}),me.getBit=function(t,e){var n=1<<e;return(t&n)!==0?1:0},me.signExpBits=function(t){return t>>52},me.zeroLowerBits=function(t,e){var n=(1<<e)-1,r=~n,s=t&r;return s},me.numCommonMostSigMantissaBits=function(t,e){for(var n=0,r=52;r>=0;r--){if(me.getBit(t,r)!==me.getBit(e,r))return n;n++}return 52},u(Fi.prototype,{addCommonBits:function(t){var e=new Gi(this.commonCoord);t.apply(e),t.geometryChanged()},removeCommonBits:function(t){if(this.commonCoord.x===0&&this.commonCoord.y===0)return t;var e=new I(this.commonCoord);e.x=-e.x,e.y=-e.y;var n=new Gi(e);return t.apply(n),t.geometryChanged(),t},getCommonCoordinate:function(){return this.commonCoord},add:function(t){t.apply(this.ccFilter),this.commonCoord=this.ccFilter.getCommonCoordinate()},interfaces_:function(){return[]},getClass:function(){return Fi}}),u(Yr.prototype,{filter:function(t){this.commonBitsX.add(t.x),this.commonBitsY.add(t.y)},getCommonCoordinate:function(){return new I(this.commonBitsX.getCommon(),this.commonBitsY.getCommon())},interfaces_:function(){return[In]},getClass:function(){return Yr}}),u(Gi.prototype,{filter:function(t,e){var n=t.getOrdinate(e,0)+this.trans.x,r=t.getOrdinate(e,1)+this.trans.y;t.setOrdinate(e,0,n),t.setOrdinate(e,1,r)},isDone:function(){return!1},isGeometryChanged:function(){return!0},interfaces_:function(){return[Un]},getClass:function(){return Gi}}),Fi.CommonCoordinateFilter=Yr,Fi.Translater=Gi,u(Hn.prototype,{next:function(){if(this.atStart)return this.atStart=!1,Hn.isAtomic(this.parent)&&this.index++,this.parent;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return this.subcollectionIterator.next();this.subcollectionIterator=null}if(this.index>=this.max)throw new F;var t=this.parent.getGeometryN(this.index++);return t instanceof ut?(this.subcollectionIterator=new Hn(t),this.subcollectionIterator.next()):t},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){if(this.atStart)return!0;if(this.subcollectionIterator!==null){if(this.subcollectionIterator.hasNext())return!0;this.subcollectionIterator=null}return!(this.index>=this.max)},interfaces_:function(){return[W]},getClass:function(){return Hn}}),Hn.isAtomic=function(t){return!(t instanceof ut)},u(Wn.prototype,{locateInternal:function(){if(arguments[0]instanceof I&&arguments[1]instanceof vt){var t=arguments[0],e=arguments[1];if(e.isEmpty())return v.EXTERIOR;var n=e.getExteriorRing(),r=this.locateInPolygonRing(t,n);if(r===v.EXTERIOR)return v.EXTERIOR;if(r===v.BOUNDARY)return v.BOUNDARY;for(var s=0;s<e.getNumInteriorRing();s++){var a=e.getInteriorRingN(s),c=this.locateInPolygonRing(t,a);if(c===v.INTERIOR)return v.EXTERIOR;if(c===v.BOUNDARY)return v.BOUNDARY}return v.INTERIOR}if(arguments[0]instanceof I&&arguments[1]instanceof it){var f=arguments[0],y=arguments[1];if(!y.getEnvelopeInternal().intersects(f))return v.EXTERIOR;var L=y.getCoordinates();return y.isClosed()||!f.equals(L[0])&&!f.equals(L[L.length-1])?k.isOnLine(f,L)?v.INTERIOR:v.EXTERIOR:v.BOUNDARY}if(arguments[0]instanceof I&&arguments[1]instanceof wt){var M=arguments[0],D=arguments[1],q=D.getCoordinate();return q.equals2D(M)?v.INTERIOR:v.EXTERIOR}},locateInPolygonRing:function(t,e){return e.getEnvelopeInternal().intersects(t)?k.locatePointInRing(t,e.getCoordinates()):v.EXTERIOR},intersects:function(t,e){return this.locate(t,e)!==v.EXTERIOR},updateLocationInfo:function(t){t===v.INTERIOR&&(this.isIn=!0),t===v.BOUNDARY&&this.numBoundaries++},computeLocation:function(t,e){if(e instanceof wt&&this.updateLocationInfo(this.locateInternal(t,e)),e instanceof it)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof vt)this.updateLocationInfo(this.locateInternal(t,e));else if(e instanceof re)for(var n=e,r=0;r<n.getNumGeometries();r++){var s=n.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,s))}else if(e instanceof Ut)for(var a=e,r=0;r<a.getNumGeometries();r++){var c=a.getGeometryN(r);this.updateLocationInfo(this.locateInternal(t,c))}else if(e instanceof ut)for(var f=new Hn(e);f.hasNext();){var y=f.next();y!==e&&this.computeLocation(t,y)}},locate:function(t,e){return e.isEmpty()?v.EXTERIOR:e instanceof it?this.locateInternal(t,e):e instanceof vt?this.locateInternal(t,e):(this.isIn=!1,this.numBoundaries=0,this.computeLocation(t,e),this.boundaryRule.isInBoundary(this.numBoundaries)?v.BOUNDARY:this.numBoundaries>0||this.isIn?v.INTERIOR:v.EXTERIOR)},interfaces_:function(){return[]},getClass:function(){return Wn}}),u(gi.prototype,{interfaces_:function(){return[]},getClass:function(){return gi}}),gi.octant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;var n=Math.abs(t),r=Math.abs(e);return t>=0?e>=0?n>=r?0:1:n>=r?7:6:e>=0?n>=r?3:2:n>=r?4:5}if(arguments[0]instanceof I&&arguments[1]instanceof I){var s=arguments[0],a=arguments[1],c=a.x-s.x,f=a.y-s.y;if(c===0&&f===0)throw new d;return gi.octant(c,f)}},u(qi.prototype,{getCoordinates:function(){},size:function(){},getCoordinate:function(t){},isClosed:function(){},setData:function(t){},getData:function(){},interfaces_:function(){return[]},getClass:function(){return qi}}),u(xo.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:gi.octant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},getData:function(){return this.data},toString:function(){return Wt.toLineString(new pe(this.pts))},interfaces_:function(){return[qi]},getClass:function(){return xo}}),u(Hr.prototype,{getBounds:function(){},interfaces_:function(){return[]},getClass:function(){return Hr}}),u(en.prototype,{getItem:function(){return this.item},getBounds:function(){return this.bounds},interfaces_:function(){return[Hr,N]},getClass:function(){return en}}),u(Eo.prototype,{poll:function(){if(this.isEmpty())return null;var t=this.items.get(1);return this.items.set(1,this.items.get(this._size)),this._size-=1,this.reorder(1),t},size:function(){return this._size},reorder:function(t){for(var e=null,n=this.items.get(t);2*t<=this._size&&(e=2*t,e!==this._size&&this.items.get(e+1).compareTo(this.items.get(e))<0&&e++,this.items.get(e).compareTo(n)<0);t=e)this.items.set(t,this.items.get(e));this.items.set(t,n)},clear:function(){this._size=0,this.items.clear()},isEmpty:function(){return this._size===0},add:function(t){this.items.add(null),this._size+=1;var e=this._size;for(this.items.set(0,t);t.compareTo(this.items.get(Math.trunc(e/2)))<0;e/=2)this.items.set(e,this.items.get(Math.trunc(e/2)));this.items.set(e,t)},interfaces_:function(){return[]},getClass:function(){return Eo}}),u(Nn.prototype,{visitItem:function(t){},interfaces_:function(){return[]},getClass:function(){return Nn}}),u(Wr.prototype,{insert:function(t,e){},remove:function(t,e){},query:function(){},interfaces_:function(){return[]},getClass:function(){return Wr}}),u(te.prototype,{getLevel:function(){return this.level},size:function(){return this.childBoundables.size()},getChildBoundables:function(){return this.childBoundables},addChildBoundable:function(t){T.isTrue(this.bounds===null),this.childBoundables.add(t)},isEmpty:function(){return this.childBoundables.isEmpty()},getBounds:function(){return this.bounds===null&&(this.bounds=this.computeBounds()),this.bounds},interfaces_:function(){return[Hr,N]},getClass:function(){return te}}),te.serialVersionUID=6493722185909574e3;var We={reverseOrder:function(){return{compare:function(t,e){return e.compareTo(t)}}},min:function(t){return We.sort(t),t.get(0)},sort:function(t,e){var n=t.toArray();e?Ze.sort(n,e):Ze.sort(n);for(var r=t.iterator(),s=0,a=n.length;a>s;s++)r.next(),r.set(n[s])},singletonList:function(t){var e=new P;return e.add(t),e}};u(ne.prototype,{expandToQueue:function(t,e){var n=ne.isComposite(this.boundable1),r=ne.isComposite(this.boundable2);if(n&&r)return ne.area(this.boundable1)>ne.area(this.boundable2)?(this.expand(this.boundable1,this.boundable2,t,e),null):(this.expand(this.boundable2,this.boundable1,t,e),null);if(n)return this.expand(this.boundable1,this.boundable2,t,e),null;if(r)return this.expand(this.boundable2,this.boundable1,t,e),null;throw new d},isLeaves:function(){return!(ne.isComposite(this.boundable1)||ne.isComposite(this.boundable2))},compareTo:function(t){var e=t;return this._distance<e._distance?-1:this._distance>e._distance?1:0},expand:function(t,e,n,r){for(var s=t.getChildBoundables(),a=s.iterator();a.hasNext();){var c=a.next(),f=new ne(c,e,this.itemDistance);f.getDistance()<r&&n.add(f)}},getBoundable:function(t){return t===0?this.boundable1:this.boundable2},getDistance:function(){return this._distance},distance:function(){return this.isLeaves()?this.itemDistance.distance(this.boundable1,this.boundable2):this.boundable1.getBounds().distance(this.boundable2.getBounds())},interfaces_:function(){return[m]},getClass:function(){return ne}}),ne.area=function(t){return t.getBounds().getArea()},ne.isComposite=function(t){return t instanceof te},u(Ot.prototype,{getNodeCapacity:function(){return this.nodeCapacity},lastNode:function(t){return t.get(t.size()-1)},size:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.size(this.root));if(arguments.length===1){for(var e=arguments[0],n=0,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof te?n+=this.size(s):s instanceof en&&(n+=1)}return n}},removeItem:function(t,e){for(var n=null,r=t.getChildBoundables().iterator();r.hasNext();){var s=r.next();s instanceof en&&s.getItem()===e&&(n=s)}return n!==null?(t.getChildBoundables().remove(n),!0):!1},itemsTree:function(){if(arguments.length===0){this.build();var t=this.itemsTree(this.root);return t===null?new P:t}if(arguments.length===1){for(var e=arguments[0],n=new P,r=e.getChildBoundables().iterator();r.hasNext();){var s=r.next();if(s instanceof te){var a=this.itemsTree(s);a!==null&&n.add(a)}else s instanceof en?n.add(s.getItem()):T.shouldNeverReachHere()}return n.size()<=0?null:n}},insert:function(t,e){T.isTrue(!this.built,"Cannot insert items into an STR packed R-tree after it has been built."),this.itemBoundables.add(new en(t,e))},boundablesAtLevel:function(){if(arguments.length===1){var t=arguments[0],e=new P;return this.boundablesAtLevel(t,this.root,e),e}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];if(T.isTrue(n>-2),r.getLevel()===n)return s.add(r),null;for(var a=r.getChildBoundables().iterator();a.hasNext();){var c=a.next();c instanceof te?this.boundablesAtLevel(n,c,s):(T.isTrue(c instanceof en),n===-1&&s.add(c))}return null}},query:function(){if(arguments.length===1){var t=arguments[0];this.build();var e=new P;return this.isEmpty()||this.getIntersectsOp().intersects(this.root.getBounds(),t)&&this.query(t,this.root,e),e}if(arguments.length===2){var n=arguments[0],r=arguments[1];if(this.build(),this.isEmpty())return null;this.getIntersectsOp().intersects(this.root.getBounds(),n)&&this.query(n,this.root,r)}else if(arguments.length===3){if(U(arguments[2],Nn)&&arguments[0]instanceof Object&&arguments[1]instanceof te)for(var s=arguments[0],a=arguments[1],c=arguments[2],f=a.getChildBoundables(),y=0;y<f.size();y++){var L=f.get(y);this.getIntersectsOp().intersects(L.getBounds(),s)&&(L instanceof te?this.query(s,L,c):L instanceof en?c.visitItem(L.getItem()):T.shouldNeverReachHere())}else if(U(arguments[2],w)&&arguments[0]instanceof Object&&arguments[1]instanceof te)for(var M=arguments[0],D=arguments[1],q=arguments[2],f=D.getChildBoundables(),y=0;y<f.size();y++){var L=f.get(y);this.getIntersectsOp().intersects(L.getBounds(),M)&&(L instanceof te?this.query(M,L,q):L instanceof en?q.add(L.getItem()):T.shouldNeverReachHere())}}},build:function(){return this.built?null:(this.root=this.itemBoundables.isEmpty()?this.createNode(0):this.createHigherLevels(this.itemBoundables,-1),this.itemBoundables=null,void(this.built=!0))},getRoot:function(){return this.build(),this.root},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.build(),this.getIntersectsOp().intersects(this.root.getBounds(),t)?this.remove(t,this.root,e):!1}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],a=this.removeItem(r,s);if(a)return!0;for(var c=null,f=r.getChildBoundables().iterator();f.hasNext();){var y=f.next();if(this.getIntersectsOp().intersects(y.getBounds(),n)&&y instanceof te&&(a=this.remove(n,y,s))){c=y;break}}return c!==null&&c.getChildBoundables().isEmpty()&&r.getChildBoundables().remove(c),a}},createHigherLevels:function(t,e){T.isTrue(!t.isEmpty());var n=this.createParentBoundables(t,e+1);return n.size()===1?n.get(0):this.createHigherLevels(n,e+1)},depth:function(){if(arguments.length===0)return this.isEmpty()?0:(this.build(),this.depth(this.root));if(arguments.length===1){for(var t=arguments[0],e=0,n=t.getChildBoundables().iterator();n.hasNext();){var r=n.next();if(r instanceof te){var s=this.depth(r);s>e&&(e=s)}}return e+1}},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=new P;n.add(this.createNode(e));var r=new P(t);We.sort(r,this.getComparator());for(var s=r.iterator();s.hasNext();){var a=s.next();this.lastNode(n).getChildBoundables().size()===this.getNodeCapacity()&&n.add(this.createNode(e)),this.lastNode(n).addChildBoundable(a)}return n},isEmpty:function(){return this.built?this.root.isEmpty():this.itemBoundables.isEmpty()},interfaces_:function(){return[N]},getClass:function(){return Ot}}),Ot.compareDoubles=function(t,e){return t>e?1:e>t?-1:0},Ot.IntersectsOp=pl,Ot.serialVersionUID=-3886435814360241e3,Ot.DEFAULT_NODE_CAPACITY=10,u($r.prototype,{distance:function(t,e){},interfaces_:function(){return[]},getClass:function(){return $r}}),S(St,Ot),u(St.prototype,{createParentBoundablesFromVerticalSlices:function(t,e){T.isTrue(t.length>0);for(var n=new P,r=0;r<t.length;r++)n.addAll(this.createParentBoundablesFromVerticalSlice(t[r],e));return n},createNode:function(t){return new Bi(t)},size:function(){return arguments.length===0?Ot.prototype.size.call(this):Ot.prototype.size.apply(this,arguments)},insert:function(){if(arguments.length!==2)return Ot.prototype.insert.apply(this,arguments);var t=arguments[0],e=arguments[1];return t.isNull()?null:void Ot.prototype.insert.call(this,t,e)},getIntersectsOp:function(){return St.intersectsOp},verticalSlices:function(t,e){for(var n=Math.trunc(Math.ceil(t.size()/e)),r=new Array(e).fill(null),s=t.iterator(),a=0;e>a;a++){r[a]=new P;for(var c=0;s.hasNext()&&n>c;){var f=s.next();r[a].add(f),c++}}return r},query:function(){if(arguments.length===1){var t=arguments[0];return Ot.prototype.query.call(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];Ot.prototype.query.call(this,e,n)}else if(arguments.length===3){if(U(arguments[2],Nn)&&arguments[0]instanceof Object&&arguments[1]instanceof te){var r=arguments[0],s=arguments[1],a=arguments[2];Ot.prototype.query.call(this,r,s,a)}else if(U(arguments[2],w)&&arguments[0]instanceof Object&&arguments[1]instanceof te){var c=arguments[0],f=arguments[1],y=arguments[2];Ot.prototype.query.call(this,c,f,y)}}},getComparator:function(){return St.yComparator},createParentBoundablesFromVerticalSlice:function(t,e){return Ot.prototype.createParentBoundables.call(this,t,e)},remove:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Ot.prototype.remove.call(this,t,e)}return Ot.prototype.remove.apply(this,arguments)},depth:function(){return arguments.length===0?Ot.prototype.depth.call(this):Ot.prototype.depth.apply(this,arguments)},createParentBoundables:function(t,e){T.isTrue(!t.isEmpty());var n=Math.trunc(Math.ceil(t.size()/this.getNodeCapacity())),r=new P(t);We.sort(r,St.xComparator);var s=this.verticalSlices(r,Math.trunc(Math.ceil(Math.sqrt(n))));return this.createParentBoundablesFromVerticalSlices(s,e)},nearestNeighbour:function(){if(arguments.length===1){if(U(arguments[0],$r)){var t=arguments[0],e=new ne(this.getRoot(),this.getRoot(),t);return this.nearestNeighbour(e)}if(arguments[0]instanceof ne){var n=arguments[0];return this.nearestNeighbour(n,p.POSITIVE_INFINITY)}}else if(arguments.length===2){if(arguments[0]instanceof St&&U(arguments[1],$r)){var r=arguments[0],s=arguments[1],e=new ne(this.getRoot(),r.getRoot(),s);return this.nearestNeighbour(e)}if(arguments[0]instanceof ne&&typeof arguments[1]=="number"){var a=arguments[0],c=arguments[1],f=c,y=null,L=new Eo;for(L.add(a);!L.isEmpty()&&f>0;){var M=L.poll(),D=M.getDistance();if(D>=f)break;M.isLeaves()?(f=D,y=M):M.expandToQueue(L,f)}return[y.getBoundable(0).getItem(),y.getBoundable(1).getItem()]}}else if(arguments.length===3){var q=arguments[0],$=arguments[1],j=arguments[2],tt=new en(q,$),e=new ne(this.getRoot(),tt,j);return this.nearestNeighbour(e)[0]}},interfaces_:function(){return[Wr,N]},getClass:function(){return St}}),St.centreX=function(t){return St.avg(t.getMinX(),t.getMaxX())},St.avg=function(t,e){return(t+e)/2},St.centreY=function(t){return St.avg(t.getMinY(),t.getMaxY())},S(Bi,te),u(Bi.prototype,{computeBounds:function(){for(var t=null,e=this.getChildBoundables().iterator();e.hasNext();){var n=e.next();t===null?t=new O(n.getBounds()):t.expandToInclude(n.getBounds())}return t},interfaces_:function(){return[]},getClass:function(){return Bi}}),St.STRtreeNode=Bi,St.serialVersionUID=0x39920f7d5f261e0,St.xComparator={interfaces_:function(){return[x]},compare:function(t,e){return Ot.compareDoubles(St.centreX(t.getBounds()),St.centreX(e.getBounds()))}},St.yComparator={interfaces_:function(){return[x]},compare:function(t,e){return Ot.compareDoubles(St.centreY(t.getBounds()),St.centreY(e.getBounds()))}},St.intersectsOp={interfaces_:function(){return[IntersectsOp]},intersects:function(t,e){return t.intersects(e)}},St.DEFAULT_NODE_CAPACITY=10,u(ie.prototype,{interfaces_:function(){return[]},getClass:function(){return ie}}),ie.relativeSign=function(t,e){return e>t?-1:t>e?1:0},ie.compare=function(t,e,n){if(e.equals2D(n))return 0;var r=ie.relativeSign(e.x,n.x),s=ie.relativeSign(e.y,n.y);switch(t){case 0:return ie.compareValue(r,s);case 1:return ie.compareValue(s,r);case 2:return ie.compareValue(s,-r);case 3:return ie.compareValue(-r,s);case 4:return ie.compareValue(-r,-s);case 5:return ie.compareValue(-s,-r);case 6:return ie.compareValue(-s,r);case 7:return ie.compareValue(r,-s)}return T.shouldNeverReachHere("invalid octant value"),0},ie.compareValue=function(t,e){return 0>t?-1:t>0?1:0>e?-1:e>0?1:0},u(Io.prototype,{getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex)},compareTo:function(t){var e=t;return this.segmentIndex<e.segmentIndex?-1:this.segmentIndex>e.segmentIndex?1:this.coord.equals2D(e.coord)?0:ie.compare(this.segmentOctant,this.coord,e.coord)},isEndPoint:function(t){return this.segmentIndex!==0||this._isInterior?this.segmentIndex===t:!0},isInterior:function(){return this._isInterior},interfaces_:function(){return[m]},getClass:function(){return Io}}),u(No.prototype,{getSplitCoordinates:function(){var t=new A;this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next();this.addEdgeCoordinates(n,r,t),n=r}return t.toCoordinateArray()},addCollapsedNodes:function(){var t=new P;this.findCollapsesFromInsertedNodes(t),this.findCollapsesFromExistingVertices(t);for(var e=t.iterator();e.hasNext();){var n=e.next().intValue();this.add(this.edge.getCoordinate(n),n)}},print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},findCollapsesFromExistingVertices:function(t){for(var e=0;e<this.edge.size()-2;e++){var n=this.edge.getCoordinate(e),r=(this.edge.getCoordinate(e+1),this.edge.getCoordinate(e+2));n.equals2D(r)&&t.add(new Tt(e+1))}},addEdgeCoordinates:function(t,e,n){e.segmentIndex-t.segmentIndex+2;var r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);n.add(new I(t.coord),!1);for(var a=t.segmentIndex+1;a<=e.segmentIndex;a++)n.add(this.edge.getCoordinate(a));s&&n.add(new I(e.coord))},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints(),this.addCollapsedNodes();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},findCollapseIndex:function(t,e,n){if(!t.coord.equals2D(e.coord))return!1;var r=e.segmentIndex-t.segmentIndex;return e.isInterior()||r--,r===1?(n[0]=t.segmentIndex+1,!0):!1},findCollapsesFromInsertedNodes:function(t){for(var e=new Array(1).fill(null),n=this.iterator(),r=n.next();n.hasNext();){var s=n.next(),a=this.findCollapseIndex(r,s,e);a&&t.add(new Tt(e[0])),r=s}},getEdge:function(){return this.edge},addEndpoints:function(){var t=this.edge.size()-1;this.add(this.edge.getCoordinate(0),0),this.add(this.edge.getCoordinate(t),t)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.getCoordinate(e.segmentIndex),s=e.isInterior()||!e.coord.equals2D(r);s||n--;var a=new Array(n).fill(null),c=0;a[c++]=new I(t.coord);for(var f=t.segmentIndex+1;f<=e.segmentIndex;f++)a[c++]=this.edge.getCoordinate(f);return s&&(a[c]=new I(e.coord)),new Be(a,this.edge.getData())},add:function(t,e){var n=new Io(this.edge,t,e,this.edge.getSegmentOctant(e)),r=this.nodeMap.get(n);return r!==null?(T.isTrue(r.coord.equals2D(t),"Found equal nodes with different coordinates"),r):(this.nodeMap.put(n,n),n)},checkSplitEdgesCorrectness:function(t){var e=this.edge.getCoordinates(),n=t.get(0),r=n.getCoordinate(0);if(!r.equals2D(e[0]))throw new C("bad split edge start point at "+r);var s=t.get(t.size()-1),a=s.getCoordinates(),c=a[a.length-1];if(!c.equals2D(e[e.length-1]))throw new C("bad split edge end point at "+c)},interfaces_:function(){return[]},getClass:function(){return No}}),u(Oa.prototype,{next:function(){return this.currNode===null?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):this.nextNode===null?null:this.nextNode.segmentIndex===this.currNode.segmentIndex?(this.currNode=this.nextNode,this.currSegIndex=this.currNode.segmentIndex,this.readNextNode(),this.currNode):(this.nextNode.segmentIndex>this.currNode.segmentIndex,null)},remove:function(){throw new UnsupportedOperationException(this.getClass().getName())},hasNext:function(){return this.nextNode!==null},readNextNode:function(){this.nodeIt.hasNext()?this.nextNode=this.nodeIt.next():this.nextNode=null},interfaces_:function(){return[W]},getClass:function(){return Oa}}),u(Co.prototype,{addIntersection:function(t,e){},interfaces_:function(){return[qi]},getClass:function(){return Co}}),u(Be.prototype,{getCoordinates:function(){return this.pts},size:function(){return this.pts.length},getCoordinate:function(t){return this.pts[t]},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getSegmentOctant:function(t){return t===this.pts.length-1?-1:this.safeOctant(this.getCoordinate(t),this.getCoordinate(t+1))},setData:function(t){this.data=t},safeOctant:function(t,e){return t.equals2D(e)?0:gi.octant(t,e)},getData:function(){return this.data},addIntersection:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.addIntersectionNode(t,e)}else if(arguments.length===4){var n=arguments[0],r=arguments[1],s=arguments[3],a=new I(n.getIntersection(s));this.addIntersection(a,r)}},toString:function(){return Wt.toLineString(new pe(this.pts))},getNodeList:function(){return this.nodeList},addIntersectionNode:function(t,e){var n=e,r=n+1;if(r<this.pts.length){var s=this.pts[r];t.equals2D(s)&&(n=r)}var a=this.nodeList.add(t,n);return a},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[Co]},getClass:function(){return Be}}),Be.getNodedSubstrings=function(){if(arguments.length===1){var t=arguments[0],e=new P;return Be.getNodedSubstrings(t,e),e}if(arguments.length===2)for(var n=arguments[0],r=arguments[1],s=n.iterator();s.hasNext();){var a=s.next();a.getNodeList().addSplitEdges(r)}},u(zi.prototype,{overlap:function(){if(arguments.length!==2){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];t.getLineSegment(e,this.overlapSeg1),n.getLineSegment(r,this.overlapSeg2),this.overlap(this.overlapSeg1,this.overlapSeg2)}}},interfaces_:function(){return[]},getClass:function(){return zi}}),u(wo.prototype,{getLineSegment:function(t,e){e.p0=this.pts[t],e.p1=this.pts[t+1]},computeSelect:function(t,e,n,r){var s=this.pts[e],a=this.pts[n];if(r.tempEnv1.init(s,a),n-e===1)return r.select(this,e),null;if(!t.intersects(r.tempEnv1))return null;var c=Math.trunc((e+n)/2);c>e&&this.computeSelect(t,e,c,r),n>c&&this.computeSelect(t,c,n,r)},getCoordinates:function(){for(var t=new Array(this.end-this.start+1).fill(null),e=0,n=this.start;n<=this.end;n++)t[e++]=this.pts[n];return t},computeOverlaps:function(t,e){this.computeOverlapsInternal(this.start,this.end,t,t.start,t.end,e)},setId:function(t){this.id=t},select:function(t,e){this.computeSelect(t,this.start,this.end,e)},getEnvelope:function(){if(this.env===null){var t=this.pts[this.start],e=this.pts[this.end];this.env=new O(t,e)}return this.env},getEndIndex:function(){return this.end},getStartIndex:function(){return this.start},getContext:function(){return this.context},getId:function(){return this.id},computeOverlapsInternal:function(t,e,n,r,s,a){var c=this.pts[t],f=this.pts[e],y=n.pts[r],L=n.pts[s];if(e-t===1&&s-r===1)return a.overlap(this,t,n,r),null;if(a.tempEnv1.init(c,f),a.tempEnv2.init(y,L),!a.tempEnv1.intersects(a.tempEnv2))return null;var M=Math.trunc((t+e)/2),D=Math.trunc((r+s)/2);M>t&&(D>r&&this.computeOverlapsInternal(t,M,n,r,D,a),s>D&&this.computeOverlapsInternal(t,M,n,D,s,a)),e>M&&(D>r&&this.computeOverlapsInternal(M,e,n,r,D,a),s>D&&this.computeOverlapsInternal(M,e,n,D,s,a))},interfaces_:function(){return[]},getClass:function(){return wo}}),u(ht.prototype,{interfaces_:function(){return[]},getClass:function(){return ht}}),ht.isNorthern=function(t){return t===ht.NE||t===ht.NW},ht.isOpposite=function(t,e){if(t===e)return!1;var n=(t-e+4)%4;return n===2},ht.commonHalfPlane=function(t,e){if(t===e)return t;var n=(t-e+4)%4;if(n===2)return-1;var r=e>t?t:e,s=t>e?t:e;return r===0&&s===3?3:r},ht.isInHalfPlane=function(t,e){return e===ht.SE?t===ht.SE||t===ht.SW:t===e||t===e+1},ht.quadrant=function(){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){var t=arguments[0],e=arguments[1];if(t===0&&e===0)throw new d;return t>=0?e>=0?ht.NE:ht.SE:e>=0?ht.NW:ht.SW}if(arguments[0]instanceof I&&arguments[1]instanceof I){var n=arguments[0],r=arguments[1];if(r.x===n.x&&r.y===n.y)throw new d;return r.x>=n.x?r.y>=n.y?ht.NE:ht.SE:r.y>=n.y?ht.NW:ht.SW}},ht.NE=0,ht.NW=1,ht.SW=2,ht.SE=3,u(Pe.prototype,{interfaces_:function(){return[]},getClass:function(){return Pe}}),Pe.getChainStartIndices=function(t){var e=0,n=new P;n.add(new Tt(e));do{var r=Pe.findChainEnd(t,e);n.add(new Tt(r)),e=r}while(e<t.length-1);var s=Pe.toIntArray(n);return s},Pe.findChainEnd=function(t,e){for(var n=e;n<t.length-1&&t[n].equals2D(t[n+1]);)n++;if(n>=t.length-1)return t.length-1;for(var r=ht.quadrant(t[n],t[n+1]),s=e+1;s<t.length;){if(!t[s-1].equals2D(t[s])){var a=ht.quadrant(t[s-1],t[s]);if(a!==r)break}s++}return s-1},Pe.getChains=function(){if(arguments.length===1){var t=arguments[0];return Pe.getChains(t,null)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new P,s=Pe.getChainStartIndices(e),a=0;a<s.length-1;a++){var c=new wo(e,s[a],s[a+1],n);r.add(c)}return r}},Pe.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},u(Vi.prototype,{computeNodes:function(t){},getNodedSubstrings:function(){},interfaces_:function(){return[]},getClass:function(){return Vi}}),u(Zr.prototype,{setSegmentIntersector:function(t){this.segInt=t},interfaces_:function(){return[Vi]},getClass:function(){return Zr}}),S(Cn,Zr),u(Cn.prototype,{getMonotoneChains:function(){return this.monoChains},getNodedSubstrings:function(){return Be.getNodedSubstrings(this.nodedSegStrings)},getIndex:function(){return this.index},add:function(t){for(var e=Pe.getChains(t.getCoordinates(),t),n=e.iterator();n.hasNext();){var r=n.next();r.setId(this.idCounter++),this.index.insert(r.getEnvelope(),r),this.monoChains.add(r)}},computeNodes:function(t){this.nodedSegStrings=t;for(var e=t.iterator();e.hasNext();)this.add(e.next());this.intersectChains()},intersectChains:function(){for(var t=new ki(this.segInt),e=this.monoChains.iterator();e.hasNext();)for(var n=e.next(),r=this.index.query(n.getEnvelope()),s=r.iterator();s.hasNext();){var a=s.next();if(a.getId()>n.getId()&&(n.computeOverlaps(a,t),this.nOverlaps++),this.segInt.isDone())return null}},interfaces_:function(){return[]},getClass:function(){return Cn}}),S(ki,zi),u(ki.prototype,{overlap:function(){if(arguments.length!==4)return zi.prototype.overlap.apply(this,arguments);var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3],s=t.getContext(),a=n.getContext();this.si.processIntersections(s,e,a,r)},interfaces_:function(){return[]},getClass:function(){return ki}}),Cn.SegmentOverlapAction=ki,S(oe,C),u(oe.prototype,{getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return oe}}),oe.msgWithCoord=function(t,e){return e!==null?t+" [ "+e+" ]":t},u(Ui.prototype,{processIntersections:function(t,e,n,r){},isDone:function(){},interfaces_:function(){return[]},getClass:function(){return Ui}}),u(dn.prototype,{getInteriorIntersection:function(){return this.interiorIntersection},setCheckEndSegmentsOnly:function(t){this.isCheckEndSegmentsOnly=t},getIntersectionSegments:function(){return this.intSegments},count:function(){return this.intersectionCount},getIntersections:function(){return this.intersections},setFindAllIntersections:function(t){this.findAllIntersections=t},setKeepIntersections:function(t){this.keepIntersections=t},processIntersections:function(t,e,n,r){if(!this.findAllIntersections&&this.hasIntersection()||t===n&&e===r)return null;if(this.isCheckEndSegmentsOnly){var s=this.isEndSegment(t,e)||this.isEndSegment(n,r);if(!s)return null}var a=t.getCoordinates()[e],c=t.getCoordinates()[e+1],f=n.getCoordinates()[r],y=n.getCoordinates()[r+1];this.li.computeIntersection(a,c,f,y),this.li.hasIntersection()&&this.li.isInteriorIntersection()&&(this.intSegments=new Array(4).fill(null),this.intSegments[0]=a,this.intSegments[1]=c,this.intSegments[2]=f,this.intSegments[3]=y,this.interiorIntersection=this.li.getIntersection(0),this.keepIntersections&&this.intersections.add(this.interiorIntersection),this.intersectionCount++)},isEndSegment:function(t,e){return e===0?!0:e>=t.size()-2},hasIntersection:function(){return this.interiorIntersection!==null},isDone:function(){return this.findAllIntersections?!1:this.interiorIntersection!==null},interfaces_:function(){return[Ui]},getClass:function(){return dn}}),dn.createAllIntersectionsFinder=function(t){var e=new dn(t);return e.setFindAllIntersections(!0),e},dn.createAnyIntersectionFinder=function(t){return new dn(t)},dn.createIntersectionCounter=function(t){var e=new dn(t);return e.setFindAllIntersections(!0),e.setKeepIntersections(!1),e},u(Xi.prototype,{execute:function(){return this.segInt!==null?null:void this.checkInteriorIntersections()},getIntersections:function(){return this.segInt.getIntersections()},isValid:function(){return this.execute(),this._isValid},setFindAllIntersections:function(t){this.findAllIntersections=t},checkInteriorIntersections:function(){this._isValid=!0,this.segInt=new dn(this.li),this.segInt.setFindAllIntersections(this.findAllIntersections);var t=new Cn;return t.setSegmentIntersector(this.segInt),t.computeNodes(this.segStrings),this.segInt.hasIntersection()?(this._isValid=!1,null):void 0},checkValid:function(){if(this.execute(),!this._isValid)throw new oe(this.getErrorMessage(),this.segInt.getInteriorIntersection())},getErrorMessage:function(){if(this._isValid)return"no intersections found";var t=this.segInt.getIntersectionSegments();return"found non-noded intersection between "+Wt.toLineString(t[0],t[1])+" and "+Wt.toLineString(t[2],t[3])},interfaces_:function(){return[]},getClass:function(){return Xi}}),Xi.computeIntersections=function(t){var e=new Xi(t);return e.setFindAllIntersections(!0),e.isValid(),e.getIntersections()},u($n.prototype,{checkValid:function(){this.nv.checkValid()},interfaces_:function(){return[]},getClass:function(){return $n}}),$n.toSegmentStrings=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new xo(r.getCoordinates(),r))}return e},$n.checkValid=function(t){var e=new $n(t);e.checkValid()},u(fi.prototype,{map:function(t){for(var e=new P,n=0;n<t.getNumGeometries();n++){var r=this.mapOp.map(t.getGeometryN(n));r.isEmpty()||e.add(r)}return t.getFactory().createGeometryCollection(ot.toGeometryArray(e))},interfaces_:function(){return[]},getClass:function(){return fi}}),fi.map=function(t,e){var n=new fi(e);return n.map(t)},u(V.prototype,{interfaces_:function(){return[]},getClass:function(){return V}}),V.opposite=function(t){return t===V.LEFT?V.RIGHT:t===V.RIGHT?V.LEFT:t},V.ON=0,V.LEFT=1,V.RIGHT=2,u(ae.prototype,{setAllLocations:function(t){for(var e=0;e<this.location.length;e++)this.location[e]=t},isNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]!==v.NONE)return!1;return!0},setAllLocationsIfNull:function(t){for(var e=0;e<this.location.length;e++)this.location[e]===v.NONE&&(this.location[e]=t)},isLine:function(){return this.location.length===1},merge:function(t){if(t.location.length>this.location.length){var e=new Array(3).fill(null);e[V.ON]=this.location[V.ON],e[V.LEFT]=v.NONE,e[V.RIGHT]=v.NONE,this.location=e}for(var n=0;n<this.location.length;n++)this.location[n]===v.NONE&&n<t.location.length&&(this.location[n]=t.location[n])},getLocations:function(){return this.location},flip:function(){if(this.location.length<=1)return null;var t=this.location[V.LEFT];this.location[V.LEFT]=this.location[V.RIGHT],this.location[V.RIGHT]=t},toString:function(){var t=new Ct;return this.location.length>1&&t.append(v.toLocationSymbol(this.location[V.LEFT])),t.append(v.toLocationSymbol(this.location[V.ON])),this.location.length>1&&t.append(v.toLocationSymbol(this.location[V.RIGHT])),t.toString()},setLocations:function(t,e,n){this.location[V.ON]=t,this.location[V.LEFT]=e,this.location[V.RIGHT]=n},get:function(t){return t<this.location.length?this.location[t]:v.NONE},isArea:function(){return this.location.length>1},isAnyNull:function(){for(var t=0;t<this.location.length;t++)if(this.location[t]===v.NONE)return!0;return!1},setLocation:function(){if(arguments.length===1){var t=arguments[0];this.setLocation(V.ON,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.location[e]=n}},init:function(t){this.location=new Array(t).fill(null),this.setAllLocations(v.NONE)},isEqualOnSide:function(t,e){return this.location[e]===t.location[e]},allPositionsEqual:function(t){for(var e=0;e<this.location.length;e++)if(this.location[e]!==t)return!1;return!0},interfaces_:function(){return[]},getClass:function(){return ae}}),u(Mt.prototype,{getGeometryCount:function(){var t=0;return this.elt[0].isNull()||t++,this.elt[1].isNull()||t++,t},setAllLocations:function(t,e){this.elt[t].setAllLocations(e)},isNull:function(t){return this.elt[t].isNull()},setAllLocationsIfNull:function(){if(arguments.length===1){var t=arguments[0];this.setAllLocationsIfNull(0,t),this.setAllLocationsIfNull(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1];this.elt[e].setAllLocationsIfNull(n)}},isLine:function(t){return this.elt[t].isLine()},merge:function(t){for(var e=0;2>e;e++)this.elt[e]===null&&t.elt[e]!==null?this.elt[e]=new ae(t.elt[e]):this.elt[e].merge(t.elt[e])},flip:function(){this.elt[0].flip(),this.elt[1].flip()},getLocation:function(){if(arguments.length===1){var t=arguments[0];return this.elt[t].get(V.ON)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.elt[e].get(n)}},toString:function(){var t=new Ct;return this.elt[0]!==null&&(t.append("A:"),t.append(this.elt[0].toString())),this.elt[1]!==null&&(t.append(" B:"),t.append(this.elt[1].toString())),t.toString()},isArea:function(){if(arguments.length===0)return this.elt[0].isArea()||this.elt[1].isArea();if(arguments.length===1){var t=arguments[0];return this.elt[t].isArea()}},isAnyNull:function(t){return this.elt[t].isAnyNull()},setLocation:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];this.elt[t].setLocation(V.ON,e)}else if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];this.elt[n].setLocation(r,s)}},isEqualOnSide:function(t,e){return this.elt[0].isEqualOnSide(t.elt[0],e)&&this.elt[1].isEqualOnSide(t.elt[1],e)},allPositionsEqual:function(t,e){return this.elt[t].allPositionsEqual(e)},toLine:function(t){this.elt[t].isArea()&&(this.elt[t]=new ae(this.elt[t].location[0]))},interfaces_:function(){return[]},getClass:function(){return Mt}}),Mt.toLineLabel=function(t){for(var e=new Mt(v.NONE),n=0;2>n;n++)e.setLocation(n,t.getLocation(n));return e},u(di.prototype,{computeRing:function(){if(this.ring!==null)return null;for(var t=new Array(this.pts.size()).fill(null),e=0;e<this.pts.size();e++)t[e]=this.pts.get(e);this.ring=this.geometryFactory.createLinearRing(t),this._isHole=k.isCCW(this.ring.getCoordinates())},isIsolated:function(){return this.label.getGeometryCount()===1},computePoints:function(t){this.startDe=t;var e=t,n=!0;do{if(e===null)throw new oe("Found null DirectedEdge");if(e.getEdgeRing()===this)throw new oe("Directed Edge visited twice during ring-building at "+e.getCoordinate());this.edges.add(e);var r=e.getLabel();T.isTrue(r.isArea()),this.mergeLabel(r),this.addPoints(e.getEdge(),e.isForward(),n),n=!1,this.setEdgeRing(e,this),e=this.getNext(e)}while(e!==this.startDe)},getLinearRing:function(){return this.ring},getCoordinate:function(t){return this.pts.get(t)},computeMaxNodeDegree:function(){this.maxNodeDegree=0;var t=this.startDe;do{var e=t.getNode(),n=e.getEdges().getOutgoingDegree(this);n>this.maxNodeDegree&&(this.maxNodeDegree=n),t=this.getNext(t)}while(t!==this.startDe);this.maxNodeDegree*=2},addPoints:function(t,e,n){var r=t.getCoordinates();if(e){var s=1;n&&(s=0);for(var a=s;a<r.length;a++)this.pts.add(r[a])}else{var s=r.length-2;n&&(s=r.length-1);for(var a=s;a>=0;a--)this.pts.add(r[a])}},isHole:function(){return this._isHole},setInResult:function(){var t=this.startDe;do t.getEdge().setInResult(!0),t=t.getNext();while(t!==this.startDe)},containsPoint:function(t){var e=this.getLinearRing(),n=e.getEnvelopeInternal();if(!n.contains(t)||!k.isPointInRing(t,e.getCoordinates()))return!1;for(var r=this.holes.iterator();r.hasNext();){var s=r.next();if(s.containsPoint(t))return!1}return!0},addHole:function(t){this.holes.add(t)},isShell:function(){return this.shell===null},getLabel:function(){return this.label},getEdges:function(){return this.edges},getMaxNodeDegree:function(){return this.maxNodeDegree<0&&this.computeMaxNodeDegree(),this.maxNodeDegree},getShell:function(){return this.shell},mergeLabel:function(){if(arguments.length===1){var t=arguments[0];this.mergeLabel(t,0),this.mergeLabel(t,1)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=e.getLocation(n,V.RIGHT);if(r===v.NONE)return null;if(this.label.getLocation(n)===v.NONE)return this.label.setLocation(n,r),null}},setShell:function(t){this.shell=t,t!==null&&t.addHole(this)},toPolygon:function(t){for(var e=new Array(this.holes.size()).fill(null),n=0;n<this.holes.size();n++)e[n]=this.holes.get(n).getLinearRing();var r=t.createPolygon(this.getLinearRing(),e);return r},interfaces_:function(){return[]},getClass:function(){return di}}),S(Jr,di),u(Jr.prototype,{setEdgeRing:function(t,e){t.setMinEdgeRing(e)},getNext:function(t){return t.getNextMin()},interfaces_:function(){return[]},getClass:function(){return Jr}}),S(Yi,di),u(Yi.prototype,{buildMinimalRings:function(){var t=new P,e=this.startDe;do{if(e.getMinEdgeRing()===null){var n=new Jr(e,this.geometryFactory);t.add(n)}e=e.getNext()}while(e!==this.startDe);return t},setEdgeRing:function(t,e){t.setEdgeRing(e)},linkDirectedEdgesForMinimalEdgeRings:function(){var t=this.startDe;do{var e=t.getNode();e.getEdges().linkMinimalDirectedEdges(this),t=t.getNext()}while(t!==this.startDe)},getNext:function(t){return t.getNext()},interfaces_:function(){return[]},getClass:function(){return Yi}}),u(wn.prototype,{setVisited:function(t){this._isVisited=t},setInResult:function(t){this._isInResult=t},isCovered:function(){return this._isCovered},isCoveredSet:function(){return this._isCoveredSet},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setCovered:function(t){this._isCovered=t,this._isCoveredSet=!0},updateIM:function(t){T.isTrue(this.label.getGeometryCount()>=2,"found partial label"),this.computeIM(t)},isInResult:function(){return this._isInResult},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return wn}}),S(nn,wn),u(nn.prototype,{isIncidentEdgeInResult:function(){for(var t=this.getEdges().getEdges().iterator();t.hasNext();){var e=t.next();if(e.getEdge().isInResult())return!0}return!1},isIsolated:function(){return this.label.getGeometryCount()===1},getCoordinate:function(){return this.coord},print:function(t){t.println("node "+this.coord+" lbl: "+this.label)},computeIM:function(t){},computeMergedLocation:function(t,e){var n=v.NONE;if(n=this.label.getLocation(e),!t.isNull(e)){var r=t.getLocation(e);n!==v.BOUNDARY&&(n=r)}return n},setLabel:function(){if(arguments.length!==2)return wn.prototype.setLabel.apply(this,arguments);var t=arguments[0],e=arguments[1];this.label===null?this.label=new Mt(t,e):this.label.setLocation(t,e)},getEdges:function(){return this.edges},mergeLabel:function(){if(arguments[0]instanceof nn){var t=arguments[0];this.mergeLabel(t.label)}else if(arguments[0]instanceof Mt)for(var e=arguments[0],n=0;2>n;n++){var r=this.computeMergedLocation(e,n),s=this.label.getLocation(n);s===v.NONE&&this.label.setLocation(n,r)}},add:function(t){this.edges.insert(t),t.setNode(this)},setLabelBoundary:function(t){if(this.label===null)return null;var e=v.NONE;this.label!==null&&(e=this.label.getLocation(t));var n=null;switch(e){case v.BOUNDARY:n=v.INTERIOR;break;case v.INTERIOR:n=v.BOUNDARY;break;default:n=v.BOUNDARY}this.label.setLocation(t,n)},interfaces_:function(){return[]},getClass:function(){return nn}}),u(pi.prototype,{find:function(t){return this.nodeMap.get(t)},addNode:function(){if(arguments[0]instanceof I){var t=arguments[0],e=this.nodeMap.get(t);return e===null&&(e=this.nodeFact.createNode(t),this.nodeMap.put(t,e)),e}if(arguments[0]instanceof nn){var n=arguments[0],e=this.nodeMap.get(n.getCoordinate());return e===null?(this.nodeMap.put(n.getCoordinate(),n),n):(e.mergeLabel(n),e)}},print:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},values:function(){return this.nodeMap.values()},getBoundaryNodes:function(t){for(var e=new P,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().getLocation(t)===v.BOUNDARY&&e.add(r)}return e},add:function(t){var e=t.getCoordinate(),n=this.addNode(e);n.add(t)},interfaces_:function(){return[]},getClass:function(){return pi}}),u(ze.prototype,{compareDirection:function(t){return this.dx===t.dx&&this.dy===t.dy?0:this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:k.computeOrientation(t.p0,t.p1,this.p1)},getDy:function(){return this.dy},getCoordinate:function(){return this.p0},setNode:function(t){this.node=t},print:function(t){var e=Math.atan2(this.dy,this.dx),n=this.getClass().getName(),r=n.lastIndexOf("."),s=n.substring(r+1);t.print("  "+s+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+e+"   "+this.label)},compareTo:function(t){var e=t;return this.compareDirection(e)},getDirectedCoordinate:function(){return this.p1},getDx:function(){return this.dx},getLabel:function(){return this.label},getEdge:function(){return this.edge},getQuadrant:function(){return this.quadrant},getNode:function(){return this.node},toString:function(){var t=Math.atan2(this.dy,this.dx),e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);return"  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+t+"   "+this.label},computeLabel:function(t){},init:function(t,e){this.p0=t,this.p1=e,this.dx=e.x-t.x,this.dy=e.y-t.y,this.quadrant=ht.quadrant(this.dx,this.dy),T.isTrue(!(this.dx===0&&this.dy===0),"EdgeEnd with identical endpoints found")},interfaces_:function(){return[m]},getClass:function(){return ze}}),S(Zn,ze),u(Zn.prototype,{getNextMin:function(){return this.nextMin},getDepth:function(t){return this.depth[t]},setVisited:function(t){this._isVisited=t},computeDirectedLabel:function(){this.label=new Mt(this.edge.getLabel()),this._isForward||this.label.flip()},getNext:function(){return this.next},setDepth:function(t,e){if(this.depth[t]!==-999&&this.depth[t]!==e)throw new oe("assigned depths do not match",this.getCoordinate());this.depth[t]=e},isInteriorAreaEdge:function(){for(var e=!0,n=0;2>n;n++)this.label.isArea(n)&&this.label.getLocation(n,V.LEFT)===v.INTERIOR&&this.label.getLocation(n,V.RIGHT)===v.INTERIOR||(e=!1);return e},setNextMin:function(t){this.nextMin=t},print:function(t){ze.prototype.print.call(this,t),t.print(" "+this.depth[V.LEFT]+"/"+this.depth[V.RIGHT]),t.print(" ("+this.getDepthDelta()+")"),this._isInResult&&t.print(" inResult")},setMinEdgeRing:function(t){this.minEdgeRing=t},isLineEdge:function(){var t=this.label.isLine(0)||this.label.isLine(1),e=!this.label.isArea(0)||this.label.allPositionsEqual(0,v.EXTERIOR),n=!this.label.isArea(1)||this.label.allPositionsEqual(1,v.EXTERIOR);return t&&e&&n},setEdgeRing:function(t){this.edgeRing=t},getMinEdgeRing:function(){return this.minEdgeRing},getDepthDelta:function(){var t=this.edge.getDepthDelta();return this._isForward||(t=-t),t},setInResult:function(t){this._isInResult=t},getSym:function(){return this.sym},isForward:function(){return this._isForward},getEdge:function(){return this.edge},printEdge:function(t){this.print(t),t.print(" "),this._isForward?this.edge.print(t):this.edge.printReverse(t)},setSym:function(t){this.sym=t},setVisitedEdge:function(t){this.setVisited(t),this.sym.setVisited(t)},setEdgeDepths:function(t,e){var n=this.getEdge().getDepthDelta();this._isForward||(n=-n);var r=1;t===V.LEFT&&(r=-1);var s=V.opposite(t),a=n*r,c=e+a;this.setDepth(t,e),this.setDepth(s,c)},getEdgeRing:function(){return this.edgeRing},isInResult:function(){return this._isInResult},setNext:function(t){this.next=t},isVisited:function(){return this._isVisited},interfaces_:function(){return[]},getClass:function(){return Zn}}),Zn.depthFactor=function(t,e){return t===v.EXTERIOR&&e===v.INTERIOR?1:t===v.INTERIOR&&e===v.EXTERIOR?-1:0},u(Jn.prototype,{createNode:function(t){return new nn(t,null)},interfaces_:function(){return[]},getClass:function(){return Jn}}),u(Ve.prototype,{printEdges:function(t){t.println("Edges:");for(var e=0;e<this.edges.size();e++){t.println("edge "+e+":");var n=this.edges.get(e);n.print(t),n.eiList.print(t)}},find:function(t){return this.nodes.find(t)},addNode:function(){if(arguments[0]instanceof nn){var t=arguments[0];return this.nodes.addNode(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.nodes.addNode(e)}},getNodeIterator:function(){return this.nodes.iterator()},linkResultDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkResultDirectedEdges()}},debugPrintln:function(t){mt.out.println(t)},isBoundaryNode:function(t,e){var n=this.nodes.find(e);if(n===null)return!1;var r=n.getLabel();return r!==null&&r.getLocation(t)===v.BOUNDARY},linkAllDirectedEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().linkAllDirectedEdges()}},matchInSameDirection:function(t,e,n,r){return t.equals(n)?k.computeOrientation(t,e,r)===k.COLLINEAR&&ht.quadrant(t,e)===ht.quadrant(n,r):!1},getEdgeEnds:function(){return this.edgeEndList},debugPrint:function(t){mt.out.print(t)},getEdgeIterator:function(){return this.edges.iterator()},findEdgeInSameDirection:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(this.matchInSameDirection(t,e,s[0],s[1])||this.matchInSameDirection(t,e,s[s.length-1],s[s.length-2]))return r}return null},insertEdge:function(t){this.edges.add(t)},findEdgeEnd:function(t){for(var e=this.getEdgeEnds().iterator();e.hasNext();){var n=e.next();if(n.getEdge()===t)return n}return null},addEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.edges.add(n);var r=new Zn(n,!0),s=new Zn(n,!1);r.setSym(s),s.setSym(r),this.add(r),this.add(s)}},add:function(t){this.nodes.add(t),this.edgeEndList.add(t)},getNodes:function(){return this.nodes.values()},findEdge:function(t,e){for(var n=0;n<this.edges.size();n++){var r=this.edges.get(n),s=r.getCoordinates();if(t.equals(s[0])&&e.equals(s[1]))return r}return null},interfaces_:function(){return[]},getClass:function(){return Ve}}),Ve.linkResultDirectedEdges=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.getEdges().linkResultDirectedEdges()}},u(Kr.prototype,{sortShellsAndHoles:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isHole()?n.add(s):e.add(s)}},computePolygons:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next(),s=r.toPolygon(this.geometryFactory);e.add(s)}return e},placeFreeHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();if(r.getShell()===null){var s=this.findEdgeRingContaining(r,t);if(s===null)throw new oe("unable to assign hole to a shell",r.getCoordinate(0));r.setShell(s)}}},buildMinimalEdgeRings:function(t,e,n){for(var r=new P,s=t.iterator();s.hasNext();){var a=s.next();if(a.getMaxNodeDegree()>2){a.linkDirectedEdgesForMinimalEdgeRings();var c=a.buildMinimalRings(),f=this.findShell(c);f!==null?(this.placePolygonHoles(f,c),e.add(f)):n.addAll(c)}else r.add(a)}return r},containsPoint:function(t){for(var e=this.shellList.iterator();e.hasNext();){var n=e.next();if(n.containsPoint(t))return!0}return!1},buildMaximalEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getLabel().isArea()&&r.getEdgeRing()===null){var s=new Yi(r,this.geometryFactory);e.add(s),s.setInResult()}}return e},placePolygonHoles:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next();r.isHole()&&r.setShell(t)}},getPolygons:function(){var t=this.computePolygons(this.shellList);return t},findEdgeRingContaining:function(t,e){for(var n=t.getLinearRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,c=null,f=e.iterator();f.hasNext();){var y=f.next(),L=y.getLinearRing(),M=L.getEnvelopeInternal();a!==null&&(c=a.getLinearRing().getEnvelopeInternal());var D=!1;M.contains(r)&&k.isPointInRing(s,L.getCoordinates())&&(D=!0),D&&(a===null||c.contains(M))&&(a=y)}return a},findShell:function(t){for(var e=0,n=null,r=t.iterator();r.hasNext();){var s=r.next();s.isHole()||(n=s,e++)}return T.isTrue(1>=e,"found two shells in MinimalEdgeRing list"),n},add:function(){if(arguments.length===1){var t=arguments[0];this.add(t.getEdgeEnds(),t.getNodes())}else if(arguments.length===2){var e=arguments[0],n=arguments[1];Ve.linkResultDirectedEdges(n);var r=this.buildMaximalEdgeRings(e),s=new P,a=this.buildMinimalEdgeRings(r,this.shellList,s);this.sortShellsAndHoles(a,this.shellList,s),this.placeFreeHoles(this.shellList,s)}},interfaces_:function(){return[]},getClass:function(){return Kr}}),u(So.prototype,{collectLines:function(t){for(var e=this.op.getGraph().getEdgeEnds().iterator();e.hasNext();){var n=e.next();this.collectLineEdge(n,t,this.lineEdgesList),this.collectBoundaryTouchEdge(n,t,this.lineEdgesList)}},labelIsolatedLine:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.op.getArgGeometry(e));t.getLabel().setLocation(e,n)},build:function(t){return this.findCoveredLineEdges(),this.collectLines(t),this.buildLines(t),this.resultLineList},collectLineEdge:function(t,e,n){var r=t.getLabel(),s=t.getEdge();t.isLineEdge()&&(t.isVisited()||!J.isResultOfOp(r,e)||s.isCovered()||(n.add(s),t.setVisitedEdge(!0)))},findCoveredLineEdges:function(){for(var t=this.op.getGraph().getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().findCoveredLineEdges()}for(var n=this.op.getGraph().getEdgeEnds().iterator();n.hasNext();){var r=n.next(),s=r.getEdge();if(r.isLineEdge()&&!s.isCoveredSet()){var a=this.op.isCoveredByA(r.getCoordinate());s.setCovered(a)}}},labelIsolatedLines:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(r.isNull(0)?this.labelIsolatedLine(n,0):this.labelIsolatedLine(n,1))}},buildLines:function(t){for(var e=this.lineEdgesList.iterator();e.hasNext();){var n=e.next(),r=(n.getLabel(),this.geometryFactory.createLineString(n.getCoordinates()));this.resultLineList.add(r),n.setInResult(!0)}},collectBoundaryTouchEdge:function(t,e,n){var r=t.getLabel();return t.isLineEdge()||t.isVisited()||t.isInteriorAreaEdge()||t.getEdge().isInResult()?null:(T.isTrue(!(t.isInResult()||t.getSym().isInResult())||!t.getEdge().isInResult()),void(J.isResultOfOp(r,e)&&e===J.INTERSECTION&&(n.add(t.getEdge()),t.setVisitedEdge(!0))))},interfaces_:function(){return[]},getClass:function(){return So}}),u(Lo.prototype,{filterCoveredNodeToPoint:function(t){var e=t.getCoordinate();if(!this.op.isCoveredByLA(e)){var n=this.geometryFactory.createPoint(e);this.resultPointList.add(n)}},extractNonCoveredResultNodes:function(t){for(var e=this.op.getGraph().getNodes().iterator();e.hasNext();){var n=e.next();if(!(n.isInResult()||n.isIncidentEdgeInResult()||n.getEdges().getDegree()!==0&&t!==J.INTERSECTION)){var r=n.getLabel();J.isResultOfOp(r,t)&&this.filterCoveredNodeToPoint(n)}}},build:function(t){return this.extractNonCoveredResultNodes(t),this.resultPointList},interfaces_:function(){return[]},getClass:function(){return Lo}}),u(jr.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return jr}}),u(ve.prototype,{locate:function(t){return ve.locate(t,this.geom)},interfaces_:function(){return[jr]},getClass:function(){return ve}}),ve.isPointInRing=function(t,e){return e.getEnvelopeInternal().intersects(t)?k.isPointInRing(t,e.getCoordinates()):!1},ve.containsPointInPolygon=function(t,e){if(e.isEmpty())return!1;var n=e.getExteriorRing();if(!ve.isPointInRing(t,n))return!1;for(var r=0;r<e.getNumInteriorRing();r++){var s=e.getInteriorRingN(r);if(ve.isPointInRing(t,s))return!1}return!0},ve.containsPoint=function(t,e){if(e instanceof vt)return ve.containsPointInPolygon(t,e);if(e instanceof ut)for(var n=new Hn(e);n.hasNext();){var r=n.next();if(r!==e&&ve.containsPoint(t,r))return!0}return!1},ve.locate=function(t,e){return e.isEmpty()?v.EXTERIOR:ve.containsPoint(t,e)?v.INTERIOR:v.EXTERIOR},u(Kn.prototype,{getNextCW:function(t){this.getEdges();var e=this.edgeList.indexOf(t),n=e-1;return e===0&&(n=this.edgeList.size()-1),this.edgeList.get(n)},propagateSideLabels:function(t){for(var e=v.NONE,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();s.isArea(t)&&s.getLocation(t,V.LEFT)!==v.NONE&&(e=s.getLocation(t,V.LEFT))}if(e===v.NONE)return null;for(var a=e,n=this.iterator();n.hasNext();){var r=n.next(),s=r.getLabel();if(s.getLocation(t,V.ON)===v.NONE&&s.setLocation(t,V.ON,a),s.isArea(t)){var c=s.getLocation(t,V.LEFT),f=s.getLocation(t,V.RIGHT);if(f!==v.NONE){if(f!==a)throw new oe("side location conflict",r.getCoordinate());c===v.NONE&&T.shouldNeverReachHere("found single null side (at "+r.getCoordinate()+")"),a=c}else T.isTrue(s.getLocation(t,V.LEFT)===v.NONE,"found single null side"),s.setLocation(t,V.RIGHT,a),s.setLocation(t,V.LEFT,a)}}},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},print:function(t){mt.out.println("EdgeEndStar:   "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},isAreaLabelsConsistent:function(t){return this.computeEdgeEndLabels(t.getBoundaryNodeRule()),this.checkAreaLabelsConsistent(0)},checkAreaLabelsConsistent:function(t){var e=this.getEdges();if(e.size()<=0)return!0;var n=e.size()-1,r=e.get(n).getLabel(),s=r.getLocation(t,V.LEFT);T.isTrue(s!==v.NONE,"Found unlabelled area edge");for(var a=s,c=this.iterator();c.hasNext();){var f=c.next(),y=f.getLabel();T.isTrue(y.isArea(t),"Found non-area edge");var L=y.getLocation(t,V.LEFT),M=y.getLocation(t,V.RIGHT);if(L===M||M!==a)return!1;a=L}return!0},findIndex:function(t){this.iterator();for(var e=0;e<this.edgeList.size();e++){var n=this.edgeList.get(e);if(n===t)return e}return-1},iterator:function(){return this.getEdges().iterator()},getEdges:function(){return this.edgeList===null&&(this.edgeList=new P(this.edgeMap.values())),this.edgeList},getLocation:function(t,e,n){return this.ptInAreaLocation[t]===v.NONE&&(this.ptInAreaLocation[t]=ve.locate(e,n[t].getGeometry())),this.ptInAreaLocation[t]},toString:function(){var t=new Ct;t.append("EdgeEndStar:   "+this.getCoordinate()),t.append(`
`);for(var e=this.iterator();e.hasNext();){var n=e.next();t.append(n),t.append(`
`)}return t.toString()},computeEdgeEndLabels:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.computeLabel(t)}},computeLabelling:function(t){this.computeEdgeEndLabels(t[0].getBoundaryNodeRule()),this.propagateSideLabels(0),this.propagateSideLabels(1);for(var e=[!1,!1],n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),a=0;2>a;a++)s.isLine(a)&&s.getLocation(a)===v.BOUNDARY&&(e[a]=!0);for(var n=this.iterator();n.hasNext();)for(var r=n.next(),s=r.getLabel(),a=0;2>a;a++)if(s.isAnyNull(a)){var c=v.NONE;if(e[a])c=v.EXTERIOR;else{var f=r.getCoordinate();c=this.getLocation(a,f,t)}s.setAllLocationsIfNull(a,c)}},getDegree:function(){return this.edgeMap.size()},insertEdgeEnd:function(t,e){this.edgeMap.put(t,e),this.edgeList=null},interfaces_:function(){return[]},getClass:function(){return Kn}}),S(Qr,Kn),u(Qr.prototype,{linkResultDirectedEdges:function(){this.getResultAreaEdges();for(var t=null,e=null,n=this.SCANNING_FOR_INCOMING,r=0;r<this.resultAreaEdgeList.size();r++){var s=this.resultAreaEdgeList.get(r),a=s.getSym();if(s.getLabel().isArea())switch(t===null&&s.isInResult()&&(t=s),n){case this.SCANNING_FOR_INCOMING:if(!a.isInResult())continue;e=a,n=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(!s.isInResult())continue;e.setNext(s),n=this.SCANNING_FOR_INCOMING}}if(n===this.LINKING_TO_OUTGOING){if(t===null)throw new oe("no outgoing dirEdge found",this.getCoordinate());T.isTrue(t.isInResult(),"unable to link last incoming dirEdge"),e.setNext(t)}},insert:function(t){var e=t;this.insertEdgeEnd(e,e)},getRightmostEdge:function(){var t=this.getEdges(),e=t.size();if(1>e)return null;var n=t.get(0);if(e===1)return n;var r=t.get(e-1),s=n.getQuadrant(),a=r.getQuadrant();return ht.isNorthern(s)&&ht.isNorthern(a)?n:!ht.isNorthern(s)&&!ht.isNorthern(a)?r:n.getDy()!==0?n:r.getDy()!==0?r:(T.shouldNeverReachHere("found two horizontal edges incident on node"),null)},print:function(t){mt.out.println("DirectedEdgeStar: "+this.getCoordinate());for(var e=this.iterator();e.hasNext();){var n=e.next();t.print("out "),n.print(t),t.println(),t.print("in "),n.getSym().print(t),t.println()}},getResultAreaEdges:function(){if(this.resultAreaEdgeList!==null)return this.resultAreaEdgeList;this.resultAreaEdgeList=new P;for(var t=this.iterator();t.hasNext();){var e=t.next();(e.isInResult()||e.getSym().isInResult())&&this.resultAreaEdgeList.add(e)}return this.resultAreaEdgeList},updateLabelling:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.setAllLocationsIfNull(0,t.getLocation(0)),r.setAllLocationsIfNull(1,t.getLocation(1))}},linkAllDirectedEdges:function(){this.getEdges();for(var t=null,e=null,n=this.edgeList.size()-1;n>=0;n--){var r=this.edgeList.get(n),s=r.getSym();e===null&&(e=s),t!==null&&s.setNext(t),t=r}e.setNext(t)},computeDepths:function(){if(arguments.length===1){var t=arguments[0],e=this.findIndex(t),n=(t.getLabel(),t.getDepth(V.LEFT)),r=t.getDepth(V.RIGHT),s=this.computeDepths(e+1,this.edgeList.size(),n),a=this.computeDepths(0,e,s);if(a!==r)throw new oe("depth mismatch at "+t.getCoordinate())}else if(arguments.length===3){for(var c=arguments[0],f=arguments[1],y=arguments[2],L=y,M=c;f>M;M++){var D=this.edgeList.get(M);D.getLabel(),D.setEdgeDepths(V.RIGHT,L),L=D.getDepth(V.LEFT)}return L}},mergeSymLabels:function(){for(var t=this.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();n.merge(e.getSym().getLabel())}},linkMinimalDirectedEdges:function(t){for(var e=null,n=null,r=this.SCANNING_FOR_INCOMING,s=this.resultAreaEdgeList.size()-1;s>=0;s--){var a=this.resultAreaEdgeList.get(s),c=a.getSym();switch(e===null&&a.getEdgeRing()===t&&(e=a),r){case this.SCANNING_FOR_INCOMING:if(c.getEdgeRing()!==t)continue;n=c,r=this.LINKING_TO_OUTGOING;break;case this.LINKING_TO_OUTGOING:if(a.getEdgeRing()!==t)continue;n.setNextMin(a),r=this.SCANNING_FOR_INCOMING}}r===this.LINKING_TO_OUTGOING&&(T.isTrue(e!==null,"found null for first outgoing dirEdge"),T.isTrue(e.getEdgeRing()===t,"unable to link last incoming dirEdge"),n.setNextMin(e))},getOutgoingDegree:function(){if(arguments.length===0){for(var t=0,e=this.iterator();e.hasNext();){var n=e.next();n.isInResult()&&t++}return t}if(arguments.length===1){for(var r=arguments[0],t=0,e=this.iterator();e.hasNext();){var n=e.next();n.getEdgeRing()===r&&t++}return t}},getLabel:function(){return this.label},findCoveredLineEdges:function(){for(var t=v.NONE,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();if(!n.isLineEdge()){if(n.isInResult()){t=v.INTERIOR;break}if(r.isInResult()){t=v.EXTERIOR;break}}}if(t===v.NONE)return null;for(var s=t,e=this.iterator();e.hasNext();){var n=e.next(),r=n.getSym();n.isLineEdge()?n.getEdge().setCovered(s===v.INTERIOR):(n.isInResult()&&(s=v.EXTERIOR),r.isInResult()&&(s=v.INTERIOR))}},computeLabelling:function(t){Kn.prototype.computeLabelling.call(this,t),this.label=new Mt(v.NONE);for(var e=this.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge(),s=r.getLabel(),a=0;2>a;a++){var c=s.getLocation(a);c!==v.INTERIOR&&c!==v.BOUNDARY||this.label.setLocation(a,v.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Qr}}),S(mi,Jn),u(mi.prototype,{createNode:function(t){return new nn(t,new Qr)},interfaces_:function(){return[]},getClass:function(){return mi}}),u(Ro.prototype,{computeIntersections:function(t,e){this.mce.computeIntersectsForChain(this.chainIndex,t.mce,t.chainIndex,e)},interfaces_:function(){return[]},getClass:function(){return Ro}}),u(rn.prototype,{isDelete:function(){return this.eventType===rn.DELETE},setDeleteEventIndex:function(t){this.deleteEventIndex=t},getObject:function(){return this.obj},compareTo:function(t){var e=t;return this.xValue<e.xValue?-1:this.xValue>e.xValue?1:this.eventType<e.eventType?-1:this.eventType>e.eventType?1:0},getInsertEvent:function(){return this.insertEvent},isInsert:function(){return this.eventType===rn.INSERT},isSameLabel:function(t){return this.label===null?!1:this.label===t.label},getDeleteEventIndex:function(){return this.deleteEventIndex},interfaces_:function(){return[m]},getClass:function(){return rn}}),rn.INSERT=1,rn.DELETE=2,u(ts.prototype,{interfaces_:function(){return[]},getClass:function(){return ts}}),u(Sn.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(Sn.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.getNumPoints()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},setIsDoneIfProperInt:function(t){this.isDoneWhenProperInt=t},hasProperInteriorIntersection:function(){return this.hasProperInterior},isBoundaryPointInternal:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinate();if(t.isIntersection(s))return!0}return!1},hasProperIntersection:function(){return this.hasProper},hasIntersection:function(){return this._hasIntersection},isDone:function(){return this._isDone},isBoundaryPoint:function(t,e){return e===null?!1:this.isBoundaryPointInternal(t,e[0])?!0:!!this.isBoundaryPointInternal(t,e[1])},setBoundaryNodes:function(t,e){this.bdyNodes=new Array(2).fill(null),this.bdyNodes[0]=t,this.bdyNodes[1]=e},addIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];this.li.computeIntersection(s,a,c,f),this.li.hasIntersection()&&(this.recordIsolated&&(t.setIsolated(!1),n.setIsolated(!1)),this.numIntersections++,this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,!this.includeProper&&this.li.isProper()||(t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)),this.li.isProper()&&(this.properIntersectionPoint=this.li.getIntersection(0).copy(),this.hasProper=!0,this.isDoneWhenProperInt&&(this._isDone=!0),this.isBoundaryPoint(this.li,this.bdyNodes)||(this.hasProperInterior=!0))))},interfaces_:function(){return[]},getClass:function(){return Sn}}),Sn.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},S(es,ts),u(es.prototype,{prepareEvents:function(){We.sort(this.events);for(var t=0;t<this.events.size();t++){var e=this.events.get(t);e.isDelete()&&e.getInsertEvent().setDeleteEventIndex(t)}},computeIntersections:function(){if(arguments.length===1){var t=arguments[0];this.nOverlaps=0,this.prepareEvents();for(var e=0;e<this.events.size();e++){var n=this.events.get(e);if(n.isInsert()&&this.processOverlaps(e,n.getDeleteEventIndex(),n,t),t.isDone())break}}else if(arguments.length===3){if(arguments[2]instanceof Sn&&U(arguments[0],w)&&U(arguments[1],w)){var r=arguments[0],s=arguments[1],a=arguments[2];this.addEdges(r,r),this.addEdges(s,s),this.computeIntersections(a)}else if(typeof arguments[2]=="boolean"&&U(arguments[0],w)&&arguments[1]instanceof Sn){var c=arguments[0],f=arguments[1],y=arguments[2];y?this.addEdges(c,null):this.addEdges(c),this.computeIntersections(f)}}},addEdge:function(t,e){for(var n=t.getMonotoneChainEdge(),r=n.getStartIndexes(),s=0;s<r.length-1;s++){var a=new Ro(n,s),c=new rn(e,n.getMinX(s),a);this.events.add(c),this.events.add(new rn(n.getMaxX(s),c))}},processOverlaps:function(t,e,n,r){for(var s=n.getObject(),a=t;e>a;a++){var c=this.events.get(a);if(c.isInsert()){var f=c.getObject();n.isSameLabel(c)||(s.computeIntersections(f,r),this.nOverlaps++)}}},addEdges:function(){if(arguments.length===1)for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.addEdge(n,n)}else if(arguments.length===2)for(var r=arguments[0],s=arguments[1],e=r.iterator();e.hasNext();){var n=e.next();this.addEdge(n,s)}},interfaces_:function(){return[]},getClass:function(){return es}}),u(jn.prototype,{getMin:function(){return this.min},intersects:function(t,e){return!(this.min>e||this.max<t)},getMax:function(){return this.max},toString:function(){return Wt.toLineString(new I(this.min,0),new I(this.max,0))},interfaces_:function(){return[]},getClass:function(){return jn}}),u(To.prototype,{compare:function(t,e){var n=t,r=e,s=(n.min+n.max)/2,a=(r.min+r.max)/2;return a>s?-1:s>a?1:0},interfaces_:function(){return[x]},getClass:function(){return To}}),jn.NodeComparator=To,S(ns,jn),u(ns.prototype,{query:function(t,e,n){return this.intersects(t,e)?void n.visitItem(this.item):null},interfaces_:function(){return[]},getClass:function(){return ns}}),S(is,jn),u(is.prototype,{buildExtent:function(t,e){this.min=Math.min(t.min,e.min),this.max=Math.max(t.max,e.max)},query:function(t,e,n){return this.intersects(t,e)?(this.node1!==null&&this.node1.query(t,e,n),void(this.node2!==null&&this.node2.query(t,e,n))):null},interfaces_:function(){return[]},getClass:function(){return is}}),u(Po.prototype,{buildTree:function(){We.sort(this.leaves,new IntervalRTreeNode.NodeComparator);for(var t=this.leaves,e=null,n=new P;;){if(this.buildLevel(t,n),n.size()===1)return n.get(0);e=t,t=n,n=e}},insert:function(t,e,n){if(this.root!==null)throw new IllegalStateException("Index cannot be added to once it has been queried");this.leaves.add(new ns(t,e,n))},query:function(t,e,n){this.init(),this.root.query(t,e,n)},buildRoot:function(){return this.root!==null?null:void(this.root=this.buildTree())},printNode:function(t){mt.out.println(Wt.toLineString(new I(t.min,this.level),new I(t.max,this.level)))},init:function(){return this.root!==null?null:void this.buildRoot()},buildLevel:function(t,e){this.level++,e.clear();for(var n=0;n<t.size();n+=2){var r=t.get(n),s=n+1<t.size()?t.get(n):null;if(s===null)e.add(r);else{var a=new is(t.get(n),t.get(n+1));e.add(a)}}},interfaces_:function(){return[]},getClass:function(){return Po}}),u($t.prototype,{filter:function(t){if(this.isForcedToLineString&&t instanceof Pt){var e=t.getFactory().createLineString(t.getCoordinateSequence());return this.lines.add(e),null}t instanceof it&&this.lines.add(t)},setForceToLineString:function(t){this.isForcedToLineString=t},interfaces_:function(){return[ge]},getClass:function(){return $t}}),$t.getGeometry=function(){if(arguments.length===1){var t=arguments[0];return t.getFactory().buildGeometry($t.getLines(t))}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e.getFactory().buildGeometry($t.getLines(e,n))}},$t.getLines=function(){if(arguments.length===1){var t=arguments[0];return $t.getLines(t,!1)}if(arguments.length===2){if(U(arguments[0],X)&&U(arguments[1],X)){for(var e=arguments[0],n=arguments[1],r=e.iterator();r.hasNext();){var s=r.next();$t.getLines(s,n)}return n}if(arguments[0]instanceof H&&typeof arguments[1]=="boolean"){var a=arguments[0],c=arguments[1],f=new P;return a.apply(new $t(f,c)),f}if(arguments[0]instanceof H&&U(arguments[1],X)){var y=arguments[0],L=arguments[1];return y instanceof it?L.add(y):y.apply(new $t(L)),L}}else if(arguments.length===3){if(typeof arguments[2]=="boolean"&&U(arguments[0],X)&&U(arguments[1],X)){for(var M=arguments[0],D=arguments[1],q=arguments[2],r=M.iterator();r.hasNext();){var s=r.next();$t.getLines(s,D,q)}return D}if(typeof arguments[2]=="boolean"&&arguments[0]instanceof H&&U(arguments[1],X)){var $=arguments[0],j=arguments[1],tt=arguments[2];return $.apply(new $t(j,tt)),j}}},u(rs.prototype,{visitItem:function(t){this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Nn]},getClass:function(){return rs}}),u(Hi.prototype,{locate:function(t){var e=new Yn(t),n=new ss(e);return this.index.query(t.y,t.y,n),e.getLocation()},interfaces_:function(){return[jr]},getClass:function(){return Hi}}),u(ss.prototype,{visitItem:function(t){var e=t;this.counter.countSegment(e.getCoordinate(0),e.getCoordinate(1))},interfaces_:function(){return[Nn]},getClass:function(){return ss}}),u(os.prototype,{init:function(t){for(var e=$t.getLines(t),n=e.iterator();n.hasNext();){var r=n.next(),s=r.getCoordinates();this.addLine(s)}},addLine:function(t){for(var e=1;e<t.length;e++){var n=new et(t[e-1],t[e]),r=Math.min(n.p0.y,n.p1.y),s=Math.max(n.p0.y,n.p1.y);this.index.insert(r,s,n)}},query:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new rs;return this.index.query(t,e,n),n.getItems()}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];this.index.query(r,s,a)}},interfaces_:function(){return[]},getClass:function(){return os}}),Hi.SegmentVisitor=ss,Hi.IntervalIndexedGeometry=os,u(Oo.prototype,{getSegmentIndex:function(){return this.segmentIndex},getCoordinate:function(){return this.coord},print:function(t){t.print(this.coord),t.print(" seg # = "+this.segmentIndex),t.println(" dist = "+this.dist)},compareTo:function(t){var e=t;return this.compare(e.segmentIndex,e.dist)},isEndPoint:function(t){return this.segmentIndex===0&&this.dist===0?!0:this.segmentIndex===t},toString:function(){return this.coord+" seg # = "+this.segmentIndex+" dist = "+this.dist},getDistance:function(){return this.dist},compare:function(t,e){return this.segmentIndex<t?-1:this.segmentIndex>t?1:this.dist<e?-1:this.dist>e?1:0},interfaces_:function(){return[m]},getClass:function(){return Oo}}),u(Mo.prototype,{print:function(t){t.println("Intersections:");for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t)}},iterator:function(){return this.nodeMap.values().iterator()},addSplitEdges:function(t){this.addEndpoints();for(var e=this.iterator(),n=e.next();e.hasNext();){var r=e.next(),s=this.createSplitEdge(n,r);t.add(s),n=r}},addEndpoints:function(){var t=this.edge.pts.length-1;this.add(this.edge.pts[0],0,0),this.add(this.edge.pts[t],t,0)},createSplitEdge:function(t,e){var n=e.segmentIndex-t.segmentIndex+2,r=this.edge.pts[e.segmentIndex],s=e.dist>0||!e.coord.equals2D(r);s||n--;var a=new Array(n).fill(null),c=0;a[c++]=new I(t.coord);for(var f=t.segmentIndex+1;f<=e.segmentIndex;f++)a[c++]=this.edge.pts[f];return s&&(a[c]=e.coord),new Ce(a,new Mt(this.edge.label))},add:function(t,e,n){var r=new Oo(t,e,n),s=this.nodeMap.get(r);return s!==null?s:(this.nodeMap.put(r,r),r)},isIntersection:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();if(n.coord.equals(t))return!0}return!1},interfaces_:function(){return[]},getClass:function(){return Mo}}),u(Wi.prototype,{getChainStartIndices:function(t){var e=0,n=new P;n.add(new Tt(e));do{var r=this.findChainEnd(t,e);n.add(new Tt(r)),e=r}while(e<t.length-1);var s=Wi.toIntArray(n);return s},findChainEnd:function(t,e){for(var n=ht.quadrant(t[e],t[e+1]),r=e+1;r<t.length;){var s=ht.quadrant(t[r-1],t[r]);if(s!==n)break;r++}return r-1},interfaces_:function(){return[]},getClass:function(){return Wi}}),Wi.toIntArray=function(t){for(var e=new Array(t.size()).fill(null),n=0;n<e.length;n++)e[n]=t.get(n).intValue();return e},u(_o.prototype,{getCoordinates:function(){return this.pts},getMaxX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return e>n?e:n},getMinX:function(t){var e=this.pts[this.startIndex[t]].x,n=this.pts[this.startIndex[t+1]].x;return n>e?e:n},computeIntersectsForChain:function(){if(arguments.length===4){var t=arguments[0],e=arguments[1],n=arguments[2],r=arguments[3];this.computeIntersectsForChain(this.startIndex[t],this.startIndex[t+1],e,e.startIndex[n],e.startIndex[n+1],r)}else if(arguments.length===6){var s=arguments[0],a=arguments[1],c=arguments[2],f=arguments[3],y=arguments[4],L=arguments[5],M=this.pts[s],D=this.pts[a],q=c.pts[f],$=c.pts[y];if(a-s===1&&y-f===1)return L.addIntersections(this.e,s,c.e,f),null;if(this.env1.init(M,D),this.env2.init(q,$),!this.env1.intersects(this.env2))return null;var j=Math.trunc((s+a)/2),tt=Math.trunc((f+y)/2);j>s&&(tt>f&&this.computeIntersectsForChain(s,j,c,f,tt,L),y>tt&&this.computeIntersectsForChain(s,j,c,tt,y,L)),a>j&&(tt>f&&this.computeIntersectsForChain(j,a,c,f,tt,L),y>tt&&this.computeIntersectsForChain(j,a,c,tt,y,L))}},getStartIndexes:function(){return this.startIndex},computeIntersects:function(t,e){for(var n=0;n<this.startIndex.length-1;n++)for(var r=0;r<t.startIndex.length-1;r++)this.computeIntersectsForChain(n,t,r,e)},interfaces_:function(){return[]},getClass:function(){return _o}}),u(Oe.prototype,{getDepth:function(t,e){return this.depth[t][e]},setDepth:function(t,e,n){this.depth[t][e]=n},isNull:function(){if(arguments.length===0){for(var t=0;2>t;t++)for(var e=0;3>e;e++)if(this.depth[t][e]!==Oe.NULL_VALUE)return!1;return!0}if(arguments.length===1){var n=arguments[0];return this.depth[n][1]===Oe.NULL_VALUE}if(arguments.length===2){var r=arguments[0],s=arguments[1];return this.depth[r][s]===Oe.NULL_VALUE}},normalize:function(){for(var t=0;2>t;t++)if(!this.isNull(t)){var e=this.depth[t][1];this.depth[t][2]<e&&(e=this.depth[t][2]),0>e&&(e=0);for(var n=1;3>n;n++){var r=0;this.depth[t][n]>e&&(r=1),this.depth[t][n]=r}}},getDelta:function(t){return this.depth[t][V.RIGHT]-this.depth[t][V.LEFT]},getLocation:function(t,e){return this.depth[t][e]<=0?v.EXTERIOR:v.INTERIOR},toString:function(){return"A: "+this.depth[0][1]+","+this.depth[0][2]+" B: "+this.depth[1][1]+","+this.depth[1][2]},add:function(){if(arguments.length===1)for(var t=arguments[0],e=0;2>e;e++)for(var n=1;3>n;n++){var r=t.getLocation(e,n);r!==v.EXTERIOR&&r!==v.INTERIOR||(this.isNull(e,n)?this.depth[e][n]=Oe.depthAtLocation(r):this.depth[e][n]+=Oe.depthAtLocation(r))}else if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];c===v.INTERIOR&&this.depth[s][a]++}},interfaces_:function(){return[]},getClass:function(){return Oe}}),Oe.depthAtLocation=function(t){return t===v.EXTERIOR?0:t===v.INTERIOR?1:Oe.NULL_VALUE},Oe.NULL_VALUE=-1,S(Ce,wn),u(Ce.prototype,{getDepth:function(){return this.depth},getCollapsedEdge:function(){var t=new Array(2).fill(null);t[0]=this.pts[0],t[1]=this.pts[1];var e=new Ce(t,Mt.toLineLabel(this.label));return e},isIsolated:function(){return this._isIsolated},getCoordinates:function(){return this.pts},setIsolated:function(t){this._isIsolated=t},setName:function(t){this.name=t},equals:function(t){if(!(t instanceof Ce))return!1;var e=t;if(this.pts.length!==e.pts.length)return!1;for(var n=!0,r=!0,s=this.pts.length,a=0;a<this.pts.length;a++)if(this.pts[a].equals2D(e.pts[a])||(n=!1),this.pts[a].equals2D(e.pts[--s])||(r=!1),!n&&!r)return!1;return!0},getCoordinate:function(){if(arguments.length===0)return this.pts.length>0?this.pts[0]:null;if(arguments.length===1){var t=arguments[0];return this.pts[t]}},print:function(t){t.print("edge "+this.name+": "),t.print("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.print(","),t.print(this.pts[e].x+" "+this.pts[e].y);t.print(")  "+this.label+" "+this.depthDelta)},computeIM:function(t){Ce.updateIM(this.label,t)},isCollapsed:function(){return this.label.isArea()?this.pts.length!==3?!1:!!this.pts[0].equals(this.pts[2]):!1},isClosed:function(){return this.pts[0].equals(this.pts[this.pts.length-1])},getMaximumSegmentIndex:function(){return this.pts.length-1},getDepthDelta:function(){return this.depthDelta},getNumPoints:function(){return this.pts.length},printReverse:function(t){t.print("edge "+this.name+": ");for(var e=this.pts.length-1;e>=0;e--)t.print(this.pts[e]+" ");t.println("")},getMonotoneChainEdge:function(){return this.mce===null&&(this.mce=new _o(this)),this.mce},getEnvelope:function(){if(this.env===null){this.env=new O;for(var t=0;t<this.pts.length;t++)this.env.expandToInclude(this.pts[t])}return this.env},addIntersection:function(t,e,n,r){var s=new I(t.getIntersection(r)),a=e,c=t.getEdgeDistance(n,r),f=a+1;if(f<this.pts.length){var y=this.pts[f];s.equals2D(y)&&(a=f,c=0)}this.eiList.add(s,a,c)},toString:function(){var t=new Ct;t.append("edge "+this.name+": "),t.append("LINESTRING (");for(var e=0;e<this.pts.length;e++)e>0&&t.append(","),t.append(this.pts[e].x+" "+this.pts[e].y);return t.append(")  "+this.label+" "+this.depthDelta),t.toString()},isPointwiseEqual:function(t){if(this.pts.length!==t.pts.length)return!1;for(var e=0;e<this.pts.length;e++)if(!this.pts[e].equals2D(t.pts[e]))return!1;return!0},setDepthDelta:function(t){this.depthDelta=t},getEdgeIntersectionList:function(){return this.eiList},addIntersections:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++)this.addIntersection(t,e,n,r)},interfaces_:function(){return[]},getClass:function(){return Ce}}),Ce.updateIM=function(){if(arguments.length!==2)return wn.prototype.updateIM.apply(this,arguments);var t=arguments[0],e=arguments[1];e.setAtLeastIfValid(t.getLocation(0,V.ON),t.getLocation(1,V.ON),1),t.isArea()&&(e.setAtLeastIfValid(t.getLocation(0,V.LEFT),t.getLocation(1,V.LEFT),2),e.setAtLeastIfValid(t.getLocation(0,V.RIGHT),t.getLocation(1,V.RIGHT),2))},S(ue,Ve),u(ue.prototype,{insertBoundaryPoint:function(t,e){var n=this.nodes.addNode(e),r=n.getLabel(),s=1,a=v.NONE;a=r.getLocation(t,V.ON),a===v.BOUNDARY&&s++;var c=ue.determineBoundary(this.boundaryNodeRule,s);r.setLocation(t,c)},computeSelfNodes:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this.computeSelfNodes(t,e,!1)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2],a=new Sn(n,!0,!1);a.setIsDoneIfProperInt(s);var c=this.createEdgeSetIntersector(),f=this.parentGeom instanceof Pt||this.parentGeom instanceof vt||this.parentGeom instanceof Ut,y=r||!f;return c.computeIntersections(this.edges,a,y),this.addSelfIntersectionNodes(this.argIndex),a}},computeSplitEdges:function(t){for(var e=this.edges.iterator();e.hasNext();){var n=e.next();n.eiList.addSplitEdges(t)}},computeEdgeIntersections:function(t,e,n){var r=new Sn(e,n,!0);r.setBoundaryNodes(this.getBoundaryNodes(),t.getBoundaryNodes());var s=this.createEdgeSetIntersector();return s.computeIntersections(this.edges,t.edges,r),r},getGeometry:function(){return this.parentGeom},getBoundaryNodeRule:function(){return this.boundaryNodeRule},hasTooFewPoints:function(){return this._hasTooFewPoints},addPoint:function(){if(arguments[0]instanceof wt){var t=arguments[0],e=t.getCoordinate();this.insertPoint(this.argIndex,e,v.INTERIOR)}else if(arguments[0]instanceof I){var n=arguments[0];this.insertPoint(this.argIndex,n,v.INTERIOR)}},addPolygon:function(t){this.addPolygonRing(t.getExteriorRing(),v.EXTERIOR,v.INTERIOR);for(var e=0;e<t.getNumInteriorRing();e++){var n=t.getInteriorRingN(e);this.addPolygonRing(n,v.INTERIOR,v.EXTERIOR)}},addEdge:function(t){this.insertEdge(t);var e=t.getCoordinates();this.insertPoint(this.argIndex,e[0],v.BOUNDARY),this.insertPoint(this.argIndex,e[e.length-1],v.BOUNDARY)},addLineString:function(t){var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return this._hasTooFewPoints=!0,this.invalidPoint=e[0],null;var n=new Ce(e,new Mt(this.argIndex,v.INTERIOR));this.lineEdgeMap.put(t,n),this.insertEdge(n),T.isTrue(e.length>=2,"found LineString with single point"),this.insertBoundaryPoint(this.argIndex,e[0]),this.insertBoundaryPoint(this.argIndex,e[e.length-1])},getInvalidPoint:function(){return this.invalidPoint},getBoundaryPoints:function(){for(var t=this.getBoundaryNodes(),e=new Array(t.size()).fill(null),n=0,r=t.iterator();r.hasNext();){var s=r.next();e[n++]=s.getCoordinate().copy()}return e},getBoundaryNodes:function(){return this.boundaryNodes===null&&(this.boundaryNodes=this.nodes.getBoundaryNodes(this.argIndex)),this.boundaryNodes},addSelfIntersectionNode:function(t,e,n){return this.isBoundaryNode(t,e)?null:void(n===v.BOUNDARY&&this.useBoundaryDeterminationRule?this.insertBoundaryPoint(t,e):this.insertPoint(t,e,n))},addPolygonRing:function(t,e,n){if(t.isEmpty())return null;var r=Q.removeRepeatedPoints(t.getCoordinates());if(r.length<4)return this._hasTooFewPoints=!0,this.invalidPoint=r[0],null;var s=e,a=n;k.isCCW(r)&&(s=n,a=e);var c=new Ce(r,new Mt(this.argIndex,v.BOUNDARY,s,a));this.lineEdgeMap.put(t,c),this.insertEdge(c),this.insertPoint(this.argIndex,r[0],v.BOUNDARY)},insertPoint:function(t,e,n){var r=this.nodes.addNode(e),s=r.getLabel();s===null?r.label=new Mt(t,n):s.setLocation(t,n)},createEdgeSetIntersector:function(){return new es},addSelfIntersectionNodes:function(t){for(var e=this.edges.iterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.eiList.iterator();s.hasNext();){var a=s.next();this.addSelfIntersectionNode(t,a.coord,r)}},add:function(){if(arguments.length!==1)return Ve.prototype.add.apply(this,arguments);var t=arguments[0];if(t.isEmpty())return null;if(t instanceof Ut&&(this.useBoundaryDeterminationRule=!1),t instanceof vt)this.addPolygon(t);else if(t instanceof it)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof re)this.addCollection(t);else if(t instanceof Ut)this.addCollection(t);else{if(!(t instanceof ut))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},locate:function(t){return U(this.parentGeom,Ke)&&this.parentGeom.getNumGeometries()>50?(this.areaPtLocator===null&&(this.areaPtLocator=new Hi(this.parentGeom)),this.areaPtLocator.locate(t)):this.ptLocator.locate(t,this.parentGeom)},findEdge:function(){if(arguments.length===1){var t=arguments[0];return this.lineEdgeMap.get(t)}return Ve.prototype.findEdge.apply(this,arguments)},interfaces_:function(){return[]},getClass:function(){return ue}}),ue.determineBoundary=function(t,e){return t.isInBoundary(e)?v.BOUNDARY:v.INTERIOR},u(Ln.prototype,{getArgGeometry:function(t){return this.arg[t].getGeometry()},setComputationPrecision:function(t){this.resultPrecisionModel=t,this.li.setPrecisionModel(this.resultPrecisionModel)},interfaces_:function(){return[]},getClass:function(){return Ln}}),u(Rn.prototype,{compareTo:function(t){var e=t,n=Rn.compareOriented(this.pts,this._orientation,e.pts,e._orientation);return n},interfaces_:function(){return[m]},getClass:function(){return Rn}}),Rn.orientation=function(t){return Q.increasingDirection(t)===1},Rn.compareOriented=function(t,e,n,r){for(var s=e?1:-1,a=r?1:-1,c=e?t.length:-1,f=r?n.length:-1,y=e?0:t.length-1,L=r?0:n.length-1;;){var M=t[y].compareTo(n[L]);if(M!==0)return M;y+=s,L+=a;var D=y===c,q=L===f;if(D&&!q)return-1;if(!D&&q)return 1;if(D&&q)return 0}},u(as.prototype,{print:function(t){t.print("MULTILINESTRING ( ");for(var e=0;e<this.edges.size();e++){var n=this.edges.get(e);e>0&&t.print(","),t.print("(");for(var r=n.getCoordinates(),s=0;s<r.length;s++)s>0&&t.print(","),t.print(r[s].x+" "+r[s].y);t.println(")")}t.print(")  ")},addAll:function(t){for(var e=t.iterator();e.hasNext();)this.add(e.next())},findEdgeIndex:function(t){for(var e=0;e<this.edges.size();e++)if(this.edges.get(e).equals(t))return e;return-1},iterator:function(){return this.edges.iterator()},getEdges:function(){return this.edges},get:function(t){return this.edges.get(t)},findEqualEdge:function(t){var e=new Rn(t.getCoordinates()),n=this.ocaMap.get(e);return n},add:function(t){this.edges.add(t);var e=new Rn(t.getCoordinates());this.ocaMap.put(e,t)},interfaces_:function(){return[]},getClass:function(){return as}}),S(J,Ln),u(J.prototype,{insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Mt(t.getLabel()),r.flip());var s=e.getDepth();s.isNull()&&s.add(n),s.add(r),n.merge(r)}else this.edgeList.add(t)},getGraph:function(){return this.graph},cancelDuplicateResultEdges:function(){for(var t=this.graph.getEdgeEnds().iterator();t.hasNext();){var e=t.next(),n=e.getSym();e.isInResult()&&n.isInResult()&&(e.setInResult(!1),n.setInResult(!1))}},isCoveredByLA:function(t){return this.isCovered(t,this.resultLineList)?!0:!!this.isCovered(t,this.resultPolyList)},computeGeometry:function(t,e,n,r){var s=new P;return s.addAll(t),s.addAll(e),s.addAll(n),s.isEmpty()?J.createEmptyResult(r,this.arg[0].getGeometry(),this.arg[1].getGeometry(),this.geomFact):this.geomFact.buildGeometry(s)},mergeSymLabels:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().mergeSymLabels()}},isCovered:function(t,e){for(var n=e.iterator();n.hasNext();){var r=n.next(),s=this.ptLocator.locate(t,r);if(s!==v.EXTERIOR)return!0}return!1},replaceCollapsedEdges:function(){for(var t=new P,e=this.edgeList.iterator();e.hasNext();){var n=e.next();n.isCollapsed()&&(e.remove(),t.add(n.getCollapsedEdge()))}this.edgeList.addAll(t)},updateNodeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next(),n=e.getEdges().getLabel();e.getLabel().merge(n)}},getResultGeometry:function(t){return this.computeOverlay(t),this.resultGeom},insertUniqueEdges:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertUniqueEdge(n)}},computeOverlay:function(t){this.copyPoints(0),this.copyPoints(1),this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1),this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!0);var e=new P;this.arg[0].computeSplitEdges(e),this.arg[1].computeSplitEdges(e),this.insertUniqueEdges(e),this.computeLabelsFromDepths(),this.replaceCollapsedEdges(),$n.checkValid(this.edgeList.getEdges()),this.graph.addEdges(this.edgeList.getEdges()),this.computeLabelling(),this.labelIncompleteNodes(),this.findResultAreaEdges(t),this.cancelDuplicateResultEdges();var n=new Kr(this.geomFact);n.add(this.graph),this.resultPolyList=n.getPolygons();var r=new So(this,this.geomFact,this.ptLocator);this.resultLineList=r.build(t);var s=new Lo(this,this.geomFact,this.ptLocator);this.resultPointList=s.build(t),this.resultGeom=this.computeGeometry(this.resultPointList,this.resultLineList,this.resultPolyList,t)},labelIncompleteNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setLocation(e,n)},copyPoints:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.graph.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},findResultAreaEdges:function(t){for(var e=this.graph.getEdgeEnds().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();r.isArea()&&!n.isInteriorAreaEdge()&&J.isResultOfOp(r.getLocation(0,V.RIGHT),r.getLocation(1,V.RIGHT),t)&&n.setInResult(!0)}},computeLabelsFromDepths:function(){for(var t=this.edgeList.iterator();t.hasNext();){var e=t.next(),n=e.getLabel(),r=e.getDepth();if(!r.isNull()){r.normalize();for(var s=0;2>s;s++)n.isNull(s)||!n.isArea()||r.isNull(s)||(r.getDelta(s)===0?n.toLine(s):(T.isTrue(!r.isNull(s,V.LEFT),"depth of LEFT side has not been initialized"),n.setLocation(s,V.LEFT,r.getLocation(s,V.LEFT)),T.isTrue(!r.isNull(s,V.RIGHT),"depth of RIGHT side has not been initialized"),n.setLocation(s,V.RIGHT,r.getLocation(s,V.RIGHT))))}}},computeLabelling:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}this.mergeSymLabels(),this.updateNodeLabelling()},labelIncompleteNodes:function(){for(var t=0,e=this.graph.getNodes().iterator();e.hasNext();){var n=e.next(),r=n.getLabel();n.isIsolated()&&(t++,r.isNull(0)?this.labelIncompleteNode(n,0):this.labelIncompleteNode(n,1)),n.getEdges().updateLabelling(r)}},isCoveredByA:function(t){return!!this.isCovered(t,this.resultPolyList)},interfaces_:function(){return[]},getClass:function(){return J}}),J.overlayOp=function(t,e,n){var r=new J(t,e),s=r.getResultGeometry(n);return s},J.intersection=function(t,e){if(t.isEmpty()||e.isEmpty())return J.createEmptyResult(J.INTERSECTION,t,e,t.getFactory());if(t.isGeometryCollection()){var n=e;return fi.map(t,{interfaces_:function(){return[MapOp]},map:function(r){return r.intersection(n)}})}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.INTERSECTION)},J.symDifference=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return J.createEmptyResult(J.SYMDIFFERENCE,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.SYMDIFFERENCE)},J.resultDimension=function(t,e,n){var r=e.getDimension(),s=n.getDimension(),a=-1;switch(t){case J.INTERSECTION:a=Math.min(r,s);break;case J.UNION:a=Math.max(r,s);break;case J.DIFFERENCE:a=r;break;case J.SYMDIFFERENCE:a=Math.max(r,s)}return a},J.createEmptyResult=function(t,e,n,r){var s=null;switch(J.resultDimension(t,e,n)){case-1:s=r.createGeometryCollection(new Array(0).fill(null));break;case 0:s=r.createPoint();break;case 1:s=r.createLineString();break;case 2:s=r.createPolygon()}return s},J.difference=function(t,e){return t.isEmpty()?J.createEmptyResult(J.DIFFERENCE,t,e,t.getFactory()):e.isEmpty()?t.copy():(t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.DIFFERENCE))},J.isResultOfOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=t.getLocation(0),r=t.getLocation(1);return J.isResultOfOp(n,r,e)}if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2];switch(s===v.BOUNDARY&&(s=v.INTERIOR),a===v.BOUNDARY&&(a=v.INTERIOR),c){case J.INTERSECTION:return s===v.INTERIOR&&a===v.INTERIOR;case J.UNION:return s===v.INTERIOR||a===v.INTERIOR;case J.DIFFERENCE:return s===v.INTERIOR&&a!==v.INTERIOR;case J.SYMDIFFERENCE:return s===v.INTERIOR&&a!==v.INTERIOR||s!==v.INTERIOR&&a===v.INTERIOR}return!1}},J.INTERSECTION=1,J.UNION=2,J.DIFFERENCE=3,J.SYMDIFFERENCE=4,u(we.prototype,{selfSnap:function(t){var e=new Qt(t),n=e.snapTo(t,this.snapTolerance);return n},removeCommonBits:function(t){this.cbr=new Fi,this.cbr.add(t[0]),this.cbr.add(t[1]);var e=new Array(2).fill(null);return e[0]=this.cbr.removeCommonBits(t[0].copy()),e[1]=this.cbr.removeCommonBits(t[1].copy()),e},prepareResult:function(t){return this.cbr.addCommonBits(t),t},getResultGeometry:function(t){var e=this.snap(this.geom),n=J.overlayOp(e[0],e[1],t);return this.prepareResult(n)},checkValid:function(t){t.isValid()||mt.out.println("Snapped geometry is invalid")},computeSnapTolerance:function(){this.snapTolerance=Qt.computeOverlaySnapTolerance(this.geom[0],this.geom[1])},snap:function(t){var e=this.removeCommonBits(t),n=Qt.snap(e[0],e[1],this.snapTolerance);return n},interfaces_:function(){return[]},getClass:function(){return we}}),we.overlayOp=function(t,e,n){var r=new we(t,e);return r.getResultGeometry(n)},we.union=function(t,e){return we.overlayOp(t,e,J.UNION)},we.intersection=function(t,e){return we.overlayOp(t,e,J.INTERSECTION)},we.symDifference=function(t,e){return we.overlayOp(t,e,J.SYMDIFFERENCE)},we.difference=function(t,e){return we.overlayOp(t,e,J.DIFFERENCE)},u(Vt.prototype,{getResultGeometry:function(t){var e=null,n=!1,r=null;try{e=J.overlayOp(this.geom[0],this.geom[1],t);var s=!0;s&&(n=!0)}catch(a){if(!(a instanceof C))throw a;r=a}finally{}if(!n)try{e=we.overlayOp(this.geom[0],this.geom[1],t)}catch(a){throw a instanceof C?r:a}finally{}return e},interfaces_:function(){return[]},getClass:function(){return Vt}}),Vt.overlayOp=function(t,e,n){var r=new Vt(t,e);return r.getResultGeometry(n)},Vt.union=function(t,e){return Vt.overlayOp(t,e,J.UNION)},Vt.intersection=function(t,e){return Vt.overlayOp(t,e,J.INTERSECTION)},Vt.symDifference=function(t,e){return Vt.overlayOp(t,e,J.SYMDIFFERENCE)},Vt.difference=function(t,e){return Vt.overlayOp(t,e,J.DIFFERENCE)},u(Me.prototype,{addPolygon:function(t){if(t.isEmpty())return null;var e=null,n=0,r=this.horizontalBisector(t);if(r.getLength()===0)n=0,e=r.getCoordinate();else{var s=Vt.overlayOp(r,t,J.INTERSECTION),a=this.widestGeometry(s);n=a.getEnvelopeInternal().getWidth(),e=Me.centre(a.getEnvelopeInternal())}(this.interiorPoint===null||n>this.maxWidth)&&(this.interiorPoint=e,this.maxWidth=n)},getInteriorPoint:function(){return this.interiorPoint},widestGeometry:function(){if(arguments[0]instanceof ut){var e=arguments[0];if(e.isEmpty())return e;for(var n=e.getGeometryN(0),r=1;r<e.getNumGeometries();r++)e.getGeometryN(r).getEnvelopeInternal().getWidth()>n.getEnvelopeInternal().getWidth()&&(n=e.getGeometryN(r));return n}if(arguments[0]instanceof H){var s=arguments[0];return s instanceof ut?this.widestGeometry(s):s}},horizontalBisector:function(t){var e=t.getEnvelopeInternal(),n=vi.getBisectorY(t);return this.factory.createLineString([new I(e.getMinX(),n),new I(e.getMaxX(),n)])},add:function(t){if(t instanceof vt)this.addPolygon(t);else if(t instanceof ut)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))},interfaces_:function(){return[]},getClass:function(){return Me}}),Me.centre=function(t){return new I(Me.avg(t.getMinX(),t.getMaxX()),Me.avg(t.getMinY(),t.getMaxY()))},Me.avg=function(t,e){return(t+e)/2},u(vi.prototype,{updateInterval:function(t){t<=this.centreY?t>this.loY&&(this.loY=t):t>this.centreY&&t<this.hiY&&(this.hiY=t)},getBisectorY:function(){this.process(this.poly.getExteriorRing());for(var t=0;t<this.poly.getNumInteriorRing();t++)this.process(this.poly.getInteriorRingN(t));var e=Me.avg(this.hiY,this.loY);return e},process:function(t){for(var e=t.getCoordinateSequence(),n=0;n<e.size();n++){var r=e.getY(n);this.updateInterval(r)}},interfaces_:function(){return[]},getClass:function(){return vi}}),vi.getBisectorY=function(t){var e=new vi(t);return e.getBisectorY()},Me.SafeBisectorFinder=vi,u(us.prototype,{addEndpoints:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof it)this.addEndpoints(t.getCoordinates());else if(t instanceof ut)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addEndpoints(e.getGeometryN(n))}else if(arguments[0]instanceof Array){var r=arguments[0];this.add(r[0]),this.add(r[r.length-1])}},getInteriorPoint:function(){return this.interiorPoint},addInterior:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof it)this.addInterior(t.getCoordinates());else if(t instanceof ut)for(var e=t,n=0;n<e.getNumGeometries();n++)this.addInterior(e.getGeometryN(n))}else if(arguments[0]instanceof Array)for(var r=arguments[0],n=1;n<r.length-1;n++)this.add(r[n])},add:function(t){var e=t.distance(this.centroid);e<this.minDistance&&(this.interiorPoint=new I(t),this.minDistance=e)},interfaces_:function(){return[]},getClass:function(){return us}}),u(ls.prototype,{getInteriorPoint:function(){return this.interiorPoint},add:function(){if(arguments[0]instanceof H){var t=arguments[0];if(t instanceof wt)this.add(t.getCoordinate());else if(t instanceof ut)for(var e=t,n=0;n<e.getNumGeometries();n++)this.add(e.getGeometryN(n))}else if(arguments[0]instanceof I){var r=arguments[0],s=r.distance(this.centroid);s<this.minDistance&&(this.interiorPoint=new I(r),this.minDistance=s)}},interfaces_:function(){return[]},getClass:function(){return ls}}),u(nt.prototype,{interfaces_:function(){return[]},getClass:function(){return nt}}),nt.toDegrees=function(t){return 180*t/Math.PI},nt.normalize=function(t){for(;t>Math.PI;)t-=nt.PI_TIMES_2;for(;t<=-Math.PI;)t+=nt.PI_TIMES_2;return t},nt.angle=function(){if(arguments.length===1){var t=arguments[0];return Math.atan2(t.y,t.x)}if(arguments.length===2){var e=arguments[0],n=arguments[1],r=n.x-e.x,s=n.y-e.y;return Math.atan2(s,r)}},nt.isAcute=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=n.x-e.x,c=n.y-e.y,f=r*a+s*c;return f>0},nt.isObtuse=function(t,e,n){var r=t.x-e.x,s=t.y-e.y,a=n.x-e.x,c=n.y-e.y,f=r*a+s*c;return 0>f},nt.interiorAngle=function(t,e,n){var r=nt.angle(e,t),s=nt.angle(e,n);return Math.abs(s-r)},nt.normalizePositive=function(t){if(0>t){for(;0>t;)t+=nt.PI_TIMES_2;t>=nt.PI_TIMES_2&&(t=0)}else{for(;t>=nt.PI_TIMES_2;)t-=nt.PI_TIMES_2;0>t&&(t=0)}return t},nt.angleBetween=function(t,e,n){var r=nt.angle(e,t),s=nt.angle(e,n);return nt.diff(r,s)},nt.diff=function(t,e){var n=null;return n=e>t?e-t:t-e,n>Math.PI&&(n=2*Math.PI-n),n},nt.toRadians=function(t){return t*Math.PI/180},nt.getTurn=function(t,e){var n=Math.sin(e-t);return n>0?nt.COUNTERCLOCKWISE:0>n?nt.CLOCKWISE:nt.NONE},nt.angleBetweenOriented=function(t,e,n){var r=nt.angle(e,t),s=nt.angle(e,n),a=s-r;return a<=-Math.PI?a+nt.PI_TIMES_2:a>Math.PI?a-nt.PI_TIMES_2:a},nt.PI_TIMES_2=2*Math.PI,nt.PI_OVER_2=Math.PI/2,nt.PI_OVER_4=Math.PI/4,nt.COUNTERCLOCKWISE=k.COUNTERCLOCKWISE,nt.CLOCKWISE=k.CLOCKWISE,nt.NONE=k.COLLINEAR,u(Et.prototype,{area:function(){return Et.area(this.p0,this.p1,this.p2)},signedArea:function(){return Et.signedArea(this.p0,this.p1,this.p2)},interpolateZ:function(t){if(t===null)throw new d;return Et.interpolateZ(t,this.p0,this.p1,this.p2)},longestSideLength:function(){return Et.longestSideLength(this.p0,this.p1,this.p2)},isAcute:function(){return Et.isAcute(this.p0,this.p1,this.p2)},circumcentre:function(){return Et.circumcentre(this.p0,this.p1,this.p2)},area3D:function(){return Et.area3D(this.p0,this.p1,this.p2)},centroid:function(){return Et.centroid(this.p0,this.p1,this.p2)},inCentre:function(){return Et.inCentre(this.p0,this.p1,this.p2)},interfaces_:function(){return[]},getClass:function(){return Et}}),Et.area=function(t,e,n){return Math.abs(((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2)},Et.signedArea=function(t,e,n){return((n.x-t.x)*(e.y-t.y)-(e.x-t.x)*(n.y-t.y))/2},Et.det=function(t,e,n,r){return t*r-e*n},Et.interpolateZ=function(t,e,n,r){var s=e.x,a=e.y,c=n.x-s,f=r.x-s,y=n.y-a,L=r.y-a,M=c*L-f*y,D=t.x-s,q=t.y-a,$=(L*D-f*q)/M,j=(-y*D+c*q)/M,tt=e.z+$*(n.z-e.z)+j*(r.z-e.z);return tt},Et.longestSideLength=function(t,e,n){var r=t.distance(e),s=e.distance(n),a=n.distance(t),c=r;return s>c&&(c=s),a>c&&(c=a),c},Et.isAcute=function(t,e,n){return nt.isAcute(t,e,n)&&nt.isAcute(e,n,t)?!!nt.isAcute(n,t,e):!1},Et.circumcentre=function(t,e,n){var r=n.x,s=n.y,a=t.x-r,c=t.y-s,f=e.x-r,y=e.y-s,L=2*Et.det(a,c,f,y),M=Et.det(c,a*a+c*c,y,f*f+y*y),D=Et.det(a,a*a+c*c,f,f*f+y*y),q=r-M/L,$=s+D/L;return new I(q,$)},Et.perpendicularBisector=function(t,e){var n=e.x-t.x,r=e.y-t.y,s=new Ht(t.x+n/2,t.y+r/2,1),a=new Ht(t.x-r+n/2,t.y+n+r/2,1);return new Ht(s,a)},Et.angleBisector=function(t,e,n){var r=e.distance(t),s=e.distance(n),a=r/(r+s),c=n.x-t.x,f=n.y-t.y,y=new I(t.x+a*c,t.y+a*f);return y},Et.area3D=function(t,e,n){var r=e.x-t.x,s=e.y-t.y,a=e.z-t.z,c=n.x-t.x,f=n.y-t.y,y=n.z-t.z,L=s*y-a*f,M=a*c-r*y,D=r*f-s*c,q=L*L+M*M+D*D,$=Math.sqrt(q)/2;return $},Et.centroid=function(t,e,n){var r=(t.x+e.x+n.x)/3,s=(t.y+e.y+n.y)/3;return new I(r,s)},Et.inCentre=function(t,e,n){var r=e.distance(n),s=t.distance(n),a=t.distance(e),c=r+s+a,f=(r*t.x+s*e.x+a*n.x)/c,y=(r*t.y+s*e.y+a*n.y)/c;return new I(f,y)},u(pn.prototype,{getRadius:function(){return this.compute(),this.radius},getDiameter:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[1];return this.input.getFactory().createLineString([t,e])},getExtremalPoints:function(){return this.compute(),this.extremalPts},computeCirclePoints:function(){if(this.input.isEmpty())return this.extremalPts=new Array(0).fill(null),null;if(this.input.getNumPoints()===1){var n=this.input.getCoordinates();return this.extremalPts=[new I(n[0])],null}var t=this.input.convexHull(),e=t.getCoordinates(),n=e;if(e[0].equals2D(e[e.length-1])&&(n=new Array(e.length-1).fill(null),Q.copyDeep(e,0,n,0,e.length-1)),n.length<=2)return this.extremalPts=Q.copyDeep(n),null;for(var r=pn.lowestPoint(n),s=pn.pointWitMinAngleWithX(n,r),a=0;a<n.length;a++){var c=pn.pointWithMinAngleWithSegment(n,r,s);if(nt.isObtuse(r,c,s))return this.extremalPts=[new I(r),new I(s)],null;if(nt.isObtuse(c,r,s))r=c;else{if(!nt.isObtuse(c,s,r))return this.extremalPts=[new I(r),new I(s),new I(c)],null;s=c}}T.shouldNeverReachHere("Logic failure in Minimum Bounding Circle algorithm!")},compute:function(){return this.extremalPts!==null?null:(this.computeCirclePoints(),this.computeCentre(),void(this.centre!==null&&(this.radius=this.centre.distance(this.extremalPts[0]))))},getFarthestPoints:function(){switch(this.compute(),this.extremalPts.length){case 0:return this.input.getFactory().createLineString();case 1:return this.input.getFactory().createPoint(this.centre)}var t=this.extremalPts[0],e=this.extremalPts[this.extremalPts.length-1];return this.input.getFactory().createLineString([t,e])},getCircle:function(){if(this.compute(),this.centre===null)return this.input.getFactory().createPolygon();var t=this.input.getFactory().createPoint(this.centre);return this.radius===0?t:t.buffer(this.radius)},getCentre:function(){return this.compute(),this.centre},computeCentre:function(){switch(this.extremalPts.length){case 0:this.centre=null;break;case 1:this.centre=this.extremalPts[0];break;case 2:this.centre=new I((this.extremalPts[0].x+this.extremalPts[1].x)/2,(this.extremalPts[0].y+this.extremalPts[1].y)/2);break;case 3:this.centre=Et.circumcentre(this.extremalPts[0],this.extremalPts[1],this.extremalPts[2])}},interfaces_:function(){return[]},getClass:function(){return pn}}),pn.pointWitMinAngleWithX=function(t,e){for(var n=p.MAX_VALUE,r=null,s=0;s<t.length;s++){var a=t[s];if(a!==e){var c=a.x-e.x,f=a.y-e.y;0>f&&(f=-f);var y=Math.sqrt(c*c+f*f),L=f/y;n>L&&(n=L,r=a)}}return r},pn.lowestPoint=function(t){for(var e=t[0],n=1;n<t.length;n++)t[n].y<e.y&&(e=t[n]);return e},pn.pointWithMinAngleWithSegment=function(t,e,n){for(var r=p.MAX_VALUE,s=null,a=0;a<t.length;a++){var c=t[a];if(c!==e&&c!==n){var f=nt.angleBetween(e,c,n);r>f&&(r=f,s=c)}}return s},u(Zt.prototype,{getWidthCoordinate:function(){return this.computeMinimumDiameter(),this.minWidthPt},getSupportingSegment:function(){return this.computeMinimumDiameter(),this.inputGeom.getFactory().createLineString([this.minBaseSeg.p0,this.minBaseSeg.p1])},getDiameter:function(){if(this.computeMinimumDiameter(),this.minWidthPt===null)return this.inputGeom.getFactory().createLineString(null);var t=this.minBaseSeg.project(this.minWidthPt);return this.inputGeom.getFactory().createLineString([t,this.minWidthPt])},computeWidthConvex:function(t){t instanceof vt?this.convexHullPts=t.getExteriorRing().getCoordinates():this.convexHullPts=t.getCoordinates(),this.convexHullPts.length===0?(this.minWidth=0,this.minWidthPt=null,this.minBaseSeg=null):this.convexHullPts.length===1?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[0]):this.convexHullPts.length===2||this.convexHullPts.length===3?(this.minWidth=0,this.minWidthPt=this.convexHullPts[0],this.minBaseSeg.p0=this.convexHullPts[0],this.minBaseSeg.p1=this.convexHullPts[1]):this.computeConvexRingMinDiameter(this.convexHullPts)},computeConvexRingMinDiameter:function(t){this.minWidth=p.MAX_VALUE;for(var e=1,n=new et,r=0;r<t.length-1;r++)n.p0=t[r],n.p1=t[r+1],e=this.findMaxPerpDistance(t,n,e)},computeMinimumDiameter:function(){if(this.minWidthPt!==null)return null;if(this.isConvex)this.computeWidthConvex(this.inputGeom);else{var t=new tn(this.inputGeom).getConvexHull();this.computeWidthConvex(t)}},getLength:function(){return this.computeMinimumDiameter(),this.minWidth},findMaxPerpDistance:function(t,e,n){for(var r=e.distancePerpendicular(t[n]),s=r,a=n,c=a;s>=r;)r=s,a=c,c=Zt.nextIndex(t,a),s=e.distancePerpendicular(t[c]);return r<this.minWidth&&(this.minPtIndex=a,this.minWidth=r,this.minWidthPt=t[this.minPtIndex],this.minBaseSeg=new et(e)),a},getMinimumRectangle:function(){if(this.computeMinimumDiameter(),this.minWidth===0)return this.minBaseSeg.p0.equals2D(this.minBaseSeg.p1)?this.inputGeom.getFactory().createPoint(this.minBaseSeg.p0):this.minBaseSeg.toGeometry(this.inputGeom.getFactory());for(var t=this.minBaseSeg.p1.x-this.minBaseSeg.p0.x,e=this.minBaseSeg.p1.y-this.minBaseSeg.p0.y,n=p.MAX_VALUE,r=-p.MAX_VALUE,s=p.MAX_VALUE,a=-p.MAX_VALUE,c=0;c<this.convexHullPts.length;c++){var f=Zt.computeC(t,e,this.convexHullPts[c]);f>r&&(r=f),n>f&&(n=f);var y=Zt.computeC(-e,t,this.convexHullPts[c]);y>a&&(a=y),s>y&&(s=y)}var L=Zt.computeSegmentForLine(-t,-e,a),M=Zt.computeSegmentForLine(-t,-e,s),D=Zt.computeSegmentForLine(-e,t,r),q=Zt.computeSegmentForLine(-e,t,n),$=D.lineIntersection(L),j=q.lineIntersection(L),tt=q.lineIntersection(M),It=D.lineIntersection(M),bt=this.inputGeom.getFactory().createLinearRing([$,j,tt,It,$]);return this.inputGeom.getFactory().createPolygon(bt,null)},interfaces_:function(){return[]},getClass:function(){return Zt}}),Zt.nextIndex=function(t,e){return e++,e>=t.length&&(e=0),e},Zt.computeC=function(t,e,n){return t*n.y-e*n.x},Zt.getMinimumDiameter=function(t){return new Zt(t).getDiameter()},Zt.getMinimumRectangle=function(t){return new Zt(t).getMinimumRectangle()},Zt.computeSegmentForLine=function(t,e,n){var r=null,s=null;return Math.abs(e)>Math.abs(t)?(r=new I(0,n/e),s=new I(1,n/e-t/e)):(r=new I(n/t,0),s=new I(n/t-e/t,1)),new et(r,s)};var Il=Object.freeze({Centroid:Qe,CGAlgorithms:k,ConvexHull:tn,InteriorPointArea:Me,InteriorPointLine:us,InteriorPointPoint:ls,RobustLineIntersector:zt,MinimumBoundingCircle:pn,MinimumDiameter:Zt});u(Tn.prototype,{getResultGeometry:function(){return new $i(this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>=t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return Tn}}),Tn.densifyPoints=function(t,e,n){for(var r=new et,s=new A,a=0;a<t.length-1;a++){r.p0=t[a],r.p1=t[a+1],s.add(r.p0,!1);var c=r.getLength(),f=Math.trunc(c/e)+1;if(f>1)for(var y=c/f,L=1;f>L;L++){var M=L*y/c,D=r.pointAlong(M);n.makePrecise(D),s.add(D,!1)}}return s.add(t[t.length-1],!1),s.toCoordinateArray()},Tn.densify=function(t,e){var n=new Tn(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S($i,ee),u($i.prototype,{transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformPolygon:function(t,e){var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof Ut?n:this.createValidArea(n)},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=Tn.densifyPoints(n,this.distanceTolerance,e.getPrecisionModel());return e instanceof it&&r.length===1&&(r=new Array(0).fill(null)),this.factory.getCoordinateSequenceFactory().create(r)},createValidArea:function(t){return t.buffer(0)},interfaces_:function(){return[]},getClass:function(){return $i}}),Tn.DensifyTransformer=$i;var Nl=Object.freeze({Densifier:Tn});u(sn.prototype,{find:function(t){var e=this;do{if(e===null)return null;if(e.dest().equals2D(t))return e;e=e.oNext()}while(e!==this);return null},dest:function(){return this._sym._orig},oNext:function(){return this._sym._next},insert:function(t){if(this.oNext()===this)return this.insertAfter(t),null;var e=this.compareTo(t),n=this;do{var r=n.oNext(),s=r.compareTo(t);if(s!==e||r===this)return n.insertAfter(t),null;n=r}while(n!==this);T.shouldNeverReachHere()},insertAfter:function(t){T.equals(this._orig,t.orig());var e=this.oNext();this._sym.setNext(t),t.sym().setNext(e)},degree:function(){var e=0,n=this;do e++,n=n.oNext();while(n!==this);return e},equals:function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return this._orig.equals2D(t)&&this._sym._orig.equals(e)}},deltaY:function(){return this._sym._orig.y-this._orig.y},sym:function(){return this._sym},prev:function(){return this._sym.next()._sym},compareAngularDirection:function(t){var e=this.deltaX(),n=this.deltaY(),r=t.deltaX(),s=t.deltaY();if(e===r&&n===s)return 0;var a=ht.quadrant(e,n),c=ht.quadrant(r,s);return a>c?1:c>a?-1:k.computeOrientation(t._orig,t.dest(),this.dest())},prevNode:function(){for(var t=this;t.degree()===2;)if(t=t.prev(),t===this)return null;return t},compareTo:function(t){var e=t,n=this.compareAngularDirection(e);return n},next:function(){return this._next},setSym:function(t){this._sym=t},orig:function(){return this._orig},toString:function(){return"HE("+this._orig.x+" "+this._orig.y+", "+this._sym._orig.x+" "+this._sym._orig.y+")"},setNext:function(t){this._next=t},init:function(t){this.setSym(t),t.setSym(this),this.setNext(t),t.setNext(this)},deltaX:function(){return this._sym._orig.x-this._orig.x},interfaces_:function(){return[]},getClass:function(){return sn}}),sn.init=function(t,e){if(t._sym!==null||e._sym!==null||t._next!==null||e._next!==null)throw new IllegalStateException("Edges are already initialized");return t.init(e),t},sn.create=function(t,e){var n=new sn(t),r=new sn(e);return n.init(r),n},S(le,sn),u(le.prototype,{mark:function(){this._isMarked=!0},setMark:function(t){this._isMarked=t},isMarked:function(){return this._isMarked},interfaces_:function(){return[]},getClass:function(){return le}}),le.setMarkBoth=function(t,e){t.setMark(e),t.sym().setMark(e)},le.isMarked=function(t){return t.isMarked()},le.setMark=function(t,e){t.setMark(e)},le.markBoth=function(t){t.mark(),t.sym().mark()},le.mark=function(t){t.mark()},u(yi.prototype,{insert:function(t,e,n){var r=this.create(t,e);n!==null?n.insert(r):this.vertexMap.put(t,r);var s=this.vertexMap.get(e);return s!==null?s.insert(r.sym()):this.vertexMap.put(e,r.sym()),r},create:function(t,e){var n=this.createEdge(t),r=this.createEdge(e);return sn.init(n,r),n},createEdge:function(t){return new sn(t)},addEdge:function(t,e){if(!yi.isValidEdge(t,e))return null;var n=this.vertexMap.get(t),r=null;if(n!==null&&(r=n.find(e)),r!==null)return r;var s=this.insert(t,e,n);return s},getVertexEdges:function(){return this.vertexMap.values()},findEdge:function(t,e){var n=this.vertexMap.get(t);return n===null?null:n.find(e)},interfaces_:function(){return[]},getClass:function(){return yi}}),yi.isValidEdge=function(t,e){var n=e.compareTo(t);return n!==0},S(hs,le),u(hs.prototype,{setStart:function(){this._isStart=!0},isStart:function(){return this._isStart},interfaces_:function(){return[]},getClass:function(){return hs}}),S(cs,yi),u(cs.prototype,{createEdge:function(t){return new hs(t)},interfaces_:function(){return[]},getClass:function(){return cs}}),u(Zi.prototype,{addLine:function(t){this.lines.add(this.factory.createLineString(t.toCoordinateArray()))},updateRingStartEdge:function(t){return t.isStart()||(t=t.sym(),t.isStart())?this.ringStartEdge===null?(this.ringStartEdge=t,null):void(t.orig().compareTo(this.ringStartEdge.orig())<0&&(this.ringStartEdge=t)):null},getResult:function(){return this.result===null&&this.computeResult(),this.result},process:function(t){var e=t.prevNode();e===null&&(e=t),this.stackEdges(e),this.buildLines()},buildRing:function(t){var e=new A,n=t;for(e.add(n.orig().copy(),!1);n.sym().degree()===2;){var r=n.next();if(r===t)break;e.add(r.orig().copy(),!1),n=r}e.add(n.dest().copy(),!1),this.addLine(e)},buildLine:function(t){var e=new A,n=t;for(this.ringStartEdge=null,le.markBoth(n),e.add(n.orig().copy(),!1);n.sym().degree()===2;){this.updateRingStartEdge(n);var r=n.next();if(r===t)return this.buildRing(this.ringStartEdge),null;e.add(r.orig().copy(),!1),n=r,le.markBoth(n)}e.add(n.dest().copy(),!1),this.stackEdges(n.sym()),this.addLine(e)},stackEdges:function(t){var e=t;do le.isMarked(e)||this.nodeEdgeStack.add(e),e=e.oNext();while(e!==t)},computeResult:function(){for(var t=this.graph.getVertexEdges(),e=t.iterator();e.hasNext();){var n=e.next();le.isMarked(n)||this.process(n)}this.result=this.factory.buildGeometry(this.lines)},buildLines:function(){for(;!this.nodeEdgeStack.empty();){var t=this.nodeEdgeStack.pop();le.isMarked(t)||this.buildLine(t)}},add:function(){if(arguments[0]instanceof H){var t=arguments[0];t.apply({interfaces_:function(){return[ge]},filter:function(y){y instanceof it&&this.add(y)}})}else if(U(arguments[0],X))for(var e=arguments[0],n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}else if(arguments[0]instanceof it){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory());for(var a=s.getCoordinateSequence(),c=!1,n=1;n<a.size();n++){var f=this.graph.addEdge(a.getCoordinate(n-1),a.getCoordinate(n));f!==null&&(c||(f.setStart(),c=!0))}}},interfaces_:function(){return[]},getClass:function(){return Zi}}),Zi.dissolve=function(t){var e=new Zi;return e.add(t),e.getResult()};var Cl=Object.freeze({LineDissolver:Zi});u(ke.prototype,{hasChildren:function(){for(var t=0;4>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;4>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},getNodeCount:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+1},size:function(){for(var t=0,e=0;4>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){if(!this.isSearchMatch(t))return null;e.addAll(this.items);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].addAllItemsFromOverlapping(t,e)},visitItems:function(t,e){for(var n=this.items.iterator();n.hasNext();)e.visitItem(n.next())},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;4>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},visit:function(t,e){if(!this.isSearchMatch(t))return null;this.visitItems(t,e);for(var n=0;4>n;n++)this.subnode[n]!==null&&this.subnode[n].visit(t,e)},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;4>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},isEmpty:function(){var e=!0;this.items.isEmpty()||(e=!1);for(var n=0;4>n;n++)this.subnode[n]!==null&&(this.subnode[n].isEmpty()||(e=!1));return e},add:function(t){this.items.add(t)},interfaces_:function(){return[N]},getClass:function(){return ke}}),ke.getSubnodeIndex=function(t,e,n){var r=-1;return t.getMinX()>=e&&(t.getMinY()>=n&&(r=3),t.getMaxY()<=n&&(r=1)),t.getMaxX()<=e&&(t.getMinY()>=n&&(r=2),t.getMaxY()<=n&&(r=0)),r},Qn.exponent=function(t){return ml(64,t)-1023},Qn.powerOf2=function(t){return Math.pow(2,t)},u(Ji.prototype,{getLevel:function(){return this.level},computeKey:function(){if(arguments.length===1){var t=arguments[0];for(this.level=Ji.computeQuadLevel(t),this.env=new O,this.computeKey(this.level,t);!this.env.contains(t);)this.level+=1,this.computeKey(this.level,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=Qn.powerOf2(e);this.pt.x=Math.floor(n.getMinX()/r)*r,this.pt.y=Math.floor(n.getMinY()/r)*r,this.env.init(this.pt.x,this.pt.x+r,this.pt.y,this.pt.y+r)}},getEnvelope:function(){return this.env},getCentre:function(){return new I((this.env.getMinX()+this.env.getMaxX())/2,(this.env.getMinY()+this.env.getMaxY())/2)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return Ji}}),Ji.computeQuadLevel=function(t){var e=t.getWidth(),n=t.getHeight(),r=e>n?e:n,s=Qn.exponent(r)+1;return s},S(mn,ke),u(mn.prototype,{find:function(t){var e=ke.getSubnodeIndex(t,this.centrex,this.centrey);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},isSearchMatch:function(t){return this.env.intersects(t)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getEnvelope:function(){return this.env},getNode:function(t){var e=ke.getSubnodeIndex(t,this.centrex,this.centrey);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0,r=0,s=0;switch(t){case 0:e=this.env.getMinX(),n=this.centrex,r=this.env.getMinY(),s=this.centrey;break;case 1:e=this.centrex,n=this.env.getMaxX(),r=this.env.getMinY(),s=this.centrey;break;case 2:e=this.env.getMinX(),n=this.centrex,r=this.centrey,s=this.env.getMaxY();break;case 3:e=this.centrex,n=this.env.getMaxX(),r=this.centrey,s=this.env.getMaxY()}var a=new O(e,n,r,s),c=new mn(a,this.level-1);return c},insertNode:function(t){T.isTrue(this.env===null||this.env.contains(t.env));var e=ke.getSubnodeIndex(t.env,this.centrex,this.centrey);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insertNode(t),this.subnode[e]=n}},interfaces_:function(){return[]},getClass:function(){return mn}}),mn.createNode=function(t){var e=new Ji(t),n=new mn(e.getEnvelope(),e.getLevel());return n},mn.createExpanded=function(t,e){var n=new O(e);t!==null&&n.expandToInclude(t.env);var r=mn.createNode(n);return t!==null&&r.insertNode(t),r},u(Pn.prototype,{interfaces_:function(){return[]},getClass:function(){return Pn}}),Pn.isZeroWidth=function(t,e){var n=e-t;if(n===0)return!0;var r=Math.max(Math.abs(t),Math.abs(e)),s=n/r,a=Qn.exponent(s);return a<=Pn.MIN_BINARY_EXPONENT},Pn.MIN_BINARY_EXPONENT=-50,S(ti,ke),u(ti.prototype,{insert:function(t,e){var n=ke.getSubnodeIndex(t,ti.origin.x,ti.origin.y);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getEnvelope().contains(t)){var s=mn.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getEnvelope().contains(e));var r=Pn.isZeroWidth(e.getMinX(),e.getMaxX()),s=Pn.isZeroWidth(e.getMinY(),e.getMaxY()),a=null;a=r||s?t.find(e):t.getNode(e),a.add(n)},interfaces_:function(){return[]},getClass:function(){return ti}}),ti.origin=new I(0,0),u(On.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=On.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){var t=arguments[0],e=new rs;return this.query(t,e),e.getItems()}if(arguments.length===2){var n=arguments[0],r=arguments[1];this.root.visit(n,r)}},queryAll:function(){var t=new P;return this.root.addAllItems(t),t},remove:function(t,e){var n=On.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e);var n=t.getHeight();n<this.minExtent&&n>0&&(this.minExtent=n)},depth:function(){return this.root!==null?this.root.depth():0},isEmpty:function(){return this.root===null},interfaces_:function(){return[Wr,N]},getClass:function(){return On}}),On.ensureExtent=function(t,e){var n=t.getMinX(),r=t.getMaxX(),s=t.getMinY(),a=t.getMaxY();return n!==r&&s!==a?t:(n===r&&(n-=e/2,r=n+e/2),s===a&&(s-=e/2,a=s+e/2),new O(n,r,s,a))},On.serialVersionUID=-7461163625812743e3;var wl=Object.freeze({Quadtree:On}),Sl=Object.freeze({STRtree:St}),Ll=Object.freeze({quadtree:wl,strtree:Sl}),Rl=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"];u(bo.prototype,{read:function(t){var e=void 0;e=typeof t=="string"?JSON.parse(t):t;var n=e.type;if(!Ae[n])throw new Error("Unknown GeoJSON type: "+e.type);return Rl.indexOf(n)!==-1?Ae[n].apply(this,[e.coordinates]):n==="GeometryCollection"?Ae[n].apply(this,[e.geometries]):Ae[n].apply(this,[e])},write:function(t){var e=t.getGeometryType();if(!hn[e])throw new Error("Geometry is not supported");return hn[e].apply(this,[t])}});var Ae={Feature:function(t){var e={};for(var n in t)e[n]=t[n];if(t.geometry){var r=t.geometry.type;if(!Ae[r])throw new Error("Unknown GeoJSON type: "+t.type);e.geometry=this.read(t.geometry)}return t.bbox&&(e.bbox=Ae.bbox.apply(this,[t.bbox])),e},FeatureCollection:function(t){var e={};if(t.features){e.features=[];for(var n=0;n<t.features.length;++n)e.features.push(this.read(t.features[n]))}return t.bbox&&(e.bbox=this.parse.bbox.apply(this,[t.bbox])),e},coordinates:function(e){for(var n=[],r=0;r<e.length;++r){var s=e[r];n.push(new I(s[0],s[1]))}return n},bbox:function(t){return this.geometryFactory.createLinearRing([new I(t[0],t[1]),new I(t[2],t[1]),new I(t[2],t[3]),new I(t[0],t[3]),new I(t[0],t[1])])},Point:function(t){var e=new I(t[0],t[1]);return this.geometryFactory.createPoint(e)},MultiPoint:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ae.Point.apply(this,[t[n]]));return this.geometryFactory.createMultiPoint(e)},LineString:function(t){var e=Ae.coordinates.apply(this,[t]);return this.geometryFactory.createLineString(e)},MultiLineString:function(t){for(var e=[],n=0;n<t.length;++n)e.push(Ae.LineString.apply(this,[t[n]]));return this.geometryFactory.createMultiLineString(e)},Polygon:function(t){for(var e=Ae.coordinates.apply(this,[t[0]]),n=this.geometryFactory.createLinearRing(e),r=[],s=1;s<t.length;++s){var a=t[s],c=Ae.coordinates.apply(this,[a]),f=this.geometryFactory.createLinearRing(c);r.push(f)}return this.geometryFactory.createPolygon(n,r)},MultiPolygon:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(Ae.Polygon.apply(this,[r]))}return this.geometryFactory.createMultiPolygon(e)},GeometryCollection:function(t){for(var e=[],n=0;n<t.length;++n){var r=t[n];e.push(this.read(r))}return this.geometryFactory.createGeometryCollection(e)}},hn={coordinate:function(t){return[t.x,t.y]},Point:function(t){var e=hn.coordinate.apply(this,[t.getCoordinate()]);return{type:"Point",coordinates:e}},MultiPoint:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=hn.Point.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPoint",coordinates:e}},LineString:function(t){for(var e=[],n=t.getCoordinates(),r=0;r<n.length;++r){var s=n[r];e.push(hn.coordinate.apply(this,[s]))}return{type:"LineString",coordinates:e}},MultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=hn.LineString.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiLineString",coordinates:e}},Polygon:function(t){var e=[],n=hn.LineString.apply(this,[t.shell]);e.push(n.coordinates);for(var r=0;r<t.holes.length;++r){var s=t.holes[r],a=hn.LineString.apply(this,[s]);e.push(a.coordinates)}return{type:"Polygon",coordinates:e}},MultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=hn.Polygon.apply(this,[r]);e.push(s.coordinates)}return{type:"MultiPolygon",coordinates:e}},GeometryCollection:function(t){for(var e=[],n=0;n<t.geometries.length;++n){var r=t.geometries[n],s=r.getGeometryType();e.push(hn[s].apply(this,[r]))}return{type:"GeometryCollection",geometries:e}}};u(Ma.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ft.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){var e,n;if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(e=0,n=t.points.length;n>e;e++)this.precisionModel.makePrecise(t.points[e]);else if(t.geometries)for(e=0,n=t.geometries.length;n>e;e++)this.reducePrecision(t.geometries[e])}}),u(_a.prototype,{write:function(t){return this.parser.write(t)}}),u(ba.prototype,{read:function(t){var e=this.parser.read(t);return this.precisionModel.getType()===ft.FIXED&&this.reducePrecision(e),e},reducePrecision:function(t){if(t.coordinate)this.precisionModel.makePrecise(t.coordinate);else if(t.points)for(var e=0,n=t.points.coordinates.length;n>e;e++)this.precisionModel.makePrecise(t.points.coordinates[e]);else if(t.geometries)for(var r=0,s=t.geometries.length;s>r;r++)this.reducePrecision(t.geometries[r])}}),u(Da.prototype,{read:function(t){return t instanceof ol.geom.Point?this.convertFromPoint(t):t instanceof ol.geom.LineString?this.convertFromLineString(t):t instanceof ol.geom.LinearRing?this.convertFromLinearRing(t):t instanceof ol.geom.Polygon?this.convertFromPolygon(t):t instanceof ol.geom.MultiPoint?this.convertFromMultiPoint(t):t instanceof ol.geom.MultiLineString?this.convertFromMultiLineString(t):t instanceof ol.geom.MultiPolygon?this.convertFromMultiPolygon(t):t instanceof ol.geom.GeometryCollection?this.convertFromCollection(t):void 0},convertFromPoint:function(t){var e=t.getCoordinates();return this.geometryFactory.createPoint(new I(e[0],e[1]))},convertFromLineString:function(t){return this.geometryFactory.createLineString(t.getCoordinates().map(function(e){return new I(e[0],e[1])}))},convertFromLinearRing:function(t){return this.geometryFactory.createLinearRing(t.getCoordinates().map(function(e){return new I(e[0],e[1])}))},convertFromPolygon:function(t){for(var e=t.getLinearRings(),n=null,r=[],s=0;s<e.length;s++){var a=this.convertFromLinearRing(e[s]);s===0?n=a:r.push(a)}return this.geometryFactory.createPolygon(n,r)},convertFromMultiPoint:function(t){var e=t.getPoints().map(function(n){return this.convertFromPoint(n)},this);return this.geometryFactory.createMultiPoint(e)},convertFromMultiLineString:function(t){var e=t.getLineStrings().map(function(n){return this.convertFromLineString(n)},this);return this.geometryFactory.createMultiLineString(e)},convertFromMultiPolygon:function(t){var e=t.getPolygons().map(function(n){return this.convertFromPolygon(n)},this);return this.geometryFactory.createMultiPolygon(e)},convertFromCollection:function(t){var e=t.getGeometries().map(function(n){return this.read(n)},this);return this.geometryFactory.createGeometryCollection(e)},write:function(t){return t.getGeometryType()==="Point"?this.convertToPoint(t.getCoordinate()):t.getGeometryType()==="LineString"?this.convertToLineString(t):t.getGeometryType()==="LinearRing"?this.convertToLinearRing(t):t.getGeometryType()==="Polygon"?this.convertToPolygon(t):t.getGeometryType()==="MultiPoint"?this.convertToMultiPoint(t):t.getGeometryType()==="MultiLineString"?this.convertToMultiLineString(t):t.getGeometryType()==="MultiPolygon"?this.convertToMultiPolygon(t):t.getGeometryType()==="GeometryCollection"?this.convertToCollection(t):void 0},convertToPoint:function(t){return new ol.geom.Point([t.x,t.y])},convertToLineString:function(t){var e=t.points.coordinates.map(Ki);return new ol.geom.LineString(e)},convertToLinearRing:function(t){var e=t.points.coordinates.map(Ki);return new ol.geom.LinearRing(e)},convertToPolygon:function(t){for(var e=[t.shell.points.coordinates.map(Ki)],n=0;n<t.holes.length;n++)e.push(t.holes[n].points.coordinates.map(Ki));return new ol.geom.Polygon(e)},convertToMultiPoint:function(t){return new ol.geom.MultiPoint(t.getCoordinates().map(Ki))},convertToMultiLineString:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToLineString(t.geometries[n]).getCoordinates());return new ol.geom.MultiLineString(e)},convertToMultiPolygon:function(t){for(var e=[],n=0;n<t.geometries.length;n++)e.push(this.convertToPolygon(t.geometries[n]).getCoordinates());return new ol.geom.MultiPolygon(e)},convertToCollection:function(t){for(var e=[],n=0;n<t.geometries.length;n++){var r=t.geometries[n];e.push(this.write(r))}return new ol.geom.GeometryCollection(e)}});var Tl=Object.freeze({GeoJSONReader:Ma,GeoJSONWriter:_a,OL3Parser:Da,WKTReader:ba,WKTWriter:Wt});u(ji.prototype,{rescale:function(){if(U(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.rescale(n.getCoordinates())}else if(arguments[0]instanceof Array){var r=arguments[0];r.length===2&&(new I(r[0]),new I(r[1]));for(var e=0;e<r.length;e++)r[e].x=r[e].x/this.scaleFactor+this.offsetX,r[e].y=r[e].y/this.scaleFactor+this.offsetY;r.length===2&&r[0].equals2D(r[1])&&mt.out.println(r)}},scale:function(){if(U(arguments[0],X)){for(var t=arguments[0],e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new Be(this.scale(r.getCoordinates()),r.getData()))}return e}if(arguments[0]instanceof Array){for(var s=arguments[0],a=new Array(s.length).fill(null),n=0;n<s.length;n++)a[n]=new I(Math.round((s[n].x-this.offsetX)*this.scaleFactor),Math.round((s[n].y-this.offsetY)*this.scaleFactor),s[n].z);var c=Q.removeRepeatedPoints(a);return c}},isIntegerPrecision:function(){return this.scaleFactor===1},getNodedSubstrings:function(){var t=this.noder.getNodedSubstrings();return this.isScaled&&this.rescale(t),t},computeNodes:function(t){var e=t;this.isScaled&&(e=this.scale(t)),this.noder.computeNodes(e)},interfaces_:function(){return[Vi]},getClass:function(){return ji}});var Pl=Object.freeze({MCIndexNoder:Cn,ScaledNoder:ji,SegmentString:qi});u(Qi.prototype,{isSimpleMultiPoint:function(t){if(t.isEmpty())return!0;for(var e=new Kt,n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n),s=r.getCoordinate();if(e.contains(s))return this.nonSimpleLocation=s,!1;e.add(s)}return!0},isSimplePolygonal:function(t){for(var e=$t.getLines(t),n=e.iterator();n.hasNext();){var r=n.next();if(!this.isSimpleLinearGeometry(r))return!1}return!0},hasClosedEndpointIntersection:function(t){for(var e=new At,n=t.getEdgeIterator();n.hasNext();){var r=n.next(),s=(r.getMaximumSegmentIndex(),r.isClosed()),a=r.getCoordinate(0);this.addEndpoint(e,a,s);var c=r.getCoordinate(r.getNumPoints()-1);this.addEndpoint(e,c,s)}for(var n=e.values().iterator();n.hasNext();){var f=n.next();if(f.isClosed&&f.degree!==2)return this.nonSimpleLocation=f.getCoordinate(),!0}return!1},getNonSimpleLocation:function(){return this.nonSimpleLocation},isSimpleLinearGeometry:function(t){if(t.isEmpty())return!0;var e=new ue(0,t),n=new zt,r=e.computeSelfNodes(n,!0);return r.hasIntersection()?r.hasProperIntersection()?(this.nonSimpleLocation=r.getProperIntersectionPoint(),!1):this.hasNonEndpointIntersection(e)?!1:!this.isClosedEndpointsInInterior||!this.hasClosedEndpointIntersection(e):!0},hasNonEndpointIntersection:function(t){for(var e=t.getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getMaximumSegmentIndex(),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next();if(!a.isEndPoint(r))return this.nonSimpleLocation=a.getCoordinate(),!0}return!1},addEndpoint:function(t,e,n){var r=t.get(e);r===null&&(r=new gs(e),t.put(e,r)),r.addEndpoint(n)},computeSimple:function(t){return this.nonSimpleLocation=null,t.isEmpty()?!0:t instanceof it?this.isSimpleLinearGeometry(t):t instanceof re?this.isSimpleLinearGeometry(t):t instanceof se?this.isSimpleMultiPoint(t):U(t,Ke)?this.isSimplePolygonal(t):t instanceof ut?this.isSimpleGeometryCollection(t):!0},isSimple:function(){return this.nonSimpleLocation=null,this.computeSimple(this.inputGeom)},isSimpleGeometryCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.computeSimple(n))return!1}return!0},interfaces_:function(){return[]},getClass:function(){return Qi}}),u(gs.prototype,{addEndpoint:function(t){this.degree++,this.isClosed|=t},getCoordinate:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return gs}}),Qi.EndpointInfo=gs,u(ct.prototype,{getEndCapStyle:function(){return this.endCapStyle},isSingleSided:function(){return this._isSingleSided},setQuadrantSegments:function(t){this.quadrantSegments=t,this.quadrantSegments===0&&(this.joinStyle=ct.JOIN_BEVEL),this.quadrantSegments<0&&(this.joinStyle=ct.JOIN_MITRE,this.mitreLimit=Math.abs(this.quadrantSegments)),0>=t&&(this.quadrantSegments=1),this.joinStyle!==ct.JOIN_ROUND&&(this.quadrantSegments=ct.DEFAULT_QUADRANT_SEGMENTS)},getJoinStyle:function(){return this.joinStyle},setJoinStyle:function(t){this.joinStyle=t},setSimplifyFactor:function(t){this.simplifyFactor=0>t?0:t},getSimplifyFactor:function(){return this.simplifyFactor},getQuadrantSegments:function(){return this.quadrantSegments},setEndCapStyle:function(t){this.endCapStyle=t},getMitreLimit:function(){return this.mitreLimit},setMitreLimit:function(t){this.mitreLimit=t},setSingleSided:function(t){this._isSingleSided=t},interfaces_:function(){return[]},getClass:function(){return ct}}),ct.bufferDistanceError=function(t){var e=Math.PI/2/t;return 1-Math.cos(e/2)},ct.CAP_ROUND=1,ct.CAP_FLAT=2,ct.CAP_SQUARE=3,ct.JOIN_ROUND=1,ct.JOIN_MITRE=2,ct.JOIN_BEVEL=3,ct.DEFAULT_QUADRANT_SEGMENTS=8,ct.DEFAULT_MITRE_LIMIT=5,ct.DEFAULT_SIMPLIFY_FACTOR=.01,u(Do.prototype,{getCoordinate:function(){return this.minCoord},getRightmostSide:function(t,e){var n=this.getRightmostSideOfSegment(t,e);return 0>n&&(n=this.getRightmostSideOfSegment(t,e-1)),0>n&&(this.minCoord=null,this.checkForRightmostCoordinate(t)),n},findRightmostEdgeAtVertex:function(){var t=this.minDe.getEdge().getCoordinates();T.isTrue(this.minIndex>0&&this.minIndex<t.length,"rightmost point expected to be interior vertex of edge");var e=t[this.minIndex-1],n=t[this.minIndex+1],r=k.computeOrientation(this.minCoord,n,e),s=!1;(e.y<this.minCoord.y&&n.y<this.minCoord.y&&r===k.COUNTERCLOCKWISE||e.y>this.minCoord.y&&n.y>this.minCoord.y&&r===k.CLOCKWISE)&&(s=!0),s&&(this.minIndex=this.minIndex-1)},getRightmostSideOfSegment:function(t,e){var n=t.getEdge(),r=n.getCoordinates();if(0>e||e+1>=r.length||r[e].y===r[e+1].y)return-1;var s=V.LEFT;return r[e].y<r[e+1].y&&(s=V.RIGHT),s},getEdge:function(){return this.orientedDe},checkForRightmostCoordinate:function(t){for(var e=t.getEdge().getCoordinates(),n=0;n<e.length-1;n++)(this.minCoord===null||e[n].x>this.minCoord.x)&&(this.minDe=t,this.minIndex=n,this.minCoord=e[n])},findRightmostEdgeAtNode:function(){var t=this.minDe.getNode(),e=t.getEdges();this.minDe=e.getRightmostEdge(),this.minDe.isForward()||(this.minDe=this.minDe.getSym(),this.minIndex=this.minDe.getEdge().getCoordinates().length-1)},findEdge:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();n.isForward()&&this.checkForRightmostCoordinate(n)}T.isTrue(this.minIndex!==0||this.minCoord.equals(this.minDe.getCoordinate()),"inconsistency in rightmost processing"),this.minIndex===0?this.findRightmostEdgeAtNode():this.findRightmostEdgeAtVertex(),this.orientedDe=this.minDe;var r=this.getRightmostSide(this.minDe,this.minIndex);r===V.LEFT&&(this.orientedDe=this.minDe.getSym())},interfaces_:function(){return[]},getClass:function(){return Do}}),fs.prototype.addLast=function(t){this.array_.push(t)},fs.prototype.removeFirst=function(){return this.array_.shift()},fs.prototype.isEmpty=function(){return this.array_.length===0},u(Ao.prototype,{clearVisitedEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.setVisited(!1)}},getRightmostCoordinate:function(){return this.rightMostCoord},computeNodeDepth:function(t){for(var e=null,n=t.getEdges().iterator();n.hasNext();){var r=n.next();if(r.isVisited()||r.getSym().isVisited()){e=r;break}}if(e===null)throw new oe("unable to find edge to compute depths at "+t.getCoordinate());t.getEdges().computeDepths(e);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();r.setVisited(!0),this.copySymDepths(r)}},computeDepth:function(t){this.clearVisitedEdges();var e=this.finder.getEdge();e.getNode(),e.getLabel(),e.setEdgeDepths(V.RIGHT,t),this.copySymDepths(e),this.computeDepths(e)},create:function(t){this.addReachable(t),this.finder.findEdge(this.dirEdgeList),this.rightMostCoord=this.finder.getCoordinate()},findResultEdges:function(){for(var t=this.dirEdgeList.iterator();t.hasNext();){var e=t.next();e.getDepth(V.RIGHT)>=1&&e.getDepth(V.LEFT)<=0&&!e.isInteriorAreaEdge()&&e.setInResult(!0)}},computeDepths:function(t){var e=new kt,n=new fs,r=t.getNode();for(n.addLast(r),e.add(r),t.setVisited(!0);!n.isEmpty();){var s=n.removeFirst();e.add(s),this.computeNodeDepth(s);for(var a=s.getEdges().iterator();a.hasNext();){var c=a.next(),f=c.getSym();if(!f.isVisited()){var y=f.getNode();e.contains(y)||(n.addLast(y),e.add(y))}}}},compareTo:function(t){var e=t;return this.rightMostCoord.x<e.rightMostCoord.x?-1:this.rightMostCoord.x>e.rightMostCoord.x?1:0},getEnvelope:function(){if(this.env===null){for(var t=new O,e=this.dirEdgeList.iterator();e.hasNext();)for(var n=e.next(),r=n.getEdge().getCoordinates(),s=0;s<r.length-1;s++)t.expandToInclude(r[s]);this.env=t}return this.env},addReachable:function(t){var e=new jt;for(e.add(t);!e.empty();){var n=e.pop();this.add(n,e)}},copySymDepths:function(t){var e=t.getSym();e.setDepth(V.LEFT,t.getDepth(V.RIGHT)),e.setDepth(V.RIGHT,t.getDepth(V.LEFT))},add:function(t,e){t.setVisited(!0),this.nodes.add(t);for(var n=t.getEdges().iterator();n.hasNext();){var r=n.next();this.dirEdgeList.add(r);var s=r.getSym(),a=s.getNode();a.isVisited()||e.push(a)}},getNodes:function(){return this.nodes},getDirectedEdges:function(){return this.dirEdgeList},interfaces_:function(){return[m]},getClass:function(){return Ao}}),u(Xt.prototype,{isDeletable:function(t,e,n,r){var s=this.inputLine[t],a=this.inputLine[e],c=this.inputLine[n];return this.isConcave(s,a,c)&&this.isShallow(s,a,c,r)?this.isShallowSampled(s,a,t,n,r):!1},deleteShallowConcavities:function(){for(var t=1,e=(this.inputLine.length-1,this.findNextNonDeletedIndex(t)),n=this.findNextNonDeletedIndex(e),r=!1;n<this.inputLine.length;){var s=!1;this.isDeletable(t,e,n,this.distanceTol)&&(this.isDeleted[e]=Xt.DELETE,s=!0,r=!0),t=s?n:e,e=this.findNextNonDeletedIndex(t),n=this.findNextNonDeletedIndex(e)}return r},isShallowConcavity:function(t,e,n,r){var s=k.computeOrientation(t,e,n),a=s===this.angleOrientation;if(!a)return!1;var c=k.distancePointLine(e,t,n);return r>c},isShallowSampled:function(t,e,n,r,s){var a=Math.trunc((r-n)/Xt.NUM_PTS_TO_CHECK);0>=a&&(a=1);for(var c=n;r>c;c+=a)if(!this.isShallow(t,e,this.inputLine[c],s))return!1;return!0},isConcave:function(e,n,r){var s=k.computeOrientation(e,n,r),a=s===this.angleOrientation;return a},simplify:function(t){this.distanceTol=Math.abs(t),0>t&&(this.angleOrientation=k.CLOCKWISE),this.isDeleted=new Array(this.inputLine.length).fill(null);var e=!1;do e=this.deleteShallowConcavities();while(e);return this.collapseLine()},findNextNonDeletedIndex:function(t){for(var e=t+1;e<this.inputLine.length&&this.isDeleted[e]===Xt.DELETE;)e++;return e},isShallow:function(t,e,n,r){var s=k.distancePointLine(e,t,n);return r>s},collapseLine:function(){for(var t=new A,e=0;e<this.inputLine.length;e++)this.isDeleted[e]!==Xt.DELETE&&t.add(this.inputLine[e]);return t.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return Xt}}),Xt.simplify=function(t,e){var n=new Xt(t);return n.simplify(e)},Xt.INIT=0,Xt.DELETE=1,Xt.KEEP=1,Xt.NUM_PTS_TO_CHECK=10,u(tr.prototype,{getCoordinates:function(){var t=this.ptList.toArray(tr.COORDINATE_ARRAY_TYPE);return t},setPrecisionModel:function(t){this.precisionModel=t},addPt:function(t){var e=new I(t);return this.precisionModel.makePrecise(e),this.isRedundant(e)?null:void this.ptList.add(e)},reverse:function(){},addPts:function(t,e){if(e)for(var n=0;n<t.length;n++)this.addPt(t[n]);else for(var n=t.length-1;n>=0;n--)this.addPt(t[n])},isRedundant:function(t){if(this.ptList.size()<1)return!1;var e=this.ptList.get(this.ptList.size()-1),n=t.distance(e);return n<this.minimimVertexDistance},toString:function(){var t=new ot,e=t.createLineString(this.getCoordinates());return e.toString()},closeRing:function(){if(this.ptList.size()<1)return null;var t=new I(this.ptList.get(0)),e=this.ptList.get(this.ptList.size()-1);return this.ptList.size()>=2&&this.ptList.get(this.ptList.size()-2),t.equals(e)?null:void this.ptList.add(t)},setMinimumVertexDistance:function(t){this.minimimVertexDistance=t},interfaces_:function(){return[]},getClass:function(){return tr}}),tr.COORDINATE_ARRAY_TYPE=new Array(0).fill(null),u(Ue.prototype,{addNextSegment:function(t,e){if(this.s0=this.s1,this.s1=this.s2,this.s2=t,this.seg0.setCoordinates(this.s0,this.s1),this.computeOffsetSegment(this.seg0,this.side,this.distance,this.offset0),this.seg1.setCoordinates(this.s1,this.s2),this.computeOffsetSegment(this.seg1,this.side,this.distance,this.offset1),this.s1.equals(this.s2))return null;var n=k.computeOrientation(this.s0,this.s1,this.s2),r=n===k.CLOCKWISE&&this.side===V.LEFT||n===k.COUNTERCLOCKWISE&&this.side===V.RIGHT;n===0?this.addCollinear(e):r?this.addOutsideTurn(n,e):this.addInsideTurn(n,e)},addLineEndCap:function(t,e){var n=new et(t,e),r=new et;this.computeOffsetSegment(n,V.LEFT,this.distance,r);var s=new et;this.computeOffsetSegment(n,V.RIGHT,this.distance,s);var a=e.x-t.x,c=e.y-t.y,f=Math.atan2(c,a);switch(this.bufParams.getEndCapStyle()){case ct.CAP_ROUND:this.segList.addPt(r.p1),this.addFilletArc(e,f+Math.PI/2,f-Math.PI/2,k.CLOCKWISE,this.distance),this.segList.addPt(s.p1);break;case ct.CAP_FLAT:this.segList.addPt(r.p1),this.segList.addPt(s.p1);break;case ct.CAP_SQUARE:var y=new I;y.x=Math.abs(this.distance)*Math.cos(f),y.y=Math.abs(this.distance)*Math.sin(f);var L=new I(r.p1.x+y.x,r.p1.y+y.y),M=new I(s.p1.x+y.x,s.p1.y+y.y);this.segList.addPt(L),this.segList.addPt(M)}},getCoordinates:function(){var t=this.segList.getCoordinates();return t},addMitreJoin:function(t,e,n,r){var s=!0,a=null;try{a=Ht.intersection(e.p0,e.p1,n.p0,n.p1);var c=0>=r?1:a.distance(t)/Math.abs(r);c>this.bufParams.getMitreLimit()&&(s=!1)}catch(f){if(!(f instanceof G))throw f;a=new I(0,0),s=!1}finally{}s?this.segList.addPt(a):this.addLimitedMitreJoin(e,n,r,this.bufParams.getMitreLimit())},addFilletCorner:function(t,e,n,r,s){var a=e.x-t.x,c=e.y-t.y,f=Math.atan2(c,a),y=n.x-t.x,L=n.y-t.y,M=Math.atan2(L,y);r===k.CLOCKWISE?M>=f&&(f+=2*Math.PI):f>=M&&(f-=2*Math.PI),this.segList.addPt(e),this.addFilletArc(t,f,M,r,s),this.segList.addPt(n)},addOutsideTurn:function(t,e){return this.offset0.p1.distance(this.offset1.p0)<this.distance*Ue.OFFSET_SEGMENT_SEPARATION_FACTOR?(this.segList.addPt(this.offset0.p1),null):void(this.bufParams.getJoinStyle()===ct.JOIN_MITRE?this.addMitreJoin(this.s1,this.offset0,this.offset1,this.distance):this.bufParams.getJoinStyle()===ct.JOIN_BEVEL?this.addBevelJoin(this.offset0,this.offset1):(e&&this.segList.addPt(this.offset0.p1),this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,t,this.distance),this.segList.addPt(this.offset1.p0)))},createSquare:function(t){this.segList.addPt(new I(t.x+this.distance,t.y+this.distance)),this.segList.addPt(new I(t.x+this.distance,t.y-this.distance)),this.segList.addPt(new I(t.x-this.distance,t.y-this.distance)),this.segList.addPt(new I(t.x-this.distance,t.y+this.distance)),this.segList.closeRing()},addSegments:function(t,e){this.segList.addPts(t,e)},addFirstSegment:function(){this.segList.addPt(this.offset1.p0)},addLastSegment:function(){this.segList.addPt(this.offset1.p1)},initSideSegments:function(t,e,n){this.s1=t,this.s2=e,this.side=n,this.seg1.setCoordinates(t,e),this.computeOffsetSegment(this.seg1,n,this.distance,this.offset1)},addLimitedMitreJoin:function(t,e,n,r){var s=this.seg0.p1,a=nt.angle(s,this.seg0.p0),c=(nt.angle(s,this.seg1.p1),nt.angleBetweenOriented(this.seg0.p0,s,this.seg1.p1)),f=c/2,y=nt.normalize(a+f),L=nt.normalize(y+Math.PI),M=r*n,D=M*Math.abs(Math.sin(f)),q=n-D,$=s.x+M*Math.cos(L),j=s.y+M*Math.sin(L),tt=new I($,j),It=new et(s,tt),bt=It.pointAlongOffset(1,q),Fe=It.pointAlongOffset(1,-q);this.side===V.LEFT?(this.segList.addPt(bt),this.segList.addPt(Fe)):(this.segList.addPt(Fe),this.segList.addPt(bt))},computeOffsetSegment:function(t,e,n,r){var s=e===V.LEFT?1:-1,a=t.p1.x-t.p0.x,c=t.p1.y-t.p0.y,f=Math.sqrt(a*a+c*c),y=s*n*a/f,L=s*n*c/f;r.p0.x=t.p0.x-L,r.p0.y=t.p0.y+y,r.p1.x=t.p1.x-L,r.p1.y=t.p1.y+y},addFilletArc:function(t,e,n,r,s){var a=r===k.CLOCKWISE?-1:1,c=Math.abs(e-n),f=Math.trunc(c/this.filletAngleQuantum+.5);if(1>f)return null;var y=null,L=null;y=0,L=c/f;for(var M=y,D=new I;c>M;){var q=e+a*M;D.x=t.x+s*Math.cos(q),D.y=t.y+s*Math.sin(q),this.segList.addPt(D),M+=L}},addInsideTurn:function(t,e){if(this.li.computeIntersection(this.offset0.p0,this.offset0.p1,this.offset1.p0,this.offset1.p1),this.li.hasIntersection())this.segList.addPt(this.li.getIntersection(0));else if(this._hasNarrowConcaveAngle=!0,this.offset0.p1.distance(this.offset1.p0)<this.distance*Ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR)this.segList.addPt(this.offset0.p1);else{if(this.segList.addPt(this.offset0.p1),this.closingSegLengthFactor>0){var n=new I((this.closingSegLengthFactor*this.offset0.p1.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset0.p1.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(n);var r=new I((this.closingSegLengthFactor*this.offset1.p0.x+this.s1.x)/(this.closingSegLengthFactor+1),(this.closingSegLengthFactor*this.offset1.p0.y+this.s1.y)/(this.closingSegLengthFactor+1));this.segList.addPt(r)}else this.segList.addPt(this.s1);this.segList.addPt(this.offset1.p0)}},createCircle:function(t){var e=new I(t.x+this.distance,t.y);this.segList.addPt(e),this.addFilletArc(t,0,2*Math.PI,-1,this.distance),this.segList.closeRing()},addBevelJoin:function(t,e){this.segList.addPt(t.p1),this.segList.addPt(e.p0)},init:function(t){this.distance=t,this.maxCurveSegmentError=t*(1-Math.cos(this.filletAngleQuantum/2)),this.segList=new tr,this.segList.setPrecisionModel(this.precisionModel),this.segList.setMinimumVertexDistance(t*Ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR)},addCollinear:function(t){this.li.computeIntersection(this.s0,this.s1,this.s1,this.s2);var e=this.li.getIntersectionNum();e>=2&&(this.bufParams.getJoinStyle()===ct.JOIN_BEVEL||this.bufParams.getJoinStyle()===ct.JOIN_MITRE?(t&&this.segList.addPt(this.offset0.p1),this.segList.addPt(this.offset1.p0)):this.addFilletCorner(this.s1,this.offset0.p1,this.offset1.p0,k.CLOCKWISE,this.distance))},closeRing:function(){this.segList.closeRing()},hasNarrowConcaveAngle:function(){return this._hasNarrowConcaveAngle},interfaces_:function(){return[]},getClass:function(){return Ue}}),Ue.OFFSET_SEGMENT_SEPARATION_FACTOR=.001,Ue.INSIDE_TURN_VERTEX_SNAP_DISTANCE_FACTOR=.001,Ue.CURVE_VERTEX_SNAP_DISTANCE_FACTOR=1e-6,Ue.MAX_CLOSING_SEG_LEN_FACTOR=80,u(er.prototype,{getOffsetCurve:function(t,e){if(this.distance=e,e===0)return null;var n=0>e,r=Math.abs(e),s=this.getSegGen(r);t.length<=1?this.computePointCurve(t[0],s):this.computeOffsetCurve(t,n,s);var a=s.getCoordinates();return n&&Q.reverse(a),a},computeSingleSidedBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){n.addSegments(t,!0);var s=Xt.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],V.LEFT),n.addFirstSegment();for(var c=a-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{n.addSegments(t,!1);var f=Xt.simplify(t,r),y=f.length-1;n.initSideSegments(f[0],f[1],V.LEFT),n.addFirstSegment();for(var c=2;y>=c;c++)n.addNextSegment(f[c],!0)}n.addLastSegment(),n.closeRing()},computeRingBufferCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);e===V.RIGHT&&(r=-r);var s=Xt.simplify(t,r),a=s.length-1;n.initSideSegments(s[a-1],s[0],e);for(var c=1;a>=c;c++){var f=c!==1;n.addNextSegment(s[c],f)}n.closeRing()},computeLineBufferCurve:function(t,e){var n=this.simplifyTolerance(this.distance),r=Xt.simplify(t,n),s=r.length-1;e.initSideSegments(r[0],r[1],V.LEFT);for(var a=2;s>=a;a++)e.addNextSegment(r[a],!0);e.addLastSegment(),e.addLineEndCap(r[s-1],r[s]);var c=Xt.simplify(t,-n),f=c.length-1;e.initSideSegments(c[f],c[f-1],V.LEFT);for(var a=f-2;a>=0;a--)e.addNextSegment(c[a],!0);e.addLastSegment(),e.addLineEndCap(c[1],c[0]),e.closeRing()},computePointCurve:function(t,e){switch(this.bufParams.getEndCapStyle()){case ct.CAP_ROUND:e.createCircle(t);break;case ct.CAP_SQUARE:e.createSquare(t)}},getLineCurve:function(t,e){if(this.distance=e,0>e&&!this.bufParams.isSingleSided()||e===0)return null;var n=Math.abs(e),r=this.getSegGen(n);if(t.length<=1)this.computePointCurve(t[0],r);else if(this.bufParams.isSingleSided()){var s=0>e;this.computeSingleSidedBufferCurve(t,s,r)}else this.computeLineBufferCurve(t,r);var a=r.getCoordinates();return a},getBufferParameters:function(){return this.bufParams},simplifyTolerance:function(t){return t*this.bufParams.getSimplifyFactor()},getRingCurve:function(t,e,n){if(this.distance=n,t.length<=2)return this.getLineCurve(t,n);if(n===0)return er.copyCoordinates(t);var r=this.getSegGen(n);return this.computeRingBufferCurve(t,e,r),r.getCoordinates()},computeOffsetCurve:function(t,e,n){var r=this.simplifyTolerance(this.distance);if(e){var s=Xt.simplify(t,-r),a=s.length-1;n.initSideSegments(s[a],s[a-1],V.LEFT),n.addFirstSegment();for(var c=a-2;c>=0;c--)n.addNextSegment(s[c],!0)}else{var f=Xt.simplify(t,r),y=f.length-1;n.initSideSegments(f[0],f[1],V.LEFT),n.addFirstSegment();for(var c=2;y>=c;c++)n.addNextSegment(f[c],!0)}n.addLastSegment()},getSegGen:function(t){return new Ue(this.precisionModel,this.bufParams,t)},interfaces_:function(){return[]},getClass:function(){return er}}),er.copyCoordinates=function(t){for(var e=new Array(t.length).fill(null),n=0;n<e.length;n++)e[n]=new I(t[n]);return e},u(ds.prototype,{findStabbedSegments:function(){if(arguments.length===1){for(var t=arguments[0],e=new P,n=this.subgraphs.iterator();n.hasNext();){var r=n.next(),s=r.getEnvelope();t.y<s.getMinY()||t.y>s.getMaxY()||this.findStabbedSegments(t,r.getDirectedEdges(),e)}return e}if(arguments.length===3){if(U(arguments[2],w)&&arguments[0]instanceof I&&arguments[1]instanceof Zn)for(var a=arguments[0],c=arguments[1],f=arguments[2],y=c.getEdge().getCoordinates(),n=0;n<y.length-1;n++){this.seg.p0=y[n],this.seg.p1=y[n+1],this.seg.p0.y>this.seg.p1.y&&this.seg.reverse();var L=Math.max(this.seg.p0.x,this.seg.p1.x);if(!(L<a.x||this.seg.isHorizontal()||a.y<this.seg.p0.y||a.y>this.seg.p1.y||k.computeOrientation(this.seg.p0,this.seg.p1,a)===k.RIGHT)){var M=c.getDepth(V.LEFT);this.seg.p0.equals(y[n])||(M=c.getDepth(V.RIGHT));var D=new ps(this.seg,M);f.add(D)}}else if(U(arguments[2],w)&&arguments[0]instanceof I&&U(arguments[1],w))for(var q=arguments[0],$=arguments[1],j=arguments[2],n=$.iterator();n.hasNext();){var tt=n.next();tt.isForward()&&this.findStabbedSegments(q,tt,j)}}},getDepth:function(t){var e=this.findStabbedSegments(t);if(e.size()===0)return 0;var n=We.min(e);return n.leftDepth},interfaces_:function(){return[]},getClass:function(){return ds}}),u(ps.prototype,{compareTo:function(t){var e=t;if(this.upwardSeg.minX()>=e.upwardSeg.maxX())return 1;if(this.upwardSeg.maxX()<=e.upwardSeg.minX())return-1;var n=this.upwardSeg.orientationIndex(e.upwardSeg);return n!==0?n:(n=-1*e.upwardSeg.orientationIndex(this.upwardSeg),n!==0?n:this.upwardSeg.compareTo(e.upwardSeg))},compareX:function(t,e){var n=t.p0.compareTo(e.p0);return n!==0?n:t.p1.compareTo(e.p1)},toString:function(){return this.upwardSeg.toString()},interfaces_:function(){return[m]},getClass:function(){return ps}}),ds.DepthSegment=ps,u(Fo.prototype,{addPoint:function(t){if(this.distance<=0)return null;var e=t.getCoordinates(),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)},addPolygon:function(t){var e=this.distance,n=V.LEFT;this.distance<0&&(e=-this.distance,n=V.RIGHT);var r=t.getExteriorRing(),s=Q.removeRepeatedPoints(r.getCoordinates());if(this.distance<0&&this.isErodedCompletely(r,this.distance)||this.distance<=0&&s.length<3)return null;this.addPolygonRing(s,e,n,v.EXTERIOR,v.INTERIOR);for(var a=0;a<t.getNumInteriorRing();a++){var c=t.getInteriorRingN(a),f=Q.removeRepeatedPoints(c.getCoordinates());this.distance>0&&this.isErodedCompletely(c,-this.distance)||this.addPolygonRing(f,e,V.opposite(n),v.INTERIOR,v.EXTERIOR)}},isTriangleErodedCompletely:function(t,e){var n=new Et(t[0],t[1],t[2]),r=n.inCentre(),s=k.distancePointLine(r,n.p0,n.p1);return s<Math.abs(e)},addLineString:function(t){if(this.distance<=0&&!this.curveBuilder.getBufferParameters().isSingleSided())return null;var e=Q.removeRepeatedPoints(t.getCoordinates()),n=this.curveBuilder.getLineCurve(e,this.distance);this.addCurve(n,v.EXTERIOR,v.INTERIOR)},addCurve:function(t,e,n){if(t===null||t.length<2)return null;var r=new Be(t,new Mt(0,v.BOUNDARY,e,n));this.curveList.add(r)},getCurves:function(){return this.add(this.inputGeom),this.curveList},addPolygonRing:function(t,e,n,r,s){if(e===0&&t.length<Pt.MINIMUM_VALID_SIZE)return null;var a=r,c=s;t.length>=Pt.MINIMUM_VALID_SIZE&&k.isCCW(t)&&(a=s,c=r,n=V.opposite(n));var f=this.curveBuilder.getRingCurve(t,n,e);this.addCurve(f,a,c)},add:function(t){if(t.isEmpty())return null;if(t instanceof vt)this.addPolygon(t);else if(t instanceof it)this.addLineString(t);else if(t instanceof wt)this.addPoint(t);else if(t instanceof se)this.addCollection(t);else if(t instanceof re)this.addCollection(t);else if(t instanceof Ut)this.addCollection(t);else{if(!(t instanceof ut))throw new UnsupportedOperationException(t.getClass().getName());this.addCollection(t)}},isErodedCompletely:function(t,e){var n=t.getCoordinates();if(n.length<4)return 0>e;if(n.length===4)return this.isTriangleErodedCompletely(n,e);var r=t.getEnvelopeInternal(),s=Math.min(r.getHeight(),r.getWidth());return 0>e&&2*Math.abs(e)>s},addCollection:function(t){for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);this.add(n)}},interfaces_:function(){return[]},getClass:function(){return Fo}}),u(nr.prototype,{isTrivialIntersection:function(t,e,n,r){if(t===n&&this.li.getIntersectionNum()===1){if(nr.isAdjacentSegments(e,r))return!0;if(t.isClosed()){var s=t.size()-1;if(e===0&&r===s||r===0&&e===s)return!0}}return!1},getProperIntersectionPoint:function(){return this.properIntersectionPoint},hasProperInteriorIntersection:function(){return this.hasProperInterior},getLineIntersector:function(){return this.li},hasProperIntersection:function(){return this.hasProper},processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;this.numTests++;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];this.li.computeIntersection(s,a,c,f),this.li.hasIntersection()&&(this.numIntersections++,this.li.isInteriorIntersection()&&(this.numInteriorIntersections++,this.hasInterior=!0),this.isTrivialIntersection(t,e,n,r)||(this._hasIntersection=!0,t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1),this.li.isProper()&&(this.numProperIntersections++,this.hasProper=!0,this.hasProperInterior=!0)))},hasIntersection:function(){return this._hasIntersection},isDone:function(){return!1},hasInteriorIntersection:function(){return this.hasInterior},interfaces_:function(){return[Ui]},getClass:function(){return nr}}),nr.isAdjacentSegments=function(t,e){return Math.abs(t-e)===1},u(Mn.prototype,{setWorkingPrecisionModel:function(t){this.workingPrecisionModel=t},insertUniqueEdge:function(t){var e=this.edgeList.findEqualEdge(t);if(e!==null){var n=e.getLabel(),r=t.getLabel();e.isPointwiseEqual(t)||(r=new Mt(t.getLabel()),r.flip()),n.merge(r);var s=Mn.depthDelta(r),a=e.getDepthDelta(),c=a+s;e.setDepthDelta(c)}else this.edgeList.add(t),t.setDepthDelta(Mn.depthDelta(t.getLabel()))},buildSubgraphs:function(t,e){for(var n=new P,r=t.iterator();r.hasNext();){var s=r.next(),a=s.getRightmostCoordinate(),c=new ds(n),f=c.getDepth(a);s.computeDepth(f),s.findResultEdges(),n.add(s),e.add(s.getDirectedEdges(),s.getNodes())}},createSubgraphs:function(t){for(var e=new P,n=t.getNodes().iterator();n.hasNext();){var r=n.next();if(!r.isVisited()){var s=new Ao;s.create(r),e.add(s)}}return We.sort(e,We.reverseOrder()),e},createEmptyResultGeometry:function(){var t=this.geomFact.createPolygon();return t},getNoder:function(t){if(this.workingNoder!==null)return this.workingNoder;var e=new Cn,n=new zt;return n.setPrecisionModel(t),e.setSegmentIntersector(new nr(n)),e},buffer:function(t,e){var n=this.workingPrecisionModel;n===null&&(n=t.getPrecisionModel()),this.geomFact=t.getFactory();var r=new er(n,this.bufParams),s=new Fo(t,e,r),a=s.getCurves();if(a.size()<=0)return this.createEmptyResultGeometry();this.computeNodedEdges(a,n),this.graph=new Ve(new mi),this.graph.addEdges(this.edgeList.getEdges());var c=this.createSubgraphs(this.graph),f=new Kr(this.geomFact);this.buildSubgraphs(c,f);var y=f.getPolygons();if(y.size()<=0)return this.createEmptyResultGeometry();var L=this.geomFact.buildGeometry(y);return L},computeNodedEdges:function(t,e){var n=this.getNoder(e);n.computeNodes(t);for(var r=n.getNodedSubstrings(),s=r.iterator();s.hasNext();){var a=s.next(),c=a.getCoordinates();if(c.length!==2||!c[0].equals2D(c[1])){var f=a.getData(),y=new Ce(a.getCoordinates(),new Mt(f));this.insertUniqueEdge(y)}}},setNoder:function(t){this.workingNoder=t},interfaces_:function(){return[]},getClass:function(){return Mn}}),Mn.depthDelta=function(t){var e=t.getLocation(0,V.LEFT),n=t.getLocation(0,V.RIGHT);return e===v.INTERIOR&&n===v.EXTERIOR?1:e===v.EXTERIOR&&n===v.INTERIOR?-1:0},Mn.convertSegStrings=function(t){for(var e=new ot,n=new P;t.hasNext();){var r=t.next(),s=e.createLineString(r.getCoordinates());n.add(s)}return e.buildGeometry(n)},u(ir.prototype,{checkEndPtVertexIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next(),n=e.getCoordinates();this.checkEndPtVertexIntersections(n[0],this.segStrings),this.checkEndPtVertexIntersections(n[n.length-1],this.segStrings)}else if(arguments.length===2){for(var r=arguments[0],s=arguments[1],t=s.iterator();t.hasNext();)for(var e=t.next(),n=e.getCoordinates(),a=1;a<n.length-1;a++)if(n[a].equals(r))throw new C("found endpt/interior pt intersection at index "+a+" :pt "+r)}},checkInteriorIntersections:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();)for(var e=t.next(),n=this.segStrings.iterator();n.hasNext();){var r=n.next();this.checkInteriorIntersections(e,r)}else if(arguments.length===2)for(var s=arguments[0],a=arguments[1],c=s.getCoordinates(),f=a.getCoordinates(),y=0;y<c.length-1;y++)for(var L=0;L<f.length-1;L++)this.checkInteriorIntersections(s,y,a,L);else if(arguments.length===4){var M=arguments[0],D=arguments[1],q=arguments[2],$=arguments[3];if(M===q&&D===$)return null;var j=M.getCoordinates()[D],tt=M.getCoordinates()[D+1],It=q.getCoordinates()[$],bt=q.getCoordinates()[$+1];if(this.li.computeIntersection(j,tt,It,bt),this.li.hasIntersection()&&(this.li.isProper()||this.hasInteriorIntersection(this.li,j,tt)||this.hasInteriorIntersection(this.li,It,bt)))throw new C("found non-noded intersection at "+j+"-"+tt+" and "+It+"-"+bt)}},checkValid:function(){this.checkEndPtVertexIntersections(),this.checkInteriorIntersections(),this.checkCollapses()},checkCollapses:function(){if(arguments.length===0)for(var t=this.segStrings.iterator();t.hasNext();){var e=t.next();this.checkCollapses(e)}else if(arguments.length===1)for(var n=arguments[0],r=n.getCoordinates(),t=0;t<r.length-2;t++)this.checkCollapse(r[t],r[t+1],r[t+2])},hasInteriorIntersection:function(t,e,n){for(var r=0;r<t.getIntersectionNum();r++){var s=t.getIntersection(r);if(!s.equals(e)&&!s.equals(n))return!0}return!1},checkCollapse:function(t,e,n){if(t.equals(n))throw new C("found non-noded collapse at "+ir.fact.createLineString([t,e,n]))},interfaces_:function(){return[]},getClass:function(){return ir}}),ir.fact=new ot,u(xi.prototype,{intersectsScaled:function(t,e){var n=Math.min(t.x,e.x),r=Math.max(t.x,e.x),s=Math.min(t.y,e.y),a=Math.max(t.y,e.y),c=this.maxx<n||this.minx>r||this.maxy<s||this.miny>a;if(c)return!1;var f=this.intersectsToleranceSquare(t,e);return T.isTrue(!(c&&f),"Found bad envelope test"),f},initCorners:function(t){var e=.5;this.minx=t.x-e,this.maxx=t.x+e,this.miny=t.y-e,this.maxy=t.y+e,this.corner[0]=new I(this.maxx,this.maxy),this.corner[1]=new I(this.minx,this.maxy),this.corner[2]=new I(this.minx,this.miny),this.corner[3]=new I(this.maxx,this.miny)},intersects:function(t,e){return this.scaleFactor===1?this.intersectsScaled(t,e):(this.copyScaled(t,this.p0Scaled),this.copyScaled(e,this.p1Scaled),this.intersectsScaled(this.p0Scaled,this.p1Scaled))},scale:function(t){return Math.round(t*this.scaleFactor)},getCoordinate:function(){return this.originalPt},copyScaled:function(t,e){e.x=this.scale(t.x),e.y=this.scale(t.y)},getSafeEnvelope:function(){if(this.safeEnv===null){var t=xi.SAFE_ENV_EXPANSION_FACTOR/this.scaleFactor;this.safeEnv=new O(this.originalPt.x-t,this.originalPt.x+t,this.originalPt.y-t,this.originalPt.y+t)}return this.safeEnv},intersectsPixelClosure:function(t,e){return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.hasIntersection()?!0:(this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),!!this.li.hasIntersection())))},intersectsToleranceSquare:function(t,e){var n=!1,r=!1;return this.li.computeIntersection(t,e,this.corner[0],this.corner[1]),this.li.isProper()?!0:(this.li.computeIntersection(t,e,this.corner[1],this.corner[2]),this.li.isProper()?!0:(this.li.hasIntersection()&&(n=!0),this.li.computeIntersection(t,e,this.corner[2],this.corner[3]),this.li.isProper()?!0:(this.li.hasIntersection()&&(r=!0),this.li.computeIntersection(t,e,this.corner[3],this.corner[0]),this.li.isProper()||n&&r||t.equals(this.pt)?!0:!!e.equals(this.pt))))},addSnappedNode:function(t,e){var n=t.getCoordinate(e),r=t.getCoordinate(e+1);return this.intersects(n,r)?(t.addIntersection(this.getCoordinate(),e),!0):!1},interfaces_:function(){return[]},getClass:function(){return xi}}),xi.SAFE_ENV_EXPANSION_FACTOR=.75,u(_n.prototype,{select:function(){if(arguments.length!==1){if(arguments.length===2){var t=arguments[0],e=arguments[1];t.getLineSegment(e,this.selectedSegment),this.select(this.selectedSegment)}}},interfaces_:function(){return[]},getClass:function(){return _n}}),u(ms.prototype,{snap:function(){if(arguments.length===1){var t=arguments[0];return this.snap(t,null,-1)}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2],s=e.getSafeEnvelope(),a=new rr(e,n,r);return this.index.query(s,{interfaces_:function(){return[Nn]},visitItem:function(c){var f=c;f.select(s,a)}}),a.isNodeAdded()}},interfaces_:function(){return[]},getClass:function(){return ms}}),S(rr,_n),u(rr.prototype,{isNodeAdded:function(){return this._isNodeAdded},select:function(){if(arguments.length!==2)return _n.prototype.select.apply(this,arguments);var t=arguments[0],e=arguments[1],n=t.getContext();return this.parentEdge!==null&&n===this.parentEdge&&e===this.hotPixelVertexIndex?null:void(this._isNodeAdded=this.hotPixel.addSnappedNode(n,e))},interfaces_:function(){return[]},getClass:function(){return rr}}),ms.HotPixelSnapAction=rr,u(Go.prototype,{processIntersections:function(t,e,n,r){if(t===n&&e===r)return null;var s=t.getCoordinates()[e],a=t.getCoordinates()[e+1],c=n.getCoordinates()[r],f=n.getCoordinates()[r+1];if(this.li.computeIntersection(s,a,c,f),this.li.hasIntersection()&&this.li.isInteriorIntersection()){for(var y=0;y<this.li.getIntersectionNum();y++)this.interiorIntersections.add(this.li.getIntersection(y));t.addIntersections(this.li,e,0),n.addIntersections(this.li,r,1)}},isDone:function(){return!1},getInteriorIntersections:function(){return this.interiorIntersections},interfaces_:function(){return[Ui]},getClass:function(){return Go}}),u(qo.prototype,{checkCorrectness:function(t){var e=Be.getNodedSubstrings(t),n=new ir(e);try{n.checkValid()}catch(r){if(!(r instanceof z))throw r;r.printStackTrace()}finally{}},getNodedSubstrings:function(){return Be.getNodedSubstrings(this.nodedSegStrings)},snapRound:function(t,e){var n=this.findInteriorIntersections(t,e);this.computeIntersectionSnaps(n),this.computeVertexSnaps(t)},findInteriorIntersections:function(t,e){var n=new Go(e);return this.noder.setSegmentIntersector(n),this.noder.computeNodes(t),n.getInteriorIntersections()},computeVertexSnaps:function(){if(U(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.computeVertexSnaps(n)}else if(arguments[0]instanceof Be)for(var r=arguments[0],s=r.getCoordinates(),a=0;a<s.length;a++){var c=new xi(s[a],this.scaleFactor,this.li),f=this.pointSnapper.snap(c,r,a);f&&r.addIntersection(s[a],a)}},computeNodes:function(t){this.nodedSegStrings=t,this.noder=new Cn,this.pointSnapper=new ms(this.noder.getIndex()),this.snapRound(t,this.li)},computeIntersectionSnaps:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=new xi(n,this.scaleFactor,this.li);this.pointSnapper.snap(r)}},interfaces_:function(){return[Vi]},getClass:function(){return qo}}),u(Yt.prototype,{bufferFixedPrecision:function(t){var e=new ji(new qo(new ft(1)),t.getScale()),n=new Mn(this.bufParams);n.setWorkingPrecisionModel(t),n.setNoder(e),this.resultGeometry=n.buffer(this.argGeom,this.distance)},bufferReducedPrecision:function(){if(arguments.length===0){for(var t=Yt.MAX_PRECISION_DIGITS;t>=0;t--){try{this.bufferReducedPrecision(t)}catch(s){if(!(s instanceof oe))throw s;this.saveException=s}finally{}if(this.resultGeometry!==null)return null}throw this.saveException}if(arguments.length===1){var e=arguments[0],n=Yt.precisionScaleFactor(this.argGeom,this.distance,e),r=new ft(n);this.bufferFixedPrecision(r)}},computeGeometry:function(){if(this.bufferOriginalPrecision(),this.resultGeometry!==null)return null;var t=this.argGeom.getFactory().getPrecisionModel();t.getType()===ft.FIXED?this.bufferFixedPrecision(t):this.bufferReducedPrecision()},setQuadrantSegments:function(t){this.bufParams.setQuadrantSegments(t)},bufferOriginalPrecision:function(){try{var t=new Mn(this.bufParams);this.resultGeometry=t.buffer(this.argGeom,this.distance)}catch(e){if(!(e instanceof C))throw e;this.saveException=e}finally{}},getResultGeometry:function(t){return this.distance=t,this.computeGeometry(),this.resultGeometry},setEndCapStyle:function(t){this.bufParams.setEndCapStyle(t)},interfaces_:function(){return[]},getClass:function(){return Yt}}),Yt.bufferOp=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new Yt(t),r=n.getResultGeometry(e);return r}if(arguments.length===3){if(Number.isInteger(arguments[2])&&arguments[0]instanceof H&&typeof arguments[1]=="number"){var s=arguments[0],a=arguments[1],c=arguments[2],f=new Yt(s);f.setQuadrantSegments(c);var r=f.getResultGeometry(a);return r}if(arguments[2]instanceof ct&&arguments[0]instanceof H&&typeof arguments[1]=="number"){var y=arguments[0],L=arguments[1],M=arguments[2],f=new Yt(y,M),r=f.getResultGeometry(L);return r}}else if(arguments.length===4){var D=arguments[0],q=arguments[1],$=arguments[2],j=arguments[3],f=new Yt(D);f.setQuadrantSegments($),f.setEndCapStyle(j);var r=f.getResultGeometry(q);return r}},Yt.precisionScaleFactor=function(t,e,n){var r=t.getEnvelopeInternal(),s=st.max(Math.abs(r.getMaxX()),Math.abs(r.getMaxY()),Math.abs(r.getMinX()),Math.abs(r.getMinY())),a=e>0?e:0,c=s+2*a,f=Math.trunc(Math.log(c)/Math.log(10)+1),y=n-f,L=Math.pow(10,y);return L},Yt.CAP_ROUND=ct.CAP_ROUND,Yt.CAP_BUTT=ct.CAP_FLAT,Yt.CAP_FLAT=ct.CAP_FLAT,Yt.CAP_SQUARE=ct.CAP_SQUARE,Yt.MAX_PRECISION_DIGITS=12;var Ol=Object.freeze({BufferOp:Yt,BufferParameters:ct});u(ei.prototype,{filter:function(t){t instanceof vt&&this.comps.add(t)},interfaces_:function(){return[Je]},getClass:function(){return ei}}),ei.getPolygons=function(){if(arguments.length===1){var t=arguments[0];return ei.getPolygons(t,new P)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof vt?n.add(e):e instanceof ut&&e.apply(new ei(n)),n}},u(he.prototype,{isInsideArea:function(){return this.segIndex===he.INSIDE_AREA},getCoordinate:function(){return this.pt},getGeometryComponent:function(){return this.component},getSegmentIndex:function(){return this.segIndex},interfaces_:function(){return[]},getClass:function(){return he}}),he.INSIDE_AREA=-1,u(ni.prototype,{filter:function(t){t instanceof wt&&this.pts.add(t)},interfaces_:function(){return[Je]},getClass:function(){return ni}}),ni.getPoints=function(){if(arguments.length===1){var t=arguments[0];return t instanceof wt?We.singletonList(t):ni.getPoints(t,new P)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return e instanceof wt?n.add(e):e instanceof ut&&e.apply(new ni(n)),n}},u(sr.prototype,{filter:function(t){(t instanceof wt||t instanceof it||t instanceof vt)&&this.locations.add(new he(t,0,t.getCoordinate()))},interfaces_:function(){return[Je]},getClass:function(){return sr}}),sr.getLocations=function(t){var e=new P;return t.apply(new sr(e)),e},u(_e.prototype,{computeContainmentDistance:function(){if(arguments.length===0){var t=new Array(2).fill(null);if(this.computeContainmentDistance(0,t),this.minDistance<=this.terminateDistance)return null;this.computeContainmentDistance(1,t)}else if(arguments.length===2){var e=arguments[0],n=arguments[1],r=1-e,s=ei.getPolygons(this.geom[e]);if(s.size()>0){var a=sr.getLocations(this.geom[r]);if(this.computeContainmentDistance(a,s,n),this.minDistance<=this.terminateDistance)return this.minDistanceLocation[r]=n[0],this.minDistanceLocation[e]=n[1],null}}else if(arguments.length===3){if(arguments[2]instanceof Array&&U(arguments[0],w)&&U(arguments[1],w)){for(var c=arguments[0],f=arguments[1],y=arguments[2],L=0;L<c.size();L++)for(var M=c.get(L),D=0;D<f.size();D++)if(this.computeContainmentDistance(M,f.get(D),y),this.minDistance<=this.terminateDistance)return null}else if(arguments[2]instanceof Array&&arguments[0]instanceof he&&arguments[1]instanceof vt){var q=arguments[0],$=arguments[1],j=arguments[2],tt=q.getCoordinate();if(v.EXTERIOR!==this.ptLocator.locate(tt,$))return this.minDistance=0,j[0]=q,j[1]=new he($,tt),null}}},computeMinDistanceLinesPoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var c=e.get(a);if(this.computeMinDistance(s,c,n),this.minDistance<=this.terminateDistance)return null}},computeFacetDistance:function(){var t=new Array(2).fill(null),e=$t.getLines(this.geom[0]),n=$t.getLines(this.geom[1]),r=ni.getPoints(this.geom[0]),s=ni.getPoints(this.geom[1]);return this.computeMinDistanceLines(e,n,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(e,s,t),this.updateMinDistance(t,!1),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistanceLinesPoints(n,r,t),this.updateMinDistance(t,!0),this.minDistance<=this.terminateDistance?null:(t[0]=null,t[1]=null,this.computeMinDistancePoints(r,s,t),void this.updateMinDistance(t,!1))))},nearestLocations:function(){return this.computeMinDistance(),this.minDistanceLocation},updateMinDistance:function(t,e){return t[0]===null?null:void(e?(this.minDistanceLocation[0]=t[1],this.minDistanceLocation[1]=t[0]):(this.minDistanceLocation[0]=t[0],this.minDistanceLocation[1]=t[1]))},nearestPoints:function(){this.computeMinDistance();var t=[this.minDistanceLocation[0].getCoordinate(),this.minDistanceLocation[1].getCoordinate()];return t},computeMinDistance:function(){if(arguments.length===0){if(this.minDistanceLocation!==null||(this.minDistanceLocation=new Array(2).fill(null),this.computeContainmentDistance(),this.minDistance<=this.terminateDistance))return null;this.computeFacetDistance()}else if(arguments.length===3){if(arguments[2]instanceof Array&&arguments[0]instanceof it&&arguments[1]instanceof wt){var t=arguments[0],e=arguments[1],n=arguments[2];if(t.getEnvelopeInternal().distance(e.getEnvelopeInternal())>this.minDistance)return null;for(var r=t.getCoordinates(),s=e.getCoordinate(),a=0;a<r.length-1;a++){var c=k.distancePointLine(s,r[a],r[a+1]);if(c<this.minDistance){this.minDistance=c;var f=new et(r[a],r[a+1]),y=f.closestPoint(s);n[0]=new he(t,a,y),n[1]=new he(e,0,s)}if(this.minDistance<=this.terminateDistance)return null}}else if(arguments[2]instanceof Array&&arguments[0]instanceof it&&arguments[1]instanceof it){var L=arguments[0],M=arguments[1],D=arguments[2];if(L.getEnvelopeInternal().distance(M.getEnvelopeInternal())>this.minDistance)return null;for(var r=L.getCoordinates(),q=M.getCoordinates(),a=0;a<r.length-1;a++)for(var $=0;$<q.length-1;$++){var c=k.distanceLineLine(r[a],r[a+1],q[$],q[$+1]);if(c<this.minDistance){this.minDistance=c;var j=new et(r[a],r[a+1]),tt=new et(q[$],q[$+1]),It=j.closestPoints(tt);D[0]=new he(L,a,It[0]),D[1]=new he(M,$,It[1])}if(this.minDistance<=this.terminateDistance)return null}}}},computeMinDistancePoints:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var c=e.get(a),f=s.getCoordinate().distance(c.getCoordinate());if(f<this.minDistance&&(this.minDistance=f,n[0]=new he(s,0,s.getCoordinate()),n[1]=new he(c,0,c.getCoordinate())),this.minDistance<=this.terminateDistance)return null}},distance:function(){if(this.geom[0]===null||this.geom[1]===null)throw new d;return this.geom[0].isEmpty()||this.geom[1].isEmpty()?0:(this.computeMinDistance(),this.minDistance)},computeMinDistanceLines:function(t,e,n){for(var r=0;r<t.size();r++)for(var s=t.get(r),a=0;a<e.size();a++){var c=e.get(a);if(this.computeMinDistance(s,c,n),this.minDistance<=this.terminateDistance)return null}},interfaces_:function(){return[]},getClass:function(){return _e}}),_e.distance=function(t,e){var n=new _e(t,e);return n.distance()},_e.isWithinDistance=function(t,e,n){var r=new _e(t,e,n);return r.distance()<=n},_e.nearestPoints=function(t,e){var n=new _e(t,e);return n.nearestPoints()};var Ml=Object.freeze({DistanceOp:_e});u(Bo.prototype,{getCoordinates:function(){if(this.coordinates===null){for(var t=0,e=0,n=new A,r=this.directedEdges.iterator();r.hasNext();){var s=r.next();s.getEdgeDirection()?t++:e++,n.add(s.getEdge().getLine().getCoordinates(),!1,s.getEdgeDirection())}this.coordinates=n.toCoordinateArray(),e>t&&Q.reverse(this.coordinates)}return this.coordinates},toLineString:function(){return this.factory.createLineString(this.getCoordinates())},add:function(t){this.directedEdges.add(t)},interfaces_:function(){return[]},getClass:function(){return Bo}}),u(Se.prototype,{setVisited:function(t){this._isVisited=t},isMarked:function(){return this._isMarked},setData:function(t){this.data=t},getData:function(){return this.data},setMarked:function(t){this._isMarked=t},getContext:function(){return this.data},isVisited:function(){return this._isVisited},setContext:function(t){this.data=t},interfaces_:function(){return[]},getClass:function(){return Se}}),Se.getComponentWithVisitedState=function(t,e){for(;t.hasNext();){var n=t.next();if(n.isVisited()===e)return n}return null},Se.setVisited=function(t,e){for(;t.hasNext();){var n=t.next();n.setVisited(e)}},Se.setMarked=function(t,e){for(;t.hasNext();){var n=t.next();n.setMarked(e)}},S(ye,Se),u(ye.prototype,{isRemoved:function(){return this.parentEdge===null},compareDirection:function(t){return this.quadrant>t.quadrant?1:this.quadrant<t.quadrant?-1:k.computeOrientation(t.p0,t.p1,this.p1)},getCoordinate:function(){return this.from.getCoordinate()},print:function(t){var e=this.getClass().getName(),n=e.lastIndexOf("."),r=e.substring(n+1);t.print("  "+r+": "+this.p0+" - "+this.p1+" "+this.quadrant+":"+this.angle)},getDirectionPt:function(){return this.p1},getAngle:function(){return this.angle},compareTo:function(t){var e=t;return this.compareDirection(e)},getFromNode:function(){return this.from},getSym:function(){return this.sym},setEdge:function(t){this.parentEdge=t},remove:function(){this.sym=null,this.parentEdge=null},getEdge:function(){return this.parentEdge},getQuadrant:function(){return this.quadrant},setSym:function(t){this.sym=t},getToNode:function(){return this.to},getEdgeDirection:function(){return this.edgeDirection},interfaces_:function(){return[m]},getClass:function(){return ye}}),ye.toEdges=function(t){for(var e=new P,n=t.iterator();n.hasNext();)e.add(n.next().parentEdge);return e},S(or,ye),u(or.prototype,{getNext:function(){return this.getToNode().getDegree()!==2?null:this.getToNode().getOutEdges().getEdges().get(0)===this.getSym()?this.getToNode().getOutEdges().getEdges().get(1):(T.isTrue(this.getToNode().getOutEdges().getEdges().get(1)===this.getSym()),this.getToNode().getOutEdges().getEdges().get(0))},interfaces_:function(){return[]},getClass:function(){return or}}),S(Xe,Se),u(Xe.prototype,{isRemoved:function(){return this.dirEdge===null},setDirectedEdges:function(t,e){this.dirEdge=[t,e],t.setEdge(this),e.setEdge(this),t.setSym(e),e.setSym(t),t.getFromNode().addOutEdge(t),e.getFromNode().addOutEdge(e)},getDirEdge:function(){if(Number.isInteger(arguments[0])){var t=arguments[0];return this.dirEdge[t]}if(arguments[0]instanceof on){var e=arguments[0];return this.dirEdge[0].getFromNode()===e?this.dirEdge[0]:this.dirEdge[1].getFromNode()===e?this.dirEdge[1]:null}},remove:function(){this.dirEdge=null},getOppositeNode:function(t){return this.dirEdge[0].getFromNode()===t?this.dirEdge[0].getToNode():this.dirEdge[1].getFromNode()===t?this.dirEdge[1].getToNode():null},interfaces_:function(){return[]},getClass:function(){return Xe}}),u(zo.prototype,{getNextEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e+1))},getCoordinate:function(){var t=this.iterator();if(!t.hasNext())return null;var e=t.next();return e.getCoordinate()},iterator:function(){return this.sortEdges(),this.outEdges.iterator()},sortEdges:function(){this.sorted||(We.sort(this.outEdges),this.sorted=!0)},remove:function(t){this.outEdges.remove(t)},getEdges:function(){return this.sortEdges(),this.outEdges},getNextCWEdge:function(t){var e=this.getIndex(t);return this.outEdges.get(this.getIndex(e-1))},getIndex:function(){if(arguments[0]instanceof Xe){var t=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n.getEdge()===t)return e}return-1}if(arguments[0]instanceof ye){var r=arguments[0];this.sortEdges();for(var e=0;e<this.outEdges.size();e++){var n=this.outEdges.get(e);if(n===r)return e}return-1}if(Number.isInteger(arguments[0])){var s=arguments[0],a=s%this.outEdges.size();return 0>a&&(a+=this.outEdges.size()),a}},add:function(t){this.outEdges.add(t),this.sorted=!1},getDegree:function(){return this.outEdges.size()},interfaces_:function(){return[]},getClass:function(){return zo}}),S(on,Se),u(on.prototype,{isRemoved:function(){return this.pt===null},addOutEdge:function(t){this.deStar.add(t)},getCoordinate:function(){return this.pt},getOutEdges:function(){return this.deStar},remove:function(){if(arguments.length===0)this.pt=null;else if(arguments.length===1){var t=arguments[0];this.deStar.remove(t)}},getIndex:function(t){return this.deStar.getIndex(t)},getDegree:function(){return this.deStar.getDegree()},interfaces_:function(){return[]},getClass:function(){return on}}),on.getEdgesBetween=function(t,e){var n=ye.toEdges(t.getOutEdges().getEdges()),r=new kt(n),s=ye.toEdges(e.getOutEdges().getEdges());return r.retainAll(s),r},S(vs,Xe),u(vs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return vs}}),u(Vo.prototype,{find:function(t){return this.nodeMap.get(t)},iterator:function(){return this.nodeMap.values().iterator()},remove:function(t){return this.nodeMap.remove(t)},values:function(){return this.nodeMap.values()},add:function(t){return this.nodeMap.put(t.getCoordinate(),t),t},interfaces_:function(){return[]},getClass:function(){return Vo}}),u(Ei.prototype,{findNodesOfDegree:function(t){for(var e=new P,n=this.nodeIterator();n.hasNext();){var r=n.next();r.getDegree()===t&&e.add(r)}return e},dirEdgeIterator:function(){return this.dirEdges.iterator()},edgeIterator:function(){return this.edges.iterator()},remove:function(){if(arguments[0]instanceof Xe){var t=arguments[0];this.remove(t.getDirEdge(0)),this.remove(t.getDirEdge(1)),this.edges.remove(t),t.remove()}else if(arguments[0]instanceof ye){var e=arguments[0],n=e.getSym();n!==null&&n.setSym(null),e.getFromNode().remove(e),e.remove(),this.dirEdges.remove(e)}else if(arguments[0]instanceof on){for(var r=arguments[0],s=r.getOutEdges().getEdges(),a=s.iterator();a.hasNext();){var c=a.next(),n=c.getSym();n!==null&&this.remove(n),this.dirEdges.remove(c);var f=c.getEdge();f!==null&&this.edges.remove(f)}this.nodeMap.remove(r.getCoordinate()),r.remove()}},findNode:function(t){return this.nodeMap.find(t)},getEdges:function(){return this.edges},nodeIterator:function(){return this.nodeMap.iterator()},contains:function(){if(arguments[0]instanceof Xe){var t=arguments[0];return this.edges.contains(t)}if(arguments[0]instanceof ye){var e=arguments[0];return this.dirEdges.contains(e)}},add:function(){if(arguments[0]instanceof on){var t=arguments[0];this.nodeMap.add(t)}else if(arguments[0]instanceof Xe){var e=arguments[0];this.edges.add(e),this.add(e.getDirEdge(0)),this.add(e.getDirEdge(1))}else if(arguments[0]instanceof ye){var n=arguments[0];this.dirEdges.add(n)}},getNodes:function(){return this.nodeMap.values()},interfaces_:function(){return[]},getClass:function(){return Ei}}),S(ys,Ei),u(ys.prototype,{addEdge:function(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<=1)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),a=this.getNode(r),c=new or(s,a,e[1],!0),f=new or(a,s,e[e.length-2],!1),y=new vs(t);y.setDirectedEdges(c,f),this.add(y)},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new on(t),this.add(e)),e},interfaces_:function(){return[]},getClass:function(){return ys}}),u(ko.prototype,{buildEdgeStringsForUnprocessedNodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.isMarked()||(T.isTrue(e.getDegree()===2),this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForNonDegree2Nodes:function(){for(var t=this.graph.getNodes().iterator();t.hasNext();){var e=t.next();e.getDegree()!==2&&(this.buildEdgeStringsStartingAt(e),e.setMarked(!0))}},buildEdgeStringsForObviousStartNodes:function(){this.buildEdgeStringsForNonDegree2Nodes()},getMergedLineStrings:function(){return this.merge(),this.mergedLineStrings},buildEdgeStringsStartingAt:function(t){for(var e=t.getOutEdges().iterator();e.hasNext();){var n=e.next();n.getEdge().isMarked()||this.edgeStrings.add(this.buildEdgeStringStartingWith(n))}},merge:function(){if(this.mergedLineStrings!==null)return null;Se.setMarked(this.graph.nodeIterator(),!1),Se.setMarked(this.graph.edgeIterator(),!1),this.edgeStrings=new P,this.buildEdgeStringsForObviousStartNodes(),this.buildEdgeStringsForIsolatedLoops(),this.mergedLineStrings=new P;for(var t=this.edgeStrings.iterator();t.hasNext();){var e=t.next();this.mergedLineStrings.add(e.toLineString())}},buildEdgeStringStartingWith:function(t){var e=new Bo(this.factory),n=t;do e.add(n),n.getEdge().setMarked(!0),n=n.getNext();while(n!==null&&n!==t);return e},add:function(){if(arguments[0]instanceof H){var t=arguments[0];t.apply({interfaces_:function(){return[ge]},filter:function(a){a instanceof it&&this.add(a)}})}else if(U(arguments[0],X)){var e=arguments[0];this.mergedLineStrings=null;for(var n=e.iterator();n.hasNext();){var r=n.next();this.add(r)}}else if(arguments[0]instanceof it){var s=arguments[0];this.factory===null&&(this.factory=s.getFactory()),this.graph.addEdge(s)}},buildEdgeStringsForIsolatedLoops:function(){this.buildEdgeStringsForUnprocessedNodes()},interfaces_:function(){return[]},getClass:function(){return ko}});var _l=Object.freeze({LineMerger:ko}),bl=Object.freeze({OverlayOp:J});S(ar,ye),u(ar.prototype,{getNext:function(){return this.next},isInRing:function(){return this.edgeRing!==null},setRing:function(t){this.edgeRing=t},setLabel:function(t){this.label=t},getLabel:function(){return this.label},setNext:function(t){this.next=t},getRing:function(){return this.edgeRing},interfaces_:function(){return[]},getClass:function(){return ar}}),S(xs,Xe),u(xs.prototype,{getLine:function(){return this.line},interfaces_:function(){return[]},getClass:function(){return xs}}),u(be.prototype,{isIncluded:function(){return this._isIncluded},getCoordinates:function(){if(this.ringPts===null){for(var t=new A,e=this.deList.iterator();e.hasNext();){var n=e.next(),r=n.getEdge();be.addEdge(r.getLine().getCoordinates(),n.getEdgeDirection(),t)}this.ringPts=t.toCoordinateArray()}return this.ringPts},isIncludedSet:function(){return this._isIncludedSet},isValid:function(){return this.getCoordinates(),this.ringPts.length<=3?!1:(this.getRing(),this.ring.isValid())},build:function(t){var e=t;do this.add(e),e.setRing(this),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t)},isOuterHole:function(){return this._isHole?!this.hasShell():!1},getPolygon:function(){var t=null;if(this.holes!==null){t=new Array(this.holes.size()).fill(null);for(var e=0;e<this.holes.size();e++)t[e]=this.holes.get(e)}var n=this.factory.createPolygon(this.ring,t);return n},isHole:function(){return this._isHole},isProcessed:function(){return this._isProcessed},addHole:function(){if(arguments[0]instanceof Pt){var t=arguments[0];this.holes===null&&(this.holes=new P),this.holes.add(t)}else if(arguments[0]instanceof be){var e=arguments[0];e.setShell(this);var n=e.getRing();this.holes===null&&(this.holes=new P),this.holes.add(n)}},setIncluded:function(t){this._isIncluded=t,this._isIncludedSet=!0},getOuterHole:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing();if(n.isOuterHole())return n}return null},computeHole:function(){var t=this.getRing();this._isHole=k.isCCW(t.getCoordinates())},hasShell:function(){return this.shell!==null},isOuterShell:function(){return this.getOuterHole()!==null},getLineString:function(){return this.getCoordinates(),this.factory.createLineString(this.ringPts)},toString:function(){return Wt.toLineString(new pe(this.getCoordinates()))},getShell:function(){return this.isHole()?this.shell:this},add:function(t){this.deList.add(t)},getRing:function(){if(this.ring!==null)return this.ring;this.getCoordinates(),this.ringPts.length<3&&mt.out.println(this.ringPts);try{this.ring=this.factory.createLinearRing(this.ringPts)}catch(t){if(!(t instanceof z))throw t;mt.out.println(this.ringPts)}finally{}return this.ring},updateIncluded:function(){if(this.isHole())return null;for(var t=0;t<this.deList.size();t++){var e=this.deList.get(t),n=e.getSym().getRing().getShell();if(n!==null&&n.isIncludedSet())return this.setIncluded(!n.isIncluded()),null}},setShell:function(t){this.shell=t},setProcessed:function(t){this._isProcessed=t},interfaces_:function(){return[]},getClass:function(){return be}}),be.findDirEdgesInRing=function(t){var e=t,n=new P;do n.add(e),e=e.getNext(),T.isTrue(e!==null,"found null DE in ring"),T.isTrue(e===t||!e.isInRing(),"found DE already in ring");while(e!==t);return n},be.addEdge=function(t,e,n){if(e)for(var r=0;r<t.length;r++)n.add(t[r],!1);else for(var r=t.length-1;r>=0;r--)n.add(t[r],!1)},be.findEdgeRingContaining=function(t,e){for(var n=t.getRing(),r=n.getEnvelopeInternal(),s=n.getCoordinateN(0),a=null,c=null,f=e.iterator();f.hasNext();){var y=f.next(),L=y.getRing(),M=L.getEnvelopeInternal();if(!M.equals(r)&&M.contains(r)){s=Q.ptNotInList(n.getCoordinates(),L.getCoordinates());var D=!1;k.isPointInRing(s,L.getCoordinates())&&(D=!0),D&&(a===null||c.contains(M))&&(a=y,c=a.getRing().getEnvelopeInternal())}}return a},u(Uo.prototype,{compare:function(t,e){var n=t,r=e;return n.getRing().getEnvelope().compareTo(r.getRing().getEnvelope())},interfaces_:function(){return[x]},getClass:function(){return Uo}}),be.EnvelopeComparator=Uo,S(Ft,Ei),u(Ft.prototype,{findEdgeRing:function(t){var e=new be(this.factory);return e.build(t),e},computeDepthParity:function(){if(arguments.length===0)for(;;){var t=null;if(t===null)return null;this.computeDepthParity(t)}},computeNextCWEdges:function(){for(var t=this.nodeIterator();t.hasNext();){var e=t.next();Ft.computeNextCWEdges(e)}},addEdge:function(t){if(t.isEmpty())return null;var e=Q.removeRepeatedPoints(t.getCoordinates());if(e.length<2)return null;var n=e[0],r=e[e.length-1],s=this.getNode(n),a=this.getNode(r),c=new ar(s,a,e[1],!0),f=new ar(a,s,e[e.length-2],!1),y=new xs(t);y.setDirectedEdges(c,f),this.add(y)},deleteCutEdges:function(){this.computeNextCWEdges(),Ft.findLabeledEdgeRings(this.dirEdges);for(var t=new P,e=this.dirEdges.iterator();e.hasNext();){var n=e.next();if(!n.isMarked()){var r=n.getSym();if(n.getLabel()===r.getLabel()){n.setMarked(!0),r.setMarked(!0);var s=n.getEdge();t.add(s.getLine())}}}return t},getEdgeRings:function(){this.computeNextCWEdges(),Ft.label(this.dirEdges,-1);var t=Ft.findLabeledEdgeRings(this.dirEdges);this.convertMaximalToMinimalEdgeRings(t);for(var e=new P,n=this.dirEdges.iterator();n.hasNext();){var r=n.next();if(!r.isMarked()&&!r.isInRing()){var s=this.findEdgeRing(r);e.add(s)}}return e},getNode:function(t){var e=this.findNode(t);return e===null&&(e=new on(t),this.add(e)),e},convertMaximalToMinimalEdgeRings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getLabel(),s=Ft.findIntersectionNodes(n,r);if(s!==null)for(var a=s.iterator();a.hasNext();){var c=a.next();Ft.computeNextCCWEdges(c,r)}}},deleteDangles:function(){for(var t=this.findNodesOfDegree(1),e=new kt,n=new jt,r=t.iterator();r.hasNext();)n.push(r.next());for(;!n.isEmpty();){var s=n.pop();Ft.deleteAllEdges(s);for(var a=s.getOutEdges().getEdges(),r=a.iterator();r.hasNext();){var c=r.next();c.setMarked(!0);var f=c.getSym();f!==null&&f.setMarked(!0);var y=c.getEdge();e.add(y.getLine());var L=c.getToNode();Ft.getDegreeNonDeleted(L)===1&&n.push(L)}}return e},interfaces_:function(){return[]},getClass:function(){return Ft}}),Ft.findLabeledEdgeRings=function(t){for(var e=new P,n=1,r=t.iterator();r.hasNext();){var s=r.next();if(!(s.isMarked()||s.getLabel()>=0)){e.add(s);var a=be.findDirEdgesInRing(s);Ft.label(a,n),n++}}return e},Ft.getDegreeNonDeleted=function(t){for(var e=t.getOutEdges().getEdges(),n=0,r=e.iterator();r.hasNext();){var s=r.next();s.isMarked()||n++}return n},Ft.deleteAllEdges=function(t){for(var e=t.getOutEdges().getEdges(),n=e.iterator();n.hasNext();){var r=n.next();r.setMarked(!0);var s=r.getSym();s!==null&&s.setMarked(!0)}},Ft.label=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();r.setLabel(e)}},Ft.computeNextCWEdges=function(t){for(var e=t.getOutEdges(),n=null,r=null,s=e.getEdges().iterator();s.hasNext();){var a=s.next();if(!a.isMarked()){if(n===null&&(n=a),r!==null){var c=r.getSym();c.setNext(a)}r=a}}if(r!==null){var c=r.getSym();c.setNext(n)}},Ft.computeNextCCWEdges=function(t,e){for(var n=t.getOutEdges(),r=null,s=null,a=n.getEdges(),c=a.size()-1;c>=0;c--){var f=a.get(c),y=f.getSym(),L=null;f.getLabel()===e&&(L=f);var M=null;y.getLabel()===e&&(M=y),L===null&&M===null||(M!==null&&(s=M),L!==null&&(s!==null&&(s.setNext(L),s=null),r===null&&(r=L)))}s!==null&&(T.isTrue(r!==null),s.setNext(r))},Ft.getDegree=function(t,e){for(var n=t.getOutEdges().getEdges(),r=0,s=n.iterator();s.hasNext();){var a=s.next();a.getLabel()===e&&r++}return r},Ft.findIntersectionNodes=function(t,e){var n=t,r=null;do{var s=n.getFromNode();Ft.getDegree(s,e)>1&&(r===null&&(r=new P),r.add(s)),n=n.getNext(),T.isTrue(n!==null,"found null DE in ring"),T.isTrue(n===t||!n.isInRing(),"found DE already in ring")}while(n!==t);return r},u(ce.prototype,{getGeometry:function(){return this.geomFactory===null&&(this.geomFactory=new ot),this.polygonize(),this.extractOnlyPolygonal?this.geomFactory.buildGeometry(this.polyList):this.geomFactory.createGeometryCollection(ot.toGeometryArray(this.polyList))},getInvalidRingLines:function(){return this.polygonize(),this.invalidRingLines},findValidRings:function(t,e,n){for(var r=t.iterator();r.hasNext();){var s=r.next();s.isValid()?e.add(s):n.add(s.getLineString())}},polygonize:function(){if(this.polyList!==null||(this.polyList=new P,this.graph===null))return null;this.dangles=this.graph.deleteDangles(),this.cutEdges=this.graph.deleteCutEdges();var t=this.graph.getEdgeRings(),e=new P;this.invalidRingLines=new P,this.isCheckingRingsValid?this.findValidRings(t,e,this.invalidRingLines):e=t,this.findShellsAndHoles(e),ce.assignHolesToShells(this.holeList,this.shellList),We.sort(this.shellList,new be.EnvelopeComparator);var n=!0;this.extractOnlyPolygonal&&(ce.findDisjointShells(this.shellList),n=!1),this.polyList=ce.extractPolygons(this.shellList,n)},getDangles:function(){return this.polygonize(),this.dangles},getCutEdges:function(){return this.polygonize(),this.cutEdges},getPolygons:function(){return this.polygonize(),this.polyList},add:function(){if(U(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.add(n)}else if(arguments[0]instanceof it){var r=arguments[0];this.geomFactory=r.getFactory(),this.graph===null&&(this.graph=new Ft(this.geomFactory)),this.graph.addEdge(r)}else if(arguments[0]instanceof H){var s=arguments[0];s.apply(this.lineStringAdder)}},setCheckRingsValid:function(t){this.isCheckingRingsValid=t},findShellsAndHoles:function(t){this.holeList=new P,this.shellList=new P;for(var e=t.iterator();e.hasNext();){var n=e.next();n.computeHole(),n.isHole()?this.holeList.add(n):this.shellList.add(n)}},interfaces_:function(){return[]},getClass:function(){return ce}}),ce.findOuterShells=function(t){for(var e=t.iterator();e.hasNext();){var n=e.next(),r=n.getOuterHole();r===null||r.isProcessed()||(n.setIncluded(!0),r.setProcessed(!0))}},ce.extractPolygons=function(t,e){for(var n=new P,r=t.iterator();r.hasNext();){var s=r.next();(e||s.isIncluded())&&n.add(s.getPolygon())}return n},ce.assignHolesToShells=function(t,e){for(var n=t.iterator();n.hasNext();){var r=n.next();ce.assignHoleToShell(r,e)}},ce.assignHoleToShell=function(t,e){var n=be.findEdgeRingContaining(t,e);n!==null&&n.addHole(t)},ce.findDisjointShells=function(t){ce.findOuterShells(t);var e=null;do{e=!1;for(var n=t.iterator();n.hasNext();){var r=n.next();r.isIncludedSet()||(r.updateIncluded(),r.isIncludedSet()||(e=!0))}}while(e)},u(Es.prototype,{filter:function(t){t instanceof it&&this.p.add(t)},interfaces_:function(){return[ge]},getClass:function(){return Es}}),ce.LineStringAdder=Es;var Dl=Object.freeze({Polygonizer:ce});u(Is.prototype,{createEdgeEndForNext:function(t,e,n,r){var s=n.segmentIndex+1;if(s>=t.getNumPoints()&&r===null)return null;var a=t.getCoordinate(s);r!==null&&r.segmentIndex===n.segmentIndex&&(a=r.coord);var c=new ze(t,n.coord,a,new Mt(t.getLabel()));e.add(c)},createEdgeEndForPrev:function(t,e,n,r){var s=n.segmentIndex;if(n.dist===0){if(s===0)return null;s--}var a=t.getCoordinate(s);r!==null&&r.segmentIndex>=s&&(a=r.coord);var c=new Mt(t.getLabel());c.flip();var f=new ze(t,n.coord,a,c);e.add(f)},computeEdgeEnds:function(){if(arguments.length===1){for(var t=arguments[0],e=new P,n=t;n.hasNext();){var r=n.next();this.computeEdgeEnds(r,e)}return e}if(arguments.length===2){var s=arguments[0],a=arguments[1],c=s.getEdgeIntersectionList();c.addEndpoints();var f=c.iterator(),y=null,L=null;if(!f.hasNext())return null;var M=f.next();do y=L,L=M,M=null,f.hasNext()&&(M=f.next()),L!==null&&(this.createEdgeEndForPrev(s,a,L,y),this.createEdgeEndForNext(s,a,L,M));while(L!==null)}},interfaces_:function(){return[]},getClass:function(){return Is}}),S(ur,ze),u(ur.prototype,{insert:function(t){this.edgeEnds.add(t)},print:function(t){t.println("EdgeEndBundle--> Label: "+this.label);for(var e=this.iterator();e.hasNext();){var n=e.next();n.print(t),t.println()}},iterator:function(){return this.edgeEnds.iterator()},getEdgeEnds:function(){return this.edgeEnds},computeLabelOn:function(t,e){for(var n=0,r=!1,s=this.iterator();s.hasNext();){var a=s.next(),c=a.getLabel().getLocation(t);c===v.BOUNDARY&&n++,c===v.INTERIOR&&(r=!0)}var c=v.NONE;r&&(c=v.INTERIOR),n>0&&(c=ue.determineBoundary(e,n)),this.label.setLocation(t,c)},computeLabelSide:function(t,e){for(var n=this.iterator();n.hasNext();){var r=n.next();if(r.getLabel().isArea()){var s=r.getLabel().getLocation(t,e);if(s===v.INTERIOR)return this.label.setLocation(t,e,v.INTERIOR),null;s===v.EXTERIOR&&this.label.setLocation(t,e,v.EXTERIOR)}}},getLabel:function(){return this.label},computeLabelSides:function(t){this.computeLabelSide(t,V.LEFT),this.computeLabelSide(t,V.RIGHT)},updateIM:function(t){Ce.updateIM(this.label,t)},computeLabel:function(t){for(var e=!1,n=this.iterator();n.hasNext();){var r=n.next();r.getLabel().isArea()&&(e=!0)}e?this.label=new Mt(v.NONE,v.NONE,v.NONE):this.label=new Mt(v.NONE);for(var s=0;2>s;s++)this.computeLabelOn(s,t),e&&this.computeLabelSides(s)},interfaces_:function(){return[]},getClass:function(){return ur}}),S(Ns,Kn),u(Ns.prototype,{updateIM:function(t){for(var e=this.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}},insert:function(t){var e=this.edgeMap.get(t);e===null?(e=new ur(t),this.insertEdgeEnd(t,e)):e.insert(t)},interfaces_:function(){return[]},getClass:function(){return Ns}}),S(Cs,nn),u(Cs.prototype,{updateIMFromEdges:function(t){this.edges.updateIM(t)},computeIM:function(t){t.setAtLeastIfValid(this.label.getLocation(0),this.label.getLocation(1),0)},interfaces_:function(){return[]},getClass:function(){return Cs}}),S(lr,Jn),u(lr.prototype,{createNode:function(t){return new Cs(t,new Ns)},interfaces_:function(){return[]},getClass:function(){return lr}}),u(ws.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},computeProperIntersectionIM:function(t,e){var n=this.arg[0].getGeometry().getDimension(),r=this.arg[1].getGeometry().getDimension(),s=t.hasProperIntersection(),a=t.hasProperInteriorIntersection();n===2&&r===2?s&&e.setAtLeast("212101212"):n===2&&r===1?(s&&e.setAtLeast("FFF0FFFF2"),a&&e.setAtLeast("1FFFFF1FF")):n===1&&r===2?(s&&e.setAtLeast("F0FFFFFF2"),a&&e.setAtLeast("1F1FFFFFF")):n===1&&r===1&&a&&e.setAtLeast("0FFFFFFFF")},labelIsolatedEdges:function(t,e){for(var n=this.arg[t].getEdgeIterator();n.hasNext();){var r=n.next();r.isIsolated()&&(this.labelIsolatedEdge(r,e,this.arg[e].getGeometry()),this.isolatedEdges.add(r))}},labelIsolatedEdge:function(t,e,n){if(n.getDimension()>0){var r=this.ptLocator.locate(t.getCoordinate(),n);t.getLabel().setAllLocations(e,r)}else t.getLabel().setAllLocations(e,v.EXTERIOR)},computeIM:function(){var t=new dt;if(t.set(v.EXTERIOR,v.EXTERIOR,2),!this.arg[0].getGeometry().getEnvelopeInternal().intersects(this.arg[1].getGeometry().getEnvelopeInternal()))return this.computeDisjointIM(t),t;this.arg[0].computeSelfNodes(this.li,!1),this.arg[1].computeSelfNodes(this.li,!1);var e=this.arg[0].computeEdgeIntersections(this.arg[1],this.li,!1);this.computeIntersectionNodes(0),this.computeIntersectionNodes(1),this.copyNodesAndLabels(0),this.copyNodesAndLabels(1),this.labelIsolatedNodes(),this.computeProperIntersectionIM(e,t);var n=new Is,r=n.computeEdgeEnds(this.arg[0].getEdgeIterator());this.insertEdgeEnds(r);var s=n.computeEdgeEnds(this.arg[1].getEdgeIterator());return this.insertEdgeEnds(s),this.labelNodeEdges(),this.labelIsolatedEdges(0,1),this.labelIsolatedEdges(1,0),this.updateIM(t),t},labelNodeEdges:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next();e.getEdges().computeLabelling(this.arg)}},copyNodesAndLabels:function(t){for(var e=this.arg[t].getNodeIterator();e.hasNext();){var n=e.next(),r=this.nodes.addNode(n.getCoordinate());r.setLabel(t,n.getLabel().getLocation(t))}},labelIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),c=this.nodes.find(a.coord);c.getLabel().isNull(t)&&(r===v.BOUNDARY?c.setLabelBoundary(t):c.setLabel(t,v.INTERIOR))}},labelIsolatedNode:function(t,e){var n=this.ptLocator.locate(t.getCoordinate(),this.arg[e].getGeometry());t.getLabel().setAllLocations(e,n)},computeIntersectionNodes:function(t){for(var e=this.arg[t].getEdgeIterator();e.hasNext();)for(var n=e.next(),r=n.getLabel().getLocation(t),s=n.getEdgeIntersectionList().iterator();s.hasNext();){var a=s.next(),c=this.nodes.addNode(a.coord);r===v.BOUNDARY?c.setLabelBoundary(t):c.getLabel().isNull(t)&&c.setLabel(t,v.INTERIOR)}},labelIsolatedNodes:function(){for(var t=this.nodes.iterator();t.hasNext();){var e=t.next(),n=e.getLabel();T.isTrue(n.getGeometryCount()>0,"node with empty label found"),e.isIsolated()&&(n.isNull(0)?this.labelIsolatedNode(e,0):this.labelIsolatedNode(e,1))}},updateIM:function(t){for(var e=this.isolatedEdges.iterator();e.hasNext();){var n=e.next();n.updateIM(t)}for(var r=this.nodes.iterator();r.hasNext();){var s=r.next();s.updateIM(t),s.updateIMFromEdges(t)}},computeDisjointIM:function(t){var e=this.arg[0].getGeometry();e.isEmpty()||(t.set(v.INTERIOR,v.EXTERIOR,e.getDimension()),t.set(v.BOUNDARY,v.EXTERIOR,e.getBoundaryDimension()));var n=this.arg[1].getGeometry();n.isEmpty()||(t.set(v.EXTERIOR,v.INTERIOR,n.getDimension()),t.set(v.EXTERIOR,v.BOUNDARY,n.getBoundaryDimension()))},interfaces_:function(){return[]},getClass:function(){return ws}}),u(hr.prototype,{isContainedInBoundary:function(t){if(t instanceof vt)return!1;if(t instanceof wt)return this.isPointContainedInBoundary(t);if(t instanceof it)return this.isLineStringContainedInBoundary(t);for(var e=0;e<t.getNumGeometries();e++){var n=t.getGeometryN(e);if(!this.isContainedInBoundary(n))return!1}return!0},isLineSegmentContainedInBoundary:function(t,e){if(t.equals(e))return this.isPointContainedInBoundary(t);if(t.x===e.x){if(t.x===this.rectEnv.getMinX()||t.x===this.rectEnv.getMaxX())return!0}else if(t.y===e.y&&(t.y===this.rectEnv.getMinY()||t.y===this.rectEnv.getMaxY()))return!0;return!1},isLineStringContainedInBoundary:function(t){for(var e=t.getCoordinateSequence(),n=new I,r=new I,s=0;s<e.size()-1;s++)if(e.getCoordinate(s,n),e.getCoordinate(s+1,r),!this.isLineSegmentContainedInBoundary(n,r))return!1;return!0},isPointContainedInBoundary:function(){if(arguments[0]instanceof wt){var t=arguments[0];return this.isPointContainedInBoundary(t.getCoordinate())}if(arguments[0]instanceof I){var e=arguments[0];return e.x===this.rectEnv.getMinX()||e.x===this.rectEnv.getMaxX()||e.y===this.rectEnv.getMinY()||e.y===this.rectEnv.getMaxY()}},contains:function(t){return this.rectEnv.contains(t.getEnvelopeInternal())?!this.isContainedInBoundary(t):!1},interfaces_:function(){return[]},getClass:function(){return hr}}),hr.contains=function(t,e){var n=new hr(t);return n.contains(e)},u(Xo.prototype,{intersects:function(t,e){var n=new O(t,e);if(!this.rectEnv.intersects(n))return!1;if(this.rectEnv.intersects(t)||this.rectEnv.intersects(e))return!0;if(t.compareTo(e)>0){var r=t;t=e,e=r}var s=!1;return e.y>t.y&&(s=!0),s?this.li.computeIntersection(t,e,this.diagDown0,this.diagDown1):this.li.computeIntersection(t,e,this.diagUp0,this.diagUp1),!!this.li.hasIntersection()},interfaces_:function(){return[]},getClass:function(){return Xo}}),u(bn.prototype,{applyTo:function(t){for(var e=0;e<t.getNumGeometries()&&!this._isDone;e++){var n=t.getGeometryN(e);if(n instanceof ut)this.applyTo(n);else if(this.visit(n),this.isDone())return this._isDone=!0,null}},interfaces_:function(){return[]},getClass:function(){return bn}}),u(Ii.prototype,{intersects:function(t){if(!this.rectEnv.intersects(t.getEnvelopeInternal()))return!1;var e=new Ss(this.rectEnv);if(e.applyTo(t),e.intersects())return!0;var n=new Ls(this.rectangle);if(n.applyTo(t),n.containsPoint())return!0;var r=new Rs(this.rectangle);return r.applyTo(t),!!r.intersects()},interfaces_:function(){return[]},getClass:function(){return Ii}}),Ii.intersects=function(t,e){var n=new Ii(t);return n.intersects(e)},S(Ss,bn),u(Ss.prototype,{isDone:function(){return this._intersects===!0},visit:function(t){var e=t.getEnvelopeInternal();return this.rectEnv.intersects(e)?this.rectEnv.contains(e)?(this._intersects=!0,null):e.getMinX()>=this.rectEnv.getMinX()&&e.getMaxX()<=this.rectEnv.getMaxX()?(this._intersects=!0,null):e.getMinY()>=this.rectEnv.getMinY()&&e.getMaxY()<=this.rectEnv.getMaxY()?(this._intersects=!0,null):void 0:null},intersects:function(){return this._intersects},interfaces_:function(){return[]},getClass:function(){return Ss}}),S(Ls,bn),u(Ls.prototype,{isDone:function(){return this._containsPoint===!0},visit:function(t){if(!(t instanceof vt))return null;var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;for(var n=new I,r=0;4>r;r++)if(this.rectSeq.getCoordinate(r,n),e.contains(n)&&ve.containsPointInPolygon(n,t))return this._containsPoint=!0,null},containsPoint:function(){return this._containsPoint},interfaces_:function(){return[]},getClass:function(){return Ls}}),S(Rs,bn),u(Rs.prototype,{intersects:function(){return this.hasIntersection},isDone:function(){return this.hasIntersection===!0},visit:function(t){var e=t.getEnvelopeInternal();if(!this.rectEnv.intersects(e))return null;var n=$t.getLines(t);this.checkIntersectionWithLineStrings(n)},checkIntersectionWithLineStrings:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();if(this.checkIntersectionWithSegments(n),this.hasIntersection)return null}},checkIntersectionWithSegments:function(t){for(var e=t.getCoordinateSequence(),n=1;n<e.size();n++)if(e.getCoordinate(n-1,this.p0),e.getCoordinate(n,this.p1),this.rectIntersector.intersects(this.p0,this.p1))return this.hasIntersection=!0,null},interfaces_:function(){return[]},getClass:function(){return Rs}}),S(gt,Ln),u(gt.prototype,{getIntersectionMatrix:function(){return this._relate.computeIM()},interfaces_:function(){return[]},getClass:function(){return gt}}),gt.covers=function(t,e){return t.getEnvelopeInternal().covers(e.getEnvelopeInternal())?t.isRectangle()?!0:gt.relate(t,e).isCovers():!1},gt.intersects=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?t.isRectangle()?Ii.intersects(t,e):e.isRectangle()?Ii.intersects(e,t):gt.relate(t,e).isIntersects():!1},gt.touches=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?gt.relate(t,e).isTouches(t.getDimension(),e.getDimension()):!1},gt.within=function(t,e){return e.contains(t)},gt.coveredBy=function(t,e){return gt.covers(e,t)},gt.relate=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new gt(t,e),r=n.getIntersectionMatrix();return r}if(arguments.length===3){if(typeof arguments[2]=="string"&&arguments[0]instanceof H&&arguments[1]instanceof H){var s=arguments[0],a=arguments[1],c=arguments[2];return gt.relateWithCheck(s,a).matches(c)}if(U(arguments[2],Bt)&&arguments[0]instanceof H&&arguments[1]instanceof H){var f=arguments[0],y=arguments[1],L=arguments[2],n=new gt(f,y,L),r=n.getIntersectionMatrix();return r}}},gt.overlaps=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?gt.relate(t,e).isOverlaps(t.getDimension(),e.getDimension()):!1},gt.disjoint=function(t,e){return!t.intersects(e)},gt.relateWithCheck=function(t,e){return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),gt.relate(t,e)},gt.crosses=function(t,e){return t.getEnvelopeInternal().intersects(e.getEnvelopeInternal())?gt.relate(t,e).isCrosses(t.getDimension(),e.getDimension()):!1},gt.contains=function(t,e){return t.getEnvelopeInternal().contains(e.getEnvelopeInternal())?t.isRectangle()?hr.contains(t,e):gt.relate(t,e).isContains():!1};var Al=Object.freeze({RelateOp:gt});u(xe.prototype,{extractElements:function(t,e){if(t===null)return null;for(var n=0;n<t.getNumGeometries();n++){var r=t.getGeometryN(n);this.skipEmpty&&r.isEmpty()||e.add(r)}},combine:function(){for(var t=new P,e=this.inputGeoms.iterator();e.hasNext();){var n=e.next();this.extractElements(n,t)}return t.size()===0?this.geomFactory!==null?this.geomFactory.createGeometryCollection(null):null:this.geomFactory.buildGeometry(t)},interfaces_:function(){return[]},getClass:function(){return xe}}),xe.combine=function(){if(arguments.length===1){var t=arguments[0],e=new xe(t);return e.combine()}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=new xe(xe.createList(n,r));return e.combine()}if(arguments.length===3){var s=arguments[0],a=arguments[1],c=arguments[2],e=new xe(xe.createList(s,a,c));return e.combine()}},xe.extractFactory=function(t){return t.isEmpty()?null:t.iterator().next().getFactory()},xe.createList=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1],n=new P;return n.add(t),n.add(e),n}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2],n=new P;return n.add(r),n.add(s),n.add(a),n}},u(cr.prototype,{union:function(){for(var t=new Wn,e=new Kt,n=0;n<this.pointGeom.getNumGeometries();n++){var r=this.pointGeom.getGeometryN(n),s=r.getCoordinate(),a=t.locate(s,this.otherGeom);a===v.EXTERIOR&&e.add(s)}if(e.size()===0)return this.otherGeom;var c=null,f=Q.toCoordinateArray(e);return c=f.length===1?this.geomFact.createPoint(f[0]):this.geomFact.createMultiPointFromCoords(f),xe.combine(c,this.otherGeom)},interfaces_:function(){return[]},getClass:function(){return cr}}),cr.union=function(t,e){var n=new cr(t,e);return n.union()},u(Dn.prototype,{filter:function(t){this.sortIndex!==-1&&t.getSortIndex()!==this.sortIndex||this.comps.add(t)},interfaces_:function(){return[Je]},getClass:function(){return Dn}}),Dn.extract=function(){if(arguments.length===2){var t=arguments[0],e=arguments[1];return Dn.extract(t,e,new P)}if(arguments.length===3){var n=arguments[0],r=arguments[1],s=arguments[2];return n.getSortIndex()===r?s.add(n):n instanceof ut&&n.apply(new Dn(r,s)),s}},u(Le.prototype,{reduceToGeometries:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next(),s=null;U(r,w)?s=this.unionTree(r):r instanceof H&&(s=r),e.add(s)}return e},extractByEnvelope:function(t,e,n){for(var r=new P,s=0;s<e.getNumGeometries();s++){var a=e.getGeometryN(s);a.getEnvelopeInternal().intersects(t)?r.add(a):n.add(a)}return this.geomFactory.buildGeometry(r)},unionOptimized:function(t,e){var n=t.getEnvelopeInternal(),r=e.getEnvelopeInternal();if(!n.intersects(r)){var s=xe.combine(t,e);return s}if(t.getNumGeometries()<=1&&e.getNumGeometries()<=1)return this.unionActual(t,e);var a=n.intersection(r);return this.unionUsingEnvelopeIntersection(t,e,a)},union:function(){if(this.inputPolys===null)throw new IllegalStateException("union() method cannot be called twice");if(this.inputPolys.isEmpty())return null;this.geomFactory=this.inputPolys.iterator().next().getFactory();for(var t=new St(Le.STRTREE_NODE_CAPACITY),e=this.inputPolys.iterator();e.hasNext();){var n=e.next();t.insert(n.getEnvelopeInternal(),n)}this.inputPolys=null;var r=t.itemsTree(),s=this.unionTree(r);return s},binaryUnion:function(){if(arguments.length===1){var t=arguments[0];return this.binaryUnion(t,0,t.size())}if(arguments.length===3){var e=arguments[0],n=arguments[1],r=arguments[2];if(1>=r-n){var a=Le.getGeometry(e,n);return this.unionSafe(a,null)}if(r-n===2)return this.unionSafe(Le.getGeometry(e,n),Le.getGeometry(e,n+1));var s=Math.trunc((r+n)/2),a=this.binaryUnion(e,n,s),c=this.binaryUnion(e,s,r);return this.unionSafe(a,c)}},repeatedUnion:function(t){for(var e=null,n=t.iterator();n.hasNext();){var r=n.next();e=e===null?r.copy():e.union(r)}return e},unionSafe:function(t,e){return t===null&&e===null?null:t===null?e.copy():e===null?t.copy():this.unionOptimized(t,e)},unionActual:function(t,e){return Le.restrictToPolygons(t.union(e))},unionTree:function(t){var e=this.reduceToGeometries(t),n=this.binaryUnion(e);return n},unionUsingEnvelopeIntersection:function(t,e,n){var r=new P,s=this.extractByEnvelope(n,t,r),a=this.extractByEnvelope(n,e,r),c=this.unionActual(s,a);r.add(c);var f=xe.combine(r);return f},bufferUnion:function(){if(arguments.length===1){var t=arguments[0],e=t.get(0).getFactory(),n=e.buildGeometry(t),r=n.buffer(0);return r}if(arguments.length===2){var s=arguments[0],a=arguments[1],e=s.getFactory(),n=e.createGeometryCollection([s,a]),r=n.buffer(0);return r}},interfaces_:function(){return[]},getClass:function(){return Le}}),Le.restrictToPolygons=function(t){if(U(t,Ke))return t;var e=ei.getPolygons(t);return e.size()===1?e.get(0):t.getFactory().createMultiPolygon(ot.toPolygonArray(e))},Le.getGeometry=function(t,e){return e>=t.size()?null:t.get(e)},Le.union=function(t){var e=new Le(t);return e.union()},Le.STRTREE_NODE_CAPACITY=4,u(An.prototype,{unionNoOpt:function(t){var e=this.geomFact.createPoint();return Vt.overlayOp(t,e,J.UNION)},unionWithNull:function(t,e){return t===null&&e===null?null:e===null?t:t===null?e:t.union(e)},extract:function(){if(U(arguments[0],X))for(var t=arguments[0],e=t.iterator();e.hasNext();){var n=e.next();this.extract(n)}else if(arguments[0]instanceof H){var r=arguments[0];this.geomFact===null&&(this.geomFact=r.getFactory()),Dn.extract(r,H.SORTINDEX_POLYGON,this.polygons),Dn.extract(r,H.SORTINDEX_LINESTRING,this.lines),Dn.extract(r,H.SORTINDEX_POINT,this.points)}},union:function(){if(this.geomFact===null)return null;var e=null;if(this.points.size()>0){var n=this.geomFact.buildGeometry(this.points);e=this.unionNoOpt(n)}var r=null;if(this.lines.size()>0){var s=this.geomFact.buildGeometry(this.lines);r=this.unionNoOpt(s)}var a=null;this.polygons.size()>0&&(a=Le.union(this.polygons));var c=this.unionWithNull(r,a),f=null;return f=e===null?c:c===null?e:cr.union(e,c),f===null?this.geomFact.createGeometryCollection():f},interfaces_:function(){return[]},getClass:function(){return An}}),An.union=function(){if(arguments.length===1){if(U(arguments[0],X)){var t=arguments[0],e=new An(t);return e.union()}if(arguments[0]instanceof H){var n=arguments[0],e=new An(n);return e.union()}}else if(arguments.length===2){var r=arguments[0],s=arguments[1],e=new An(r,s);return e.union()}};var Fl=Object.freeze({UnaryUnionOp:An});u(gr.prototype,{visitInteriorRing:function(t,e){var n=t.getCoordinates(),r=n[0],s=gr.findDifferentPoint(n,r),a=e.findEdgeInSameDirection(r,s),c=e.findEdgeEnd(a),f=null;c.getLabel().getLocation(0,V.RIGHT)===v.INTERIOR?f=c:c.getSym().getLabel().getLocation(0,V.RIGHT)===v.INTERIOR&&(f=c.getSym()),T.isTrue(f!==null,"unable to find dirEdge with Interior on RHS"),this.visitLinkedDirectedEdges(f)},visitShellInteriors:function(t,e){if(t instanceof vt){var n=t;this.visitInteriorRing(n.getExteriorRing(),e)}if(t instanceof Ut)for(var r=t,s=0;s<r.getNumGeometries();s++){var n=r.getGeometryN(s);this.visitInteriorRing(n.getExteriorRing(),e)}},getCoordinate:function(){return this.disconnectedRingcoord},setInteriorEdgesInResult:function(t){for(var e=t.getEdgeEnds().iterator();e.hasNext();){var n=e.next();n.getLabel().getLocation(0,V.RIGHT)===v.INTERIOR&&n.setInResult(!0)}},visitLinkedDirectedEdges:function(t){var e=t,n=t;do T.isTrue(n!==null,"found null Directed Edge"),n.setVisited(!0),n=n.getNext();while(n!==e)},buildEdgeRings:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();if(r.isInResult()&&r.getEdgeRing()===null){var s=new Yi(r,this.geometryFactory);s.linkDirectedEdgesForMinimalEdgeRings();var a=s.buildMinimalRings();e.addAll(a)}}return e},hasUnvisitedShellEdge:function(t){for(var e=0;e<t.size();e++){var n=t.get(e);if(!n.isHole()){var r=n.getEdges(),s=r.get(0);if(s.getLabel().getLocation(0,V.RIGHT)===v.INTERIOR){for(var a=0;a<r.size();a++)if(s=r.get(a),!s.isVisited())return this.disconnectedRingcoord=s.getCoordinate(),!0}}}return!1},isInteriorsConnected:function(){var t=new P;this.geomGraph.computeSplitEdges(t);var e=new Ve(new mi);e.addEdges(t),this.setInteriorEdgesInResult(e),e.linkResultDirectedEdges();var n=this.buildEdgeRings(e.getEdgeEnds());return this.visitShellInteriors(this.geomGraph.getGeometry(),e),!this.hasUnvisitedShellEdge(n)},interfaces_:function(){return[]},getClass:function(){return gr}}),gr.findDifferentPoint=function(t,e){for(var n=0;n<t.length;n++)if(!t[n].equals(e))return t[n];return null},u(Ye.prototype,{hasChildren:function(){for(var t=0;2>t;t++)if(this.subnode[t]!==null)return!0;return!1},isPrunable:function(){return!(this.hasChildren()||this.hasItems())},addAllItems:function(t){t.addAll(this.items);for(var e=0;2>e;e++)this.subnode[e]!==null&&this.subnode[e].addAllItems(t);return t},size:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].size());return t+this.items.size()},addAllItemsFromOverlapping:function(t,e){return t===null||this.isSearchMatch(t)?(e.addAll(this.items),this.subnode[0]!==null&&this.subnode[0].addAllItemsFromOverlapping(t,e),void(this.subnode[1]!==null&&this.subnode[1].addAllItemsFromOverlapping(t,e))):null},hasItems:function(){return!this.items.isEmpty()},remove:function(t,e){if(!this.isSearchMatch(t))return!1;for(var n=!1,r=0;2>r;r++)if(this.subnode[r]!==null&&(n=this.subnode[r].remove(t,e))){this.subnode[r].isPrunable()&&(this.subnode[r]=null);break}return n||(n=this.items.remove(e))},getItems:function(){return this.items},depth:function(){for(var t=0,e=0;2>e;e++)if(this.subnode[e]!==null){var n=this.subnode[e].depth();n>t&&(t=n)}return t+1},nodeSize:function(){for(var t=0,e=0;2>e;e++)this.subnode[e]!==null&&(t+=this.subnode[e].nodeSize());return t+1},add:function(t){this.items.add(t)},interfaces_:function(){return[]},getClass:function(){return Ye}}),Ye.getSubnodeIndex=function(t,e){var n=-1;return t.min>=e&&(n=1),t.max<=e&&(n=0),n},u(an.prototype,{expandToInclude:function(t){t.max>this.max&&(this.max=t.max),t.min<this.min&&(this.min=t.min)},getWidth:function(){return this.max-this.min},overlaps:function(){if(arguments.length===1){var t=arguments[0];return this.overlaps(t.min,t.max)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return!(this.min>n||this.max<e)}},getMin:function(){return this.min},toString:function(){return"["+this.min+", "+this.max+"]"},contains:function(){if(arguments.length===1){if(arguments[0]instanceof an){var t=arguments[0];return this.contains(t.min,t.max)}if(typeof arguments[0]=="number"){var e=arguments[0];return e>=this.min&&e<=this.max}}else if(arguments.length===2){var n=arguments[0],r=arguments[1];return n>=this.min&&r<=this.max}},init:function(t,e){this.min=t,this.max=e,t>e&&(this.min=e,this.max=t)},getMax:function(){return this.max},interfaces_:function(){return[]},getClass:function(){return an}}),u(fr.prototype,{getInterval:function(){return this.interval},getLevel:function(){return this.level},computeKey:function(t){for(this.level=fr.computeLevel(t),this.interval=new an,this.computeInterval(this.level,t);!this.interval.contains(t);)this.level+=1,this.computeInterval(this.level,t)},computeInterval:function(t,e){var n=Qn.powerOf2(t);this.pt=Math.floor(e.getMin()/n)*n,this.interval.init(this.pt,this.pt+n)},getPoint:function(){return this.pt},interfaces_:function(){return[]},getClass:function(){return fr}}),fr.computeLevel=function(t){var e=t.getWidth(),n=Qn.exponent(e)+1;return n},S(vn,Ye),u(vn.prototype,{getInterval:function(){return this.interval},find:function(t){var e=Ye.getSubnodeIndex(t,this.centre);if(e===-1)return this;if(this.subnode[e]!==null){var n=this.subnode[e];return n.find(t)}return this},insert:function(t){T.isTrue(this.interval===null||this.interval.contains(t.interval));var e=Ye.getSubnodeIndex(t.interval,this.centre);if(t.level===this.level-1)this.subnode[e]=t;else{var n=this.createSubnode(e);n.insert(t),this.subnode[e]=n}},isSearchMatch:function(t){return t.overlaps(this.interval)},getSubnode:function(t){return this.subnode[t]===null&&(this.subnode[t]=this.createSubnode(t)),this.subnode[t]},getNode:function(t){var e=Ye.getSubnodeIndex(t,this.centre);if(e!==-1){var n=this.getSubnode(e);return n.getNode(t)}return this},createSubnode:function(t){var e=0,n=0;switch(t){case 0:e=this.interval.getMin(),n=this.centre;break;case 1:e=this.centre,n=this.interval.getMax()}var r=new an(e,n),s=new vn(r,this.level-1);return s},interfaces_:function(){return[]},getClass:function(){return vn}}),vn.createNode=function(t){var e=new fr(t),n=new vn(e.getInterval(),e.getLevel());return n},vn.createExpanded=function(t,e){var n=new an(e);t!==null&&n.expandToInclude(t.interval);var r=vn.createNode(n);return t!==null&&r.insert(t),r},S(Ni,Ye),u(Ni.prototype,{insert:function(t,e){var n=Ye.getSubnodeIndex(t,Ni.origin);if(n===-1)return this.add(e),null;var r=this.subnode[n];if(r===null||!r.getInterval().contains(t)){var s=vn.createExpanded(r,t);this.subnode[n]=s}this.insertContained(this.subnode[n],t,e)},isSearchMatch:function(t){return!0},insertContained:function(t,e,n){T.isTrue(t.getInterval().contains(e));var r=Pn.isZeroWidth(e.getMin(),e.getMax()),s=null;s=r?t.find(e):t.getNode(e),s.add(n)},interfaces_:function(){return[]},getClass:function(){return Ni}}),Ni.origin=0,u(Ci.prototype,{size:function(){return this.root!==null?this.root.size():0},insert:function(t,e){this.collectStats(t);var n=Ci.ensureExtent(t,this.minExtent);this.root.insert(n,e)},query:function(){if(arguments.length===1){if(typeof arguments[0]=="number"){var t=arguments[0];return this.query(new an(t,t))}if(arguments[0]instanceof an){var e=arguments[0],n=new P;return this.query(e,n),n}}else if(arguments.length===2){var r=arguments[0],s=arguments[1];this.root.addAllItemsFromOverlapping(r,s)}},iterator:function(){var t=new P;return this.root.addAllItems(t),t.iterator()},remove:function(t,e){var n=Ci.ensureExtent(t,this.minExtent);return this.root.remove(n,e)},collectStats:function(t){var e=t.getWidth();e<this.minExtent&&e>0&&(this.minExtent=e)},depth:function(){return this.root!==null?this.root.depth():0},nodeSize:function(){return this.root!==null?this.root.nodeSize():0},interfaces_:function(){return[]},getClass:function(){return Ci}}),Ci.ensureExtent=function(t,e){var n=t.getMin(),r=t.getMax();return n!==r?t:(n===r&&(n-=e/2,r=n+e/2),new an(n,r))},u(Yo.prototype,{isInside:function(t){},interfaces_:function(){return[]},getClass:function(){return Yo}}),u(Ts.prototype,{testLineSegment:function(t,e){var n=null,r=null,s=null,a=null,c=null,f=e.p0,y=e.p1;r=f.x-t.x,s=f.y-t.y,a=y.x-t.x,c=y.y-t.y,(s>0&&0>=c||c>0&&0>=s)&&(n=Xn.signOfDet2x2(r,s,a,c)/(c-s),n>0&&this.crossings++)},buildIndex:function(){this.tree=new Ci;for(var t=Q.removeRepeatedPoints(this.ring.getCoordinates()),e=Pe.getChains(t),n=0;n<e.size();n++){var r=e.get(n),s=r.getEnvelope();this.interval.min=s.getMinY(),this.interval.max=s.getMaxY(),this.tree.insert(this.interval,r)}},testMonotoneChain:function(t,e,n){n.select(t,e)},isInside:function(t){this.crossings=0;var e=new O(p.NEGATIVE_INFINITY,p.POSITIVE_INFINITY,t.y,t.y);this.interval.min=t.y,this.interval.max=t.y;for(var n=this.tree.query(this.interval),r=new dr(this,t),s=n.iterator();s.hasNext();){var a=s.next();this.testMonotoneChain(e,r,a)}return this.crossings%2===1},interfaces_:function(){return[Yo]},getClass:function(){return Ts}}),S(dr,_n),u(dr.prototype,{select:function(){if(arguments.length!==1)return _n.prototype.select.apply(this,arguments);var t=arguments[0];this.mcp.testLineSegment(this.p,t)},interfaces_:function(){return[]},getClass:function(){return dr}}),Ts.MCSelecter=dr,u(Ho.prototype,{insertEdgeEnds:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.nodes.add(n)}},getNodeIterator:function(){return this.nodes.iterator()},copyNodesAndLabels:function(t,e){for(var n=t.getNodeIterator();n.hasNext();){var r=n.next(),s=this.nodes.addNode(r.getCoordinate());s.setLabel(e,r.getLabel().getLocation(e))}},build:function(t){this.computeIntersectionNodes(t,0),this.copyNodesAndLabels(t,0);var e=new Is,n=e.computeEdgeEnds(t.getEdgeIterator());this.insertEdgeEnds(n)},computeIntersectionNodes:function(t,e){for(var n=t.getEdgeIterator();n.hasNext();)for(var r=n.next(),s=r.getLabel().getLocation(e),a=r.getEdgeIntersectionList().iterator();a.hasNext();){var c=a.next(),f=this.nodes.addNode(c.coord);s===v.BOUNDARY?f.setLabelBoundary(e):f.getLabel().isNull(e)&&f.setLabel(e,v.INTERIOR)}},interfaces_:function(){return[]},getClass:function(){return Ho}}),u(Wo.prototype,{isNodeEdgeAreaLabelsConsistent:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();){var e=t.next();if(!e.getEdges().isAreaLabelsConsistent(this.geomGraph))return this.invalidPoint=e.getCoordinate().copy(),!1}return!0},getInvalidPoint:function(){return this.invalidPoint},hasDuplicateRings:function(){for(var t=this.nodeGraph.getNodeIterator();t.hasNext();)for(var e=t.next(),n=e.getEdges().iterator();n.hasNext();){var r=n.next();if(r.getEdgeEnds().size()>1)return this.invalidPoint=r.getEdge().getCoordinate(0),!0}return!1},isNodeConsistentArea:function(){var t=this.geomGraph.computeSelfNodes(this.li,!0,!0);return t.hasProperIntersection()?(this.invalidPoint=t.getProperIntersectionPoint(),!1):(this.nodeGraph.build(this.geomGraph),this.isNodeEdgeAreaLabelsConsistent())},interfaces_:function(){return[]},getClass:function(){return Wo}}),u($o.prototype,{buildIndex:function(){this.index=new St;for(var t=0;t<this.rings.size();t++){var e=this.rings.get(t),n=e.getEnvelopeInternal();this.index.insert(n,e)}},getNestedPoint:function(){return this.nestedPt},isNonNested:function(){this.buildIndex();for(var t=0;t<this.rings.size();t++)for(var e=this.rings.get(t),n=e.getCoordinates(),r=this.index.query(e.getEnvelopeInternal()),s=0;s<r.size();s++){var a=r.get(s),c=a.getCoordinates();if(e!==a&&e.getEnvelopeInternal().intersects(a.getEnvelopeInternal())){var f=Re.findPtNotNode(n,a,this.graph);if(f!==null){var y=k.isPointInRing(f,c);if(y)return this.nestedPt=f,!1}}}return!0},add:function(t){this.rings.add(t),this.totalEnv.expandToInclude(t.getEnvelopeInternal())},interfaces_:function(){return[]},getClass:function(){return $o}}),u(lt.prototype,{getErrorType:function(){return this.errorType},getMessage:function(){return lt.errMsg[this.errorType]},getCoordinate:function(){return this.pt},toString:function(){var t="";return this.pt!==null&&(t=" at or near point "+this.pt),this.getMessage()+t},interfaces_:function(){return[]},getClass:function(){return lt}}),lt.ERROR=0,lt.REPEATED_POINT=1,lt.HOLE_OUTSIDE_SHELL=2,lt.NESTED_HOLES=3,lt.DISCONNECTED_INTERIOR=4,lt.SELF_INTERSECTION=5,lt.RING_SELF_INTERSECTION=6,lt.NESTED_SHELLS=7,lt.DUPLICATE_RINGS=8,lt.TOO_FEW_POINTS=9,lt.INVALID_COORDINATE=10,lt.RING_NOT_CLOSED=11,lt.errMsg=["Topology Validation Error","Repeated Point","Hole lies outside shell","Holes are nested","Interior is disconnected","Self-intersection","Ring Self-intersection","Nested shells","Duplicate Rings","Too few distinct points in geometry component","Invalid Coordinate","Ring is not closed"],u(Re.prototype,{checkInvalidCoordinates:function(){if(arguments[0]instanceof Array){for(var t=arguments[0],e=0;e<t.length;e++)if(!Re.isValid(t[e]))return this.validErr=new lt(lt.INVALID_COORDINATE,t[e]),null}else if(arguments[0]instanceof vt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getExteriorRing().getCoordinates()),this.validErr!==null)return null;for(var e=0;e<n.getNumInteriorRing();e++)if(this.checkInvalidCoordinates(n.getInteriorRingN(e).getCoordinates()),this.validErr!==null)return null}},checkHolesNotNested:function(t,e){for(var n=new $o(e),r=0;r<t.getNumInteriorRing();r++){var s=t.getInteriorRingN(r);n.add(s)}var a=n.isNonNested();a||(this.validErr=new lt(lt.NESTED_HOLES,n.getNestedPoint()))},checkConsistentArea:function(t){var e=new Wo(t),n=e.isNodeConsistentArea();return n?void(e.hasDuplicateRings()&&(this.validErr=new lt(lt.DUPLICATE_RINGS,e.getInvalidPoint()))):(this.validErr=new lt(lt.SELF_INTERSECTION,e.getInvalidPoint()),null)},isValid:function(){return this.checkValid(this.parentGeometry),this.validErr===null},checkShellInsideHole:function(t,e,n){var r=t.getCoordinates(),s=e.getCoordinates(),a=Re.findPtNotNode(r,e,n);if(a!==null){var c=k.isPointInRing(a,s);if(!c)return a}var f=Re.findPtNotNode(s,t,n);if(f!==null){var y=k.isPointInRing(f,r);return y?f:null}return T.shouldNeverReachHere("points in shell and hole appear to be equal"),null},checkNoSelfIntersectingRings:function(t){for(var e=t.getEdgeIterator();e.hasNext();){var n=e.next();if(this.checkNoSelfIntersectingRing(n.getEdgeIntersectionList()),this.validErr!==null)return null}},checkConnectedInteriors:function(t){var e=new gr(t);e.isInteriorsConnected()||(this.validErr=new lt(lt.DISCONNECTED_INTERIOR,e.getCoordinate()))},checkNoSelfIntersectingRing:function(t){for(var e=new Kt,n=!0,r=t.iterator();r.hasNext();){var s=r.next();if(n)n=!1;else{if(e.contains(s.coord))return this.validErr=new lt(lt.RING_SELF_INTERSECTION,s.coord),null;e.add(s.coord)}}},checkHolesInShell:function(t,e){for(var n=t.getExteriorRing(),r=new Ts(n),s=0;s<t.getNumInteriorRing();s++){var a=t.getInteriorRingN(s),c=Re.findPtNotNode(a.getCoordinates(),n,e);if(c===null)return null;var f=!r.isInside(c);if(f)return this.validErr=new lt(lt.HOLE_OUTSIDE_SHELL,c),null}},checkTooFewPoints:function(t){return t.hasTooFewPoints()?(this.validErr=new lt(lt.TOO_FEW_POINTS,t.getInvalidPoint()),null):void 0},getValidationError:function(){return this.checkValid(this.parentGeometry),this.validErr},checkValid:function(){if(arguments[0]instanceof wt){var t=arguments[0];this.checkInvalidCoordinates(t.getCoordinates())}else if(arguments[0]instanceof se){var e=arguments[0];this.checkInvalidCoordinates(e.getCoordinates())}else if(arguments[0]instanceof Pt){var n=arguments[0];if(this.checkInvalidCoordinates(n.getCoordinates()),this.validErr!==null||(this.checkClosedRing(n),this.validErr!==null))return null;var r=new ue(0,n);if(this.checkTooFewPoints(r),this.validErr!==null)return null;var s=new zt;r.computeSelfNodes(s,!0,!0),this.checkNoSelfIntersectingRings(r)}else if(arguments[0]instanceof it){var a=arguments[0];if(this.checkInvalidCoordinates(a.getCoordinates()),this.validErr!==null)return null;var r=new ue(0,a);this.checkTooFewPoints(r)}else if(arguments[0]instanceof vt){var c=arguments[0];if(this.checkInvalidCoordinates(c),this.validErr!==null||(this.checkClosedRings(c),this.validErr!==null))return null;var r=new ue(0,c);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null)||(this.checkHolesInShell(c,r),this.validErr!==null)||(this.checkHolesNotNested(c,r),this.validErr!==null))return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof Ut){for(var f=arguments[0],y=0;y<f.getNumGeometries();y++){var L=f.getGeometryN(y);if(this.checkInvalidCoordinates(L),this.validErr!==null||(this.checkClosedRings(L),this.validErr!==null))return null}var r=new ue(0,f);if(this.checkTooFewPoints(r),this.validErr!==null||(this.checkConsistentArea(r),this.validErr!==null)||!this.isSelfTouchingRingFormingHoleValid&&(this.checkNoSelfIntersectingRings(r),this.validErr!==null))return null;for(var y=0;y<f.getNumGeometries();y++){var L=f.getGeometryN(y);if(this.checkHolesInShell(L,r),this.validErr!==null)return null}for(var y=0;y<f.getNumGeometries();y++){var L=f.getGeometryN(y);if(this.checkHolesNotNested(L,r),this.validErr!==null)return null}if(this.checkShellsNotNested(f,r),this.validErr!==null)return null;this.checkConnectedInteriors(r)}else if(arguments[0]instanceof ut)for(var M=arguments[0],y=0;y<M.getNumGeometries();y++){var D=M.getGeometryN(y);if(this.checkValid(D),this.validErr!==null)return null}else if(arguments[0]instanceof H){var q=arguments[0];if(this.validErr=null,q.isEmpty())return null;if(q instanceof wt)this.checkValid(q);else if(q instanceof se)this.checkValid(q);else if(q instanceof Pt)this.checkValid(q);else if(q instanceof it)this.checkValid(q);else if(q instanceof vt)this.checkValid(q);else if(q instanceof Ut)this.checkValid(q);else{if(!(q instanceof ut))throw new UnsupportedOperationException(q.getClass().getName());this.checkValid(q)}}},setSelfTouchingRingFormingHoleValid:function(t){this.isSelfTouchingRingFormingHoleValid=t},checkShellNotNested:function(t,e,n){var r=t.getCoordinates(),s=e.getExteriorRing(),a=s.getCoordinates(),c=Re.findPtNotNode(r,s,n);if(c===null)return null;var f=k.isPointInRing(c,a);if(!f)return null;if(e.getNumInteriorRing()<=0)return this.validErr=new lt(lt.NESTED_SHELLS,c),null;for(var y=null,L=0;L<e.getNumInteriorRing();L++){var M=e.getInteriorRingN(L);if(y=this.checkShellInsideHole(t,M,n),y===null)return null}this.validErr=new lt(lt.NESTED_SHELLS,y)},checkClosedRings:function(t){if(this.checkClosedRing(t.getExteriorRing()),this.validErr!==null)return null;for(var e=0;e<t.getNumInteriorRing();e++)if(this.checkClosedRing(t.getInteriorRingN(e)),this.validErr!==null)return null},checkClosedRing:function(t){if(!t.isClosed()){var e=null;t.getNumPoints()>=1&&(e=t.getCoordinateN(0)),this.validErr=new lt(lt.RING_NOT_CLOSED,e)}},checkShellsNotNested:function(t,e){for(var n=0;n<t.getNumGeometries();n++)for(var r=t.getGeometryN(n),s=r.getExteriorRing(),a=0;a<t.getNumGeometries();a++)if(n!==a){var c=t.getGeometryN(a);if(this.checkShellNotNested(s,c,e),this.validErr!==null)return null}},interfaces_:function(){return[]},getClass:function(){return Re}}),Re.findPtNotNode=function(t,e,n){for(var r=n.findEdge(e),s=r.getEdgeIntersectionList(),a=0;a<t.length;a++){var c=t[a];if(!s.isIntersection(c))return c}return null},Re.isValid=function(){if(arguments[0]instanceof H){var t=arguments[0],e=new Re(t);return e.isValid()}if(arguments[0]instanceof I){var n=arguments[0];return p.isNaN(n.x)||p.isInfinite(n.x)||p.isNaN(n.y)?!1:!p.isInfinite(n.y)}};var Gl=Object.freeze({IsValidOp:Re}),ql=Object.freeze({BoundaryOp:gn,IsSimpleOp:Qi,buffer:Ol,distance:Ml,linemerge:_l,overlay:bl,polygonize:Dl,relate:Al,union:Fl,valid:Gl});S(Ps,de.CoordinateOperation),u(Ps.prototype,{editCoordinates:function(t,e){if(t.length===0)return null;for(var n=new Array(t.length).fill(null),r=0;r<t.length;r++){var s=new I(t[r]);this.targetPM.makePrecise(s),n[r]=s}var a=new A(n,!1),c=a.toCoordinateArray(),f=0;e instanceof it&&(f=2),e instanceof Pt&&(f=4);var y=n;return this.removeCollapsed&&(y=null),c.length<f?y:c},interfaces_:function(){return[]},getClass:function(){return Ps}}),u(ii.prototype,{fixPolygonalTopology:function(t){var e=t;this.changePrecisionModel||(e=this.changePM(t,this.targetPM));var n=e.buffer(0),r=n;return this.changePrecisionModel||(r=t.getFactory().createGeometry(n)),r},reducePointwise:function(t){var e=null;if(this.changePrecisionModel){var n=this.createFactory(t.getFactory(),this.targetPM);e=new de(n)}else e=new de;var r=this.removeCollapsed;t.getDimension()>=2&&(r=!0);var s=e.edit(t,new Ps(this.targetPM,r));return s},changePM:function(t,e){var n=this.createEditor(t.getFactory(),e);return n.edit(t,new de.NoOpGeometryOperation)},setRemoveCollapsedComponents:function(t){this.removeCollapsed=t},createFactory:function(t,e){var n=new ot(e,t.getSRID(),t.getCoordinateSequenceFactory());return n},setChangePrecisionModel:function(t){this.changePrecisionModel=t},reduce:function(t){var e=this.reducePointwise(t);return this.isPointwise?e:U(e,Ke)?e.isValid()?e:this.fixPolygonalTopology(e):e},setPointwise:function(t){this.isPointwise=t},createEditor:function(t,e){if(t.getPrecisionModel()===e)return new de;var n=this.createFactory(t,e),r=new de(n);return r},interfaces_:function(){return[]},getClass:function(){return ii}}),ii.reduce=function(t,e){var n=new ii(e);return n.reduce(t)},ii.reducePointwise=function(t,e){var n=new ii(e);return n.setPointwise(!0),n.reduce(t)};var Bl=Object.freeze({GeometryPrecisionReducer:ii});u(pr.prototype,{simplifySection:function(t,e){if(t+1===e)return null;this.seg.p0=this.pts[t],this.seg.p1=this.pts[e];for(var n=-1,r=t,s=t+1;e>s;s++){var a=this.seg.distance(this.pts[s]);a>n&&(n=a,r=s)}if(n<=this.distanceTolerance)for(var s=t+1;e>s;s++)this.usePt[s]=!1;else this.simplifySection(t,r),this.simplifySection(r,e)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(){this.usePt=new Array(this.pts.length).fill(null);for(var t=0;t<this.pts.length;t++)this.usePt[t]=!0;this.simplifySection(0,this.pts.length-1);for(var e=new A,t=0;t<this.pts.length;t++)this.usePt[t]&&e.add(new I(this.pts[t]));return e.toCoordinateArray()},interfaces_:function(){return[]},getClass:function(){return pr}}),pr.simplify=function(t,e){var n=new pr(t);return n.setDistanceTolerance(e),n.simplify()},u(wi.prototype,{setEnsureValid:function(t){this.isEnsureValidTopology=t},getResultGeometry:function(){return this.inputGeom.isEmpty()?this.inputGeom.copy():new mr(this.isEnsureValidTopology,this.distanceTolerance).transform(this.inputGeom)},setDistanceTolerance:function(t){if(0>t)throw new d;this.distanceTolerance=t},interfaces_:function(){return[]},getClass:function(){return wi}}),wi.simplify=function(t,e){var n=new wi(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S(mr,ee),u(mr.prototype,{transformPolygon:function(t,e){if(t.isEmpty())return null;var n=ee.prototype.transformPolygon.call(this,t,e);return e instanceof Ut?n:this.createValidArea(n)},createValidArea:function(t){return this.isEnsureValidTopology?t.buffer(0):t},transformCoordinates:function(t,e){var n=t.toCoordinateArray(),r=null;return r=n.length===0?new Array(0).fill(null):pr.simplify(n,this.distanceTolerance),this.factory.getCoordinateSequenceFactory().create(r)},transformMultiPolygon:function(t,e){var n=ee.prototype.transformMultiPolygon.call(this,t,e);return this.createValidArea(n)},transformLinearRing:function(t,e){var n=e instanceof vt,r=ee.prototype.transformLinearRing.call(this,t,e);return!n||r instanceof Pt?r:null},interfaces_:function(){return[]},getClass:function(){return mr}}),wi.DPTransformer=mr,S(vr,et),u(vr.prototype,{getIndex:function(){return this.index},getParent:function(){return this.parent},interfaces_:function(){return[]},getClass:function(){return vr}}),u(yn.prototype,{addToResult:function(t){this.resultSegs.add(t)},asLineString:function(){return this.parentLine.getFactory().createLineString(yn.extractCoordinates(this.resultSegs))},getResultSize:function(){var t=this.resultSegs.size();return t===0?0:t+1},getParent:function(){return this.parentLine},getSegment:function(t){return this.segs[t]},getParentCoordinates:function(){return this.parentLine.getCoordinates()},getMinimumSize:function(){return this.minimumSize},asLinearRing:function(){return this.parentLine.getFactory().createLinearRing(yn.extractCoordinates(this.resultSegs))},getSegments:function(){return this.segs},init:function(){var t=this.parentLine.getCoordinates();this.segs=new Array(t.length-1).fill(null);for(var e=0;e<t.length-1;e++){var n=new vr(t[e],t[e+1],this.parentLine,e);this.segs[e]=n}},getResultCoordinates:function(){return yn.extractCoordinates(this.resultSegs)},interfaces_:function(){return[]},getClass:function(){return yn}}),yn.extractCoordinates=function(t){for(var e=new Array(t.size()+1).fill(null),n=null,r=0;r<t.size();r++)n=t.get(r),e[r]=n.p0;return e[e.length-1]=n.p1,e},u(Si.prototype,{remove:function(t){this.index.remove(new O(t.p0,t.p1),t)},add:function(){if(arguments[0]instanceof yn)for(var t=arguments[0],e=t.getSegments(),n=0;n<e.length;n++){var r=e[n];this.add(r)}else if(arguments[0]instanceof et){var s=arguments[0];this.index.insert(new O(s.p0,s.p1),s)}},query:function(t){var e=new O(t.p0,t.p1),n=new Zo(t);this.index.query(e,n);var r=n.getItems();return r},interfaces_:function(){return[]},getClass:function(){return Si}}),u(Zo.prototype,{visitItem:function(t){var e=t;O.intersects(e.p0,e.p1,this.querySeg.p0,this.querySeg.p1)&&this.items.add(t)},getItems:function(){return this.items},interfaces_:function(){return[Nn]},getClass:function(){return Zo}}),u(yr.prototype,{flatten:function(t,e){var n=this.linePts[t],r=this.linePts[e],s=new et(n,r);return this.remove(this.line,t,e),this.outputIndex.add(s),s},hasBadIntersection:function(t,e,n){return this.hasBadOutputIntersection(n)?!0:!!this.hasBadInputIntersection(t,e,n)},setDistanceTolerance:function(t){this.distanceTolerance=t},simplifySection:function(t,e,n){n+=1;var r=new Array(2).fill(null);if(t+1===e){var s=this.line.getSegment(t);return this.line.addToResult(s),null}var a=!0;if(this.line.getResultSize()<this.line.getMinimumSize()){var c=n+1;c<this.line.getMinimumSize()&&(a=!1)}var f=new Array(1).fill(null),y=this.findFurthestPoint(this.linePts,t,e,f);f[0]>this.distanceTolerance&&(a=!1);var L=new et;if(L.p0=this.linePts[t],L.p1=this.linePts[e],r[0]=t,r[1]=e,this.hasBadIntersection(this.line,r,L)&&(a=!1),a){var s=this.flatten(t,e);return this.line.addToResult(s),null}this.simplifySection(t,y,n),this.simplifySection(y,e,n)},hasBadOutputIntersection:function(t){for(var e=this.outputIndex.query(t),n=e.iterator();n.hasNext();){var r=n.next();if(this.hasInteriorIntersection(r,t))return!0}return!1},findFurthestPoint:function(t,e,n,r){var s=new et;s.p0=t[e],s.p1=t[n];for(var a=-1,c=e,f=e+1;n>f;f++){var y=t[f],L=s.distance(y);L>a&&(a=L,c=f)}return r[0]=a,c},simplify:function(t){this.line=t,this.linePts=t.getParentCoordinates(),this.simplifySection(0,this.linePts.length-1,0)},remove:function(t,e,n){for(var r=e;n>r;r++){var s=t.getSegment(r);this.inputIndex.remove(s)}},hasInteriorIntersection:function(t,e){return this.li.computeIntersection(t.p0,t.p1,e.p0,e.p1),this.li.isInteriorIntersection()},hasBadInputIntersection:function(t,e,n){for(var r=this.inputIndex.query(n),s=r.iterator();s.hasNext();){var a=s.next();if(this.hasInteriorIntersection(a,n)){if(yr.isInLineSection(t,e,a))continue;return!0}}return!1},interfaces_:function(){return[]},getClass:function(){return yr}}),yr.isInLineSection=function(t,e,n){if(n.getParent()!==t.getParent())return!1;var r=n.getIndex();return r>=e[0]&&r<e[1]},u(Jo.prototype,{setDistanceTolerance:function(t){this.distanceTolerance=t},simplify:function(t){for(var e=t.iterator();e.hasNext();)this.inputIndex.add(e.next());for(var e=t.iterator();e.hasNext();){var n=new yr(this.inputIndex,this.outputIndex);n.setDistanceTolerance(this.distanceTolerance),n.simplify(e.next())}},interfaces_:function(){return[]},getClass:function(){return Jo}}),u(ri.prototype,{getResultGeometry:function(){if(this.inputGeom.isEmpty())return this.inputGeom.copy();this.linestringMap=new je,this.inputGeom.apply(new Os(this)),this.lineSimplifier.simplify(this.linestringMap.values());var t=new xr(this.linestringMap).transform(this.inputGeom);return t},setDistanceTolerance:function(t){if(0>t)throw new d;this.lineSimplifier.setDistanceTolerance(t)},interfaces_:function(){return[]},getClass:function(){return ri}}),ri.simplify=function(t,e){var n=new ri(t);return n.setDistanceTolerance(e),n.getResultGeometry()},S(xr,ee),u(xr.prototype,{transformCoordinates:function(t,e){if(t.size()===0)return null;if(e instanceof it){var n=this.linestringMap.get(e);return this.createCoordinateSequence(n.getResultCoordinates())}return ee.prototype.transformCoordinates.call(this,t,e)},interfaces_:function(){return[]},getClass:function(){return xr}}),u(Os.prototype,{filter:function(t){if(t instanceof it){var e=t;if(e.isEmpty())return null;var n=e.isClosed()?4:2,r=new yn(e,n);this.tps.linestringMap.put(e,r)}},interfaces_:function(){return[ge]},getClass:function(){return Os}}),ri.LineStringTransformer=xr,ri.LineStringMapBuilderFilter=Os;var zl=Object.freeze({DouglasPeuckerSimplifier:wi,TopologyPreservingSimplifier:ri});u(Li.prototype,{splitAt:function(){if(arguments.length===1){var t=arguments[0],e=this.minimumLen/this.segLen;if(t.distance(this.seg.p0)<this.minimumLen)return this.splitPt=this.seg.pointAlong(e),null;if(t.distance(this.seg.p1)<this.minimumLen)return this.splitPt=Li.pointAlongReverse(this.seg,e),null;this.splitPt=t}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.getConstrainedLength(n),a=s/this.segLen;r.equals2D(this.seg.p0)?this.splitPt=this.seg.pointAlong(a):this.splitPt=Li.pointAlongReverse(this.seg,a)}},setMinimumLength:function(t){this.minimumLen=t},getConstrainedLength:function(t){return t<this.minimumLen?this.minimumLen:t},getSplitPoint:function(){return this.splitPt},interfaces_:function(){return[]},getClass:function(){return Li}}),Li.pointAlongReverse=function(t,e){var n=new I;return n.x=t.p1.x-e*(t.p1.x-t.p0.x),n.y=t.p1.y-e*(t.p1.y-t.p0.y),n},u(Ko.prototype,{findSplitPoint:function(t,e){},interfaces_:function(){return[]},getClass:function(){return Ko}}),u(Er.prototype,{findSplitPoint:function(t,e){var n=t.getLineSegment(),r=n.getLength(),s=r/2,a=new Li(n),c=Er.projectedSplitPoint(t,e),f=2*c.distance(e)*.8,y=f;return y>s&&(y=s),a.setMinimumLength(y),a.splitAt(c),a.getSplitPoint()},interfaces_:function(){return[Ko]},getClass:function(){return Er}}),Er.projectedSplitPoint=function(t,e){var n=t.getLineSegment(),r=n.project(e);return r},u(Nt.prototype,{interfaces_:function(){return[]},getClass:function(){return Nt}}),Nt.triArea=function(t,e,n){return(e.x-t.x)*(n.y-t.y)-(e.y-t.y)*(n.x-t.x)},Nt.isInCircleDDNormalized=function(t,e,n,r){var s=_.valueOf(t.x).selfSubtract(r.x),a=_.valueOf(t.y).selfSubtract(r.y),c=_.valueOf(e.x).selfSubtract(r.x),f=_.valueOf(e.y).selfSubtract(r.y),y=_.valueOf(n.x).selfSubtract(r.x),L=_.valueOf(n.y).selfSubtract(r.y),M=s.multiply(f).selfSubtract(c.multiply(a)),D=c.multiply(L).selfSubtract(y.multiply(f)),q=y.multiply(a).selfSubtract(s.multiply(L)),$=s.multiply(s).selfAdd(a.multiply(a)),j=c.multiply(c).selfAdd(f.multiply(f)),tt=y.multiply(y).selfAdd(L.multiply(L)),It=$.selfMultiply(D).selfAdd(j.selfMultiply(q)).selfAdd(tt.selfMultiply(M)),bt=It.doubleValue()>0;return bt},Nt.checkRobustInCircle=function(t,e,n,r){var s=Nt.isInCircleNonRobust(t,e,n,r),a=Nt.isInCircleDDSlow(t,e,n,r),c=Nt.isInCircleCC(t,e,n,r),f=Et.circumcentre(t,e,n);mt.out.println("p radius diff a = "+Math.abs(r.distance(f)-t.distance(f))/t.distance(f)),s===a&&s===c||(mt.out.println("inCircle robustness failure (double result = "+s+", DD result = "+a+", CC result = "+c+")"),mt.out.println(Wt.toLineString(new pe([t,e,n,r]))),mt.out.println("Circumcentre = "+Wt.toPoint(f)+" radius = "+t.distance(f)),mt.out.println("p radius diff a = "+Math.abs(r.distance(f)/t.distance(f)-1)),mt.out.println("p radius diff b = "+Math.abs(r.distance(f)/e.distance(f)-1)),mt.out.println("p radius diff c = "+Math.abs(r.distance(f)/n.distance(f)-1)),mt.out.println())},Nt.isInCircleDDFast=function(t,e,n,r){var s=_.sqr(t.x).selfAdd(_.sqr(t.y)).selfMultiply(Nt.triAreaDDFast(e,n,r)),a=_.sqr(e.x).selfAdd(_.sqr(e.y)).selfMultiply(Nt.triAreaDDFast(t,n,r)),c=_.sqr(n.x).selfAdd(_.sqr(n.y)).selfMultiply(Nt.triAreaDDFast(t,e,r)),f=_.sqr(r.x).selfAdd(_.sqr(r.y)).selfMultiply(Nt.triAreaDDFast(t,e,n)),y=s.selfSubtract(a).selfAdd(c).selfSubtract(f),L=y.doubleValue()>0;return L},Nt.isInCircleCC=function(t,e,n,r){var s=Et.circumcentre(t,e,n),a=t.distance(s),c=r.distance(s)-a;return 0>=c},Nt.isInCircleNormalized=function(t,e,n,r){var s=t.x-r.x,a=t.y-r.y,c=e.x-r.x,f=e.y-r.y,y=n.x-r.x,L=n.y-r.y,M=s*f-c*a,D=c*L-y*f,q=y*a-s*L,$=s*s+a*a,j=c*c+f*f,tt=y*y+L*L,It=$*D+j*q+tt*M;return It>0},Nt.isInCircleDDSlow=function(t,e,n,r){var s=_.valueOf(r.x),a=_.valueOf(r.y),c=_.valueOf(t.x),f=_.valueOf(t.y),y=_.valueOf(e.x),L=_.valueOf(e.y),M=_.valueOf(n.x),D=_.valueOf(n.y),q=c.multiply(c).add(f.multiply(f)).multiply(Nt.triAreaDDSlow(y,L,M,D,s,a)),$=y.multiply(y).add(L.multiply(L)).multiply(Nt.triAreaDDSlow(c,f,M,D,s,a)),j=M.multiply(M).add(D.multiply(D)).multiply(Nt.triAreaDDSlow(c,f,y,L,s,a)),tt=s.multiply(s).add(a.multiply(a)).multiply(Nt.triAreaDDSlow(c,f,y,L,M,D)),It=q.subtract($).add(j).subtract(tt),bt=It.doubleValue()>0;return bt},Nt.isInCircleNonRobust=function(t,e,n,r){var s=(t.x*t.x+t.y*t.y)*Nt.triArea(e,n,r)-(e.x*e.x+e.y*e.y)*Nt.triArea(t,n,r)+(n.x*n.x+n.y*n.y)*Nt.triArea(t,e,r)-(r.x*r.x+r.y*r.y)*Nt.triArea(t,e,n)>0;return s},Nt.isInCircleRobust=function(t,e,n,r){return Nt.isInCircleNormalized(t,e,n,r)},Nt.triAreaDDSlow=function(t,e,n,r,s,a){return n.subtract(t).multiply(a.subtract(e)).subtract(r.subtract(e).multiply(s.subtract(t)))},Nt.triAreaDDFast=function(t,e,n){var r=_.valueOf(e.x).selfSubtract(t.x).selfMultiply(_.valueOf(n.y).selfSubtract(t.y)),s=_.valueOf(e.y).selfSubtract(t.y).selfMultiply(_.valueOf(n.x).selfSubtract(t.x));return r.selfSubtract(s)},u(pt.prototype,{circleCenter:function(t,e){var n=new pt(this.getX(),this.getY()),r=this.bisector(n,t),s=this.bisector(t,e),a=new Ht(r,s),c=null;try{c=new pt(a.getX(),a.getY())}catch(f){if(!(f instanceof G))throw f;mt.err.println("a: "+n+"  b: "+t+"  c: "+e),mt.err.println(f)}finally{}return c},dot:function(t){return this.p.x*t.getX()+this.p.y*t.getY()},magn:function(){return Math.sqrt(this.p.x*this.p.x+this.p.y*this.p.y)},getZ:function(){return this.p.z},bisector:function(t,e){var n=e.getX()-t.getX(),r=e.getY()-t.getY(),s=new Ht(t.getX()+n/2,t.getY()+r/2,1),a=new Ht(t.getX()-r+n/2,t.getY()+n+r/2,1);return new Ht(s,a)},equals:function(){if(arguments.length===1){var t=arguments[0];return this.p.x===t.getX()&&this.p.y===t.getY()}if(arguments.length===2){var e=arguments[0],n=arguments[1];return this.p.distance(e.getCoordinate())<n}},getCoordinate:function(){return this.p},isInCircle:function(t,e,n){return Nt.isInCircleRobust(t.p,e.p,n.p,this.p)},interpolateZValue:function(t,e,n){var r=t.getX(),s=t.getY(),a=e.getX()-r,c=n.getX()-r,f=e.getY()-s,y=n.getY()-s,L=a*y-c*f,M=this.getX()-r,D=this.getY()-s,q=(y*M-c*D)/L,$=(-f*M+a*D)/L,j=t.getZ()+q*(e.getZ()-t.getZ())+$*(n.getZ()-t.getZ());return j},midPoint:function(t){var e=(this.p.x+t.getX())/2,n=(this.p.y+t.getY())/2,r=(this.p.z+t.getZ())/2;return new pt(e,n,r)},rightOf:function(t){return this.isCCW(t.dest(),t.orig())},isCCW:function(t,e){return(t.p.x-this.p.x)*(e.p.y-this.p.y)-(t.p.y-this.p.y)*(e.p.x-this.p.x)>0},getX:function(){return this.p.x},crossProduct:function(t){return this.p.x*t.getY()-this.p.y*t.getX()},setZ:function(t){this.p.z=t},times:function(t){return new pt(t*this.p.x,t*this.p.y)},cross:function(){return new pt(this.p.y,-this.p.x)},leftOf:function(t){return this.isCCW(t.orig(),t.dest())},toString:function(){return"POINT ("+this.p.x+" "+this.p.y+")"},sub:function(t){return new pt(this.p.x-t.getX(),this.p.y-t.getY())},getY:function(){return this.p.y},classify:function(t,e){var n=this,r=e.sub(t),s=n.sub(t),a=r.crossProduct(s);return a>0?pt.LEFT:0>a?pt.RIGHT:r.getX()*s.getX()<0||r.getY()*s.getY()<0?pt.BEHIND:r.magn()<s.magn()?pt.BEYOND:t.equals(n)?pt.ORIGIN:e.equals(n)?pt.DESTINATION:pt.BETWEEN},sum:function(t){return new pt(this.p.x+t.getX(),this.p.y+t.getY())},distance:function(t,e){return Math.sqrt(Math.pow(e.getX()-t.getX(),2)+Math.pow(e.getY()-t.getY(),2))},circumRadiusRatio:function(t,e){var n=this.circleCenter(t,e),r=this.distance(n,t),s=this.distance(this,t),a=this.distance(t,e);return s>a&&(s=a),a=this.distance(e,this),s>a&&(s=a),r/s},interfaces_:function(){return[]},getClass:function(){return pt}}),pt.interpolateZ=function(){if(arguments.length===3){var t=arguments[0],e=arguments[1],n=arguments[2],r=e.distance(n),s=t.distance(e),a=n.z-e.z,c=e.z+a*(s/r);return c}if(arguments.length===4){var f=arguments[0],y=arguments[1],L=arguments[2],M=arguments[3],D=y.x,q=y.y,$=L.x-D,j=M.x-D,tt=L.y-q,It=M.y-q,bt=$*It-j*tt,Fe=f.x-D,ai=f.y-q,Vs=(It*Fe-j*ai)/bt,ks=(-tt*Fe+$*ai)/bt,Us=y.z+Vs*(L.z-y.z)+ks*(M.z-y.z);return Us}},pt.LEFT=0,pt.RIGHT=1,pt.BEYOND=2,pt.BEHIND=3,pt.BETWEEN=4,pt.ORIGIN=5,pt.DESTINATION=6,S(Fn,pt),u(Fn.prototype,{getConstraint:function(){return this.constraint},setOnConstraint:function(t){this._isOnConstraint=t},merge:function(t){t._isOnConstraint&&(this._isOnConstraint=!0,this.constraint=t.constraint)},isOnConstraint:function(){return this._isOnConstraint},setConstraint:function(t){this._isOnConstraint=!0,this.constraint=t},interfaces_:function(){return[]},getClass:function(){return Fn}}),u(Rt.prototype,{equalsNonOriented:function(t){return this.equalsOriented(t)?!0:!!this.equalsOriented(t.sym())},toLineSegment:function(){return new et(this.vertex.getCoordinate(),this.dest().getCoordinate())},dest:function(){return this.sym().orig()},oNext:function(){return this.next},equalsOriented:function(t){return!(!this.orig().getCoordinate().equals2D(t.orig().getCoordinate())||!this.dest().getCoordinate().equals2D(t.dest().getCoordinate()))},dNext:function(){return this.sym().oNext().sym()},lPrev:function(){return this.next.sym()},rPrev:function(){return this.sym().oNext()},rot:function(){return this._rot},oPrev:function(){return this._rot.next._rot},sym:function(){return this._rot._rot},setOrig:function(t){this.vertex=t},lNext:function(){return this.invRot().oNext().rot()},getLength:function(){return this.orig().getCoordinate().distance(this.dest().getCoordinate())},invRot:function(){return this._rot.sym()},setDest:function(t){this.sym().setOrig(t)},setData:function(t){this.data=t},getData:function(){return this.data},delete:function(){this._rot=null},orig:function(){return this.vertex},rNext:function(){return this._rot.next.invRot()},toString:function(){var t=this.vertex.getCoordinate(),e=this.dest().getCoordinate();return Wt.toLineString(t,e)},isLive:function(){return this._rot!==null},getPrimary:function(){return this.orig().getCoordinate().compareTo(this.dest().getCoordinate())<=0?this:this.sym()},dPrev:function(){return this.invRot().oNext().invRot()},setNext:function(t){this.next=t},interfaces_:function(){return[]},getClass:function(){return Rt}}),Rt.makeEdge=function(t,e){var n=new Rt,r=new Rt,s=new Rt,a=new Rt;n._rot=r,r._rot=s,s._rot=a,a._rot=n,n.setNext(n),r.setNext(a),s.setNext(s),a.setNext(r);var c=n;return c.setOrig(t),c.setDest(e),c},Rt.swap=function(t){var e=t.oPrev(),n=t.sym().oPrev();Rt.splice(t,e),Rt.splice(t.sym(),n),Rt.splice(t,e.lNext()),Rt.splice(t.sym(),n.lNext()),t.setOrig(e.dest()),t.setDest(n.dest())},Rt.splice=function(t,e){var n=t.oNext().rot(),r=e.oNext().rot(),s=e.oNext(),a=t.oNext(),c=r.oNext(),f=n.oNext();t.setNext(s),e.setNext(a),n.setNext(c),r.setNext(f)},Rt.connect=function(t,e){var n=Rt.makeEdge(t.dest(),e.orig());return Rt.splice(n,t.lNext()),Rt.splice(n.sym(),e),n},u(Ir.prototype,{insertSite:function(t){var e=this.subdiv.locate(t);if(this.subdiv.isVertexOfEdge(e,t))return e;this.subdiv.isOnEdge(e,t.getCoordinate())&&(e=e.oPrev(),this.subdiv.delete(e.oNext()));var n=this.subdiv.makeEdge(e.orig(),t);Rt.splice(n,e);var r=n;do n=this.subdiv.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);for(;;){var s=e.oPrev();if(s.dest().rightOf(e)&&t.isInCircle(e.orig(),s.dest(),e.dest()))Rt.swap(e),e=e.oPrev();else{if(e.oNext()===r)return n;e=e.oNext().lPrev()}}},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},interfaces_:function(){return[]},getClass:function(){return Ir}}),u(jo.prototype,{locate:function(t){},interfaces_:function(){return[]},getClass:function(){return jo}}),u(Ms.prototype,{init:function(){this.lastEdge=this.findEdge()},locate:function(t){this.lastEdge.isLive()||this.init();var e=this.subdiv.locateFromEdge(t,this.lastEdge);return this.lastEdge=e,e},findEdge:function(){var t=this.subdiv.getEdges();return t.iterator().next()},interfaces_:function(){return[jo]},getClass:function(){return Ms}}),S(Ri,C),u(Ri.prototype,{getSegment:function(){return this.seg},interfaces_:function(){return[]},getClass:function(){return Ri}}),Ri.msgWithSpatial=function(t,e){return e!==null?t+" [ "+e+" ]":t},u(Ti.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Ti}}),u(Ee.prototype,{getTriangleVertices:function(t){var e=new Ds;return this.visitTriangles(e,t),e.getTriangleVertices()},isFrameVertex:function(t){return t.equals(this.frameVertex[0])||t.equals(this.frameVertex[1])?!0:!!t.equals(this.frameVertex[2])},isVertexOfEdge:function(t,e){return!(!e.equals(t.orig(),this.tolerance)&&!e.equals(t.dest(),this.tolerance))},connect:function(t,e){var n=Rt.connect(t,e);return this.quadEdges.add(n),n},getVoronoiCellPolygon:function(t,e){var n=new P,r=t;do{var s=t.rot().orig().getCoordinate();n.add(s),t=t.oPrev()}while(t!==r);var a=new A;a.addAll(n,!1),a.closeRing(),a.size()<4&&(mt.out.println(a),a.add(a.get(a.size()-1),!0));var c=a.toCoordinateArray(),f=e.createPolygon(e.createLinearRing(c),null),y=r.orig();return f.setUserData(y.getCoordinate()),f},setLocator:function(t){this.locator=t},initSubdiv:function(){var t=this.makeEdge(this.frameVertex[0],this.frameVertex[1]),e=this.makeEdge(this.frameVertex[1],this.frameVertex[2]);Rt.splice(t.sym(),e);var n=this.makeEdge(this.frameVertex[2],this.frameVertex[0]);return Rt.splice(e.sym(),n),Rt.splice(n.sym(),t),t},isFrameBorderEdge:function(t){var e=new Array(3).fill(null);Ee.getTriangleEdges(t,e);var n=new Array(3).fill(null);Ee.getTriangleEdges(t.sym(),n);var r=t.lNext().dest();if(this.isFrameVertex(r))return!0;var s=t.sym().lNext().dest();return!!this.isFrameVertex(s)},makeEdge:function(t,e){var n=Rt.makeEdge(t,e);return this.quadEdges.add(n),n},visitTriangles:function(t,e){this.visitedKey++;var n=new jt;n.push(this.startingEdge);for(var r=new kt;!n.empty();){var s=n.pop();if(!r.contains(s)){var a=this.fetchTriangleToVisit(s,n,e,r);a!==null&&t.visit(a)}}},isFrameEdge:function(t){return!(!this.isFrameVertex(t.orig())&&!this.isFrameVertex(t.dest()))},isOnEdge:function(t,e){this.seg.setCoordinates(t.orig().getCoordinate(),t.dest().getCoordinate());var n=this.seg.distance(e);return n<this.edgeCoincidenceTolerance},getEnvelope:function(){return new O(this.frameEnv)},createFrame:function(t){var e=t.getWidth(),n=t.getHeight(),r=0;r=e>n?10*e:10*n,this.frameVertex[0]=new pt((t.getMaxX()+t.getMinX())/2,t.getMaxY()+r),this.frameVertex[1]=new pt(t.getMinX()-r,t.getMinY()-r),this.frameVertex[2]=new pt(t.getMaxX()+r,t.getMinY()-r),this.frameEnv=new O(this.frameVertex[0].getCoordinate(),this.frameVertex[1].getCoordinate()),this.frameEnv.expandToInclude(this.frameVertex[2].getCoordinate())},getTriangleCoordinates:function(t){var e=new As;return this.visitTriangles(e,t),e.getTriangles()},getVertices:function(t){for(var e=new kt,n=this.quadEdges.iterator();n.hasNext();){var r=n.next(),s=r.orig();!t&&this.isFrameVertex(s)||e.add(s);var a=r.dest();!t&&this.isFrameVertex(a)||e.add(a)}return e},fetchTriangleToVisit:function(t,e,n,r){var s=t,a=0,c=!1;do{this.triEdges[a]=s,this.isFrameEdge(s)&&(c=!0);var f=s.sym();r.contains(f)||e.push(f),r.add(s),a++,s=s.lNext()}while(s!==t);return c&&!n?null:this.triEdges},getEdges:function(){if(arguments.length===0)return this.quadEdges;if(arguments.length===1){for(var t=arguments[0],e=this.getPrimaryEdges(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var a=s.next();n[r++]=t.createLineString([a.orig().getCoordinate(),a.dest().getCoordinate()])}return t.createMultiLineString(n)}},getVertexUniqueEdges:function(t){for(var e=new P,n=new kt,r=this.quadEdges.iterator();r.hasNext();){var s=r.next(),a=s.orig();n.contains(a)||(n.add(a),!t&&this.isFrameVertex(a)||e.add(s));var c=s.sym(),f=c.orig();n.contains(f)||(n.add(f),!t&&this.isFrameVertex(f)||e.add(c))}return e},getTriangleEdges:function(t){var e=new bs;return this.visitTriangles(e,t),e.getTriangleEdges()},getPrimaryEdges:function(t){this.visitedKey++;var e=new P,n=new jt;n.push(this.startingEdge);for(var r=new kt;!n.empty();){var s=n.pop();if(!r.contains(s)){var a=s.getPrimary();!t&&this.isFrameEdge(a)||e.add(a),n.push(s.oNext()),n.push(s.sym().oNext()),r.add(s),r.add(s.sym())}}return e},delete:function(t){Rt.splice(t,t.oPrev()),Rt.splice(t.sym(),t.sym().oPrev());var e=t.sym(),n=t.rot(),r=t.rot().sym();this.quadEdges.remove(t),this.quadEdges.remove(e),this.quadEdges.remove(n),this.quadEdges.remove(r),t.delete(),e.delete(),n.delete(),r.delete()},locateFromEdge:function(t,e){for(var n=0,r=this.quadEdges.size(),s=e;;){if(n++,n>r)throw new Ri(s.toLineSegment());if(t.equals(s.orig())||t.equals(s.dest()))break;if(t.rightOf(s))s=s.sym();else if(t.rightOf(s.oNext())){if(t.rightOf(s.dPrev()))break;s=s.dPrev()}else s=s.oNext()}return s},getTolerance:function(){return this.tolerance},getVoronoiCellPolygons:function(t){this.visitTriangles(new _s,!0);for(var e=new P,n=this.getVertexUniqueEdges(!1),r=n.iterator();r.hasNext();){var s=r.next();e.add(this.getVoronoiCellPolygon(s,t))}return e},getVoronoiDiagram:function(t){var e=this.getVoronoiCellPolygons(t);return t.createGeometryCollection(ot.toGeometryArray(e))},getTriangles:function(t){for(var e=this.getTriangleCoordinates(!1),n=new Array(e.size()).fill(null),r=0,s=e.iterator();s.hasNext();){var a=s.next();n[r++]=t.createPolygon(t.createLinearRing(a),null)}return t.createGeometryCollection(n)},insertSite:function(t){var e=this.locate(t);if(t.equals(e.orig(),this.tolerance)||t.equals(e.dest(),this.tolerance))return e;var n=this.makeEdge(e.orig(),t);Rt.splice(n,e);var r=n;do n=this.connect(e,n.sym()),e=n.oPrev();while(e.lNext()!==r);return r},locate:function(){if(arguments.length===1){if(arguments[0]instanceof pt){var t=arguments[0];return this.locator.locate(t)}if(arguments[0]instanceof I){var e=arguments[0];return this.locator.locate(new pt(e))}}else if(arguments.length===2){var n=arguments[0],r=arguments[1],s=this.locator.locate(new pt(n));if(s===null)return null;var a=s;s.dest().getCoordinate().equals2D(n)&&(a=s.sym());var c=a;do{if(c.dest().getCoordinate().equals2D(r))return c;c=c.oNext()}while(c!==a);return null}},interfaces_:function(){return[]},getClass:function(){return Ee}}),Ee.getTriangleEdges=function(t,e){if(e[0]=t,e[1]=e[0].lNext(),e[2]=e[1].lNext(),e[2].lNext()!==e[0])throw new d},u(_s.prototype,{visit:function(t){for(var e=t[0].orig().getCoordinate(),n=t[1].orig().getCoordinate(),r=t[2].orig().getCoordinate(),s=Et.circumcentre(e,n,r),a=new pt(s),c=0;3>c;c++)t[c].rot().setOrig(a)},interfaces_:function(){return[Ti]},getClass:function(){return _s}}),u(bs.prototype,{getTriangleEdges:function(){return this.triList},visit:function(t){this.triList.add(t.clone())},interfaces_:function(){return[Ti]},getClass:function(){return bs}}),u(Ds.prototype,{visit:function(t){this.triList.add([t[0].orig(),t[1].orig(),t[2].orig()])},getTriangleVertices:function(){return this.triList},interfaces_:function(){return[Ti]},getClass:function(){return Ds}}),u(As.prototype,{checkTriangleSize:function(t){t.length>=2?Wt.toLineString(t[0],t[1]):t.length>=1&&Wt.toPoint(t[0])},visit:function(t){this.coordList.clear();for(var e=0;3>e;e++){var n=t[e].orig();this.coordList.add(n.getCoordinate())}if(this.coordList.size()>0){this.coordList.closeRing();var r=this.coordList.toCoordinateArray();if(r.length!==4)return null;this.triCoords.add(r)}},getTriangles:function(){return this.triCoords},interfaces_:function(){return[Ti]},getClass:function(){return As}}),Ee.TriangleCircumcentreVisitor=_s,Ee.TriangleEdgesListVisitor=bs,Ee.TriangleVertexListVisitor=Ds,Ee.TriangleCoordinatesVisitor=As,Ee.EDGE_COINCIDENCE_TOL_FACTOR=1e3,u(si.prototype,{getLineSegment:function(){return this.ls},getEndZ:function(){var t=this.ls.getCoordinate(1);return t.z},getStartZ:function(){var t=this.ls.getCoordinate(0);return t.z},intersection:function(t){return this.ls.intersection(t.getLineSegment())},getStart:function(){return this.ls.getCoordinate(0)},getEnd:function(){return this.ls.getCoordinate(1)},getEndY:function(){var t=this.ls.getCoordinate(1);return t.y},getStartX:function(){var t=this.ls.getCoordinate(0);return t.x},equalsTopo:function(t){return this.ls.equalsTopo(t.getLineSegment())},getStartY:function(){var t=this.ls.getCoordinate(0);return t.y},setData:function(t){this.data=t},getData:function(){return this.data},getEndX:function(){var t=this.ls.getCoordinate(1);return t.x},toString:function(){return this.ls.toString()},interfaces_:function(){return[]},getClass:function(){return si}}),u(Nr.prototype,{visit:function(t){},interfaces_:function(){return[]},getClass:function(){return Nr}}),u(Fs.prototype,{isRepeated:function(){return this.count>1},getRight:function(){return this.right},getCoordinate:function(){return this.p},setLeft:function(t){this.left=t},getX:function(){return this.p.x},getData:function(){return this.data},getCount:function(){return this.count},getLeft:function(){return this.left},getY:function(){return this.p.y},increment:function(){this.count=this.count+1},setRight:function(t){this.right=t},interfaces_:function(){return[]},getClass:function(){return Fs}}),u(oi.prototype,{insert:function(){if(arguments.length===1){var t=arguments[0];return this.insert(t,null)}if(arguments.length===2){var e=arguments[0],n=arguments[1];if(this.root===null)return this.root=new Fs(e,n),this.root;if(this.tolerance>0){var r=this.findBestMatchNode(e);if(r!==null)return r.increment(),r}return this.insertExact(e,n)}},query:function(){var t=arguments,e=this;if(arguments.length===1){var n=arguments[0],r=new P;return this.query(n,r),r}if(arguments.length===2){if(arguments[0]instanceof O&&U(arguments[1],w))(function(){var c=t[0],f=t[1];e.queryNode(e.root,c,!0,{interfaces_:function(){return[Nr]},visit:function(y){f.add(y)}})})();else if(arguments[0]instanceof O&&U(arguments[1],Nr)){var s=arguments[0],a=arguments[1];this.queryNode(this.root,s,!0,a)}}},queryNode:function(t,e,n,r){if(t===null)return null;var s=null,a=null,c=null;n?(s=e.getMinX(),a=e.getMaxX(),c=t.getX()):(s=e.getMinY(),a=e.getMaxY(),c=t.getY());var f=c>s,y=a>=c;f&&this.queryNode(t.getLeft(),e,!n,r),e.contains(t.getCoordinate())&&r.visit(t),y&&this.queryNode(t.getRight(),e,!n,r)},findBestMatchNode:function(t){var e=new Gs(t,this.tolerance);return this.query(e.queryEnvelope(),e),e.getNode()},isEmpty:function(){return this.root===null},insertExact:function(t,e){for(var n=this.root,r=this.root,s=!0,a=!0;n!==null;){if(n!==null){var c=t.distance(n.getCoordinate())<=this.tolerance;if(c)return n.increment(),n}a=s?t.x<n.getX():t.y<n.getY(),r=n,n=a?n.getLeft():n.getRight(),s=!s}this.numberOfNodes=this.numberOfNodes+1;var f=new Fs(t,e);return a?r.setLeft(f):r.setRight(f),f},interfaces_:function(){return[]},getClass:function(){return oi}}),oi.toCoordinates=function(){if(arguments.length===1){var t=arguments[0];return oi.toCoordinates(t,!1)}if(arguments.length===2){for(var e=arguments[0],n=arguments[1],r=new A,s=e.iterator();s.hasNext();)for(var a=s.next(),c=n?a.getCount():1,f=0;c>f;f++)r.add(a.getCoordinate(),!0);return r.toCoordinateArray()}},u(Gs.prototype,{visit:function(t){var e=this.p.distance(t.getCoordinate()),n=e<=this.tolerance;if(!n)return null;var r=!1;(this.matchNode===null||e<this.matchDist||this.matchNode!==null&&e===this.matchDist&&t.getCoordinate().compareTo(this.matchNode.getCoordinate())<1)&&(r=!0),r&&(this.matchNode=t,this.matchDist=e)},queryEnvelope:function(){var t=new O(this.p);return t.expandBy(this.tolerance),t},getNode:function(){return this.matchNode},interfaces_:function(){return[Nr]},getClass:function(){return Gs}}),oi.BestMatchVisitor=Gs,u(Gn.prototype,{getInitialVertices:function(){return this.initialVertices},getKDT:function(){return this.kdt},enforceConstraints:function(){this.addConstraintVertices();var t=0,e=0;do e=this.enforceGabriel(this.segments),t++;while(e>0&&t<Gn.MAX_SPLIT_ITER)},insertSites:function(t){for(var e=t.iterator();e.hasNext();){var n=e.next();this.insertSite(n)}},getVertexFactory:function(){return this.vertexFactory},getPointArray:function(){for(var t=new Array(this.initialVertices.size()+this.segVertices.size()).fill(null),e=0,n=this.initialVertices.iterator();n.hasNext();){var r=n.next();t[e++]=r.getCoordinate()}for(var s=this.segVertices.iterator();s.hasNext();){var r=s.next();t[e++]=r.getCoordinate()}return t},setConstraints:function(t,e){this.segments=t,this.segVertices=e},computeConvexHull:function(){var t=new ot,e=this.getPointArray(),n=new tn(e,t);this.convexHull=n.getConvexHull()},addConstraintVertices:function(){this.computeConvexHull(),this.insertSites(this.segVertices)},findNonGabrielPoint:function(t){var e=t.getStart(),n=t.getEnd(),r=new I((e.x+n.x)/2,(e.y+n.y)/2),s=e.distance(r),a=new O(r);a.expandBy(s);for(var c=this.kdt.query(a),f=null,y=p.MAX_VALUE,L=c.iterator();L.hasNext();){var M=L.next(),D=M.getCoordinate();if(!D.equals2D(e)&&!D.equals2D(n)){var q=r.distance(D);if(s>q){var $=q;(f===null||y>$)&&(f=D,y=$)}}}return f},getConstraintSegments:function(){return this.segments},setSplitPointFinder:function(t){this.splitFinder=t},getConvexHull:function(){return this.convexHull},getTolerance:function(){return this.tolerance},enforceGabriel:function(t){for(var e=new P,n=0,r=new P,s=t.iterator();s.hasNext();){var a=s.next(),c=this.findNonGabrielPoint(a);if(c!==null){this.splitPt=this.splitFinder.findSplitPoint(a,c);var f=this.createVertex(this.splitPt,a),y=(this.insertSite(f),new si(a.getStartX(),a.getStartY(),a.getStartZ(),f.getX(),f.getY(),f.getZ(),a.getData())),L=new si(f.getX(),f.getY(),f.getZ(),a.getEndX(),a.getEndY(),a.getEndZ(),a.getData());e.add(y),e.add(L),r.add(a),n+=1}}return t.removeAll(r),t.addAll(e),n},createVertex:function(){if(arguments.length===1){var t=arguments[0],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(t,null):new Fn(t)}if(arguments.length===2){var n=arguments[0],r=arguments[1],e=null;return e=this.vertexFactory!==null?this.vertexFactory.createVertex(n,r):new Fn(n),e.setOnConstraint(!0),e}},getSubdivision:function(){return this.subdiv},computeBoundingBox:function(){var t=Gn.computeVertexEnvelope(this.initialVertices),e=Gn.computeVertexEnvelope(this.segVertices),n=new O(t);n.expandToInclude(e);var r=.2*n.getWidth(),s=.2*n.getHeight(),a=Math.max(r,s);this.computeAreaEnv=new O(n),this.computeAreaEnv.expandBy(a)},setVertexFactory:function(t){this.vertexFactory=t},formInitialDelaunay:function(){this.computeBoundingBox(),this.subdiv=new Ee(this.computeAreaEnv,this.tolerance),this.subdiv.setLocator(new Ms(this.subdiv)),this.incDel=new Ir(this.subdiv),this.insertSites(this.initialVertices)},insertSite:function(){if(arguments[0]instanceof Fn){var t=arguments[0],e=this.kdt.insert(t.getCoordinate(),t);if(e.isRepeated()){var n=e.getData();return n.merge(t),n}return this.incDel.insertSite(t),t}if(arguments[0]instanceof I){var r=arguments[0];this.insertSite(this.createVertex(r))}},interfaces_:function(){return[]},getClass:function(){return Gn}}),Gn.computeVertexEnvelope=function(t){for(var e=new O,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r.getCoordinate())}return e},Gn.MAX_SPLIT_ITER=99,u(Jt.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords),e=Jt.toVertices(this.siteCoords);this.subdiv=new Ee(t,this.tolerance);var n=new Ir(this.subdiv);n.insertSites(e)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof H){var t=arguments[0];this.siteCoords=Jt.extractUniqueCoordinates(t)}else if(U(arguments[0],X)){var e=arguments[0];this.siteCoords=Jt.unique(Q.toCoordinateArray(e))}},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},interfaces_:function(){return[]},getClass:function(){return Jt}}),Jt.extractUniqueCoordinates=function(t){if(t===null)return new A;var e=t.getCoordinates();return Jt.unique(e)},Jt.envelope=function(t){for(var e=new O,n=t.iterator();n.hasNext();){var r=n.next();e.expandToInclude(r)}return e},Jt.unique=function(t){var e=Q.copyDeep(t);Ze.sort(e);var n=new A(e,!1);return n},Jt.toVertices=function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();e.add(new pt(r))}return e},u(Pi.prototype,{createSiteVertices:function(t){for(var e=new P,n=t.iterator();n.hasNext();){var r=n.next();this.constraintVertexMap.containsKey(r)||e.add(new Fn(r))}return e},create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords),e=new P;this.constraintLines!==null&&(t.expandToInclude(this.constraintLines.getEnvelopeInternal()),this.createVertices(this.constraintLines),e=Pi.createConstraintSegments(this.constraintLines));var n=this.createSiteVertices(this.siteCoords),r=new Gn(n,this.tolerance);r.setConstraints(e,new P(this.constraintVertexMap.values())),r.formInitialDelaunay(),r.enforceConstraints(),this.subdiv=r.getSubdivision()},setTolerance:function(t){this.tolerance=t},setConstraints:function(t){this.constraintLines=t},setSites:function(t){this.siteCoords=Jt.extractUniqueCoordinates(t)},getEdges:function(t){return this.create(),this.subdiv.getEdges(t)},getSubdivision:function(){return this.create(),this.subdiv},getTriangles:function(t){return this.create(),this.subdiv.getTriangles(t)},createVertices:function(t){for(var e=t.getCoordinates(),n=0;n<e.length;n++){var r=new Fn(e[n]);this.constraintVertexMap.put(e[n],r)}},interfaces_:function(){return[]},getClass:function(){return Pi}}),Pi.createConstraintSegments=function(){if(arguments.length===1){for(var t=arguments[0],e=$t.getLines(t),n=new P,r=e.iterator();r.hasNext();){var s=r.next();Pi.createConstraintSegments(s,n)}return n}if(arguments.length===2)for(var a=arguments[0],c=arguments[1],f=a.getCoordinates(),r=1;r<f.length;r++)c.add(new si(f[r-1],f[r]))},u(Cr.prototype,{create:function(){if(this.subdiv!==null)return null;var t=Jt.envelope(this.siteCoords);this.diagramEnv=t;var e=Math.max(this.diagramEnv.getWidth(),this.diagramEnv.getHeight());this.diagramEnv.expandBy(e),this.clipEnv!==null&&this.diagramEnv.expandToInclude(this.clipEnv);var n=Jt.toVertices(this.siteCoords);this.subdiv=new Ee(t,this.tolerance);var r=new Ir(this.subdiv);r.insertSites(n)},getDiagram:function(t){this.create();var e=this.subdiv.getVoronoiDiagram(t);return Cr.clipGeometryCollection(e,this.diagramEnv)},setTolerance:function(t){this.tolerance=t},setSites:function(){if(arguments[0]instanceof H){var t=arguments[0];this.siteCoords=Jt.extractUniqueCoordinates(t)}else if(U(arguments[0],X)){var e=arguments[0];this.siteCoords=Jt.unique(Q.toCoordinateArray(e))}},setClipEnvelope:function(t){this.clipEnv=t},getSubdivision:function(){return this.create(),this.subdiv},interfaces_:function(){return[]},getClass:function(){return Cr}}),Cr.clipGeometryCollection=function(t,e){for(var n=t.getFactory().toGeometry(e),r=new P,s=0;s<t.getNumGeometries();s++){var a=t.getGeometryN(s),c=null;e.contains(a.getEnvelopeInternal())?c=a:e.intersects(a.getEnvelopeInternal())&&(c=n.intersection(a),c.setUserData(a.getUserData())),c===null||c.isEmpty()||r.add(c)}return t.getFactory().createGeometryCollection(ot.toGeometryArray(r))};var Vl=Object.freeze({ConformingDelaunayTriangulationBuilder:Pi,DelaunayTriangulationBuilder:Jt,VoronoiDiagramBuilder:Cr});u(qs.prototype,{interfaces_:function(){return[]},getClass:function(){return qs}}),qs.union=function(t,e){if(t.isEmpty()||e.isEmpty()){if(t.isEmpty()&&e.isEmpty())return J.createEmptyResult(J.UNION,t,e,t.getFactory());if(t.isEmpty())return e.copy();if(e.isEmpty())return t.copy()}return t.checkNotGeometryCollection(t),t.checkNotGeometryCollection(e),Vt.overlayOp(t,e,J.UNION)},u(H.prototype,{equalsTopo:function(t){return this.getEnvelopeInternal().equals(t.getEnvelopeInternal())?gt.relate(this,t).isEquals(this.getDimension(),t.getDimension()):!1},union:function(){if(arguments.length===0)return An.union(this);if(arguments.length===1){var t=arguments[0];return qs.union(this,t)}},isValid:function(){return Re.isValid(this)},intersection:function(t){if(this.isEmpty()||t.isEmpty())return J.createEmptyResult(J.INTERSECTION,this,t,this.factory);if(this.isGeometryCollection()){var e=t;return fi.map(this,{interfaces_:function(){return[MapOp]},map:function(n){return n.intersection(e)}})}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.INTERSECTION)},covers:function(t){return gt.covers(this,t)},coveredBy:function(t){return gt.coveredBy(this,t)},touches:function(t){return gt.touches(this,t)},intersects:function(t){return gt.intersects(this,t)},within:function(t){return gt.within(this,t)},overlaps:function(t){return gt.overlaps(this,t)},disjoint:function(t){return gt.disjoint(this,t)},crosses:function(t){return gt.crosses(this,t)},buffer:function(){if(arguments.length===1){var t=arguments[0];return Yt.bufferOp(this,t)}if(arguments.length===2){var e=arguments[0],n=arguments[1];return Yt.bufferOp(this,e,n)}if(arguments.length===3){var r=arguments[0],s=arguments[1],a=arguments[2];return Yt.bufferOp(this,r,s,a)}},convexHull:function(){return new tn(this).getConvexHull()},relate:function(){for(var t=arguments.length,e=Array(t),n=0;t>n;n++)e[n]=arguments[n];return gt.relate.apply(gt,[this].concat(e))},getCentroid:function(){if(this.isEmpty())return this.factory.createPoint();var t=Qe.getCentroid(this);return this.createPointFromInternalCoord(t,this)},getInteriorPoint:function(){if(this.isEmpty())return this.factory.createPoint();var t=null,e=this.getDimension();if(e===0){var n=new ls(this);t=n.getInteriorPoint()}else if(e===1){var n=new us(this);t=n.getInteriorPoint()}else{var n=new Me(this);t=n.getInteriorPoint()}return this.createPointFromInternalCoord(t,this)},symDifference:function(t){if(this.isEmpty()||t.isEmpty()){if(this.isEmpty()&&t.isEmpty())return J.createEmptyResult(J.SYMDIFFERENCE,this,t,this.factory);if(this.isEmpty())return t.copy();if(t.isEmpty())return this.copy()}return this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.SYMDIFFERENCE)},createPointFromInternalCoord:function(t,e){return e.getPrecisionModel().makePrecise(t),e.getFactory().createPoint(t)},toText:function(){var t=new Wt;return t.write(this)},toString:function(){this.toText()},contains:function(t){return gt.contains(this,t)},difference:function(t){return this.isEmpty()?J.createEmptyResult(J.DIFFERENCE,this,t,this.factory):t.isEmpty()?this.copy():(this.checkNotGeometryCollection(this),this.checkNotGeometryCollection(t),Vt.overlayOp(this,t,J.DIFFERENCE))},isSimple:function(){var t=new Qi(this);return t.isSimple()},isWithinDistance:function(t,e){var n=this.getEnvelopeInternal().distance(t.getEnvelopeInternal());return n>e?!1:_e.isWithinDistance(this,t,e)},distance:function(t){return _e.distance(this,t)},isEquivalentClass:function(t){return this.getClass()===t.getClass()}});var kl="1.1.2 (248dab8)";h.version=kl,h.algorithm=Il,h.densify=Nl,h.dissolve=Cl,h.geom=El,h.index=Ll,h.io=Tl,h.noding=Pl,h.operation=ql,h.precision=Bl,h.simplify=zl,h.triangulate=Vl})})(_i,_i.exports);var Ha=_i.exports,Ou=function(o,l){var h=new Ha.io.GeoJSONReader,u=h.read(JSON.stringify(o.geometry)),g=h.read(JSON.stringify(l.geometry)),d=u.union(g),p=new Ha.io.GeoJSONWriter;return d=p.write(d),{type:"Feature",geometry:d,properties:o.properties}},Dc=va,Ac=Ou,na=Te;function Fc(o,l,h){if(typeof l!="number")throw new Error("maxEdge parameter is required");if(typeof h!="string")throw new Error("units parameter is required");var u=Dc(o),g=u.features.filter(d);u.features=g;function d(p){var m=p.geometry.coordinates[0][0],E=p.geometry.coordinates[0][1],x=p.geometry.coordinates[0][2],N=na(m,E,h),C=na(E,x,h),S=na(m,x,h);return N<=l&&C<=l&&S<=l}return Gc(u)}function Gc(o){for(var l=JSON.parse(JSON.stringify(o.features[0])),h=o.features,u=0,g=h.length;u<g;u++){var d=h[u];d.geometry&&(l=Ac(l,d))}return l}var qc=Fc,Wa=_i.exports,Bc=function(o,l){var h=JSON.parse(JSON.stringify(o)),u=JSON.parse(JSON.stringify(l));h.type!=="Feature"&&(h={type:"Feature",properties:{},geometry:h}),u.type!=="Feature"&&(u={type:"Feature",properties:{},geometry:u});var g=new Wa.io.GeoJSONReader,d=g.read(JSON.stringify(h.geometry)),p=g.read(JSON.stringify(u.geometry)),m=d.difference(p);if(!m.isEmpty()){var E=new Wa.io.GeoJSONWriter,x=E.write(m);return h.geometry=m,{type:"Feature",properties:h.properties,geometry:x}}},zc=bi,Vc=function(l,h,u,g){return l.features.forEach(function(d){var p=h.features.filter(function(m){return zc(m,d)}).map(function(m){return m.properties[u]});d.properties||(d.properties={}),d.properties[g]=p}),l},kc=Ge.coordEach,Uc=function(l){return l=JSON.parse(JSON.stringify(l)),kc(l,function(h){h.reverse()}),l},Mu={exports:{}};(function(o){(function(){function l(m,E){var x=m.x-E.x,N=m.y-E.y;return x*x+N*N}function h(m,E,x){var N=E.x,C=E.y,S=x.x-N,b=x.y-C;if(S!==0||b!==0){var T=((m.x-N)*S+(m.y-C)*b)/(S*S+b*b);T>1?(N=x.x,C=x.y):T>0&&(N+=S*T,C+=b*T)}return S=m.x-N,b=m.y-C,S*S+b*b}function u(m,E){for(var x=m[0],N=[x],C,S=1,b=m.length;S<b;S++)C=m[S],l(C,x)>E&&(N.push(C),x=C);return x!==C&&N.push(C),N}function g(m,E,x,N,C){for(var S=N,b,T=E+1;T<x;T++){var I=h(m[T],m[E],m[x]);I>S&&(b=T,S=I)}S>N&&(b-E>1&&g(m,E,b,N,C),C.push(m[b]),x-b>1&&g(m,b,x,N,C))}function d(m,E){var x=m.length-1,N=[m[0]];return g(m,0,x,E,N),N.push(m[x]),N}function p(m,E,x){if(m.length<=2)return m;var N=E!==void 0?E*E:1;return m=x?m:u(m,N),m=d(m,N),m}o.exports=p,o.exports.default=p})()})(Mu);var ca=Mu.exports,$a=["LineString","MultiLineString","Polygon","MultiPolygon"],Xc=function(o,l,h){return o.type==="Feature"?Za(ia(o,l,h),o.properties):o.type==="FeatureCollection"?{type:"FeatureCollection",features:o.features.map(function(u){var g=ia(u,l,h);return $a.indexOf(g.type)>-1?Za(g,u.properties):g})}:o.type==="GeometryCollection"?{type:"GeometryCollection",geometries:o.geometries.map(function(u){return $a.indexOf(u.type)>-1?ia({type:"Feature",geometry:u},l,h):u})}:o};function ia(o,l,h){return o.geometry.type==="LineString"?{type:"LineString",coordinates:Ja(o.geometry.coordinates,l,h)}:o.geometry.type==="MultiLineString"?{type:"MultiLineString",coordinates:o.geometry.coordinates.map(function(u){return Ja(u,l,h)})}:o.geometry.type==="Polygon"?{type:"Polygon",coordinates:Ka(o.geometry.coordinates,l,h)}:o.geometry.type==="MultiPolygon"?{type:"MultiPolygon",coordinates:o.geometry.coordinates.map(function(u){return Ka(u,l,h)})}:o}function Yc(o){return o.length<3?!1:!(o.length===3&&o[2][0]===o[0][0]&&o[2][1]===o[0][1])}function Za(o,l){return{type:"Feature",geometry:o,properties:l}}function Ja(o,l,h){return ca(o.map(function(u){return{x:u[0],y:u[1]}}),l,h).map(function(u){return[u.x,u.y]})}function Ka(o,l,h){return o.map(function(u){var g=u.map(function(p){return{x:p[0],y:p[1]}});if(g.length<4)throw new Error("Invalid polygon");for(var d=ca(g,l,h).map(function(p){return[p.x,p.y]});!Yc(d);)l-=l*.01,d=ca(g,l,h).map(function(p){return[p.x,p.y]});return(d[d.length-1][0]!==d[0][0]||d[d.length-1][1]!==d[0][1])&&d.push(d[0]),d})}var io=function(o){this.points=o.points||[],this.duration=o.duration||1e4,this.sharpness=o.sharpness||.85,this.centers=[],this.controls=[],this.stepLength=o.stepLength||60,this.length=this.points.length,this.delay=0;for(var l=0;l<this.length;l++)this.points[l].z=this.points[l].z||0;for(var l=0;l<this.length-1;l++){var h=this.points[l],u=this.points[l+1];this.centers.push({x:(h.x+u.x)/2,y:(h.y+u.y)/2,z:(h.z+u.z)/2})}this.controls.push([this.points[0],this.points[0]]);for(var l=0;l<this.centers.length-1;l++){var h=this.centers[l],u=this.centers[l+1],g=this.points[l+1].x-(this.centers[l].x+this.centers[l+1].x)/2,d=this.points[l+1].y-(this.centers[l].y+this.centers[l+1].y)/2,p=this.points[l+1].z-(this.centers[l].y+this.centers[l+1].z)/2;this.controls.push([{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l].x+g),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l].y+d),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l].z+p)},{x:(1-this.sharpness)*this.points[l+1].x+this.sharpness*(this.centers[l+1].x+g),y:(1-this.sharpness)*this.points[l+1].y+this.sharpness*(this.centers[l+1].y+d),z:(1-this.sharpness)*this.points[l+1].z+this.sharpness*(this.centers[l+1].z+p)}])}return this.controls.push([this.points[this.length-1],this.points[this.length-1]]),this.steps=this.cacheSteps(this.stepLength),this};io.prototype.cacheSteps=function(o){var l=[],h=this.pos(0);l.push(0);for(var u=0;u<this.duration;u+=10){var g=this.pos(u),d=Math.sqrt((g.x-h.x)*(g.x-h.x)+(g.y-h.y)*(g.y-h.y)+(g.z-h.z)*(g.z-h.z));d>o&&(l.push(u),h=g)}return l};io.prototype.vector=function(o){var l=this.pos(o+10),h=this.pos(o-10);return{angle:180*Math.atan2(l.y-h.y,l.x-h.x)/3.14,speed:Math.sqrt((h.x-l.x)*(h.x-l.x)+(h.y-l.y)*(h.y-l.y)+(h.z-l.z)*(h.z-l.z))}};io.prototype.pos=function(o){function l(p,m,E,x,N){var C=function(T){var I=T*T,Y=I*T;return[Y,3*I*(1-T),3*T*(1-T)*(1-T),(1-T)*(1-T)*(1-T)]},S=C(p),b={x:N.x*S[0]+x.x*S[1]+E.x*S[2]+m.x*S[3],y:N.y*S[0]+x.y*S[1]+E.y*S[2]+m.y*S[3],z:N.z*S[0]+x.z*S[1]+E.z*S[2]+m.z*S[3]};return b}var h=o-this.delay;h<0&&(h=0),h>this.duration&&(h=this.duration-1);var u=h/this.duration;if(u>=1)return this.points[this.length-1];var g=Math.floor((this.points.length-1)*u),d=(this.length-1)*u-g;return l(d,this.points[g],this.controls[g][1],this.controls[g+1][0],this.points[g+1])};var Hc=io,Wc=rt.lineString,$c=Hc,Zc=function(o,l,h){var u=Wc([]);u.properties=o.properties;for(var g=new $c({points:o.geometry.coordinates.map(function(m){return{x:m[0],y:m[1]}}),duration:l,sharpness:h}),d=0;d<g.duration;d+=10){var p=g.pos(d);Math.floor(d/100)%2===0&&u.geometry.coordinates.push([p.x,p.y])}return u},Jc=bi,Kc=function(o,l,h,u){return o=JSON.parse(JSON.stringify(o)),l=JSON.parse(JSON.stringify(l)),o.features.forEach(function(g){g.properties||(g.properties={}),l.features.forEach(function(d){if(g.properties[u]===void 0){var p=Jc(g,d);p&&(g.properties[u]=d.properties[h])}})}),o},jc=rt.featureCollection,Qc=function(o,l){var h=jc(tg(o.features,l));return h};function tg(o,l){for(var h=o.slice(0),u=o.length,g=u-l,d,p;u-- >g;)p=Math.floor((u+1)*Math.random()),d=h[p],h[p]=h[u],h[u]=d;return h.slice(g)}var eg=rt.polygon,_u=function(o){var l=[o[0],o[1]],h=[o[0],o[3]],u=[o[2],o[3]],g=[o[2],o[1]];return eg([[l,g,u,h,l]])},ng=to,ig=_u,rg=function(o){return ig(ng(o))},ja=Vn.getCoord,ro=function(o,l){var h=Math.PI/180,u=180/Math.PI,g=ja(o),d=ja(l),p=h*g[0],m=h*d[0],E=h*g[1],x=h*d[1],N=Math.sin(m-p)*Math.cos(x),C=Math.cos(E)*Math.sin(x)-Math.sin(E)*Math.cos(x)*Math.cos(m-p),S=u*Math.atan2(N,C);return S},sg=Vn.getCoord,bu=rt,og=bu.point,ag=bu.distanceToRadians,so=function(o,l,h,u){var g=Math.PI/180,d=180/Math.PI,p=sg(o),m=g*p[0],E=g*p[1],x=g*h,N=ag(l,u),C=Math.asin(Math.sin(E)*Math.cos(N)+Math.cos(E)*Math.sin(N)*Math.cos(x)),S=m+Math.atan2(Math.sin(x)*Math.sin(N)*Math.cos(E),Math.cos(N)-Math.sin(E)*Math.sin(C));return og([d*S,d*C])},ug=ro,lg=so,hg=Te,cg=function(o,l){var h=hg(o,l,"miles"),u=ug(o,l),g=lg(o,h/2,u,"miles");return g},gg=dg,fg={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function dg(o){if(!o||!o.type)return null;var l=fg[o.type];if(!l)return null;if(l==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:o}]};if(l==="feature")return{type:"FeatureCollection",features:[o]};if(l==="featurecollection")return o}var Du=rt,pg=Du.featureCollection,Qa=_i.exports,tu=gg,mg=function(o,l,h){var u=Du.distanceToDegrees(l,h),g=tu(o),d=tu(pg(g.features.map(function(p){return vg(p,u)})));if(d.features.length>1)return d;if(d.features.length===1)return d.features[0]};function vg(o,l){var h=new Qa.io.GeoJSONReader,u=h.read(o.geometry),g=u.buffer(l),d=new Qa.io.GeoJSONWriter;return g=d.write(g),{type:"Feature",geometry:g,properties:{}}}var yg=to,xg=rt.point,Au=function(o){var l=yg(o),h=(l[0]+l[2])/2,u=(l[1]+l[3])/2;return xg([h,u])},Eg=Ge.coordEach,Ig=rt.point,Ng=function(o){var l=0,h=0,u=0;return Eg(o,function(g){l+=g[0],h+=g[1],u++},!0),Ig([l/u,h/u])},Cg=Ge,wg=function(o){var l={MultiPoint:{coordinates:[],properties:[]},MultiLineString:{coordinates:[],properties:[]},MultiPolygon:{coordinates:[],properties:[]}},h=Object.keys(l).reduce(function(g,d){return g[d.replace("Multi","")]=d,g},{});function u(g,d,p){p?l[d].coordinates=l[d].coordinates.concat(g.geometry.coordinates):l[d].coordinates.push(g.geometry.coordinates),l[d].properties.push(g.properties)}return Cg.featureEach(o,function(g){!g.geometry||(l[g.geometry.type]?u(g,g.geometry.type,!0):h[g.geometry.type]&&u(g,h[g.geometry.type],!1))}),{type:"FeatureCollection",features:Object.keys(l).filter(function(g){return l[g].coordinates.length}).sort().map(function(g){return{type:"Feature",properties:{collectedProperties:l[g].properties},geometry:{type:g,coordinates:l[g].coordinates}}})}},Sg=rt.featureCollection,Lg=Ge.coordEach,Rg=rt.point,Fu=function(o){var l=[];return Lg(o,function(h){l.push(Rg(h))}),Sg(l)},Ca={exports:{}};Ca.exports=oo;Ca.exports.default=oo;function oo(o,l,h){h=h||2;var u=l&&l.length,g=u?l[0]*h:o.length,d=Gu(o,0,g,h,!0),p=[];if(!d||d.next===d.prev)return p;var m,E,x,N,C,S,b;if(u&&(d=_g(o,l,d,h)),o.length>80*h){m=x=o[0],E=N=o[1];for(var T=h;T<g;T+=h)C=o[T],S=o[T+1],C<m&&(m=C),S<E&&(E=S),C>x&&(x=C),S>N&&(N=S);b=Math.max(x-m,N-E),b=b!==0?32767/b:0}return Or(d,p,h,m,E,b,0),p}function Gu(o,l,h,u,g){var d,p;if(g===da(o,l,h,u)>0)for(d=l;d<h;d+=u)p=eu(d,o[d],o[d+1],p);else for(d=h-u;d>=l;d-=u)p=eu(d,o[d],o[d+1],p);return p&&ao(p,p.next)&&(_r(p),p=p.next),p}function ui(o,l){if(!o)return o;l||(l=o);var h=o,u;do if(u=!1,!h.steiner&&(ao(h,h.next)||Dt(h.prev,h,h.next)===0)){if(_r(h),h=l=h.prev,h===h.next)break;u=!0}else h=h.next;while(u||h!==l);return l}function Or(o,l,h,u,g,d,p){if(!!o){!p&&d&&Gg(o,u,g,d);for(var m=o,E,x;o.prev!==o.next;){if(E=o.prev,x=o.next,d?Pg(o,u,g,d):Tg(o)){l.push(E.i/h|0),l.push(o.i/h|0),l.push(x.i/h|0),_r(o),o=x.next,m=x.next;continue}if(o=x,o===m){p?p===1?(o=Og(ui(o),l,h),Or(o,l,h,u,g,d,2)):p===2&&Mg(o,l,h,u,g,d):Or(ui(o),l,h,u,g,d,1);break}}}}function Tg(o){var l=o.prev,h=o,u=o.next;if(Dt(l,h,u)>=0)return!1;for(var g=l.x,d=h.x,p=u.x,m=l.y,E=h.y,x=u.y,N=g<d?g<p?g:p:d<p?d:p,C=m<E?m<x?m:x:E<x?E:x,S=g>d?g>p?g:p:d>p?d:p,b=m>E?m>x?m:x:E>x?E:x,T=u.next;T!==l;){if(T.x>=N&&T.x<=S&&T.y>=C&&T.y<=b&&Mi(g,m,d,E,p,x,T.x,T.y)&&Dt(T.prev,T,T.next)>=0)return!1;T=T.next}return!0}function Pg(o,l,h,u){var g=o.prev,d=o,p=o.next;if(Dt(g,d,p)>=0)return!1;for(var m=g.x,E=d.x,x=p.x,N=g.y,C=d.y,S=p.y,b=m<E?m<x?m:x:E<x?E:x,T=N<C?N<S?N:S:C<S?C:S,I=m>E?m>x?m:x:E>x?E:x,Y=N>C?N>S?N:S:C>S?C:S,W=ga(b,T,l,h,u),X=ga(I,Y,l,h,u),R=o.prevZ,w=o.nextZ;R&&R.z>=W&&w&&w.z<=X;){if(R.x>=b&&R.x<=I&&R.y>=T&&R.y<=Y&&R!==g&&R!==p&&Mi(m,N,E,C,x,S,R.x,R.y)&&Dt(R.prev,R,R.next)>=0||(R=R.prevZ,w.x>=b&&w.x<=I&&w.y>=T&&w.y<=Y&&w!==g&&w!==p&&Mi(m,N,E,C,x,S,w.x,w.y)&&Dt(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;R&&R.z>=W;){if(R.x>=b&&R.x<=I&&R.y>=T&&R.y<=Y&&R!==g&&R!==p&&Mi(m,N,E,C,x,S,R.x,R.y)&&Dt(R.prev,R,R.next)>=0)return!1;R=R.prevZ}for(;w&&w.z<=X;){if(w.x>=b&&w.x<=I&&w.y>=T&&w.y<=Y&&w!==g&&w!==p&&Mi(m,N,E,C,x,S,w.x,w.y)&&Dt(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function Og(o,l,h){var u=o;do{var g=u.prev,d=u.next.next;!ao(g,d)&&qu(g,u,u.next,d)&&Mr(g,d)&&Mr(d,g)&&(l.push(g.i/h|0),l.push(u.i/h|0),l.push(d.i/h|0),_r(u),_r(u.next),u=o=d),u=u.next}while(u!==o);return ui(u)}function Mg(o,l,h,u,g,d){var p=o;do{for(var m=p.next.next;m!==p.prev;){if(p.i!==m.i&&zg(p,m)){var E=Bu(p,m);p=ui(p,p.next),E=ui(E,E.next),Or(p,l,h,u,g,d,0),Or(E,l,h,u,g,d,0);return}m=m.next}p=p.next}while(p!==o)}function _g(o,l,h,u){var g=[],d,p,m,E,x;for(d=0,p=l.length;d<p;d++)m=l[d]*u,E=d<p-1?l[d+1]*u:o.length,x=Gu(o,m,E,u,!1),x===x.next&&(x.steiner=!0),g.push(Bg(x));for(g.sort(bg),d=0;d<g.length;d++)h=Dg(g[d],h);return h}function bg(o,l){return o.x-l.x}function Dg(o,l){var h=Ag(o,l);if(!h)return l;var u=Bu(h,o);return ui(u,u.next),ui(h,h.next)}function Ag(o,l){var h=l,u=o.x,g=o.y,d=-1/0,p;do{if(g<=h.y&&g>=h.next.y&&h.next.y!==h.y){var m=h.x+(g-h.y)*(h.next.x-h.x)/(h.next.y-h.y);if(m<=u&&m>d&&(d=m,p=h.x<h.next.x?h:h.next,m===u))return p}h=h.next}while(h!==l);if(!p)return null;var E=p,x=p.x,N=p.y,C=1/0,S;h=p;do u>=h.x&&h.x>=x&&u!==h.x&&Mi(g<N?u:d,g,x,N,g<N?d:u,g,h.x,h.y)&&(S=Math.abs(g-h.y)/(u-h.x),Mr(h,o)&&(S<C||S===C&&(h.x>p.x||h.x===p.x&&Fg(p,h)))&&(p=h,C=S)),h=h.next;while(h!==E);return p}function Fg(o,l){return Dt(o.prev,o,l.prev)<0&&Dt(l.next,o,o.next)<0}function Gg(o,l,h,u){var g=o;do g.z===0&&(g.z=ga(g.x,g.y,l,h,u)),g.prevZ=g.prev,g.nextZ=g.next,g=g.next;while(g!==o);g.prevZ.nextZ=null,g.prevZ=null,qg(g)}function qg(o){var l,h,u,g,d,p,m,E,x=1;do{for(h=o,o=null,d=null,p=0;h;){for(p++,u=h,m=0,l=0;l<x&&(m++,u=u.nextZ,!!u);l++);for(E=x;m>0||E>0&&u;)m!==0&&(E===0||!u||h.z<=u.z)?(g=h,h=h.nextZ,m--):(g=u,u=u.nextZ,E--),d?d.nextZ=g:o=g,g.prevZ=d,d=g;h=u}d.nextZ=null,x*=2}while(p>1);return o}function ga(o,l,h,u,g){return o=(o-h)*g|0,l=(l-u)*g|0,o=(o|o<<8)&16711935,o=(o|o<<4)&252645135,o=(o|o<<2)&858993459,o=(o|o<<1)&1431655765,l=(l|l<<8)&16711935,l=(l|l<<4)&252645135,l=(l|l<<2)&858993459,l=(l|l<<1)&1431655765,o|l<<1}function Bg(o){var l=o,h=o;do(l.x<h.x||l.x===h.x&&l.y<h.y)&&(h=l),l=l.next;while(l!==o);return h}function Mi(o,l,h,u,g,d,p,m){return(g-p)*(l-m)>=(o-p)*(d-m)&&(o-p)*(u-m)>=(h-p)*(l-m)&&(h-p)*(d-m)>=(g-p)*(u-m)}function zg(o,l){return o.next.i!==l.i&&o.prev.i!==l.i&&!Vg(o,l)&&(Mr(o,l)&&Mr(l,o)&&kg(o,l)&&(Dt(o.prev,o,l.prev)||Dt(o,l.prev,l))||ao(o,l)&&Dt(o.prev,o,o.next)>0&&Dt(l.prev,l,l.next)>0)}function Dt(o,l,h){return(l.y-o.y)*(h.x-l.x)-(l.x-o.x)*(h.y-l.y)}function ao(o,l){return o.x===l.x&&o.y===l.y}function qu(o,l,h,u){var g=Hs(Dt(o,l,h)),d=Hs(Dt(o,l,u)),p=Hs(Dt(h,u,o)),m=Hs(Dt(h,u,l));return!!(g!==d&&p!==m||g===0&&Ys(o,h,l)||d===0&&Ys(o,u,l)||p===0&&Ys(h,o,u)||m===0&&Ys(h,l,u))}function Ys(o,l,h){return l.x<=Math.max(o.x,h.x)&&l.x>=Math.min(o.x,h.x)&&l.y<=Math.max(o.y,h.y)&&l.y>=Math.min(o.y,h.y)}function Hs(o){return o>0?1:o<0?-1:0}function Vg(o,l){var h=o;do{if(h.i!==o.i&&h.next.i!==o.i&&h.i!==l.i&&h.next.i!==l.i&&qu(h,h.next,o,l))return!0;h=h.next}while(h!==o);return!1}function Mr(o,l){return Dt(o.prev,o,o.next)<0?Dt(o,l,o.next)>=0&&Dt(o,o.prev,l)>=0:Dt(o,l,o.prev)<0||Dt(o,o.next,l)<0}function kg(o,l){var h=o,u=!1,g=(o.x+l.x)/2,d=(o.y+l.y)/2;do h.y>d!=h.next.y>d&&h.next.y!==h.y&&g<(h.next.x-h.x)*(d-h.y)/(h.next.y-h.y)+h.x&&(u=!u),h=h.next;while(h!==o);return u}function Bu(o,l){var h=new fa(o.i,o.x,o.y),u=new fa(l.i,l.x,l.y),g=o.next,d=l.prev;return o.next=l,l.prev=o,h.next=g,g.prev=h,u.next=h,h.prev=u,d.next=u,u.prev=d,u}function eu(o,l,h,u){var g=new fa(o,l,h);return u?(g.next=u.next,g.prev=u,u.next.prev=g,u.next=g):(g.prev=g,g.next=g),g}function _r(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function fa(o,l,h){this.i=o,this.x=l,this.y=h,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}oo.deviation=function(o,l,h,u){var g=l&&l.length,d=g?l[0]*h:o.length,p=Math.abs(da(o,0,d,h));if(g)for(var m=0,E=l.length;m<E;m++){var x=l[m]*h,N=m<E-1?l[m+1]*h:o.length;p-=Math.abs(da(o,x,N,h))}var C=0;for(m=0;m<u.length;m+=3){var S=u[m]*h,b=u[m+1]*h,T=u[m+2]*h;C+=Math.abs((o[S]-o[T])*(o[b+1]-o[S+1])-(o[S]-o[b])*(o[T+1]-o[S+1]))}return p===0&&C===0?0:Math.abs((C-p)/p)};function da(o,l,h,u){for(var g=0,d=l,p=h-u;d<h;d+=u)g+=(o[p]-o[d])*(o[d+1]+o[p+1]),p=d;return g}oo.flatten=function(o){for(var l=o[0][0].length,h={vertices:[],holes:[],dimensions:l},u=0,g=0;g<o.length;g++){for(var d=0;d<o[g].length;d++)for(var p=0;p<l;p++)h.vertices.push(o[g][d][p]);g>0&&(u+=o[g-1].length,h.holes.push(u))}return h};var Ug=rt.polygon,Xg=Ca.exports,Yg=function(o){if(!o.geometry||o.geometry.type!=="Polygon"&&o.geometry.type!=="MultiPolygon")throw new Error("input must be a Polygon or MultiPolygon");var l={type:"FeatureCollection",features:[]};return o.geometry.type==="Polygon"?l.features=nu(o.geometry.coordinates):o.geometry.coordinates.forEach(function(h){l.features=l.features.concat(nu(h))}),l};function nu(o){var l=Hg(o),h=2,u=Xg(l.vertices,l.holes,h),g=[],d=[];u.forEach(function(E,x){var N=u[x];d.push([l.vertices[N*h],l.vertices[N*h+1]])});for(var p=0;p<d.length;p+=3){var m=d.slice(p,p+3);m.push(d[p]),g.push(Ug([m]))}return g}function Hg(o){for(var l=o[0][0].length,h={vertices:[],holes:[],dimensions:l},u=0,g=0;g<o.length;g++){for(var d=0;d<o[g].length;d++)for(var p=0;p<l;p++)h.vertices.push(o[g][d][p]);g>0&&(u+=o[g-1].length,h.holes.push(u))}return h}var iu=_i.exports,Wg=function(l,h){var u,g;l.type==="Feature"?u=l.geometry:u=l,h.type==="Feature"?g=h.geometry:g=h;var d=new iu.io.GeoJSONReader,p=d.read(JSON.stringify(u)),m=d.read(JSON.stringify(g)),E=p.intersection(m);if(!E.isEmpty()){var x=new iu.io.GeoJSONWriter,N=x.write(E);return{type:"Feature",properties:{},geometry:N}}},$g=Te,Zg=function(o,l){for(var h,u=1/0,g=0;g<l.features.length;g++){var d=$g(o,l.features[g],"miles");d<u&&(h=l.features[g],u=d)}return h},Ar={exports:{}};Ar.exports=function(){throw new Error("call .point() or .polygon() instead")};function wa(o){return o?Kg(o):[Vu(),ku()]}Ar.exports.position=wa;Ar.exports.point=function(o,l){var h=[];for(i=0;i<o;i++)h.push(Uu(l?ru(wa(l)):ru()));return Xu(h)};Ar.exports.polygon=function(o,l,h,u){typeof l!="number"&&(l=10),typeof h!="number"&&(h=10);var g=[];for(i=0;i<o;i++){var d=[],p=Array.apply(null,new Array(l+1)).map(Math.random);p.forEach(m),p.forEach(E),d[d.length-1]=d[0],d=d.map(Jg(wa(u))),g.push(Uu(jg([d])))}function m(x,N,C){C[N]=N>0?x+C[N-1]:x}function E(x,N){x=x*2*Math.PI/p[p.length-1];var C=Math.random();d.push([C*h*Math.sin(x),C*h*Math.cos(x)])}return Xu(g)};function Jg(o){return function(l,h){return[l[0]+o[0],l[1]+o[1]]}}function zu(){return Math.random()-.5}function Vu(){return zu()*360}function ku(){return zu()*180}function ru(o){return{type:"Point",coordinates:o||[Vu(),ku()]}}function Kg(o){return[Math.random()*(o[2]-o[0])+o[0],Math.random()*(o[3]-o[1])+o[1]]}function jg(o){return{type:"Polygon",coordinates:o}}function Uu(o){return{type:"Feature",geometry:o,properties:{}}}function Xu(o){return{type:"FeatureCollection",features:o}}var su=Ar.exports,Qg=function(o,l,h){switch(h=h||{},l=l||1,o){case"point":case"points":case void 0:return su.point(l,h.bbox);case"polygon":case"polygons":return su.polygon(l,h.num_vertices,h.max_radial_length,h.bbox);default:throw new Error("Unknown type given: valid options are points and polygons")}},tf=rt.point,ef=function(o){var l,h={type:"FeatureCollection",features:[]};return o.type==="Feature"?l=o.geometry:l=o,l.coordinates.forEach(function(u){l.coordinates.forEach(function(g){for(var d=0;d<u.length-1;d++)for(var p=0;p<g.length-1;p++)if(!(u===g&&(Math.abs(d-p)===1||Math.abs(d-p)===u.length-2))){var m=nf(u[d][0],u[d][1],u[d+1][0],u[d+1][1],g[p][0],g[p][1],g[p+1][0],g[p+1][1]);m&&h.features.push(tf([m[0],m[1]]))}})}),h};function nf(o,l,h,u,g,d,p,m){var E,x,N,C,S,b={x:null,y:null,onLine1:!1,onLine2:!1};return E=(m-d)*(h-o)-(p-g)*(u-l),E===0?b.x!==null&&b.y!==null?b:!1:(x=l-d,N=o-g,C=(p-g)*x-(m-d)*N,S=(h-o)*x-(u-l)*N,x=C/E,N=S/E,b.x=o+x*(h-o),b.y=l+x*(u-l),x>=0&&x<=1&&(b.onLine1=!0),N>=0&&N<=1&&(b.onLine2=!0),b.onLine1&&b.onLine2?[b.x,b.y]:!1)}var ou=rt.featureCollection,rf=Au,sf=Te,of=bi,af=Fu;function uf(o){o.type!=="FeatureCollection"&&(o.type!=="Feature"&&(o={type:"Feature",geometry:o,properties:{}}),o=ou([o]));for(var l=rf(o),h=!1,u=0;!h&&u<o.features.length;){var g=o.features[u].geometry,d,p,m,E,x,N,C,S=!1;if(g.type==="Point")l.geometry.coordinates[0]===g.coordinates[0]&&l.geometry.coordinates[1]===g.coordinates[1]&&(h=!0);else if(g.type==="MultiPoint"){var b=!1;for(C=0;!b&&C<g.coordinates.length;)l.geometry.coordinates[0]===g.coordinates[C][0]&&l.geometry.coordinates[1]===g.coordinates[C][1]&&(h=!0,b=!0),C++}else if(g.type==="LineString")for(C=0;!S&&C<g.coordinates.length-1;)d=l.geometry.coordinates[0],p=l.geometry.coordinates[1],m=g.coordinates[C][0],E=g.coordinates[C][1],x=g.coordinates[C+1][0],N=g.coordinates[C+1][1],au(d,p,m,E,x,N)&&(S=!0,h=!0),C++;else if(g.type==="MultiLineString")for(var T=0;T<g.coordinates.length;){S=!1,C=0;for(var I=g.coordinates[T];!S&&C<I.length-1;)d=l.geometry.coordinates[0],p=l.geometry.coordinates[1],m=I[C][0],E=I[C][1],x=I[C+1][0],N=I[C+1][1],au(d,p,m,E,x,N)&&(S=!0,h=!0),C++;T++}else if(g.type==="Polygon"||g.type==="MultiPolygon"){var Y={type:"Feature",geometry:g,properties:{}};of(l,Y)&&(h=!0)}u++}if(h)return l;var W=ou([]);for(u=0;u<o.features.length;u++)W.features=W.features.concat(af(o.features[u]).features);var X,R=1/0;for(u=0;u<W.features.length;u++){var w=sf(l,W.features[u],"miles");w<R&&(R=w,X=W.features[u])}return X}function au(o,l,h,u,g,d){var p=Math.sqrt((g-h)*(g-h)+(d-u)*(d-u)),m=Math.sqrt((o-h)*(o-h)+(l-u)*(l-u)),E=Math.sqrt((g-o)*(g-o)+(d-l)*(d-l));if(p===m+E)return!0}var lf=uf,Sa={},uo={};uo.RADIUS=6378137;uo.FLATTENING=1/298.257223563;uo.POLAR_RADIUS=63567523142e-4;var uu=uo;Sa.geometry=Yu;Sa.ring=pa;function Yu(o){var l=0,h;switch(o.type){case"Polygon":return lu(o.coordinates);case"MultiPolygon":for(h=0;h<o.coordinates.length;h++)l+=lu(o.coordinates[h]);return l;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(h=0;h<o.geometries.length;h++)l+=Yu(o.geometries[h]);return l}}function lu(o){var l=0;if(o&&o.length>0){l+=Math.abs(pa(o[0]));for(var h=1;h<o.length;h++)l-=Math.abs(pa(o[h]))}return l}function pa(o){var l,h,u,g,d,p,m=0,E=o.length;if(E>2){for(i=0;i<E;i++)i===E-2?(g=E-2,d=E-1,p=0):i===E-1?(g=E-1,d=0,p=1):(g=i,d=i+1,p=i+2),l=o[g],h=o[d],u=o[p],m+=(ra(u[0])-ra(l[0]))*Math.sin(ra(h[1]));m=m*uu.RADIUS*uu.RADIUS/2}return m}function ra(o){return o*Math.PI/180}var sa=Sa.geometry;function hf(o){if(o.type==="FeatureCollection"){for(var l=0,h=0;l<o.features.length;l++)o.features[l].geometry&&(h+=sa(o.features[l].geometry));return h}else return o.type==="Feature"?sa(o.geometry):sa(o)}var cf=hf,gf=Te,hu=rt.point,ff=ro,df=so,pf=function(o,l,h){var u;if(o.type==="Feature")u=o.geometry.coordinates;else if(o.type==="LineString")u=o.coordinates;else throw new Error("input must be a LineString Feature or Geometry");for(var g=0,d=0;d<u.length&&!(l>=g&&d===u.length-1);d++)if(g>=l){var p=l-g;if(p){var m=ff(u[d],u[d-1])-180,E=df(u[d],p,m,h);return E}else return hu(u[d])}else g+=gf(u[d],u[d+1],h);return hu(u[u.length-1])},mf=Te,cu=rt.point,vf=function o(l,h){if(l.type==="FeatureCollection")return l.features.reduce(function(m,E){return m+o(E,h)},0);var u=l.type==="Feature"?l.geometry:l,g,d;if(u.type==="LineString")return oa(u.coordinates,h);if(u.type==="Polygon"||u.type==="MultiLineString"){for(g=0,d=0;d<u.coordinates.length;d++)g+=oa(u.coordinates[d],h);return g}else if(l.type==="MultiPolygon"){for(g=0,d=0;d<u.coordinates.length;d++)for(var p=0;p<u.coordinates[d].length;p++)g+=oa(u.coordinates[d][p],h);return g}else throw new Error("input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry (or a FeatureCollection containing only those types)")};function oa(o,l){for(var h=0,u=cu(o[0]),g=cu(o[0]),d,p=1;p<o.length;p++)g.geometry.coordinates=o[p],h+=mf(u,g,l),d=u,u=g,g=d;return h}var aa=Te,Ws=rt.point,yf=ro,gu=so,Hu=function(o,l){var h;if(o.type==="Feature")h=o.geometry.coordinates;else if(o.type==="LineString")h=o.coordinates;else throw new Error("input must be a LineString Feature or Geometry");return xf(l,h)};function xf(o,l){for(var h="miles",u=Ws([1/0,1/0],{dist:1/0}),g=0;g<l.length-1;g++){var d=Ws(l[g]),p=Ws(l[g+1]);d.properties.dist=aa(o,d,h),p.properties.dist=aa(o,p,h);var m=Math.max(d.properties.dist,p.properties.dist),E=yf(d,p),x=gu(o,m,E+90,h),N=gu(o,m,E-90,h),C=Ef(x.geometry.coordinates[0],x.geometry.coordinates[1],N.geometry.coordinates[0],N.geometry.coordinates[1],d.geometry.coordinates[0],d.geometry.coordinates[1],p.geometry.coordinates[0],p.geometry.coordinates[1]),S;C&&(S=Ws(C),S.properties.dist=aa(o,S,h)),d.properties.dist<u.properties.dist&&(u=d,u.properties.index=g),p.properties.dist<u.properties.dist&&(u=p,u.properties.index=g),S&&S.properties.dist<u.properties.dist&&(u=S,u.properties.index=g)}return u}function Ef(o,l,h,u,g,d,p,m){var E,x,N,C,S,b={x:null,y:null,onLine1:!1,onLine2:!1};return E=(m-d)*(h-o)-(p-g)*(u-l),E===0?b.x!==null&&b.y!==null?b:!1:(x=l-d,N=o-g,C=(p-g)*x-(m-d)*N,S=(h-o)*x-(u-l)*N,x=C/E,N=S/E,b.x=o+x*(h-o),b.y=l+x*(u-l),x>0&&x<1&&(b.onLine1=!0),N>0&&N<1&&(b.onLine2=!0),b.onLine1&&b.onLine2?[b.x,b.y]:!1)}var If=rt.lineString,fu=Hu,Nf=function(l,h,u){var g;if(u.type==="Feature")g=u.geometry.coordinates;else if(u.type==="LineString")g=u.coordinates;else throw new Error("input must be a LineString Feature or Geometry");var d=fu(u,l),p=fu(u,h),m;d.properties.index<=p.properties.index?m=[d,p]:m=[p,d];for(var E=If([m[0].geometry.coordinates],{}),x=m[0].properties.index+1;x<m[1].properties.index+1;x++)E.geometry.coordinates.push(g[x]);return E.geometry.coordinates.push(m[1].geometry.coordinates),E},Rr=rt.point,Cf=rt.featureCollection,du=Te,wf=function(l,h,u){for(var g=Cf([]),d=h/du(Rr([l[0],l[1]]),Rr([l[2],l[1]]),u),p=d*(l[2]-l[0]),m=h/du(Rr([l[0],l[1]]),Rr([l[0],l[3]]),u),E=m*(l[3]-l[1]),x=l[0];x<=l[2];){for(var N=l[1];N<=l[3];)g.features.push(Rr([x,N])),N+=E;x+=p}return g},Sf=rt.featureCollection,$s=rt.point,Lf=rt.polygon,pu=Te,Rf=function(l,h,u){for(var g=Sf([]),d=h/pu($s([l[0],l[1]]),$s([l[2],l[1]]),u),p=d*(l[2]-l[0]),m=h/pu($s([l[0],l[1]]),$s([l[0],l[3]]),u),E=m*(l[3]-l[1]),x=l[0];x<=l[2];){for(var N=l[1];N<=l[3];){var C=Lf([[[x,N],[x,N+E],[x+p,N+E],[x+p,N],[x,N]]]);g.features.push(C),N+=E}x+=p}return g},Tf=rt.featureCollection,Bn=rt.polygon,mu=Te,Pf=function(o,l,h){for(var u=Tf([]),g=l/mu([o[0],o[1]],[o[2],o[1]],h),d=g*(o[2]-o[0]),p=l/mu([o[0],o[1]],[o[0],o[3]],h),m=p*(o[3]-o[1]),E=0,x=o[0];x<=o[2];){for(var N=0,C=o[1];C<=o[3];)E%2===0&&N%2===0?u.features.push(Bn([[[x,C],[x,C+m],[x+d,C],[x,C]]]),Bn([[[x,C+m],[x+d,C+m],[x+d,C],[x,C+m]]])):E%2===0&&N%2===1?u.features.push(Bn([[[x,C],[x+d,C+m],[x+d,C],[x,C]]]),Bn([[[x,C],[x,C+m],[x+d,C+m],[x,C]]])):N%2===0&&E%2===1?u.features.push(Bn([[[x,C],[x,C+m],[x+d,C+m],[x,C]]]),Bn([[[x,C],[x+d,C+m],[x+d,C],[x,C]]])):N%2===1&&E%2===1&&u.features.push(Bn([[[x,C],[x,C+m],[x+d,C],[x,C]]]),Bn([[[x,C+m],[x+d,C+m],[x+d,C],[x,C+m]]])),C+=m,N++;E++,x+=d}return u},Zs=rt.point,Wu=rt.polygon,vu=Te,Of=rt.featureCollection,js=[],Qs=[];for(var ua=0;ua<6;ua++){var yu=2*Math.PI/6*ua;js.push(Math.cos(yu)),Qs.push(Math.sin(yu))}var Mf=function(l,h,u,g){var d=h/vu(Zs([l[0],l[1]]),Zs([l[2],l[1]]),u),p=d*(l[2]-l[0]),m=h/vu(Zs([l[0],l[1]]),Zs([l[0],l[3]]),u),E=m*(l[3]-l[1]),x=p/2,N=x*2,C=Math.sqrt(3)/2*E,S=l[2]-l[0],b=l[3]-l[1],T=3/4*N,I=C,Y=S/(N-x/2),W=Math.ceil(Y);Math.round(Y)===W&&W++;var X=(W*T-x/2-S)/2-x/2,R=Math.ceil(b/C),w=(b-R*C)/2,F=R*C-b>C/2;F&&(w-=C/4);for(var Z=Of([]),P=0;P<W;P++)for(var A=0;A<=R;A++){var O=P%2===1;if(!(A===0&&O)&&!(A===0&&F)){var z=P*T+l[0]-X,G=A*I+l[1]+w;O&&(G-=C/2),g?Z.features.push.apply(Z.features,bf([z,G],p/2,E/2)):Z.features.push(_f([z,G],p/2,E/2))}}return Z};function _f(o,l,h){for(var u=[],g=0;g<6;g++){var d=o[0]+l*js[g],p=o[1]+h*Qs[g];u.push([d,p])}return u.push(u[0]),Wu([u])}function bf(o,l,h){for(var u=[],g=0;g<6;g++){var d=[];d.push(o),d.push([o[0]+l*js[g],o[1]+h*Qs[g]]),d.push([o[0]+l*js[(g+1)%6],o[1]+h*Qs[(g+1)%6]]),d.push(o),u.push(Wu([d]))}return u}cn.exports={isolines:Oh,convex:Oc,within:bc,concave:qc,difference:Bc,collect:Vc,flip:Uc,simplify:Xc,bezier:Zc,tag:Kc,sample:Qc,envelope:rg,square:Iu,midpoint:cg,buffer:mg,center:Au,centroid:Ng,combine:wg,distance:Te,explode:Fu,bbox:to,tesselate:Yg,bboxPolygon:_u,inside:bi,intersect:Wg,nearest:Zg,planepoint:Eu,random:Qg,tin:va,union:Ou,bearing:ro,destination:so,kinks:ef,pointOnSurface:lf,area:cf,along:pf,lineDistance:vf,lineSlice:Nf,pointOnLine:Hu,pointGrid:wf,squareGrid:Rf,triangleGrid:Pf,hexGrid:Mf};var xn=rt;cn.exports.point=xn.point;cn.exports.polygon=xn.polygon;var Df=cn.exports.lineString=xn.lineString;cn.exports.multiPoint=xn.multiPoint;cn.exports.multiPolygon=xn.multiPolygon;cn.exports.multiLineString=xn.multiLineString;cn.exports.feature=xn.feature;cn.exports.featureCollection=xn.featureCollection;cn.exports.geometryCollection=xn.geometryCollection;function Af(o){if(Array.isArray(o))return o;if(o.type==="Feature"){if(o.geometry!==null)return o.geometry.coordinates}else if(o.coordinates)return o.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ff(o){for(var l=Af(o),h=0,u=1,g,d;u<l.length;)g=d||l[0],d=l[u],h+=(d[0]-g[0])*(d[1]+g[1]),u++;return h>0}const K=window.Cesium;function Ne(o,l){this.viewer=o,this.options=l||{},this._positions=l.positions,this._height=this.options.height||0,this.bottomImg=l.bottomImg,this.wallImg=l.wallImg,this.splitNum=K.defaultValue(l.splitNum,50),this._positions&&this._positions.length>0&&this.updateData(this._positions)}Object.defineProperties(Ne.prototype,{show:{get:function(){return this._show},set:function(o){this._show=o,this.viewer.scene.globe.clippingPlanes&&(this.viewer.scene.globe.clippingPlanes.enabled=o),this._switchExcavate(o)}},height:{get:function(){return this._height},set:function(o){this._height=o}}});Ne.prototype.updateData=function(o){this.clear(),this.ifAntiClockwise(o)&&o.reverse();var l=[],h=o.length,u=new K.Cartesian3,g=K.Cartesian3.subtract(o[0],o[1],u);g.x>0&&(this.excavateMinHeight=9999);for(let T=0;T<h;++T){var d=(T+1)%h,p=K.Cartographic.fromCartesian(o[T]),m=this.viewer.scene.globe.getHeight(p)||p.height;m<this.excavateMinHeight&&(this.excavateMinHeight=m);var E=K.Cartesian3.add(o[T],o[d],new K.Cartesian3);E=K.Cartesian3.multiplyByScalar(E,.5,E);var x=K.Cartesian3.normalize(E,new K.Cartesian3),N=K.Cartesian3.subtract(o[d],E,new K.Cartesian3);N=K.Cartesian3.normalize(N,N);var C=K.Cartesian3.cross(N,x,new K.Cartesian3);C=K.Cartesian3.normalize(C,C);var S=new K.Plane(C,0),b=K.Plane.getPointDistance(S,E);l.push(new K.ClippingPlane(C,b))}if(this.viewer.scene.globe.clippingPlanes=new K.ClippingPlaneCollection({planes:l,edgeWidth:0,edgeColor:K.Color.WHITE,enabled:!0}),window.tileset69380){const T=new K.ClippingPlaneCollection({planes:l,edgeWidth:1,edgeColor:K.Color.WHITE,modelMatrix:K.Matrix4.inverse(K.Transforms.eastNorthUpToFixedFrame(window.tileset69380.boundingSphere.center),new K.Matrix4)});window.tileset69380.clippingPlanes=T}this._prepareWell(o),this._createWell(this.wellData)};Ne.prototype.clear=function(){var o,l;this.viewer.scene.globe.clippingPlanes&&(this.viewer.scene.globe.clippingPlanes.enabled=!1,this.viewer.scene.globe.clippingPlanes.isDestroyed()||this.viewer.scene.globe.clippingPlanes.removeAll()),(l=(o=window==null?void 0:window.tileset69380)==null?void 0:o.clippingPlanes)!=null&&l.removeAll&&window.tileset69380.clippingPlanes.removeAll(),this.bottomSurface&&(this.viewer.scene.primitives.remove(this.bottomSurface),delete this.bottomSurface),this.wellWall&&(this.viewer.scene.primitives.remove(this.wellWall),delete this.wellWall),this.viewer.scene.render()};Ne.prototype._prepareWell=function(o){var l=this.splitNum,h=o.length;if(h!=0){for(var u=this.excavateMinHeight-this.height,g=[],d=[],p=[],m=0;m<h;m++){var E=m==h-1?0:m+1,x=K.Cartographic.fromCartesian(o[m]),N=K.Cartographic.fromCartesian(o[E]),C=[x.longitude,x.latitude],S=[N.longitude,N.latitude];m==0&&(p.push(new K.Cartographic(C[0],C[1])),d.push(K.Cartesian3.fromRadians(C[0],C[1],u)),g.push(K.Cartesian3.fromRadians(C[0],C[1],0)));for(var b=1;b<=l;b++){const T=K.Math.lerp(C[0],S[0],b/l),I=K.Math.lerp(C[1],S[1],b/l);m==h-1&&b==l||(p.push(new K.Cartographic(T,I)),d.push(K.Cartesian3.fromRadians(T,I,u)),g.push(K.Cartesian3.fromRadians(T,I,0)))}}this.wellData={lerp_pos:p,bottom_pos:d,no_height_top:g}}};Ne.prototype._createWell=function(o){if(Boolean(this.viewer.terrainProvider._layers)){var l=this;this._createBottomSurface(o.bottom_pos);var h=K.sampleTerrainMostDetailed(this.viewer.terrainProvider,o.lerp_pos);h.then(u=>{for(var g=u.length,d=[],p=0;p<g;p++){var m=K.Cartesian3.fromRadians(u[p].longitude,u[p].latitude,u[p].height);d.push(m)}l._createWellWall(o.bottom_pos,d)})}else this._createBottomSurface(o.bottom_pos),this._createWellWall(o.bottom_pos,o.no_height_top)};Ne.prototype._getMinHeight=function(o){let l=5e7,h=null;for(let u=0;u<o.length;u++){let g=o[u].z;g<l&&(l=g,h=this._ellipsoidToLonLat(o[u]))}return h.altitude};Ne.prototype._ellipsoidToLonLat=function(o){let l=this.viewer.scene.globe.ellipsoid,h=new K.Cartesian3(o.x,o.y,o.z),u=l.cartesianToCartographic(h),g=K.Math.toDegrees(u.latitude),d=K.Math.toDegrees(u.longitude),p=u.height;return{longitude:d,latitude:g,altitude:p}};Ne.prototype._createBottomSurface=function(o){if(o.length){let u=this._getMinHeight(o),g=[];for(let m=0;m<o.length;m++){let E=this._ellipsoidToLonLat(o[m]);g.push(E.longitude),g.push(E.latitude),g.push(u)}let d=new K.PolygonGeometry({polygonHierarchy:new K.PolygonHierarchy(K.Cartesian3.fromDegreesArrayHeights(g)),perPositionHeight:!0,closeBottom:!1}),p=K.PolygonGeometry.createGeometry(d);var l=new K.Material({fabric:{type:"Image",uniforms:{image:this.bottomImg}}}),h=new K.MaterialAppearance({translucent:!1,flat:!0,material:l});this.bottomSurface=new K.Primitive({geometryInstances:new K.GeometryInstance({geometry:p}),appearance:h,asynchronous:!1}),this.viewer.scene.primitives.add(this.bottomSurface)}};Ne.prototype._createWellWall=function(o,l){let h=this._getMinHeight(o),u=[],g=[];for(let x=0;x<l.length;x++)u.push(this._ellipsoidToLonLat(l[x]).altitude),g.push(h);let d=new K.WallGeometry({positions:l,maximumHeights:u,minimumHeights:g}),p=K.WallGeometry.createGeometry(d);var m=new K.Material({fabric:{type:"Image",uniforms:{image:this.wallImg}}}),E=new K.MaterialAppearance({translucent:!1,flat:!0,material:m});this.wellWall=new K.Primitive({geometryInstances:new K.GeometryInstance({geometry:p,attributes:{color:K.ColorGeometryInstanceAttribute.fromColor(K.Color.GREY)},id:"PitWall"}),appearance:E,asynchronous:!1}),this.viewer.scene.primitives.add(this.wellWall)};Ne.prototype._switchExcavate=function(o){o?(this.viewer.scene.globe.material=K.Material.fromType("WaJue"),this.wellWall.show=!0,this.bottomSurface.show=!0):(this.viewer.scene.globe.material=null,this.wellWall.show=!1,this.bottomSurface.show=!1)};Ne.prototype._updateExcavateDepth=function(o){this.bottomSurface&&this.viewer.scene.primitives.remove(this.bottomSurface),this.wellWall&&this.viewer.scene.primitives.remove(this.wellWall);for(var l=this.wellData.lerp_pos,h=[],u=l.length,g=0;g<u;g++)h.push(K.Cartesian3.fromRadians(l[g].longitude,l[g].latitude,this.excavateMinHeight-o));this.wellData.bottom_pos=h,this._createWell(this.wellData),this.viewer.scene.primitives.add(this.bottomSurface),this.viewer.scene.primitives.add(this.wellWall)};Ne.prototype.ifAntiClockwise=function(o){let l=JSON.parse(JSON.stringify(o));l.push(l[0]);let h=Df(l.map((g,d)=>this.getLatLngFromXZY(g))),u=Ff(h);return u?Aa.info("\u5F53\u524D\u7ED8\u5236\u56FE\u5F62\u4E3A\u987A\u65F6\u9488!"):Aa.info("\u5F53\u524D\u7ED8\u5236\u56FE\u5F62\u4E3A\u9006\u65F6\u9488!"),u};Ne.prototype.getLatLngFromXZY=function(o){var l=this.viewer.scene.globe.ellipsoid,h=new K.Cartesian3(o.x,o.y,o.z),u=l.cartesianToCartographic(h),g=K.Math.toDegrees(u.latitude),d=K.Math.toDegrees(u.longitude);return u.height,[d,g]};const Js=window.Cesium,Gf=Yl({setup(){Hl();let o,l,h,u;if(u=window.viewer,u){const b=Js.Cartesian3.fromDegrees(-3.82518,53.11728,72.8);h=u.entities.add({name:"parcleadMine",position:b,model:{uri:"ParcLeadMine.glb"}}),u.scene.camera.setView({destination:new Js.Cartesian3(3827270552916987e-9,-255123.18143177085,5079147091351856e-9),orientation:new Js.HeadingPitchRoll(3.2624281242239963,-.22213535190506972,6.282786783842843)})}const g={labelCol:{span:8},wrapperCol:{span:16}},d=Wl({depth:100});return{formState:d,onFinish:N=>{console.log("Success:",N)},layout:g,startDraw:()=>{l=new Ul({viewer:window.viewer,Cesium:Js,type:"polygon"})},startDig:()=>{const N=l.tempShapePoints;o?o.height=d.depth:o=new Ne(window.viewer,{height:d.depth,splitNum:1e3,bottomImg:"bottom.jpg",wallImg:"wall.jpg"}),o.updateData(N)},clear:()=>{l&&l.stopDraw(),o&&o.clear(),u.entities.remove(h)}}}});const qf={class:"dig-contain"},Bf={class:"btn-group"};function zf(o,l,h,u,g,d){const p=Qo("a-form-item"),m=Qo("a-button"),E=Qo("a-form");return Zl(),Jl("div",qf,[Sr(E,Kl({model:o.formState},o.layout,{name:"nest-messages",onFinish:o.onFinish}),{default:Lr(()=>[Sr(p,{name:["depth"],rules:[{required:!0}]},{default:Lr(()=>[jl(Fa("fc-typing-input",{style:{margin:"0px 16px"},"onUpdate:modelValue":l[0]||(l[0]=x=>o.formState.depth=x),placeholder:"\u8BF7\u8F93\u5165\u5F00\u6316\u6DF1\u5EA6"},null,512),[[Ql,o.formState.depth]])]),_:1}),Fa("div",Bf,[Sr(m,{type:"primary",onClick:o.startDraw},{default:Lr(()=>[ta("\u5F00\u59CB\u7ED8\u5236")]),_:1},8,["onClick"]),Sr(m,{type:"primary",onClick:o.startDig},{default:Lr(()=>[ta("\u5F00\u6316")]),_:1},8,["onClick"]),Sr(m,{type:"primary",onClick:o.clear},{default:Lr(()=>[ta("\u6E05\u9664")]),_:1},8,["onClick"])])]),_:1},16,["model","onFinish"])])}const Uf=$l(Gf,[["render",zf],["__scopeId","data-v-a63ffb47"]]);export{Uf as default};
