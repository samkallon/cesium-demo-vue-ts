// import models from '/model/tesla_cybertruck/scene.gltf?url'
import models from '/model/tesla_model_s_plaid_2021/scene.gltf?url'
import modelPlane from '/model/stylized_ww1_plane/scene.gltf?url'
import * as Cesium from 'cesium'
import {Cartesian3} from "cesium";
import {CesiumUtils} from "@/core/cesiumUtils";

const viewer = window.viewer
const cesiumUtils = new CesiumUtils({viewer})

let baseTime = new Date('2018-07-19T15:18:00Z')
let endTime = ''


let czmlCar = [
    {
        id: "document",
        version: "1.0",
        clock: {
            interval: "2018-07-19T15:18:00Z/2018-07-19T16:15:30.000Z",
            currentTime: "2018-07-19T15:18:00Z",
            multiplier: 3,
            range: "LOOP_STOP",
            step: "SYSTEM_CLOCK_MULTIPLIER"
        }
    },
    {
        id: "car1",
        model: {
            gltf: models,
            scale: 0.01,
            minimumPixelSize: 20,
            maximumScale: 200000,
        },
        position: {
            interpolationAlgorithm: "LINEAR",
            forwardExtrapolationType: "HOLD",
            cartesian: [
            ]
        }
    },
]

let czmlPlane = [
    {
        id: "document",
        version: "1.0",
        clock: {
            interval: "2018-07-19T15:18:00Z/2018-07-19T16:15:30.000Z",
            currentTime: "2018-07-19T15:18:00Z",
            multiplier: 1,
            range: "LOOP_STOP",
            step: "SYSTEM_CLOCK_MULTIPLIER"
        }
    },
    {
        id: "plane1",

        model: {
            gltf: modelPlane,
            scale: 10,
            minimumPixelSize: 20,
            maximumScale: 200000,
        },
        position: {
            interpolationAlgorithm: "LINEAR",
            forwardExtrapolationType: "HOLD",
            cartesian: [
            ]
        }
    },
]

let pointListCar = [
    {
        "x": -4131105.8979556584,
        "y": 2896972.147818016,
        "z": -3888520.0161803425
    },
    {
        "x": -4131093.9502710938,
        "y": 2896945.6670999224,
        "z": -3888550.8364567226
    },
    {
        "x": -4131077.2392028887,
        "y": 2896911.921756028,
        "z": -3888591.8179781204
    },
    {
        "x": -4131064.4066149443,
        "y": 2896883.726746967,
        "z": -3888625.1986805475
    },
    {
        "x": -4131053.8916155957,
        "y": 2896859.375485572,
        "z": -3888653.151189188
    },
    {
        "x": -4131043.766634174,
        "y": 2896839.9685390713,
        "z": -3888677.4184339745
    },
    {
        "x": -4131037.0202958747,
        "y": 2896820.892194283,
        "z": -3888698.3546075467
    },
    {
        "x": -4131028.1255717836,
        "y": 2896801.3209844413,
        "z": -3888721.3961878777
    },
    {
        "x": -4131019.7756690136,
        "y": 2896781.596834817,
        "z": -3888744.1857895516
    },
    {
        "x": -4131012.808602331,
        "y": 2896765.2926836996,
        "z": -3888763.1078915396
    },
    {
        "x": -4131007.1228419426,
        "y": 2896750.3495997996,
        "z": -3888779.6750039584
    },
    {
        "x": -4131000.341242157,
        "y": 2896735.3449919443,
        "z": -3888797.453194022
    },
    {
        "x": -4130992.0694623417,
        "y": 2896716.174303597,
        "z": -3888819.8355821036
    },
    {
        "x": -4130984.2023936417,
        "y": 2896699.824218247,
        "z": -3888839.6608074983
    },
    {
        "x": -4130975.019510206,
        "y": 2896675.8394944207,
        "z": -3888865.9377992162
    },
    {
        "x": -4130966.3657628326,
        "y": 2896658.234494335,
        "z": -3888887.5818992625
    },
    {
        "x": -4130957.61496035,
        "y": 2896639.8072196753,
        "z": -3888909.9017088288
    },
    {
        "x": -4130954.7071104576,
        "y": 2896629.62349208,
        "z": -3888920.4466807167
    },
    {
        "x": -4130946.014861496,
        "y": 2896634.89894735,
        "z": -3888925.865188674
    },
    {
        "x": -4130927.758681611,
        "y": 2896652.504279255,
        "z": -3888933.2445758916
    },
    {
        "x": -4130904.1776992083,
        "y": 2896674.437463431,
        "z": -3888943.0430677314
    },
    {
        "x": -4130888.7330500246,
        "y": 2896688.506832972,
        "z": -3888950.299814738
    },
    {
        "x": -4130870.309231004,
        "y": 2896706.8228194155,
        "z": -3888961.4174866704
    },
    {
        "x": -4130852.8399184607,
        "y": 2896722.5404158235,
        "z": -3888966.9645554973
    },
    {
        "x": -4130835.341436233,
        "y": 2896742.076088869,
        "z": -3888973.047181404
    },
    {
        "x": -4130816.307488155,
        "y": 2896761.406738008,
        "z": -3888981.4652621853
    },
    {
        "x": -4130798.848967062,
        "y": 2896777.524171944,
        "z": -3888989.6501373695
    },
    {
        "x": -4130792.4900816036,
        "y": 2896782.0226855236,
        "z": -3888993.454888194
    },
    {
        "x": -4130793.241563739,
        "y": 2896770.469148109,
        "z": -3889000.8587071747
    },
    {
        "x": -4130788.901832338,
        "y": 2896763.9329142394,
        "z": -3889010.445078096
    },
    {
        "x": -4130785.027181908,
        "y": 2896755.446955243,
        "z": -3889021.439554563
    },
    {
        "x": -4130779.336379377,
        "y": 2896741.7187632187,
        "z": -3889037.565050388
    },
    {
        "x": -4130770.9007907007,
        "y": 2896726.365614736,
        "z": -3889058.5569218006
    },
    {
        "x": -4130758.4589221557,
        "y": 2896712.9563575755,
        "z": -3889081.868051833
    },
    {
        "x": -4130737.3093386176,
        "y": 2896727.22670923,
        "z": -3889095.3604534585
    },
    {
        "x": -4130721.9393201307,
        "y": 2896742.4240874173,
        "z": -3889101.6069862694
    },
    {
        "x": -4130709.9396591336,
        "y": 2896754.4691434177,
        "z": -3889106.661882335
    },
    {
        "x": -4130694.8666388923,
        "y": 2896769.4476528233,
        "z": -3889113.264036144
    },
    {
        "x": -4130674.354952316,
        "y": 2896787.618136564,
        "z": -3889122.9598553358
    },
    {
        "x": -4130661.390269054,
        "y": 2896801.038209172,
        "z": -3889127.442419631
    },
    {
        "x": -4130649.653144622,
        "y": 2896812.3923858535,
        "z": -3889131.9311322323
    },
    {
        "x": -4130629.899683216,
        "y": 2896830.6365539907,
        "z": -3889139.405993112
    },
    {
        "x": -4130606.8915663105,
        "y": 2896849.2963244454,
        "z": -3889148.571939132
    },
    {
        "x": -4130596.686706369,
        "y": 2896846.0496168793,
        "z": -3889161.246057459
    },
    {
        "x": -4130588.317029964,
        "y": 2896828.7710903944,
        "z": -3889182.720500731
    },
    {
        "x": -4130579.4082372217,
        "y": 2896810.748062973,
        "z": -3889204.9873221754
    },
    {
        "x": -4130571.5477545494,
        "y": 2896788.626823927,
        "z": -3889229.029787593
    },
    {
        "x": -4130560.4860948687,
        "y": 2896766.4644296276,
        "z": -3889256.5481403954
    },
    {
        "x": -4130550.185035939,
        "y": 2896742.941557488,
        "z": -3889283.461948039
    },
    {
        "x": -4130540.2386010643,
        "y": 2896719.048466863,
        "z": -3889310.2019187245
    },
    {
        "x": -4130526.952520206,
        "y": 2896693.546327754,
        "z": -3889341.16528171
    },
    {
        "x": -4130516.377254174,
        "y": 2896669.5928749004,
        "z": -3889368.1838014508
    },
    {
        "x": -4130504.057493225,
        "y": 2896642.1985703353,
        "z": -3889399.1793009173
    },
    {
        "x": -4130491.6783072394,
        "y": 2896614.221501441,
        "z": -3889430.2246104004
    },
    {
        "x": -4130479.6712551536,
        "y": 2896589.3694463405,
        "z": -3889458.028394572
    },
    {
        "x": -4130468.6390428743,
        "y": 2896564.7197136125,
        "z": -3889485.47337427
    },
    {
        "x": -4130460.8690307518,
        "y": 2896546.6695616627,
        "z": -3889504.78162498
    },
    {
        "x": -4130451.2319910517,
        "y": 2896527.226136305,
        "z": -3889526.1875367924
    },
    {
        "x": -4130439.405718207,
        "y": 2896502.0362911364,
        "z": -3889553.00118654
    },
    {
        "x": -4130439.995260722,
        "y": 2896492.6622365094,
        "z": -3889558.5429235585
    },
    {
        "x": -4130451.007753617,
        "y": 2896478.279303268,
        "z": -3889557.1581223044
    },
    {
        "x": -4130465.6504183854,
        "y": 2896466.084602302,
        "z": -3889551.05802869
    },
    {
        "x": -4130497.2915169527,
        "y": 2896435.0210336926,
        "z": -3889540.945169918
    },
    {
        "x": -4130500.510973461,
        "y": 2896416.2028782465,
        "z": -3889549.7261737883
    },
    {
        "x": -4130490.796137669,
        "y": 2896395.911070586,
        "z": -3889571.6666667676
    },
    {
        "x": -4130478.494684034,
        "y": 2896375.865137916,
        "z": -3889595.986155435
    },
    {
        "x": -4130469.361358232,
        "y": 2896351.3508613957,
        "z": -3889621.8591105537
    },
    {
        "x": -4130459.653127115,
        "y": 2896326.427110166,
        "z": -3889651.075625755
    },
    {
        "x": -4130454.746097315,
        "y": 2896312.1481351727,
        "z": -3889667.085808963
    },
    {
        "x": -4130438.648413533,
        "y": 2896295.1234368607,
        "z": -3889698.6025950382
    },
    {
        "x": -4130406.3667247174,
        "y": 2896269.579059276,
        "z": -3889751.1814646446
    },
    {
        "x": -4130380.665153025,
        "y": 2896243.4919846198,
        "z": -3889794.7848271434
    },
    {
        "x": -4130350.6645746655,
        "y": 2896233.0531032314,
        "z": -3889833.59891804
    },
    {
        "x": -4130313.3547596666,
        "y": 2896229.4539732332,
        "z": -3889874.8104849476
    },
    {
        "x": -4130280.475713839,
        "y": 2896223.4705034187,
        "z": -3889913.8601564257
    },
    {
        "x": -4130250.8929914734,
        "y": 2896217.2586377915,
        "z": -3889950.23878484
    },
    {
        "x": -4130247.454952308,
        "y": 2896210.438373141,
        "z": -3889958.676345645
    },
    {
        "x": -4130251.3910230068,
        "y": 2896199.1892860155,
        "z": -3889962.851278869
    },
    {
        "x": -4130264.21147237,
        "y": 2896179.17898423,
        "z": -3889964.722162547
    },
    {
        "x": -4130278.1511079515,
        "y": 2896150.278896323,
        "z": -3889972.2202774487
    },
    {
        "x": -4130290.0078189876,
        "y": 2896116.123713046,
        "z": -3889985.113922655
    },
    {
        "x": -4130296.32985568,
        "y": 2896087.606223302,
        "z": -3889998.9771753442
    },
    {
        "x": -4130308.0029669553,
        "y": 2896041.0364240548,
        "z": -3890021.162711144
    },
    {
        "x": -4130310.3504519076,
        "y": 2896004.721693241,
        "z": -3890045.613767786
    },
    {
        "x": -4130313.5911898166,
        "y": 2895960.0510454215,
        "z": -3890074.820752629
    },
    {
        "x": -4130319.2208124264,
        "y": 2895916.945646996,
        "z": -3890100.967641694
    },
    {
        "x": -4130322.0305786557,
        "y": 2895889.5287982468,
        "z": -3890118.5463933204
    },
    {
        "x": -4130324.2122931913,
        "y": 2895853.6152825514,
        "z": -3890143.1636700407
    },
    {
        "x": -4130323.940029688,
        "y": 2895827.2762474557,
        "z": -3890163.2230245867
    },
    {
        "x": -4130322.5869613704,
        "y": 2895805.3034565207,
        "z": -3890181.844234483
    },
    {
        "x": -4130320.2465283596,
        "y": 2895782.02679685,
        "z": -3890202.579822223
    },
    {
        "x": -4130313.315250443,
        "y": 2895756.2142744963,
        "z": -3890229.9644577354
    },
    {
        "x": -4130305.353215634,
        "y": 2895735.4521534303,
        "z": -3890253.499528326
    },
    {
        "x": -4130298.0309572276,
        "y": 2895726.856537849,
        "z": -3890267.3295285385
    },
    {
        "x": -4130295.522604649,
        "y": 2895728.1153681995,
        "z": -3890268.5999895027
    },
    {
        "x": -4130289.110382134,
        "y": 2895730.888726017,
        "z": -3890272.6545348084
    },
    {
        "x": -4130275.3698197827,
        "y": 2895741.2996942033,
        "z": -3890277.893700179
    },
    {
        "x": -4130250.8108436163,
        "y": 2895763.266553474,
        "z": -3890284.894019503
    },
    {
        "x": -4130233.325062017,
        "y": 2895781.513139067,
        "z": -3890289.9837837974
    },
    {
        "x": -4130206.9416348725,
        "y": 2895811.2476860075,
        "z": -3890298.18874633
    },
    {
        "x": -4130175.780086002,
        "y": 2895843.155194485,
        "z": -3890309.961980824
    },
    {
        "x": -4130134.6094147004,
        "y": 2895884.126407479,
        "z": -3890326.869685404
    },
    {
        "x": -4130092.7033699444,
        "y": 2895923.4473912762,
        "z": -3890346.0186137664
    },
    {
        "x": -4130053.357090442,
        "y": 2895959.286943558,
        "z": -3890363.570454215
    },
    {
        "x": -4130005.213682317,
        "y": 2896003.591500705,
        "z": -3890384.3858761196
    },
    {
        "x": -4129950.512575626,
        "y": 2896056.2835726785,
        "z": -3890405.0234604524
    },
    {
        "x": -4129904.552129884,
        "y": 2896105.032988806,
        "z": -3890418.553203597
    },
    {
        "x": -4129847.398752529,
        "y": 2896172.333826749,
        "z": -3890428.953214162
    },
    {
        "x": -4129807.639512054,
        "y": 2896226.402365734,
        "z": -3890431.6554187066
    },
    {
        "x": -4129770.1640198547,
        "y": 2896284.182743338,
        "z": -3890428.854372436
    },
    {
        "x": -4129736.186181204,
        "y": 2896345.0574883292,
        "z": -3890420.296130725
    },
    {
        "x": -4129699.02381569,
        "y": 2896417.820942145,
        "z": -3890405.0734028514
    },
    {
        "x": -4129650.10022805,
        "y": 2896519.5686702803,
        "z": -3890380.6207021405
    },
    {
        "x": -4129614.901556453,
        "y": 2896591.2958960435,
        "z": -3890364.0580830765
    },
    {
        "x": -4129594.596801298,
        "y": 2896629.9238896086,
        "z": -3890356.1724144183
    },
    {
        "x": -4129571.2246569833,
        "y": 2896672.2322960696,
        "z": -3890349.3060966455
    },
    {
        "x": -4129545.8333211015,
        "y": 2896719.1497513945,
        "z": -3890340.40087913
    },
    {
        "x": -4129517.3257705756,
        "y": 2896770.9997991635,
        "z": -3890331.205243247
    },
    {
        "x": -4129481.127515623,
        "y": 2896837.441714896,
        "z": -3890318.2233583136
    },
    {
        "x": -4129444.7284175917,
        "y": 2896899.2285369113,
        "z": -3890306.2347816424
    },
    {
        "x": -4129409.3098941403,
        "y": 2896959.8973833458,
        "z": -3890293.4186437656
    },
    {
        "x": -4129394.190498092,
        "y": 2896987.7568044495,
        "z": -3890287.069010821
    },
    {
        "x": -4129384.9302999317,
        "y": 2897009.9391555837,
        "z": -3890278.9472340187
    },
    {
        "x": -4129380.9025741206,
        "y": 2897034.5151175754,
        "z": -3890262.9699092503
    },
    {
        "x": -4129395.380126628,
        "y": 2897062.850016253,
        "z": -3890227.2323757173
    },
    {
        "x": -4129419.299310805,
        "y": 2897061.276312659,
        "z": -3890203.012824626
    },
    {
        "x": -4129456.8252164796,
        "y": 2897056.3369560763,
        "z": -3890166.445547454
    },
    {
        "x": -4129494.0920051397,
        "y": 2897059.3228078503,
        "z": -3890125.374867398
    },
    {
        "x": -4129533.2503057914,
        "y": 2897083.785943948,
        "z": -3890068.57109727
    },
    {
        "x": -4129567.132574767,
        "y": 2897129.037436901,
        "z": -3890005.1538674505
    },
    {
        "x": -4129589.5898529505,
        "y": 2897134.2528188485,
        "z": -3889977.603789211
    },
    {
        "x": -4129616.5234048055,
        "y": 2897129.188843633,
        "z": -3889951.1590686254
    },
    {
        "x": -4129643.3667616905,
        "y": 2897113.8436645414,
        "z": -3889931.7628938416
    },
    {
        "x": -4129669.3040294438,
        "y": 2897086.0321238614,
        "z": -3889921.9946198207
    },
    {
        "x": -4129703.822319816,
        "y": 2897054.4516091463,
        "z": -3889909.0768787833
    },
    {
        "x": -4129728.4315924137,
        "y": 2897035.171185982,
        "z": -3889895.5654060966
    },
    {
        "x": -4129735.2854577852,
        "y": 2897036.9881081325,
        "z": -3889887.175702072
    },
    {
        "x": -4129740.2001161454,
        "y": 2897051.121995583,
        "z": -3889872.223547175
    },
    {
        "x": -4129747.66565467,
        "y": 2897084.3611419164,
        "z": -3889839.5886546266
    }
]
let pointListPlane = [
    {
        "x": -4131308.382387428,
        "y": 2895872.101504785,
        "z": -3889162.520375158
    },
    {
        "x": -4131027.687853612,
        "y": 2896742.703867785,
        "z": -3888779.186959942
    },
    {
        "x": -4130590.60300973,
        "y": 2895922.812243236,
        "z": -3889812.7469981275
    },
    {
        "x": -4130001.0261121006,
        "y": 2896186.273694514,
        "z": -3890235.3923596283
    },
    {
        "x": -4130452.2182880356,
        "y": 2896905.2661027918,
        "z": -3889279.731102912
    }
]

pointListCar.forEach((e,i)=>{
    let date
    if (i>80){
        date = new Date(baseTime.getTime() + (i-81) * 5 * 1000)
        // @ts-ignore
        czmlCar[1].position.cartesian.push(date.toISOString(),e.x,e.y,e.z)
    }
    if (i === pointListCar.length - 1 && date){
        endTime = date.toISOString()
        // @ts-ignore
        czmlCar[0].clock.interval = baseTime.toISOString()+'/'+endTime
    }
})

pointListPlane.map(e=>{
    let latlng = Cesium.Cartographic.fromCartesian(<Cartesian3>e)
    return Cesium.Cartesian3.fromDegrees(Cesium.Math.toDegrees(latlng.longitude),Cesium.Math.toDegrees(latlng.latitude),100)
}).forEach((item,index)=>{
    let date = new Date(baseTime.getTime() + index * 10 * 1000)
    // @ts-ignore
    czmlPlane[1].position.cartesian.push(date.toISOString(),item.x,item.y,item.z)
    if (index === pointListPlane.length - 1 && date){
        endTime = date.toISOString()
        // @ts-ignore
        czmlPlane[0].clock.interval = baseTime.toISOString()+'/'+endTime
    }
})



export default {czmlCar,czmlPlane}
