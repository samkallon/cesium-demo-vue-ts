import{d as g,u as w,o as x,c as C,_ as v}from"./index.78dd451b.js";const y={class:"mm-container"},e=window.Cesium,M=g({__name:"ParticleWater",setup(P,{expose:p}){debugger;w();const t=window.viewer;e.Math.setRandomNumberSeed(3);const o=e.JulianDate.fromDate(new Date(2015,2,25,16)),l=e.JulianDate.addSeconds(o,120,new e.JulianDate),i={emissionRate:50,gravity:-50,minimumParticleLife:1.5,maximumParticleLife:1.5,minimumSpeed:30,maximumSpeed:50,startScale:1,endScale:5,particleSize:25},S=new e.Matrix4,f=new e.Cartesian3,_=new e.Quaternion;let s=new e.HeadingPitchRoll;const c=new e.TranslationRotationScale,r=new e.Cartesian3,m=()=>(s=e.HeadingPitchRoll.fromDegrees(0,0,0,s),c.translation=e.Cartesian3.fromElements(-4,0,1.4,f),c.rotation=e.Quaternion.fromHeadingPitchRoll(s,_),e.Matrix4.fromTranslationRotationScale(c,S)),h=(n,a)=>{const u=n.position;e.Cartesian3.normalize(u,r),e.Cartesian3.multiplyByScalar(r,i.gravity*a,r),n.velocity=e.Cartesian3.add(n.velocity,r,n.velocity)},d=()=>{!t||t.scene.primitives.removeAll()};return(async()=>{if(!t)return;d(),t.clock.startTime=o.clone(),t.clock.stopTime=l.clone(),t.clock.currentTime=o.clone(),t.clock.clockRange=e.ClockRange.LOOP_STOP,t.clock.multiplier=1,t.clock.shouldAnimate=!0,t.timeline.zoomTo(o,l);const n=t.scene.primitives.add(new e.ParticleSystem({image:"./smoke.png",startColor:e.Color.fromCssColorString("rgba(11,199,255,0.84)"),endColor:e.Color.WHITE.withAlpha(0),startScale:i.startScale,endScale:i.endScale,minimumParticleLife:i.minimumParticleLife,maximumParticleLife:i.maximumParticleLife,minimumSpeed:i.minimumSpeed,maximumSpeed:i.maximumSpeed,imageSize:new e.Cartesian2(i.particleSize,i.particleSize),emissionRate:i.emissionRate,lifetime:16,emitter:new e.ConeEmitter(e.Math.toRadians(5)),emitterModelMatrix:m(),updateCallback:h}));t.scene.preUpdate.addEventListener(function(u,k){n.modelMatrix=e.Transforms.eastNorthUpToFixedFrame(e.Cartesian3.fromDegrees(120,33,10)),n.emitterModelMatrix=m()});const a={longitude:119.99894565,latitude:32.99929378,height:66.9584,heading:57.007,pitch:-28.3078,roll:360,cartersian:{x:-2.6772178252257775e6,y:4637236089027228e-9,z:3.4539331816930654e6}};t.camera.setView({destination:new e.Cartesian3(a.cartersian.x,a.cartersian.y,a.cartersian.z),orientation:{heading:e.Math.toRadians(a.heading),pitch:e.Math.toRadians(a.pitch),roll:e.Math.toRadians(a.roll)}})})(),p({clear:d}),(n,a)=>(x(),C("div",y))}});const z=v(M,[["__scopeId","data-v-71d0f7b1"]]);export{z as default};
