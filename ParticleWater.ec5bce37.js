import{d as g,u as x,o as C,c as y,_ as w}from"./index.2ad12903.js";const v={class:"mm-container"},e=window.Cesium,M=g({__name:"ParticleWater",setup(P,{expose:p}){const t=x().$state.cesiumViewer;e.Math.setRandomNumberSeed(3);const o=e.JulianDate.fromDate(new Date(2015,2,25,16)),l=e.JulianDate.addSeconds(o,120,new e.JulianDate),a={emissionRate:50,gravity:-50,minimumParticleLife:1.5,maximumParticleLife:1.5,minimumSpeed:30,maximumSpeed:50,startScale:1,endScale:5,particleSize:25},S=new e.Matrix4,f=new e.Cartesian3,_=new e.Quaternion;let s=new e.HeadingPitchRoll;const c=new e.TranslationRotationScale,r=new e.Cartesian3,m=()=>(s=e.HeadingPitchRoll.fromDegrees(0,0,0,s),c.translation=e.Cartesian3.fromElements(-4,0,1.4,f),c.rotation=e.Quaternion.fromHeadingPitchRoll(s,_),e.Matrix4.fromTranslationRotationScale(c,S)),h=(n,i)=>{const u=n.position;e.Cartesian3.normalize(u,r),e.Cartesian3.multiplyByScalar(r,a.gravity*i,r),n.velocity=e.Cartesian3.add(n.velocity,r,n.velocity)},d=()=>{!t||t.scene.primitives.removeAll()};return(async()=>{if(!t)return;d(),t.clock.startTime=o.clone(),t.clock.stopTime=l.clone(),t.clock.currentTime=o.clone(),t.clock.clockRange=e.ClockRange.LOOP_STOP,t.clock.multiplier=1,t.clock.shouldAnimate=!0,t.timeline.zoomTo(o,l);const n=t.scene.primitives.add(new e.ParticleSystem({image:"smoke.png",startColor:e.Color.fromCssColorString("rgba(11,199,255,0.84)"),endColor:e.Color.WHITE.withAlpha(0),startScale:a.startScale,endScale:a.endScale,minimumParticleLife:a.minimumParticleLife,maximumParticleLife:a.maximumParticleLife,minimumSpeed:a.minimumSpeed,maximumSpeed:a.maximumSpeed,imageSize:new e.Cartesian2(a.particleSize,a.particleSize),emissionRate:a.emissionRate,lifetime:16,emitter:new e.ConeEmitter(e.Math.toRadians(5)),emitterModelMatrix:m(),updateCallback:h}));t.scene.preUpdate.addEventListener(function(u,T){n.modelMatrix=e.Transforms.eastNorthUpToFixedFrame(e.Cartesian3.fromDegrees(120,33,10)),n.emitterModelMatrix=m()});const i={longitude:119.99894565,latitude:32.99929378,height:66.9584,heading:57.007,pitch:-28.3078,roll:360,cartersian:{x:-2.6772178252257775e6,y:4637236089027228e-9,z:3.4539331816930654e6}};t.camera.setView({destination:new e.Cartesian3(i.cartersian.x,i.cartersian.y,i.cartersian.z),orientation:{heading:e.Math.toRadians(i.heading),pitch:e.Math.toRadians(i.pitch),roll:e.Math.toRadians(i.roll)}})})(),p({clear:d}),(n,i)=>(C(),y("div",v))}});const L=w(M,[["__scopeId","data-v-31a5f5e9"]]);export{L as default};
