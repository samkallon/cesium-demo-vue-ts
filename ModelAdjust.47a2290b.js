import{d as v,u as w,o as g,c as A,b as _,m as R,p as T,f as b,e as I,_ as B}from"./index.2ad12903.js";const F=l=>(T("data-v-682f46f0"),l=l(),b(),l),k={class:"mm-container"},D=F(()=>I("br",null,null,-1)),e=window.Cesium,V=v({__name:"ModelAdjust",setup(l,{expose:y}){const t=w().$state.cesiumViewer;let d,i,a,r;const M=()=>{!t||!d||t.scene.primitives.removeAll()};return(()=>{if(M(),R.info("\u6570\u636E\u52A0\u8F7D\u4E2D!"),!t)return;const p=e.Cartesian3.fromDegrees(120.675895,31.319111,25),c=e.Transforms.eastNorthUpToFixedFrame(p);e.clone(c),d=t.scene.primitives.add(e.Model.fromGltf({id:"tesla_cybertruck",url:"/model/tesla_cybertruck/scene.gltf",scale:.05,modelMatrix:c})),i=t.scene.primitives.add(new e.DebugModelMatrixPrimitive({modelMatrix:c,length:30,width:5}));const n={longitude:120.67670449,latitude:31.31843263,height:91.1473,heading:314.0836,pitch:-33.2043,roll:1e-4,cartersian:{x:-2782514421639133e-9,y:4690607389665246e-9,z:3296147371471408e-9}};t.camera.setView({destination:new e.Cartesian3(n.cartersian.x,n.cartersian.y,n.cartersian.z),orientation:{heading:e.Math.toRadians(n.heading),pitch:e.Math.toRadians(n.pitch),roll:e.Math.toRadians(n.roll)}});const u=new e.ScreenSpaceEventHandler(t.canvas);u.setInputAction(s=>{const o=t.scene.pick(s.position);!o||(a=o.primitive)},e.ScreenSpaceEventType.LEFT_CLICK),u.setInputAction(s=>{if(a){t.scene.screenSpaceCameraController.enableRotate=!1;const o=t.scene.globe.pick(t.camera.getPickRay(s.endPosition),t.scene),m=e.Matrix4.fromRotation(e.Matrix3.fromRotationX(e.Math.toRadians(-50))),h=e.Matrix4.fromRotation(e.Matrix3.fromRotationY(e.Math.toRadians(-28))),S=e.Matrix4.fromRotation(e.Matrix3.fromRotationZ(e.Math.toRadians(200))),C=e.Matrix4.multiply(m,h,new e.Matrix4),E=e.Matrix4.multiply(C,S,new e.Matrix4),x=e.Matrix4.multiply(e.Matrix4.fromTranslation(o),E,new e.Matrix4);a.modelMatrix=x,i.modelMatrix=x;let f=r||e.Matrix4.fromTranslation(new e.Cartesian3(0,0,0),new e.Matrix4);e.Matrix4.multiply(a.modelMatrix,f,a.modelMatrix),e.Matrix4.multiply(i.modelMatrix,f,i.modelMatrix)}},e.ScreenSpaceEventType.MOUSE_MOVE),u.setInputAction(s=>{a=null,t.scene.screenSpaceCameraController.enableRotate=!0,t.scene.screenSpaceCameraController.enableZoom=!0},e.ScreenSpaceEventType.RIGHT_CLICK),u.setInputAction(s=>{if(a){t.scene.screenSpaceCameraController.enableZoom=!1;const o=e.Matrix4.fromTranslation(new e.Cartesian3(0,0,s/100),new e.Matrix4);if(!r)r=o;else{const m=e.Matrix4.inverse(r,new e.Matrix4);e.Matrix4.multiply(a.modelMatrix,m,a.modelMatrix),e.Matrix4.multiply(i.modelMatrix,m,i.modelMatrix),e.Matrix4.multiply(r,o,r)}e.Matrix4.multiply(a.modelMatrix,r,a.modelMatrix),e.Matrix4.multiply(i.modelMatrix,r,i.modelMatrix)}},e.ScreenSpaceEventType.WHEEL)})(),y({clear:M}),(p,c)=>(g(),A("div",k,[_(" \u5DE6\u952E\u70B9\u51FB\u6A21\u578B\u5F00\u59CB\u79FB\u52A8,\u53F3\u952E\u505C\u6B62\u79FB\u52A8"),D,_(" \u6EDA\u8F6E\u8C03\u6574\u9AD8\u5EA6 ")]))}});const P=B(V,[["__scopeId","data-v-682f46f0"]]);export{P as default};
